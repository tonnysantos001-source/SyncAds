import{s as x,r as S,u as re,b as te,j as e,M as N,B as ae,a6 as se,d as f,e as v,f as b,g as A,h as w,S as oe,n as R}from"./index-CMkZeKCG.js";import{S as ne,a as ie,b as ce,c as le,d as Y}from"./select-DZp9Zf8k.js";import{S as U}from"./skeleton-BPjJjevE.js";import{t as de,c as me}from"./constructFrom-rJN6zrQ_.js";import{M as ge}from"./mouse-pointer-BpBou_gB.js";import{T as H}from"./target-NcEHPv7u.js";import{D as W}from"./dollar-sign-miNPlb_r.js";import{P as xe}from"./percent-C9g2oAw2.js";import{C as he}from"./chart-column-D1NawfeB.js";import{R as D,C as E,X as F,Y as V,T as I,q as _,B as L}from"./generateCategoricalChart-0H90jDk8.js";import{B as Z}from"./BarChart-aIeTxCis.js";import{A as J}from"./activity-ocvGchu9.js";import{a as ue,L as pe}from"./LineChart-CbEe2Zyz.js";import{Z as Q}from"./zap-B0kdk6eu.js";import{T as ye}from"./trending-up-BQOhQ7jI.js";import{A as je}from"./arrow-up-right-Ce0eDl4a.js";import{A as fe}from"./arrow-down-right-DYc7ml7Q.js";import"./index-Bm7H5OrE.js";const z={async track(n){try{const{data:r,error:t}=await x.from("UTMTracking").insert({...n,converted:!1}).select().single();if(t)throw t;return r}catch(r){throw console.error("Error tracking UTM:",r),r}},async getById(n){try{const{data:r,error:t}=await x.from("UTMTracking").select("*").eq("id",n).single();if(t)throw t;return r}catch(r){throw console.error("Error getting UTM:",r),r}},async getBySession(n){try{const{data:r,error:t}=await x.from("UTMTracking").select("*").eq("sessionId",n).order("createdAt",{ascending:!1}).limit(1).single();if(t){if(t.code==="PGRST116")return null;throw t}return r}catch(r){throw console.error("Error getting UTM by session:",r),r}},async getByUser(n,r){try{let t=x.from("UTMTracking").select("*").eq("userId",n).order("createdAt",{ascending:!1});r!=null&&r.source&&(t=t.eq("utmSource",r.source)),r!=null&&r.medium&&(t=t.eq("utmMedium",r.medium)),r!=null&&r.campaign&&(t=t.eq("utmCampaign",r.campaign)),(r==null?void 0:r.converted)!==void 0&&(t=t.eq("converted",r.converted)),r!=null&&r.dateFrom&&(t=t.gte("createdAt",r.dateFrom)),r!=null&&r.dateTo&&(t=t.lte("createdAt",r.dateTo)),r!=null&&r.limit&&(t=t.limit(r.limit)),r!=null&&r.offset&&(t=t.range(r.offset,r.offset+(r.limit||50)-1));const{data:s,error:c}=await t;if(c)throw c;return s}catch(t){throw console.error("Error listing UTMs:",t),t}},async markAsConverted(n,r,t){try{const{data:s,error:c}=await x.from("UTMTracking").update({converted:!0,convertedAt:new Date().toISOString(),orderId:r,orderValue:t,updatedAt:new Date().toISOString()}).eq("id",n).select().single();if(c)throw c;return s}catch(s){throw console.error("Error marking UTM as converted:",s),s}},async markSessionConverted(n,r,t){try{const s=await z.getBySession(n);return s?await z.markAsConverted(s.id,r,t):null}catch(s){throw console.error("Error marking session as converted:",s),s}},async update(n,r){try{const{data:t,error:s}=await x.from("UTMTracking").update({...r,updatedAt:new Date().toISOString()}).eq("id",n).select().single();if(s)throw s;return t}catch(t){throw console.error("Error updating UTM:",t),t}},async delete(n){try{const{error:r}=await x.from("UTMTracking").delete().eq("id",n);if(r)throw r}catch(r){throw console.error("Error deleting UTM:",r),r}},async getAnalytics(n,r){try{let t=x.from("UTMAnalytics").select("*").eq("userId",n);r&&(t=t.gte("createdAt",r.from).lte("createdAt",r.to));const{data:s,error:c}=await t;if(c)throw c;return s}catch(t){throw console.error("Error getting analytics:",t),t}},async getStats(n,r){try{let t=x.from("UTMTracking").select("*").eq("userId",n);r&&(t=t.gte("createdAt",r.from).lte("createdAt",r.to));const{data:s,error:c}=await t;if(c)throw c;const g=s,o=g.length,h=g.filter(i=>i.converted).length,y=g.filter(i=>i.converted&&i.orderValue).reduce((i,l)=>i+(l.orderValue||0),0),T=o>0?h/o*100:0,p=h>0?y/h:0,k={};[...new Set(g.map(i=>i.utmSource).filter(Boolean))].forEach(i=>{const l=g.filter(m=>m.utmSource===i),d=l.filter(m=>m.converted),j=d.reduce((m,a)=>m+(a.orderValue||0),0);k[i]={utmSource:i,totalVisits:l.length,totalConversions:d.length,conversionRate:d.length/l.length*100,totalRevenue:j,averageOrderValue:d.length>0?j/d.length:0}});const M={};[...new Set(g.map(i=>i.utmMedium).filter(Boolean))].forEach(i=>{const l=g.filter(m=>m.utmMedium===i),d=l.filter(m=>m.converted),j=d.reduce((m,a)=>m+(a.orderValue||0),0);M[i]={utmMedium:i,totalVisits:l.length,totalConversions:d.length,conversionRate:d.length/l.length*100,totalRevenue:j,averageOrderValue:d.length>0?j/d.length:0}});const C={};[...new Set(g.map(i=>i.utmCampaign).filter(Boolean))].forEach(i=>{const l=g.filter(m=>m.utmCampaign===i),d=l.filter(m=>m.converted),j=d.reduce((m,a)=>m+(a.orderValue||0),0);C[i]={utmCampaign:i,totalVisits:l.length,totalConversions:d.length,conversionRate:d.length/l.length*100,totalRevenue:j,averageOrderValue:d.length>0?j/d.length:0}});const G=Object.entries(k).map(([i,l])=>({name:i,conversions:l.totalConversions,revenue:l.totalRevenue})).sort((i,l)=>l.revenue-i.revenue).slice(0,10),X=Object.entries(M).map(([i,l])=>({name:i,conversions:l.totalConversions,revenue:l.totalRevenue})).sort((i,l)=>l.revenue-i.revenue).slice(0,10),q=Object.entries(C).map(([i,l])=>({name:i,conversions:l.totalConversions,revenue:l.totalRevenue})).sort((i,l)=>l.revenue-i.revenue).slice(0,10);return{totalSessions:o,totalConversions:h,totalRevenue:y,conversionRate:T,averageOrderValue:p,bySource:k,byMedium:M,byCampaign:C,topPerformers:{sources:G,mediums:X,campaigns:q}}}catch(t){throw console.error("Error getting UTM stats:",t),t}},async getConversionRate(n,r){try{let t=x.from("UTMTracking").select("converted").eq("userId",n);r&&(t=t.gte("createdAt",r.from).lte("createdAt",r.to));const{data:s,error:c}=await t;if(c)throw c;const g=s,o=g.length,h=g.filter(y=>y.converted).length;return o>0?h/o*100:0}catch(t){throw console.error("Error getting conversion rate:",t),t}},async getBySource(n,r){try{const{data:t,error:s}=await x.from("UTMTracking").select("*").eq("userId",n).eq("utmSource",r).order("createdAt",{ascending:!1});if(s)throw s;return t}catch(t){throw console.error("Error getting UTMs by source:",t),t}},async getByMedium(n,r){try{const{data:t,error:s}=await x.from("UTMTracking").select("*").eq("userId",n).eq("utmMedium",r).order("createdAt",{ascending:!1});if(s)throw s;return t}catch(t){throw console.error("Error getting UTMs by medium:",t),t}},async getByCampaign(n,r){try{const{data:t,error:s}=await x.from("UTMTracking").select("*").eq("userId",n).eq("utmCampaign",r).order("createdAt",{ascending:!1});if(s)throw s;return t}catch(t){throw console.error("Error getting UTMs by campaign:",t),t}},async getUniqueSources(n){try{const{data:r,error:t}=await x.from("UTMTracking").select("utmSource").eq("userId",n).not("utmSource","is",null);if(t)throw t;return[...new Set(r.map(c=>c.utmSource).filter(Boolean))]}catch(r){throw console.error("Error getting unique sources:",r),r}},async getUniqueMediums(n){try{const{data:r,error:t}=await x.from("UTMTracking").select("utmMedium").eq("userId",n).not("utmMedium","is",null);if(t)throw t;return[...new Set(r.map(c=>c.utmMedium).filter(Boolean))]}catch(r){throw console.error("Error getting unique mediums:",r),r}},async getUniqueCampaigns(n){try{const{data:r,error:t}=await x.from("UTMTracking").select("utmCampaign").eq("userId",n).not("utmCampaign","is",null);if(t)throw t;return[...new Set(r.map(c=>c.utmCampaign).filter(Boolean))]}catch(r){throw console.error("Error getting unique campaigns:",r),r}},async getCampaignROI(n,r,t){try{const s=await z.getByCampaign(n,r),c=s.filter(y=>y.converted),g=c.reduce((y,T)=>y+(T.orderValue||0),0),o=t>0?(g-t)/t*100:0,h=s.length>0?c.length/s.length*100:0;return{campaign:r,adSpend:t,revenue:g,roi:o,conversions:c.length,conversionRate:h}}catch(s){throw console.error("Error calculating campaign ROI:",s),s}}};function ve(n,r){const t=de(n);return isNaN(r)?me(n,NaN):(r&&t.setDate(t.getDate()+r),t)}function be(n,r){return ve(n,-r)}const O=({title:n,value:r,change:t,icon:s,color:c,delay:g=0,subtitle:o})=>{const h=t>=0;return e.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:g},children:e.jsxs(f,{className:"relative overflow-hidden border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 ${c} opacity-10 rounded-full blur-3xl`}),e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(b,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:n}),e.jsx("div",{className:`p-2 rounded-lg ${c} bg-opacity-10`,children:e.jsx(s,{className:`h-4 w-4 ${c.replace("bg-","text-")}`})})]}),e.jsxs(w,{children:[e.jsx("div",{className:"text-3xl font-bold bg-gradient-to-br from-gray-900 to-gray-600 dark:from-white dark:to-gray-300 bg-clip-text text-transparent",children:r}),e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[h?e.jsx(je,{className:"h-4 w-4 text-green-500"}):e.jsx(fe,{className:"h-4 w-4 text-red-500"}),e.jsxs("span",{className:`text-sm font-semibold ${h?"text-green-500":"text-red-500"}`,children:[Math.abs(t).toFixed(1),"%"]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:o||"vs período anterior"})]})]})]})})},P=({active:n,payload:r,label:t})=>n&&r&&r.length?e.jsxs("div",{className:"bg-gray-900/95 dark:bg-gray-800/95 backdrop-blur-xl border border-gray-700 rounded-lg p-4 shadow-xl",children:[e.jsx("p",{className:"text-white font-semibold mb-2",children:t}),r.map((s,c)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),e.jsxs("span",{className:"text-gray-300",children:[s.name,":"]}),e.jsx("span",{className:"text-white font-semibold",children:s.value})]},c))]}):null,Oe=()=>{var l,d,j,m;const[n,r]=S.useState(!0),[t,s]=S.useState(!1),[c,g]=S.useState("30days"),[o,h]=S.useState(null),[y,T]=S.useState(""),p=re(a=>a.user),{toast:k}=te();S.useEffect(()=>{p!=null&&p.id&&K()},[p==null?void 0:p.id,c]);const K=async()=>{try{if(!(p!=null&&p.id))return;r(!0);const u={from:be(new Date,c==="7days"?7:c==="30days"?30:90).toISOString(),to:new Date().toISOString()},ee=await z.getStats(p.id,u);h(ee)}catch(a){console.error("Erro ao carregar dados UTM:",a),k({title:"Erro ao carregar dados",description:a.message||"Não foi possível carregar os dados UTM",variant:"destructive"})}finally{r(!1)}},M=async()=>{s(!0),await K(),s(!1),k({title:"Dados atualizados",description:"Os dados UTM foram atualizados com sucesso"})},B=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a),C=a=>`${a.toFixed(1)}%`,$=((l=o==null?void 0:o.bySource)==null?void 0:l.map(a=>({name:a.utmSource||"Direto",visitas:a.totalVisits,conversões:a.totalConversions,receita:a.totalRevenue,taxa:a.conversionRate})))||[],G=((d=o==null?void 0:o.byMedium)==null?void 0:d.map(a=>({name:a.utmMedium||"Não definido",visitas:a.totalVisits,conversões:a.totalConversions,receita:a.totalRevenue,taxa:a.conversionRate})))||[],X=((j=o==null?void 0:o.byCampaign)==null?void 0:j.slice(0,10).map(a=>({name:a.utmCampaign||"Sem campanha",visitas:a.totalVisits,conversões:a.totalConversions,receita:a.totalRevenue,taxa:a.conversionRate})))||[],q=["#3B82F6","#8B5CF6","#EC4899","#10B981","#F59E0B","#EF4444","#06B6D4","#6366F1"],i=((m=o==null?void 0:o.bySource)==null?void 0:m.filter(a=>(a.utmSource||"direto").toLowerCase().includes(y.toLowerCase())))||[];return n?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-850 to-purple-900/40 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(U,{className:"h-8 w-64 mb-2"}),e.jsx(U,{className:"h-4 w-96"})]}),e.jsx(U,{className:"h-10 w-40"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(a=>e.jsx(U,{className:"h-32"},a))}),e.jsx(U,{className:"h-96"})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-850 to-purple-900/40 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs(N.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Rastreamento UTM"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Analise o desempenho de suas campanhas de marketing"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ne,{value:c,onValueChange:g,children:[e.jsx(ie,{className:"w-[180px] bg-white/10 dark:bg-gray-900/50 backdrop-blur-xl border-gray-700",children:e.jsx(ce,{})}),e.jsxs(le,{children:[e.jsx(Y,{value:"7days",children:"Últimos 7 dias"}),e.jsx(Y,{value:"30days",children:"Últimos 30 dias"}),e.jsx(Y,{value:"90days",children:"Últimos 90 dias"})]})]}),e.jsxs(ae,{onClick:M,disabled:t,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:[e.jsx(se,{className:`h-4 w-4 mr-2 ${t?"animate-spin":""}`}),"Atualizar"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(O,{title:"Total de Sessões",value:(o==null?void 0:o.totalSessions.toLocaleString("pt-BR"))||"0",change:12.5,icon:ge,color:"bg-blue-500",delay:.1,subtitle:"visitantes únicos"}),e.jsx(O,{title:"Conversões",value:(o==null?void 0:o.totalConversions.toLocaleString("pt-BR"))||"0",change:(o==null?void 0:o.conversionRate)||0,icon:H,color:"bg-green-500",delay:.2,subtitle:"pedidos confirmados"}),e.jsx(O,{title:"Receita Total",value:B((o==null?void 0:o.totalRevenue)||0),change:18.3,icon:W,color:"bg-purple-500",delay:.3,subtitle:"faturamento"}),e.jsx(O,{title:"Taxa de Conversão",value:C((o==null?void 0:o.conversionRate)||0),change:(o==null?void 0:o.conversionRate)||0,icon:xe,color:"bg-pink-500",delay:.4,subtitle:"sessões → vendas"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(N.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.5},children:e.jsxs(f,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg",children:[e.jsxs(v,{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5 text-blue-500"}),"Performance por Fonte"]}),e.jsx(A,{children:"Visitas e conversões por origem do tráfego"})]}),e.jsx(w,{children:e.jsx(D,{width:"100%",height:300,children:e.jsxs(Z,{data:$,children:[e.jsx(E,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(F,{dataKey:"name",stroke:"#9CA3AF",fontSize:12,tickLine:!1}),e.jsx(V,{stroke:"#9CA3AF",fontSize:12,tickLine:!1}),e.jsx(I,{content:e.jsx(P,{})}),e.jsx(_,{}),e.jsx(L,{dataKey:"visitas",name:"Visitas",fill:"#3B82F6",radius:[8,8,0,0]}),e.jsx(L,{dataKey:"conversões",name:"Conversões",fill:"#10B981",radius:[8,8,0,0]})]})})})]})}),e.jsx(N.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.6},children:e.jsxs(f,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg",children:[e.jsxs(v,{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-5 w-5 text-green-500"}),"Receita por Fonte"]}),e.jsx(A,{children:"Faturamento gerado por origem"})]}),e.jsx(w,{children:e.jsx(D,{width:"100%",height:300,children:e.jsxs(Z,{data:$,children:[e.jsx(E,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(F,{dataKey:"name",stroke:"#9CA3AF",fontSize:12,tickLine:!1}),e.jsx(V,{stroke:"#9CA3AF",fontSize:12,tickLine:!1}),e.jsx(I,{content:e.jsx(P,{})}),e.jsx(L,{dataKey:"receita",name:"Receita (R$)",fill:"url(#colorGradient)",radius:[8,8,0,0]}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#8B5CF6"}),e.jsx("stop",{offset:"100%",stopColor:"#EC4899"})]})})]})})})]})}),e.jsx(N.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.7},children:e.jsxs(f,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg",children:[e.jsxs(v,{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5 text-purple-500"}),"Taxa de Conversão por Meio"]}),e.jsx(A,{children:"Performance de conversão por canal"})]}),e.jsx(w,{children:e.jsx(D,{width:"100%",height:300,children:e.jsxs(ue,{data:G,children:[e.jsx(E,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(F,{dataKey:"name",stroke:"#9CA3AF",fontSize:12,tickLine:!1}),e.jsx(V,{stroke:"#9CA3AF",fontSize:12,tickLine:!1}),e.jsx(I,{content:e.jsx(P,{})}),e.jsx(_,{}),e.jsx(pe,{type:"monotone",dataKey:"taxa",name:"Taxa (%)",stroke:"#8B5CF6",strokeWidth:3,dot:{fill:"#8B5CF6",r:5},activeDot:{r:7}})]})})})]})}),e.jsx(N.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.8},children:e.jsxs(f,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg",children:[e.jsxs(v,{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5 text-yellow-500"}),"Top 10 Campanhas"]}),e.jsx(A,{children:"Campanhas com melhor desempenho"})]}),e.jsx(w,{children:e.jsx(D,{width:"100%",height:300,children:e.jsxs(Z,{data:X,layout:"vertical",children:[e.jsx(E,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(F,{type:"number",stroke:"#9CA3AF",fontSize:12}),e.jsx(V,{type:"category",dataKey:"name",stroke:"#9CA3AF",fontSize:10,width:100}),e.jsx(I,{content:e.jsx(P,{})}),e.jsx(L,{dataKey:"conversões",name:"Conversões",fill:"#10B981",radius:[0,8,8,0]})]})})})]})})]}),e.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.9},children:e.jsxs(f,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg",children:[e.jsx(v,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5 text-pink-500"}),"Detalhamento por Fonte"]}),e.jsx(A,{children:"Análise completa de performance"})]}),e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar fonte...",value:y,onChange:a=>T(a.target.value),className:"w-full pl-10 pr-4 py-2 bg-white/50 dark:bg-gray-800/50 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]})}),e.jsx(w,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Fonte"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Visitas"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Conversões"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Taxa"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Receita"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Ticket Médio"})]})}),e.jsx("tbody",{children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-8 text-gray-500",children:"Nenhuma fonte encontrada"})}):i.map((a,u)=>e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:q[u%q.length]}}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:a.utmSource||"Direto"})]})}),e.jsx("td",{className:"text-right py-3 px-4 text-gray-700 dark:text-gray-300",children:a.totalVisits.toLocaleString("pt-BR")}),e.jsx("td",{className:"text-right py-3 px-4",children:e.jsx(R,{variant:"secondary",className:"bg-green-500/10 text-green-600 dark:text-green-400",children:a.totalConversions})}),e.jsx("td",{className:"text-right py-3 px-4",children:e.jsx(R,{variant:"secondary",className:"bg-purple-500/10 text-purple-600 dark:text-purple-400",children:C(a.conversionRate)})}),e.jsx("td",{className:"text-right py-3 px-4 font-semibold text-gray-900 dark:text-gray-100",children:B(a.totalRevenue)}),e.jsx("td",{className:"text-right py-3 px-4 text-gray-700 dark:text-gray-300",children:B(a.averageOrderValue)})]},u))})]})})})]})}),(o==null?void 0:o.topPerformers)&&e.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:1},className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(f,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg",children:[e.jsx(v,{children:e.jsxs(b,{className:"text-lg flex items-center gap-2",children:[e.jsx(ye,{className:"h-5 w-5 text-blue-500"}),"Top Fontes"]})}),e.jsx(w,{children:e.jsx("div",{className:"space-y-3",children:o.topPerformers.sources.map((a,u)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gradient-to-r from-blue-500/10 to-purple-500/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-semibold text-lg text-blue-600 dark:text-blue-400",children:["#",u+1]}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:a.utmSource||"Direto"})]}),e.jsxs(R,{className:"bg-blue-500 text-white",children:[a.totalConversions," vendas"]})]},u))})})]}),e.jsxs(f,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg",children:[e.jsx(v,{children:e.jsxs(b,{className:"text-lg flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5 text-purple-500"}),"Top Meios"]})}),e.jsx(w,{children:e.jsx("div",{className:"space-y-3",children:o.topPerformers.mediums.map((a,u)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gradient-to-r from-purple-500/10 to-pink-500/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-semibold text-lg text-purple-600 dark:text-purple-400",children:["#",u+1]}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:a.utmMedium||"Não definido"})]}),e.jsxs(R,{className:"bg-purple-500 text-white",children:[a.totalConversions," vendas"]})]},u))})})]}),e.jsxs(f,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg",children:[e.jsx(v,{children:e.jsxs(b,{className:"text-lg flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5 text-pink-500"}),"Top Campanhas"]})}),e.jsx(w,{children:e.jsx("div",{className:"space-y-3",children:o.topPerformers.campaigns.map((a,u)=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg bg-
gradient-to-r from-pink-500/10 to-red-500/10`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-semibold text-lg text-pink-600 dark:text-pink-400",children:["#",u+1]}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:a.utmCampaign||"Sem campanha"})]}),e.jsxs(R,{className:"bg-pink-500 text-white",children:[a.totalConversions," vendas"]})]},u))})})]})]})]})})};export{Oe as default};

import{a as $,r as l,s as a,j as e,d as m,e as u,f as g,h as x,g as M}from"./index-Dl-TXdSt.js";import{S as p}from"./SuperAdminLayout-a6YYQfAo.js";import{U as c}from"./users-D97vFHma.js";import{D as h}from"./dollar-sign-BbDR5lTb.js";import{C as E}from"./chart-column-DMiPeEfC.js";import{C as T}from"./credit-card-DNIsnHCO.js";import{M as D}from"./message-square-jp5x3UUV.js";import{A as q}from"./arrow-right-C0ISzWeQ.js";import"./Logo-DG-5nNgp.js";import"./shield-Df-6d3uG.js";import"./x-D1reU6LV.js";import"./bot-D4nTsWDn.js";function Q(){const f=$(),[s,v]=l.useState({totalClients:0,activeClients:0,totalUsers:0,totalRevenue:0,monthlyRevenue:0,totalAiConnections:0,totalMessages:0,totalTokens:0,gatewaysConfigured:0}),[b,j]=l.useState(!0);l.useEffect(()=>{C()},[]);const C=async()=>{try{const{count:t}=await a.from("User").select("*",{count:"exact",head:!0}),{count:o}=await a.from("User").select("*",{count:"exact",head:!0}).eq("isActive",!0),{count:r}=await a.from("GlobalAiConnection").select("*",{count:"exact",head:!0}),{count:N}=await a.from("ChatMessage").select("*",{count:"exact",head:!0}),{data:R}=await a.from("AiUsage").select("totalTokens"),k=(R||[]).reduce((n,i)=>n+(i.totalTokens||0),0),A={FREE:0,STARTER:49.9,PRO:199.9,ENTERPRISE:999.9},{data:U}=await a.from("User").select("plan").eq("isActive",!0),d=(U||[]).reduce((n,i)=>n+(A[i.plan]||0),0),{count:S}=await a.from("Gateway").select("*",{count:"exact",head:!0}).eq("isActive",!0);v({totalClients:t||0,activeClients:o||0,totalUsers:t||0,totalRevenue:d*3,monthlyRevenue:d,totalAiConnections:r||0,totalMessages:N||0,totalTokens:k,gatewaysConfigured:S||0})}catch(t){console.error("Error loading stats:",t)}finally{j(!1)}},y=[{title:"Usuários",description:"Gerenciar todos os usuários",icon:c,color:"from-blue-500 to-cyan-500",stats:`${s.totalUsers} usuários`,route:"/super-admin/clients"},{title:"Faturamento",description:"Receita e pagamentos",icon:h,color:"from-green-500 to-emerald-500",stats:`R$ ${s.monthlyRevenue.toLocaleString("pt-BR")} MRR`,route:"/super-admin/billing"},{title:"Uso de IA",description:"Mensagens e tokens processados",icon:E,color:"from-purple-500 to-pink-500",stats:`${s.totalMessages} mensagens`,route:"/super-admin/usage"},{title:"Gateways",description:"Meios de pagamento",icon:T,color:"from-orange-500 to-red-500",stats:`${s.gatewaysConfigured} configurados`,route:"/super-admin/gateways"}],w=[{title:"Usuários Ativos",value:s.activeClients,description:`${s.totalUsers} total`,icon:c,color:"text-blue-600",bgColor:"bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20",change:"+12%"},{title:"MRR",value:`R$ ${s.monthlyRevenue.toLocaleString("pt-BR")}`,description:"Receita mensal",icon:h,color:"text-green-600",bgColor:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20",change:"+8%"},{title:"Usuários",value:s.totalUsers,description:"Total no sistema",icon:c,color:"text-purple-600",bgColor:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20",change:"+23%"},{title:"Mensagens IA",value:s.totalMessages,description:"Chat processado",icon:D,color:"text-amber-600",bgColor:"bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20",change:"+45%"}];return b?e.jsx(p,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-76px)]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600"})})}):e.jsx(p,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Visão geral da plataforma"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:w.map((t,o)=>{const r=t.icon;return e.jsxs(m,{className:"overflow-hidden",children:[e.jsx("div",{className:`h-2 ${t.bgColor}`}),e.jsxs(u,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(g,{className:"text-sm font-medium",children:t.title}),e.jsx("div",{className:`p-2 rounded-lg ${t.bgColor}`,children:e.jsx(r,{className:`h-5 w-5 ${t.color}`})})]}),e.jsxs(x,{children:[e.jsx("div",{className:"text-3xl font-bold",children:t.value}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:t.description}),e.jsx("span",{className:"text-xs font-medium text-green-600",children:t.change})]})]})]},o)})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Acesso Rápido"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:y.map(t=>{const o=t.icon;return e.jsxs(m,{className:"group cursor-pointer hover:shadow-xl transition-all duration-300 overflow-hidden relative",onClick:()=>f(t.route),children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${t.color} opacity-0 group-hover:opacity-10 transition-opacity`}),e.jsxs(u,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${t.color}`,children:e.jsx(o,{className:"h-6 w-6 text-white"})}),e.jsx(q,{className:"h-5 w-5 text-gray-400 group-hover:text-blue-600 group-hover:translate-x-1 transition-all"})]}),e.jsx(g,{className:"mt-4",children:t.title}),e.jsx(M,{children:t.description})]}),e.jsx(x,{children:e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t.stats})})]},t.route)})})]})]})})}export{Q as default};

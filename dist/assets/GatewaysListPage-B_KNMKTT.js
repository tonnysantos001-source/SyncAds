import{e as A,j as e,g as m,l as u,o as f,r as i,u as b,M as j,I as w,s as N}from"./index-Dh38X9aK.js";import{g as v}from"./gatewaysList-BfxCdpsq.js";const G=({id:r,name:o,slug:l,logo:d,type:a,status:g,environment:s,isVerified:t,isActive:c,onClick:n})=>{const x=A(),p=()=>{n?n():x(`/checkout/gateways/${l}`)};return e.jsx(m,{className:"relative cursor-pointer transition-all hover:shadow-lg hover:border-pink-300 dark:hover:border-pink-700",onClick:p,children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 flex items-center justify-center overflow-hidden p-2",children:e.jsx("img",{src:d,alt:`${o} logo`,className:"max-w-full max-h-full object-contain",onError:y=>{const h=y.target;h.style.display="none",h.parentElement.innerHTML=`
                  <div class="text-2xl font-bold text-gray-400">${o.charAt(0)}</div>
                `}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg truncate",children:o}),c&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 animate-pulse flex-shrink-0",title:"Gateway Ativo"})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[(a==="nacional"||a==="both")&&e.jsx(f,{variant:"secondary",className:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300 text-xs",children:"Nacional"}),(a==="global"||a==="both")&&e.jsx(f,{variant:"secondary",className:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300 text-xs",children:"Global"})]})]})]})})})},S=()=>{const[r,o]=i.useState(""),[l,d]=i.useState([]),a=b(s=>s.user);i.useEffect(()=>{(async()=>{if(!(a!=null&&a.id)){console.log("âš ï¸ [GATEWAYS] UsuÃ¡rio nÃ£o logado");return}console.log("ðŸ” [GATEWAYS] Buscando gateways ativos para usuÃ¡rio:",a.id);const{data:t,error:c}=await N.from("GatewayConfig").select("gatewayId, Gateway(name, slug)").eq("userId",a.id).eq("isActive",!0);if(console.log("ðŸ“Š [GATEWAYS] Dados retornados do banco:",t),c){console.error("âŒ [GATEWAYS] Erro ao buscar configs:",c);return}if(t&&t.length>0){const n=t.map(x=>x.gatewayId);console.log("ðŸŸ¢ðŸŸ¢ðŸŸ¢ [GATEWAYS] GATEWAYS ATIVOS:",t.length),console.table(t),console.log("ðŸ†” [GATEWAYS] IDs dos gateways ativos:",n),d(n)}else console.log("âšª [GATEWAYS] Nenhum gateway ativo encontrado")})()},[a==null?void 0:a.id]);const g=i.useMemo(()=>{let s=v;return r&&(s=s.filter(t=>t.name.toLowerCase().includes(r.toLowerCase()))),s},[r]);return i.useEffect(()=>{console.log("ðŸŽ¨ [GATEWAYS] PÃ¡gina renderizada"),console.log("ðŸ“‹ [GATEWAYS] Total de gateways:",v.length),console.log("ðŸŸ¢ [GATEWAYS] Gateways ativos (IDs):",l)},[l]),e.jsxs("div",{className:"p-6 sm:p-8 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Gateways"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gateways de pagamento disponÃ­veis para seu e-commerce"})]}),e.jsx(m,{children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx(j,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(w,{placeholder:"Buscar gateway...",value:r,onChange:s=>o(s.target.value),className:"pl-10"})]})})}),g.length===0?e.jsx(m,{children:e.jsx(u,{className:"p-12 text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:r?"Nenhum gateway encontrado com esse nome.":"Nenhum gateway disponÃ­vel."})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(s=>{const t=l.includes(s.id);return t&&console.log(`ðŸŸ¢ [CARD] ${s.name} estÃ¡ ATIVO (ID: ${s.id})`),e.jsx(G,{id:s.id,name:s.name,slug:s.slug,logo:s.logo,type:s.type,status:s.status,environment:s.testMode?"sandbox":"production",isVerified:s.status==="active"&&!s.testMode,isActive:t},s.id)})})]})};export{S as default};

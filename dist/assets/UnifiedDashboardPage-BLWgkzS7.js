import{u as I,r,j as e,g as S,l as q,C as U,s as t}from"./index-DQQKXQmv.js";import{M as A}from"./monitor-hvugdQnT.js";import{D}from"./dollar-sign-M3d5cn9V.js";import{T as E}from"./truck-BcWApw1x.js";const M=()=>{const i=I(a=>a.user),[l,n]=r.useState(""),[d,m]=r.useState(!1),[g,h]=r.useState(!1),[x,f]=r.useState(!1),[u,p]=r.useState(!1),[c,o]=r.useState(!0),j=a=>a.split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join(" "),N=async()=>{try{if(!(i!=null&&i.id)){o(!1);return}const{data:a}=await t.from("User").select("name, email").eq("id",i.id).single();if(a!=null&&a.name)n(j(a.name));else if(a!=null&&a.email){const s=a.email.split("@")[0];n(s.charAt(0).toUpperCase()+s.slice(1))}else n("Usuário")}catch(a){console.error("Erro ao carregar nome:",a),n("Usuário")}finally{o(!1)}},b=async a=>{try{const{data:s}=await t.from("Organization").select("subscriptionId, stripeCustomerId").eq("id",a).single();return!!(s!=null&&s.subscriptionId&&(s!=null&&s.stripeCustomerId))}catch{return!1}},y=async a=>{try{const{data:s}=await t.from("Organization").select("domain, domainVerified").eq("id",a).single();return!!(s!=null&&s.domain&&(s!=null&&s.domainVerified))}catch{return!1}},v=async a=>{try{const{data:s}=await t.from("GatewayConfig").select("id").eq("organizationId",a).eq("isActive",!0).limit(1);return((s==null?void 0:s.length)||0)>0}catch{return!1}},C=async a=>{try{const{data:s}=await t.from("ShippingMethod").select("id").eq("organizationId",a).eq("isActive",!0).limit(1);return((s==null?void 0:s.length)||0)>0}catch{return!1}},w=async()=>{try{if(!(i!=null&&i.organizationId)){o(!1);return}const[a,s,k,z]=await Promise.all([b(i.organizationId),y(i.organizationId),v(i.organizationId),C(i.organizationId)]);m(a),h(s),f(k),p(z)}catch(a){console.error("Erro ao verificar status do checkout:",a)}finally{o(!1)}};return r.useEffect(()=>{(async()=>{i!=null&&i.organizationId&&await Promise.all([N(),w()])})()},[i==null?void 0:i.organizationId]),e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:c?"Olá...":l?`Olá ${l},`:"Olá,"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Seja bem vindo"})]}),!c&&e.jsx(S,{className:"border-2 bg-white",children:e.jsxs(q,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Para ativar seu checkout você precisa concluir todos passos abaixo:"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(U,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Faturamento"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Adicione um cartão de crédito em sua conta"})]}),e.jsx("div",{className:"flex-shrink-0",children:d?e.jsx("div",{className:"h-5 w-5 rounded-full bg-green-500"}):e.jsx("div",{className:"h-5 w-5 rounded-full bg-red-500"})})]}),e.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(A,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Domínio"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Verifique seu domínio. Deve ser o mesmo utilizado na Shopify, WooCommerce ou na sua landing page."})]}),e.jsx("div",{className:"flex-shrink-0",children:g?e.jsx("div",{className:"h-5 w-5 rounded-full bg-green-500"}):e.jsx("div",{className:"h-5 w-5 rounded-full bg-red-500"})})]}),e.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(D,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Gateway"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure os meios de pagamentos que serão exibidos em sua loja."})]}),e.jsx("div",{className:"flex-shrink-0",children:x?e.jsx("div",{className:"h-5 w-5 rounded-full bg-green-500"}):e.jsx("div",{className:"h-5 w-5 rounded-full bg-red-500"})})]}),e.jsxs("div",{className:"flex items-start gap-4 p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(E,{className:"h-6 w-6 text-orange-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Frete"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Crie métodos de entrega para ser exibido no seu checkout."})]}),e.jsx("div",{className:"flex-shrink-0",children:u?e.jsx("div",{className:"h-5 w-5 rounded-full bg-green-500"}):e.jsx("div",{className:"h-5 w-5 rounded-full bg-red-500"})})]})]})]})})]})};export{M as default};

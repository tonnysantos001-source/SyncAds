import{z as e,j as s,B as a,E as t,F as r,W as l,m as i,G as n,H as o,J as c,K as d,M as m,N as x,O as g,Q as h}from"./vendor-ui-CZz5XLRH.js";import{r as p}from"./vendor-react-X41Bjl18.js";import{h as j,t as u,g as f,s as b,H as N,S as y,P as v,v as w,C as A,a as C,b as D,d as _,c as R,T as S,I as E,U as q,w as T,B as V,V as M,W as k,X as I,N as z,Y as B,e as O,Z as $,_ as L,x as P}from"./index-BVyfnjAG.js";import{T as F,a as U,b as H,c as W,d as G,e as Y}from"./table-DdF1AKCT.js";import{D as J,a as K,b as Q,c as X,d as Z}from"./dialog-BbGmQsfo.js";import{S as ee,a as se,b as ae,c as te,d as re}from"./select-Dm0x-_LT.js";import{S as le}from"./SuperAdminLayout-BQWrX4-C.js";import{m as ie,A as ne}from"./vendor-animation-CVH8XO0x.js";import"./vendor-supabase-CTOEvtyz.js";import"./vendor-utils-Dl0_yMKq.js";import"./vendor-query-B2vmz5sv.js";import"./vendor-icons-BvRy6l6m.js";var oe="AlertDialog",[ce]=i(oe,[e]),de=e(),me=e=>{const{__scopeAlertDialog:t,...r}=e,l=de(t);return s.jsx(a,{...l,...r,modal:!0})};me.displayName=oe;p.forwardRef((e,a)=>{const{__scopeAlertDialog:t,...r}=e,l=de(t);return s.jsx(h,{...l,...r,ref:a})}).displayName="AlertDialogTrigger";var xe=e=>{const{__scopeAlertDialog:a,...r}=e,l=de(a);return s.jsx(t,{...l,...r})};xe.displayName="AlertDialogPortal";var ge=p.forwardRef((e,a)=>{const{__scopeAlertDialog:t,...r}=e,l=de(t);return s.jsx(g,{...l,...r,ref:a})});ge.displayName="AlertDialogOverlay";var he="AlertDialogContent",[pe,je]=ce(he),ue=c("AlertDialogContent"),fe=p.forwardRef((e,a)=>{const{__scopeAlertDialog:t,children:i,...c}=e,d=de(t),m=p.useRef(null),x=r(a,m),g=p.useRef(null);return s.jsx(l,{contentName:he,titleName:be,docsSlug:"alert-dialog",children:s.jsx(pe,{scope:t,cancelRef:g,children:s.jsxs(n,{role:"alertdialog",...d,...c,ref:x,onOpenAutoFocus:o(c.onOpenAutoFocus,e=>{e.preventDefault(),g.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[s.jsx(ue,{children:i}),s.jsx(De,{contentRef:m})]})})})});fe.displayName=he;var be="AlertDialogTitle",Ne=p.forwardRef((e,a)=>{const{__scopeAlertDialog:t,...r}=e,l=de(t);return s.jsx(d,{...l,...r,ref:a})});Ne.displayName=be;var ye="AlertDialogDescription",ve=p.forwardRef((e,a)=>{const{__scopeAlertDialog:t,...r}=e,l=de(t);return s.jsx(m,{...l,...r,ref:a})});ve.displayName=ye;var we=p.forwardRef((e,a)=>{const{__scopeAlertDialog:t,...r}=e,l=de(t);return s.jsx(x,{...l,...r,ref:a})});we.displayName="AlertDialogAction";var Ae="AlertDialogCancel",Ce=p.forwardRef((e,a)=>{const{__scopeAlertDialog:t,...l}=e,{cancelRef:i}=je(Ae,t),n=de(t),o=r(a,i);return s.jsx(x,{...n,...l,ref:o})});Ce.displayName=Ae;var De=({contentRef:e})=>{const s=`\`${he}\` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the \`${he}\` by passing a \`${ye}\` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${he}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))},[s,e]),null},_e=ge,Re=fe,Se=we,Ee=Ce,qe=Ne,Te=ve;const Ve=me,Me=xe,ke=p.forwardRef(({className:e,...a},t)=>s.jsx(_e,{className:j("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a,ref:t}));ke.displayName=_e.displayName;const Ie=p.forwardRef(({className:e,...a},t)=>s.jsxs(Me,{children:[s.jsx(ke,{}),s.jsx(Re,{ref:t,className:j("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a})]}));Ie.displayName=Re.displayName;const ze=({className:e,...a})=>s.jsx("div",{className:j("flex flex-col space-y-2 text-center sm:text-left",e),...a});ze.displayName="AlertDialogHeader";const Be=({className:e,...a})=>s.jsx("div",{className:j("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});Be.displayName="AlertDialogFooter";const Oe=p.forwardRef(({className:e,...a},t)=>s.jsx(qe,{ref:t,className:j("text-lg font-semibold",e),...a}));Oe.displayName=qe.displayName;const $e=p.forwardRef(({className:e,...a},t)=>s.jsx(Te,{ref:t,className:j("text-sm text-muted-foreground",e),...a}));$e.displayName=Te.displayName;const Le=p.forwardRef(({className:e,...a},t)=>s.jsx(Se,{ref:t,className:j(u(),e),...a}));Le.displayName=Se.displayName;const Pe=p.forwardRef(({className:e,...a},t)=>s.jsx(Ee,{ref:t,className:j(u({variant:"outline"}),"mt-2 sm:mt-0",e),...a}));Pe.displayName=Ee.displayName;const Fe=({title:e,value:a,description:t,icon:r,gradient:l,delay:i=0})=>s.jsx(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i},whileHover:{scale:1.02},children:s.jsxs(A,{className:"border-gray-700/50 bg-gray-900/50 backdrop-blur-xl hover:border-gray-600 transition-all group cursor-pointer relative overflow-hidden",children:[s.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${l} opacity-10 group-hover:opacity-20 transition-opacity`}),s.jsxs(C,{className:"flex flex-row items-center justify-between space-y-0 pb-2 relative z-10",children:[s.jsx(D,{className:"text-sm font-medium text-gray-300",children:e}),s.jsx("div",{className:`p-2.5 rounded-xl bg-gradient-to-br ${l} shadow-lg`,children:s.jsx(r,{className:"h-4 w-4 text-white"})})]}),s.jsxs(R,{className:"relative z-10",children:[s.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:a}),s.jsx("p",{className:"text-xs text-gray-400",children:t})]})]})}),Ue=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e);function He(){const{toast:e}=f(),[a,t]=p.useState([]),[r,l]=p.useState(""),[i,n]=p.useState(!0),[o,c]=p.useState(null),[d,m]=p.useState("recent"),[x,g]=p.useState(null),[h,j]=p.useState(null);p.useEffect(()=>{u()},[]);const u=async()=>{try{n(!0);const{data:e,error:s}=await b.from("User").select("*").order("createdAt",{ascending:!1});if(s)throw s;const{data:a}=await b.from("SuperAdmin").select("id"),r=new Set((a||[]).map(e=>e.id)),l=(e||[]).filter(e=>!r.has(e.id)),i=await Promise.all(l.map(async e=>{const{count:s}=await b.from("Campaign").select("*",{count:"exact",head:!0}).eq("userId",e.id),{count:a}=await b.from("ChatMessage").select("*",{count:"exact",head:!0}).eq("userId",e.id),{data:t}=await b.from("Order").select("totalAmount").eq("userId",e.id).eq("status","PAID"),r=t?.reduce((e,s)=>e+parseFloat(s.totalAmount||"0"),0)||0,l=t?.length||0,i=l>0?r/l:0;return{...e,_count:{campaigns:s||0,messages:a||0,orders:l},_stats:{totalSales:r,averageOrderValue:i}}}));t(i)}catch(s){e({title:"Erro ao carregar usuÃ¡rios",description:s.message,variant:"destructive"})}finally{n(!1)}},oe=a.filter(e=>e.name.toLowerCase().includes(r.toLowerCase())||e.email.toLowerCase().includes(r.toLowerCase())).sort((e,s)=>{switch(d){case"sales":return(s._stats?.totalSales||0)-(e._stats?.totalSales||0);case"messages":return(s._count?.messages||0)-(e._count?.messages||0);default:return new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime()}}),ce=e=>{const a={ADMIN:{className:"bg-gradient-to-r from-purple-500/20 to-pink-500/20 text-purple-300 border-purple-500/30",label:"Admin"},MEMBER:{className:"bg-gradient-to-r from-blue-500/20 to-cyan-500/20 text-blue-300 border-blue-500/30",label:"Membro"},VIEWER:{className:"bg-gradient-to-r from-gray-500/20 to-gray-600/20 text-gray-300 border-gray-500/30",label:"Visualizador"}},t=a[e]||a.MEMBER;return s.jsx(O,{className:`${t.className} border`,children:t.label})},de=e=>e?s.jsx(O,{className:"bg-gradient-to-r from-green-500/20 to-emerald-500/20 text-green-300 border-green-500/30 border",children:"Ativo"}):s.jsx(O,{className:"bg-gradient-to-r from-red-500/20 to-orange-500/20 text-red-300 border-red-500/30 border",children:"Bloqueado"}),me=(()=>{const e=a.reduce((e,s)=>e+(s._stats?.totalSales||0),0);return{total:a.length,active:a.filter(e=>e.isActive).length,verified:a.filter(e=>e.emailVerified).length,totalSales:e}})();return i?s.jsx(le,{children:s.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:s.jsx(ie.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-purple-500/30 border-t-purple-500 rounded-full"})})}):s.jsxs(le,{children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[s.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent",children:"Clientes"}),s.jsx("p",{className:"text-gray-400 mt-1",children:"Gerencie todos os clientes da plataforma"})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[s.jsx(Fe,{title:"Total de Clientes",value:me.total,description:"Todos cadastrados",icon:N,gradient:"from-blue-500 to-cyan-500",delay:.1}),s.jsx(Fe,{title:"Clientes Ativos",value:me.active,description:"Contas ativas",icon:y,gradient:"from-green-500 to-emerald-500",delay:.2}),s.jsx(Fe,{title:"Emails Verificados",value:me.verified,description:"Contas verificadas",icon:v,gradient:"from-purple-500 to-pink-500",delay:.3}),s.jsx(Fe,{title:"Total em Vendas",value:Ue(me.totalSales),description:"Vendas de todos",icon:w,gradient:"from-orange-500 to-red-500",delay:.4})]}),s.jsx(ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:s.jsxs(A,{className:"border-gray-700/50 bg-gray-900/50 backdrop-blur-xl",children:[s.jsx(C,{children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx(D,{className:"text-white",children:"Todos os Clientes"}),s.jsx(_,{className:"text-gray-400",children:"Lista completa de clientes cadastrados"})]})})}),s.jsxs(R,{children:[s.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row gap-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(S,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),s.jsx(E,{placeholder:"Buscar por nome ou email...",value:r,onChange:e=>l(e.target.value),className:"pl-10 bg-gray-800/50 border-gray-700 text-white placeholder:text-gray-500 focus:border-blue-500"})]}),s.jsxs(ee,{value:d,onValueChange:e=>m(e),children:[s.jsxs(se,{className:"w-[220px] bg-gray-800/50 border-gray-700 text-white",children:[s.jsx(q,{className:"h-4 w-4 mr-2"}),s.jsx(ae,{})]}),s.jsxs(te,{className:"bg-gray-800 border-gray-700",children:[s.jsx(re,{value:"recent",className:"text-white focus:bg-gray-700",children:"Mais Recentes"}),s.jsx(re,{value:"sales",className:"text-white focus:bg-gray-700",children:"Maiores Vendedores ðŸ’°"}),s.jsx(re,{value:"messages",className:"text-white focus:bg-gray-700",children:"Mais Mensagens ðŸ’¬"})]})]})]}),s.jsx("div",{className:"border border-gray-700/50 rounded-lg overflow-hidden",children:s.jsxs(F,{children:[s.jsx(U,{children:s.jsxs(H,{className:"border-gray-700/50 hover:bg-gray-800/50",children:[s.jsx(W,{className:"text-gray-300 font-semibold",children:"Cliente"}),s.jsx(W,{className:"text-gray-300 font-semibold",children:"Email"}),s.jsx(W,{className:"text-gray-300 font-semibold",children:"Role"}),s.jsx(W,{className:"text-gray-300 font-semibold",children:"Status"}),s.jsx(W,{className:"text-gray-300 font-semibold",children:"Total Vendas"}),s.jsx(W,{className:"text-gray-300 font-semibold",children:"Mensagens"}),s.jsx(W,{className:"text-gray-300 font-semibold",children:"AÃ§Ãµes"})]})}),s.jsx(G,{children:0===oe.length?s.jsx(H,{children:s.jsx(Y,{colSpan:7,className:"text-center py-12 text-gray-500",children:s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx(N,{className:"w-12 h-12 text-gray-600"}),s.jsx("p",{children:"Nenhum cliente encontrado"})]})})}):oe.map((e,a)=>s.jsxs(ie.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.02*a},className:"border-gray-700/50 hover:bg-gray-800/50 transition-colors cursor-pointer",onClick:()=>c(e),children:[s.jsx(Y,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold text-sm",children:e.name.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-white",children:e.name}),s.jsxs("div",{className:"text-xs text-gray-500",children:[e._count?.orders||0," pedidos"]})]})]})}),s.jsx(Y,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"text-sm text-gray-400",children:e.email}),e.emailVerified&&s.jsx(y,{className:"w-4 h-4 text-green-400",title:"Email verificado"})]})}),s.jsx(Y,{children:ce(e.role)}),s.jsx(Y,{children:de(e.isActive)}),s.jsx(Y,{children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-white font-bold",children:Ue(e._stats?.totalSales||0)}),s.jsxs("span",{className:"text-xs text-gray-500",children:["Ticket: ",Ue(e._stats?.averageOrderValue||0)]})]})}),s.jsx(Y,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(T,{className:"w-4 h-4 text-blue-400"}),s.jsx("span",{className:"text-white font-medium",children:e._count?.messages||0})]})}),s.jsx(Y,{children:s.jsxs("div",{className:"flex items-center gap-2",onClick:e=>e.stopPropagation(),children:[s.jsx(V,{size:"sm",variant:"outline",className:"border-gray-700 hover:bg-blue-500/20 hover:border-blue-500 text-blue-400",onClick:()=>c(e),children:s.jsx(M,{className:"w-4 h-4"})}),s.jsx(V,{size:"sm",variant:"outline",className:"border-gray-700 "+(e.isActive?"hover:bg-orange-500/20 hover:border-orange-500 text-orange-400":"hover:bg-green-500/20 hover:border-green-500 text-green-400"),onClick:()=>j(e),children:e.isActive?s.jsx(k,{className:"w-4 h-4"}):s.jsx(I,{className:"w-4 h-4"})}),s.jsx(V,{size:"sm",variant:"outline",className:"border-gray-700 hover:bg-red-500/20 hover:border-red-500 text-red-400",onClick:()=>g(e),children:s.jsx(z,{className:"w-4 h-4"})})]})})]},e.id))})]})})]})]})})]}),s.jsx(ne,{children:o&&s.jsx(J,{open:!!o,onOpenChange:()=>c(null),children:s.jsxs(K,{className:"bg-gray-900 border-gray-700 text-white max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Q,{children:[s.jsx(X,{className:"text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Detalhes do Cliente"}),s.jsxs(Z,{className:"text-gray-400",children:["InformaÃ§Ãµes completas sobre ",o.name]})]}),s.jsxs("div",{className:"space-y-6 mt-4",children:[s.jsxs(A,{className:"bg-gray-800/50 border-gray-700",children:[s.jsx(C,{children:s.jsxs(D,{className:"text-lg text-white flex items-center gap-2",children:[s.jsx(N,{className:"w-5 h-5 text-blue-400"}),"InformaÃ§Ãµes Pessoais"]})}),s.jsxs(R,{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-400",children:"Nome Completo"}),s.jsx("p",{className:"text-white font-medium",children:o.name})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm text-gray-400 flex items-center gap-1",children:[s.jsx(B,{className:"w-4 h-4"}),"Email"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"text-white font-medium",children:o.email}),o.emailVerified&&s.jsx(O,{className:"bg-green-500/20 text-green-300 border-green-500/30",children:"Verificado"})]})]}),o.cpf&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-400",children:"CPF"}),s.jsx("p",{className:"text-white font-medium",children:o.cpf})]}),o.birthDate&&s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm text-gray-400 flex items-center gap-1",children:[s.jsx($,{className:"w-4 h-4"}),"Data de Nascimento"]}),s.jsx("p",{className:"text-white font-medium",children:new Date(o.birthDate).toLocaleDateString("pt-BR")})]})]})]}),o.cep&&s.jsxs(A,{className:"bg-gray-800/50 border-gray-700",children:[s.jsx(C,{children:s.jsxs(D,{className:"text-lg text-white flex items-center gap-2",children:[s.jsx(L,{className:"w-5 h-5 text-green-400"}),"EndereÃ§o"]})}),s.jsxs(R,{className:"space-y-2",children:[s.jsxs("p",{className:"text-white",children:[o.street,", ",o.number,o.complement&&` - ${o.complement}`]}),s.jsxs("p",{className:"text-gray-400",children:[o.neighborhood," - ",o.city,"/",o.state]}),s.jsxs("p",{className:"text-gray-500",children:["CEP: ",o.cep]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs(A,{className:"bg-gradient-to-br from-blue-500/10 to-purple-500/10 border-blue-500/30",children:[s.jsx(C,{className:"pb-2",children:s.jsx(D,{className:"text-sm text-gray-300",children:"Total em Vendas"})}),s.jsxs(R,{children:[s.jsx("div",{className:"text-2xl font-bold text-white",children:Ue(o._stats?.totalSales||0)}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[o._count?.orders||0," pedidos realizados"]})]})]}),s.jsxs(A,{className:"bg-gradient-to-br from-orange-500/10 to-red-500/10 border-orange-500/30",children:[s.jsx(C,{className:"pb-2",children:s.jsx(D,{className:"text-sm text-gray-300",children:"Ticket MÃ©dio"})}),s.jsxs(R,{children:[s.jsx("div",{className:"text-2xl font-bold text-white",children:Ue(o._stats?.averageOrderValue||0)}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Valor mÃ©dio por pedido"})]})]}),s.jsxs(A,{className:"bg-gradient-to-br from-green-500/10 to-emerald-500/10 border-green-500/30",children:[s.jsx(C,{className:"pb-2",children:s.jsx(D,{className:"text-sm text-gray-300",children:"Campanhas"})}),s.jsxs(R,{children:[s.jsx("div",{className:"text-2xl font-bold text-white",children:o._count?.campaigns||0}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Campanhas criadas"})]})]}),s.jsxs(A,{className:"bg-gradient-to-br from-cyan-500/10 to-blue-500/10 border-cyan-500/30",children:[s.jsx(C,{className:"pb-2",children:s.jsx(D,{className:"text-sm text-gray-300",children:"Mensagens IA"})}),s.jsxs(R,{children:[s.jsx("div",{className:"text-2xl font-bold text-white",children:o._count?.messages||0}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Mensagens enviadas"})]})]})]}),s.jsxs(A,{className:"bg-gray-800/50 border-gray-700",children:[s.jsx(C,{children:s.jsxs(D,{className:"text-lg text-white flex items-center gap-2",children:[s.jsx(P,{className:"w-5 h-5 text-purple-400"}),"Inform aÃ§Ãµes da Conta"]})}),s.jsxs(R,{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-400",children:"Status"}),s.jsx("div",{className:"mt-1",children:de(o.isActive)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-400",children:"Role"}),s.jsx("div",{className:"mt-1",children:ce(o.role)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-400",children:"Data de Cadastro"}),s.jsx("p",{className:"text-white font-medium",children:new Date(o.createdAt).toLocaleDateString("pt-BR")})]}),o.trialEndsAt&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-gray-400",children:"Trial Termina em"}),s.jsx("p",{className:"text-white font-medium",children:new Date(o.trialEndsAt).toLocaleDateString("pt-BR")})]})]})]})]})]})})}),s.jsx(Ve,{open:!!x,onOpenChange:()=>g(null),children:s.jsxs(Ie,{className:"bg-gray-900 border-gray-700",children:[s.jsxs(ze,{children:[s.jsx(Oe,{className:"text-white",children:"Excluir Cliente"}),s.jsxs($e,{className:"text-gray-400",children:["Tem certeza que deseja excluir ",s.jsx("strong",{className:"text-red-400",children:x?.name}),"? Esta aÃ§Ã£o nÃ£o pode ser desfeita e todos os dados serÃ£o permanentemente removidos."]})]}),s.jsxs(Be,{children:[s.jsx(Pe,{className:"bg-gray-800 text-white border-gray-700 hover:bg-gray-700",children:"Cancelar"}),s.jsx(Le,{onClick:async()=>{if(x)try{const{error:s}=await b.from("User").delete().eq("id",x.id);if(s)throw s;e({title:"Cliente excluÃ­do",description:`${x.name} foi removido com sucesso.`}),await u(),g(null)}catch(s){e({title:"Erro ao excluir cliente",description:s.message,variant:"destructive"})}},className:"bg-red-500 hover:bg-red-600 text-white",children:"Excluir"})]})]})}),s.jsx(Ve,{open:!!h,onOpenChange:()=>j(null),children:s.jsxs(Ie,{className:"bg-gray-900 border-gray-700",children:[s.jsxs(ze,{children:[s.jsxs(Oe,{className:"text-white",children:[h?.isActive?"Bloquear":"Desbloquear"," Cliente"]}),s.jsxs($e,{className:"text-gray-400",children:["Tem certeza que deseja ",h?.isActive?"bloquear":"desbloquear"," ",s.jsx("strong",{className:"text-blue-400",children:h?.name}),"?",h?.isActive&&" O cliente nÃ£o poderÃ¡ mais acessar a plataforma."]})]}),s.jsxs(Be,{children:[s.jsx(Pe,{className:"bg-gray-800 text-white border-gray-700 hover:bg-gray-700",children:"Cancelar"}),s.jsx(Le,{onClick:async()=>{if(h)try{const s=!h.isActive,{error:a}=await b.from("User").update({isActive:s}).eq("id",h.id);if(a)throw a;e({title:s?"Cliente ativado":"Cliente bloqueado",description:`${h.name} foi ${s?"ativado":"bloqueado"} com sucesso.`}),await u(),j(null)}catch(s){e({title:"Erro ao alterar status",description:s.message,variant:"destructive"})}},className:(h?.isActive?"bg-orange-500 hover:bg-orange-600":"bg-green-500 hover:bg-green-600")+" text-white",children:h?.isActive?"Bloquear":"Desbloquear"})]})]})})]})}export{He as default};

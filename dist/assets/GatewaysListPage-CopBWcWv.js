import{a as y,j as e,d as m,h as u,l as b,r as i,u as w,S as A,I as k,s as j}from"./index-Dp8T7_yL.js";import{g as p}from"./gatewaysList-BfxCdpsq.js";const N=({id:r,name:o,slug:l,logo:c,type:s,status:g,environment:a,isVerified:t,isActive:d,onClick:n})=>{const x=y(),f=()=>{n?n():x(`/checkout/gateways/${l}`)};return e.jsx(m,{className:"relative cursor-pointer transition-all hover:shadow-lg hover:border-pink-300 dark:hover:border-pink-700",onClick:f,children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-16 h-16 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 flex items-center justify-center overflow-hidden p-2",children:e.jsx("img",{src:c,alt:`${o} logo`,className:"max-w-full max-h-full object-contain",onError:v=>{const h=v.target;h.style.display="none",h.parentElement.innerHTML=`
                  <div class="text-2xl font-bold text-gray-400">${o.charAt(0)}</div>
                `}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg truncate",children:o}),d&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 animate-pulse flex-shrink-0",title:"Gateway Ativo"})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[(s==="nacional"||s==="both")&&e.jsx(b,{variant:"secondary",className:"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300 text-xs",children:"Nacional"}),(s==="global"||s==="both")&&e.jsx(b,{variant:"secondary",className:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300 text-xs",children:"Global"})]})]})]})})})},S=()=>{const[r,o]=i.useState(""),[l,c]=i.useState([]),s=w(a=>a.user);i.useEffect(()=>{(async()=>{if(!(s!=null&&s.id)){console.log("âš ï¸ [GATEWAYS] UsuÃ¡rio nÃ£o logado");return}console.log("ðŸ” [GATEWAYS] Buscando gateways ativos para usuÃ¡rio:",s.id);const{data:t,error:d}=await j.from("GatewayConfig").select("gatewayId, Gateway(name, slug)").eq("userId",s.id).eq("isActive",!0);if(console.log("ðŸ“Š [GATEWAYS] Dados retornados do banco:",t),d){console.error("âŒ [GATEWAYS] Erro ao buscar configs:",d);return}if(t&&t.length>0){const n=t.map(x=>x.gatewayId);console.log("ðŸŸ¢ðŸŸ¢ðŸŸ¢ [GATEWAYS] GATEWAYS ATIVOS:",t.length),console.table(t),console.log("ðŸ†” [GATEWAYS] IDs dos gateways ativos:",n),c(n)}else console.log("âšª [GATEWAYS] Nenhum gateway ativo encontrado")})()},[s==null?void 0:s.id]);const g=i.useMemo(()=>{let a=p;return r&&(a=a.filter(t=>t.name.toLowerCase().includes(r.toLowerCase()))),a},[r]);return i.useEffect(()=>{console.log("ðŸŽ¨ [GATEWAYS] PÃ¡gina renderizada"),console.log("ðŸ“‹ [GATEWAYS] Total de gateways:",p.length),console.log("ðŸŸ¢ [GATEWAYS] Gateways ativos (IDs):",l)},[l]),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-purple-50/30 dark:from-gray-950 dark:via-blue-950/20 dark:to-purple-950/20 p-6 sm:p-8 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-black bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Gateways"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium mt-1",children:"Gateways de pagamento disponÃ­veis para seu e-commerce"})]}),e.jsx(m,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-300 dark:border-gray-700",children:e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500"}),e.jsx(k,{placeholder:"Buscar gateway...",value:r,onChange:a=>o(a.target.value),className:"pl-10 dark:bg-gray-800 dark:border-gray-600 dark:text-white dark:placeholder:text-gray-500"})]})})}),g.length===0?e.jsx(m,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-300 dark:border-gray-700",children:e.jsx(u,{className:"p-12 text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:r?"Nenhum gateway encontrado com esse nome.":"Nenhum gateway disponÃ­vel."})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(a=>{const t=l.includes(a.id);return t&&console.log(`ðŸŸ¢ [CARD] ${a.name} estÃ¡ ATIVO (ID: ${a.id})`),e.jsx(N,{id:a.id,name:a.name,slug:a.slug,logo:a.logo,type:a.type,status:a.status,environment:a.testMode?"sandbox":"production",isVerified:a.status==="active"&&!a.testMode,isActive:t},a.id)})})]})};export{S as default};

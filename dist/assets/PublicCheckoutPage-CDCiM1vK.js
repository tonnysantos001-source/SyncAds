import{s as A,c as xe,r as m,j as e,l as T,I as z,d as O,h as V,a6 as Re,B as W,C as ne,a5 as Te,m as tt,a as ot,b as rt,i as ie,_ as st,R as Ne,n as at,as as nt}from"./index-D1Dqb_Ty.js";import{L as _}from"./label-B6V9YBIP.js";import{S as H}from"./separator-DPtJ2S0A.js";import{A as Ae,a as Ie}from"./alert-EuP5V9XC.js";import{X as qe}from"./x-CyY6sErK.js";import{S as ke}from"./shopping-bag-CnMXgzeJ.js";import{S as lt}from"./star-BKyIJKvu.js";import{U as it}from"./users-B3yLqQn0.js";import{C as te}from"./credit-card-Be26ZPox.js";import{C as X}from"./circle-alert-g9DB4nvr.js";import{L as J}from"./lock-Dd38mMYB.js";import{b as ct,Q as ce,S as me}from"./browser-DGthgSeO.js";import{C as dt}from"./clock-efzC2iYV.js";import{C as ue}from"./copy-BcwabxZL.js";import{C as mt}from"./calendar-CgYTWQwl.js";import{D as ut}from"./download-CLQ8RVnT.js";import{E as xt}from"./external-link-ORLw_0Qn.js";import{T as ht}from"./truck-E2FLFkVa.js";import{P as ae}from"./package-C-y4u80k.js";import{F as Be}from"./file-text-CfnaXHRb.js";import{T as gt}from"./tag-hAXYw_Ij.js";import{S as de}from"./shield-check-CZkMkbFf.js";const pt={async saveCustomization(r){try{const{data:o,error:a}=await A.from("CheckoutCustomization").upsert({...r,updatedAt:new Date().toISOString()}).select().single();if(a)throw a;return o}catch(o){throw console.error("Error saving checkout customization:",o),o}},async loadCustomization(r){try{const{data:o,error:a}=await A.from("CheckoutCustomization").select("*").eq("userId",r).eq("isActive",!0).single();if(a&&a.code!=="PGRST116")throw a;return o}catch(o){throw console.error("Error loading checkout customization:",o),o}},async listCustomizations(r){try{const{data:o,error:a}=await A.from("CheckoutCustomization").select("*").eq("userId",r).order("createdAt",{ascending:!1});if(a)throw a;return o}catch(o){throw console.error("Error listing checkout customizations:",o),o}},async activateCustomization(r){try{const o=await A.from("CheckoutCustomization").select("userId").eq("id",r).single();o.data&&await A.from("CheckoutCustomization").update({isActive:!1}).eq("userId",o.data.userId);const{data:a,error:i}=await A.from("CheckoutCustomization").update({isActive:!0,updatedAt:new Date().toISOString()}).eq("id",r).select().single();if(i)throw i;return a}catch(o){throw console.error("Error activating checkout customization:",o),o}},async deleteCustomization(r){try{const{error:o}=await A.from("CheckoutCustomization").delete().eq("id",r);if(o)throw o}catch(o){throw console.error("Error deleting checkout customization:",o),o}},async duplicateCustomization(r,o){try{const{data:a,error:i}=await A.from("CheckoutCustomization").select("*").eq("id",r).single();if(i)throw i;const{data:p,error:f}=await A.from("CheckoutCustomization").insert({userId:a.userId,name:o,theme:a.theme,isActive:!1}).select().single();if(f)throw f;return p}catch(a){throw console.error("Error duplicating checkout customization:",a),a}},async generatePreviewUrl(r){try{const{data:o,error:a}=await A.from("CheckoutCustomization").insert({userId:r.userId,name:`Preview-${Date.now()}`,theme:r.theme||{},isActive:!1}).select().single();if(a)throw a;return`/checkout/preview/${o.id}`}catch(o){throw console.error("Error generating preview URL:",o),o}},async exportCustomization(r){try{const{data:o,error:a}=await A.from("CheckoutCustomization").select("*").eq("id",r).single();if(a)throw a;return{name:o.name,theme:o.theme,exportedAt:new Date().toISOString(),version:"1.0"}}catch(o){throw console.error("Error exporting checkout customization:",o),o}},async importCustomization(r,o){try{const{data:a,error:i}=await A.from("CheckoutCustomization").insert({userId:r,name:`${o.name} (Importado)`,theme:o.theme,isActive:!1}).select().single();if(i)throw i;return a}catch(a){throw console.error("Error importing checkout customization:",a),a}}};/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=xe("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=xe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=xe("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),Ct=({userId:r,paymentMethod:o,purchaseAmount:a})=>{const[i,p]=m.useState(!0),[f,h]=m.useState([]),[n,$]=m.useState(null),[b,S]=m.useState({hasDiscount:!1,discountAmount:0,discountPercentage:0,originalTotal:a,finalTotal:a,discountDescription:"",meetsMinimum:!1,cappedAtMaximum:!1});m.useEffect(()=>{r?E():p(!1)},[r]),m.useEffect(()=>{k()},[o,a,f]);const E=async()=>{if(r)try{p(!0);const{data:l,error:C}=await A.from("PaymentMethodDiscount").select("*").eq("userId",r).eq("isActive",!0);if(C)throw C;h(l||[])}catch(l){console.error("Erro ao carregar descontos:",l),h([])}finally{p(!1)}},k=()=>{const l=f.find(x=>x.paymentMethod===o&&x.isActive);if(!l){$(null),S({hasDiscount:!1,discountAmount:0,discountPercentage:0,originalTotal:a,finalTotal:a,discountDescription:"",meetsMinimum:!1,cappedAtMaximum:!1});return}if($(l),!(a>=l.minPurchaseAmount)){S({hasDiscount:!1,discountAmount:0,discountPercentage:0,originalTotal:a,finalTotal:a,discountDescription:l.description||"",meetsMinimum:!1,cappedAtMaximum:!1});return}let v=0,y=0;l.discountType==="PERCENTAGE"?(y=l.discountValue,v=a*l.discountValue/100):(v=l.discountValue,y=l.discountValue/a*100);let c=!1;l.maxDiscountAmount&&v>l.maxDiscountAmount&&(v=l.maxDiscountAmount,y=l.maxDiscountAmount/a*100,c=!0),v>a&&(v=a);const g=Math.max(0,a-v);S({hasDiscount:!0,discountAmount:v,discountPercentage:y,originalTotal:a,finalTotal:g,discountDescription:l.description||"",meetsMinimum:!0,cappedAtMaximum:c})};return{loading:i,discounts:f,activeDiscount:n,calculation:b,getDiscountLabel:()=>n?n.discountType==="PERCENTAGE"?`${n.discountValue.toFixed(0)}% de desconto`:`R$ ${n.discountValue.toFixed(2)} de desconto`:"",hasDiscountForMethod:l=>f.some(C=>C.paymentMethod===l&&C.isActive),getDiscountInfoForMethod:l=>{const C=f.find(y=>y.paymentMethod===l&&y.isActive);if(!C)return null;let v="";return C.discountType==="PERCENTAGE"?v=`${C.discountValue.toFixed(0)}% OFF`:v=`-R$ ${C.discountValue.toFixed(2)}`,{...C,label:v,formattedValue:C.discountType==="PERCENTAGE"?`${C.discountValue}%`:`R$ ${C.discountValue.toFixed(2)}`}},getEstimatedDiscountForMethod:(l,C=a)=>{const v=f.find(c=>c.paymentMethod===l&&c.isActive);if(!v)return 0;let y=0;return v.discountType==="PERCENTAGE"?y=C*v.discountValue/100:y=v.discountValue,v.maxDiscountAmount&&y>v.maxDiscountAmount&&(y=v.maxDiscountAmount),y>C&&(y=C),y},reload:E}};function yt(r){const[o,a]=m.useState([]),[i,p]=m.useState(!0),[f,h]=m.useState(!1);m.useEffect(()=>{if(!r){p(!1);return}n()},[r]);const n=async()=>{try{const{data:c,error:g}=await A.from("PixelConfig").select("*").eq("userId",r).eq("isActive",!0);if(g)throw g;a(c||[]),c&&c.length>0&&$(c)}catch(c){console.error("Erro ao carregar pixels:",c)}finally{p(!1)}},$=c=>{c.forEach(g=>{if(g.isActive)switch(g.platform){case"FACEBOOK":b(g.pixelId);break;case"TIKTOK":S(g.pixelId);break;case"GOOGLE_ADS":E(g.pixelId);break}}),h(!0)},b=c=>{if(typeof window>"u"||window.fbq)return;const g=`
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', '${c}');
    `,x=document.createElement("script");x.innerHTML=g,document.head.appendChild(x),console.log("‚úÖ Meta Pixel inicializado:",c)},S=c=>{if(typeof window>"u"||window.ttq)return;const g=`
      !function (w, d, t) {
        w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e},ttq.load=function(e,n){var i="https://analytics.tiktok.com/i18n/pixel/events.js";ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=i,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=i+"?sdkid="+e+"&lib="+t;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)};
        ttq.load('${c}');
        ttq.page();
      }(window, document, 'ttq');
    `,x=document.createElement("script");x.innerHTML=g,document.head.appendChild(x),console.log("‚úÖ TikTok Pixel inicializado:",c)},E=c=>{if(typeof window>"u"||window.gtag)return;const g=document.createElement("script");g.async=!0,g.src=`https://www.googletagmanager.com/gtag/js?id=${c}`,document.head.appendChild(g);const x=document.createElement("script");x.innerHTML=`
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', '${c}');
    `,document.head.appendChild(x),console.log("‚úÖ Google Ads inicializado:",c)},k=m.useCallback((c,g={})=>{!f||o.length===0||o.forEach(x=>{if(x.events.includes(c))try{switch(x.platform){case"FACEBOOK":B(c,g);break;case"TIKTOK":D(c,g);break;case"GOOGLE_ADS":w(c,g);break}}catch(R){console.error(`Erro ao disparar evento ${c} no ${x.platform}:`,R)}})},[f,o]),B=(c,g)=>{if(typeof window>"u"||!window.fbq)return;const x=window.fbq,u={page_view:"PageView",add_to_cart:"AddToCart",initiate_checkout:"InitiateCheckout",add_payment_info:"AddPaymentInfo",purchase:"Purchase",view_content:"ViewContent"}[c]||c;x("track",u,g),console.log("üìä Meta Pixel:",u,g)},D=(c,g)=>{if(typeof window>"u"||!window.ttq)return;const x=window.ttq,u={page_view:"ViewContent",add_to_cart:"AddToCart",initiate_checkout:"InitiateCheckout",add_payment_info:"AddPaymentInfo",purchase:"CompletePayment",view_content:"ViewContent"}[c]||c;x.track(u,g),console.log("üìä TikTok Pixel:",u,g)},w=(c,g)=>{if(typeof window>"u"||!window.gtag)return;const x=window.gtag,u={page_view:"page_view",add_to_cart:"add_to_cart",initiate_checkout:"begin_checkout",add_payment_info:"add_payment_info",purchase:"purchase",view_content:"view_item"}[c]||c;x("event",u,g),console.log("üìä Google Ads:",u,g)},N=m.useCallback(()=>{k("page_view",{})},[k]),l=m.useCallback((c,g)=>{k("add_to_cart",{content_ids:[c.id],content_type:"product",content_name:c.name,value:g,currency:"BRL",num_items:1})},[k]),C=m.useCallback((c,g)=>{k("initiate_checkout",{content_ids:g.map(x=>x.id),content_type:"product",value:c,currency:"BRL",num_items:g.length})},[k]),v=m.useCallback((c,g)=>{k("add_payment_info",{value:c,currency:"BRL",payment_type:g})},[k]),y=m.useCallback((c,g,x,R)=>{const u={transaction_id:c,value:g,currency:"BRL",content_ids:x.map(L=>L.id||L.productId),content_type:"product",num_items:x.length};R&&(u.email=R.email,u.phone=R.phone,u.first_name=R.firstName,u.last_name=R.lastName,u.city=R.city,u.state=R.state,u.zip=R.zipCode,u.country=R.country||"BR"),k("purchase",u)},[k]);return{loading:i,initialized:f,pixels:o,trackPageView:N,trackAddToCart:l,trackInitiateCheckout:C,trackAddPaymentInfo:v,trackPurchase:y,firePixelEvent:k}}function jt({orderId:r,currentStep:o,customerData:a,addressData:i,checkoutData:p,userId:f}){const h=m.useRef(null),n=m.useRef(!1),$=m.useRef(Date.now()),b=m.useCallback(()=>!(o!==3||!r||!(a!=null&&a.email)||!a.email.includes("@")||!p||!p.items||p.items.length===0||n.current),[o,r,a,p]),S=m.useCallback(async()=>{if(b()&&!n.current)try{console.log("üõí Detectado abandono de carrinho:",r),n.current=!0;const{data:w}=await A.from("AbandonedCart").select("id").eq("userId",f||"anonymous").eq("cartId",r).single();if(w){console.log("‚ö†Ô∏è Carrinho abandonado j√° registrado");return}const N=Math.floor((Date.now()-$.current)/1e3),l={userId:f||"anonymous",cartId:r,customerId:null,email:a.email,abandonedAt:new Date().toISOString(),recoveryAttempts:0,lastRecoveryAt:null,recoveredAt:null,orderId:r,metadata:{customerData:{name:a.name,phone:a.phone,document:a.document},addressData:i,checkoutData:{items:p.items,subtotal:p.subtotal,total:p.total},abandonmentContext:{currentStep:o,timeOnCheckout:N,abandonedAt:new Date().toISOString(),userAgent:navigator.userAgent,screenResolution:`${window.screen.width}x${window.screen.height}`}}},{error:C}=await A.from("AbandonedCart").insert(l);if(C)console.error("‚ùå Erro ao salvar carrinho abandonado:",C),n.current=!1;else{console.log("‚úÖ Carrinho abandonado salvo com sucesso!");try{localStorage.setItem(`abandoned-cart-${r}`,JSON.stringify({...l,savedAt:new Date().toISOString()}))}catch(v){console.warn("N√£o foi poss√≠vel salvar no localStorage:",v)}}}catch(w){console.error("‚ùå Erro ao processar abandono:",w),n.current=!1}},[b,r,f,a,i,p,o]),E=m.useCallback(()=>{h.current&&clearTimeout(h.current),b()&&(h.current=setTimeout(()=>{console.log("‚è∞ Timeout de inatividade atingido"),S()},5*60*1e3))},[b,S]),k=m.useCallback(()=>{if(b()){const w=JSON.stringify({userId:f||"anonymous",orderId:r,email:a.email,abandonedAt:new Date().toISOString()});navigator.sendBeacon&&new Blob([w],{type:"application/json"}),S()}},[b,f,r,a,S]),B=m.useCallback(()=>{document.hidden&&setTimeout(()=>{document.hidden&&b()&&(console.log("üëÅÔ∏è Usu√°rio saiu da aba por tempo prolongado"),S())},2*60*1e3)},[b,S]);return m.useEffect(()=>{if(!b())return;const w=["mousedown","mousemove","keypress","scroll","touchstart","click"],N=()=>{E()};return w.forEach(l=>{window.addEventListener(l,N,{passive:!0})}),window.addEventListener("beforeunload",k),document.addEventListener("visibilitychange",B),E(),()=>{h.current&&clearTimeout(h.current),w.forEach(l=>{window.removeEventListener(l,N)}),window.removeEventListener("beforeunload",k),document.removeEventListener("visibilitychange",B)}},[b,E,k,B]),m.useEffect(()=>{o!==3&&(n.current=!1,h.current&&clearTimeout(h.current))},[o]),{markAsRecovered:m.useCallback(async()=>{if(r)try{const{error:w}=await A.from("AbandonedCart").update({recovered:!0,recoveredAt:new Date().toISOString(),orderId:r}).eq("cartId",r);if(w)console.error("Erro ao marcar como recuperado:",w);else{console.log("‚úÖ Carrinho marcado como recuperado"),n.current=!1;try{localStorage.removeItem(`abandoned-cart-${r}`)}catch(N){console.warn("Erro ao limpar localStorage:",N)}}}catch(w){console.error("Erro ao marcar carrinho como recuperado:",w)}},[r]),isMonitoring:b()}}function vt({userId:r,position:o="bottom-left",className:a}){const[i,p]=m.useState([]),[f,h]=m.useState(null),[n,$]=m.useState(!1),[b,S]=m.useState(!0);m.useEffect(()=>{if(!r){S(!1);return}E()},[r]);const E=async()=>{try{const{data:C,error:v}=await A.from("SocialProof").select("*").eq("userId",r).eq("isActive",!0).order("createdAt",{ascending:!1});if(v)throw v;C&&C.length>0&&(p(C),console.log("‚úÖ Provas sociais carregadas:",C.length))}catch(C){console.error("Erro ao carregar provas sociais:",C)}finally{S(!1)}};m.useEffect(()=>{if(i.length===0||b)return;const C=setTimeout(()=>{k()},5e3),v=setInterval(()=>{k()},15e3);return()=>{clearTimeout(C),clearInterval(v)}},[i,b]);const k=()=>{if(i.length===0)return;const C=Math.floor(Math.random()*i.length),v=i[C];h(v),$(!0),setTimeout(()=>{B()},v.displayDuration*1e3)},B=()=>{$(!1),setTimeout(()=>{h(null)},300)},D=()=>{B()};if(!f||i.length===0)return null;const w=()=>{switch(f.type){case"RECENT_PURCHASE":return e.jsx(ke,{className:"h-5 w-5 text-green-600"});case"VISITOR_COUNT":return e.jsx(it,{className:"h-5 w-5 text-blue-600"});case"REVIEW":return e.jsx(lt,{className:"h-5 w-5 text-yellow-600 fill-yellow-600"});default:return e.jsx(ke,{className:"h-5 w-5 text-gray-600"})}},N=()=>{switch(f.type){case"RECENT_PURCHASE":return"bg-green-50 border-green-200";case"VISITOR_COUNT":return"bg-blue-50 border-blue-200";case"REVIEW":return"bg-yellow-50 border-yellow-200";default:return"bg-white border-gray-200"}},l=()=>{switch(o){case"bottom-left":return"bottom-4 left-4";case"bottom-right":return"bottom-4 right-4";case"top-left":return"top-4 left-4";case"top-right":return"top-4 right-4";default:return"bottom-4 left-4"}};return e.jsxs("div",{className:T("fixed z-50 max-w-sm transition-all duration-300 ease-in-out",l(),n?"opacity-100 translate-y-0 scale-100":"opacity-0 translate-y-2 scale-95 pointer-events-none",a),children:[e.jsxs(Ae,{className:T("shadow-lg border-2 relative pr-10",N()),children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:w()}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx(Ie,{className:"text-sm text-gray-800 font-medium",children:f.message})})]}),e.jsx("button",{onClick:D,className:"absolute top-2 right-2 p-1 rounded-full hover:bg-black/5 transition-colors","aria-label":"Fechar notifica√ß√£o",children:e.jsx(qe,{className:"h-4 w-4 text-gray-500"})}),e.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-gray-800/20 rounded-b-lg animate-progress",style:{animation:`progress ${f.displayDuration}s linear`}})]}),e.jsx("style",{jsx:!0,children:`
        @keyframes progress {
          from {
            width: 100%;
          }
          to {
            width: 0%;
          }
        }
      `})]})}const $e=r=>{const o=r.replace(/\D/g,"");return o.length<=5?o:`${o.slice(0,5)}-${o.slice(5,8)}`},De=r=>r.replace(/\D/g,""),wt=r=>De(r).length===8,Nt=async r=>{const o=De(r);if(!wt(o))throw new Error("CEP inv√°lido. Deve conter 8 d√≠gitos.");try{const a=await fetch(`https://viacep.com.br/ws/${o}/json/`);if(!a.ok)throw new Error("Erro ao buscar CEP");const i=await a.json();return i.erro?null:{street:i.logradouro||"",neighborhood:i.bairro||"",city:i.localidade||"",state:i.uf||"",zipCode:$e(o)}}catch(a){throw console.error("Erro ao buscar CEP:",a),a}},_e=r=>{const o=r.replace(/\D/g,"");return o.length===0?"":o.length<=3?o:o.length<=6?`${o.slice(0,3)}.${o.slice(3)}`:o.length<=9?`${o.slice(0,3)}.${o.slice(3,6)}.${o.slice(6)}`:`${o.slice(0,3)}.${o.slice(3,6)}.${o.slice(6,9)}-${o.slice(9,11)}`},Me=r=>r.replace(/\D/g,""),kt=r=>{const o=Me(r);if(o.length!==11||/^(\d)\1{10}$/.test(o))return!1;let a=0;for(let h=0;h<9;h++)a+=parseInt(o.charAt(h))*(10-h);let i=11-a%11;if((i>=10?0:i)!==parseInt(o.charAt(9)))return!1;a=0;for(let h=0;h<10;h++)a+=parseInt(o.charAt(h))*(11-h);return i=11-a%11,(i>=10?0:i)===parseInt(o.charAt(10))},Bt=r=>{const o=Me(r);return o?o.length!==11?{valid:!1,message:"CPF deve conter 11 d√≠gitos"}:/^(\d)\1{10}$/.test(o)?{valid:!1,message:"CPF inv√°lido"}:kt(o)?{valid:!0,formatted:_e(o),message:"CPF v√°lido"}:{valid:!1,message:"CPF inv√°lido. Verifique os n√∫meros digitados."}:{valid:!1,message:"CPF n√£o pode estar vazio"}},Et=[11,12,13,14,15,16,17,18,19,21,22,24,27,28,31,32,33,34,35,37,38,41,42,43,44,45,46,47,48,49,51,53,54,55,61,62,64,63,65,66,67,68,69,71,73,74,75,77,79,81,87,82,83,84,85,88,86,89,91,93,94,92,97,95,96,98,99],ze=r=>{const o=r.replace(/\D/g,"");return o.length===0?"":o.length<=2?`(${o}`:o.length<=6?`(${o.slice(0,2)}) ${o.slice(2)}`:o.length<=10?`(${o.slice(0,2)}) ${o.slice(2,6)}-${o.slice(6,10)}`:`(${o.slice(0,2)}) ${o.slice(2,7)}-${o.slice(7,11)}`},Le=r=>r.replace(/\D/g,""),Ft=r=>Et.includes(r),Pt=r=>{const o=Le(r);if(o.length===11)return parseInt(o.charAt(2))===9?"mobile":null;if(o.length===10){const a=parseInt(o.charAt(2));return a>=2&&a<=5?"landline":null}return null},St=r=>{const o=Le(r);if(!o)return{valid:!1,message:"Telefone n√£o pode estar vazio"};if(o.length<10)return{valid:!1,message:`Digite mais ${10-o.length} d√≠gitos`};if(o.length>11)return{valid:!1,message:"Telefone deve ter no m√°ximo 11 d√≠gitos"};const a=parseInt(o.slice(0,2));if(!Ft(a))return{valid:!1,message:"DDD inv√°lido"};const i=Pt(r);return i?/^(\d)\1+$/.test(o)?{valid:!1,message:"Telefone inv√°lido"}:{valid:!0,formatted:ze(o),type:i,message:i==="mobile"?"Celular v√°lido":"Telefone fixo v√°lido"}:o.length===11?{valid:!1,message:"Celular deve come√ßar com 9 ap√≥s o DDD"}:{valid:!1,message:"Formato de telefone inv√°lido"}},Oe={logoUrl:"",faviconUrl:"",logoAlignment:"left",showLogoAtTop:!0,logoWidth:180,logoHeight:50,backgroundColor:"#F9FAFB",backgroundGradient:"linear-gradient(180deg, #F9FAFB 0%, #F3F4F6 100%)",useGradient:!1,textColor:"#1F2937",headingColor:"#111827",noticeBarEnabled:!0,noticeBarMessage:"üéâ FRETE GR√ÅTIS para todo o Brasil em compras acima de R$ 199!",noticeBarBackgroundColor:"#1F2937",noticeBarTextColor:"#FFFFFF",noticeBarAnimation:!0,bannerEnabled:!1,bannerUrl:"",bannerHeight:200,cartDisplay:"drawer",cartBorderColor:"#E5E7EB",cartBackgroundColor:"#FFFFFF",quantityCircleColor:"#8B5CF6",quantityTextColor:"#FFFFFF",showCartIcon:!0,showCartReminder:!0,allowCouponEdit:!0,navigationSteps:3,nextStepStyle:"rounded",showProgressBar:!0,progressBarColor:"#8B5CF6",stepActiveColor:"#8B5CF6",stepInactiveColor:"#D1D5DB",stepCompletedColor:"#10B981",primaryButtonBackgroundColor:"#8B5CF6",primaryButtonTextColor:"#FFFFFF",primaryButtonBorderRadius:12,primaryButtonHover:!0,primaryButtonHoverColor:"#7C3AED",primaryButtonFlow:!0,primaryButtonShadow:!0,checkoutButtonBackgroundColor:"#10B981",checkoutButtonTextColor:"#FFFFFF",checkoutButtonBorderRadius:14,checkoutButtonHover:!0,checkoutButtonHoverColor:"#059669",checkoutButtonFlow:!0,checkoutButtonShadow:!0,checkoutButtonPulse:!0,highlightedBorderColor:"#8B5CF6",highlightedBorderTextColor:"#FFFFFF",highlightedBorderWidth:2,footerBackgroundColor:"#F3F4F6",footerTextColor:"#6B7280",showStoreName:!0,showPaymentMethods:!0,showCnpjCpf:!0,showContactEmail:!0,showAddress:!0,showPhone:!0,showPrivacyPolicy:!0,showTermsConditions:!0,showReturns:!0,footerLinkColor:"#8B5CF6",discountTagTextColor:"#FFFFFF",discountTagBackgroundColor:"#EF4444",discountTagBorderRadius:6,discountTagFontWeight:"700",useVisible:!0,expirationTime:60,forceRemovalTime:90,showCountdownTimer:!0,urgencyMessageColor:"#DC2626",urgencyBackgroundColor:"#FEE2E2",orderBumpEnabled:!0,orderBumpTextColor:"#374151",orderBumpBackgroundColor:"#FFFBEB",orderBumpPriceColor:"#DC2626",orderBumpBorderColor:"#FCD34D",orderBumpBorderWidth:2,orderBumpBorderRadius:12,orderBumpButtonTextColor:"#FFFFFF",orderBumpButtonBackgroundColor:"#EF4444",orderBumpShadow:!0,fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif",fontSize:{xs:"0.75rem",sm:"0.875rem",base:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem"},fontWeight:{normal:"400",medium:"500",semibold:"600",bold:"700"},spacing:{xs:"0.25rem",sm:"0.5rem",md:"1rem",lg:"1.5rem",xl:"2rem","2xl":"3rem"},borderRadius:{sm:"0.375rem",md:"0.5rem",lg:"0.75rem",xl:"1rem",full:"9999px"},boxShadow:{sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},inputBorderColor:"#D1D5DB",inputFocusBorderColor:"#8B5CF6",inputBackgroundColor:"#FFFFFF",inputHeight:48,inputBorderRadius:10,labelColor:"#374151",labelFontWeight:"600",placeholderColor:"#9CA3AF",cardBackgroundColor:"#FFFFFF",cardBorderColor:"#E5E7EB",cardBorderRadius:16,cardShadow:!0,cardPadding:"1.5rem",showTrustBadges:!0,trustBadgeColor:"#10B981",sslBadgeEnabled:!0,securityIconsEnabled:!0,language:"pt",currency:"BRL",presellPage:"cart-in-cart",requestCpfOnlyAtPayment:!1,requestBirthDate:!1,requestGender:!1,disableCarrot:!1,mobileBreakpoint:640,tabletBreakpoint:1024,desktopBreakpoint:1280,enableAnimations:!0,animationDuration:"300ms",animationTiming:"cubic-bezier(0.4, 0, 0.2, 1)",highContrast:!1,focusIndicatorColor:"#8B5CF6",reducedMotion:!1};function Fe(r){return{...Oe,...r}}const Pe=[{name:"Visa",pattern:/^4/,color:"from-blue-600 to-blue-800",logo:"üí≥"},{name:"Mastercard",pattern:/^5[1-5]/,color:"from-red-600 to-orange-600",logo:"üí≥"},{name:"Amex",pattern:/^3[47]/,color:"from-blue-500 to-blue-700",logo:"üí≥"},{name:"Elo",pattern:/^(4011|4312|4389|4514|4576|5041|5066|5067|6277|6362|6363|6504|6505|6516)/,color:"from-yellow-500 to-yellow-700",logo:"üí≥"}],Rt=({onCardDataChange:r,theme:o={},errors:a={}})=>{const[i,p]=m.useState({number:"",holderName:"",expiryMonth:"",expiryYear:"",cvv:""}),[f,h]=m.useState(null),[n,$]=m.useState(null),[b,S]=m.useState(!1);m.useEffect(()=>{const y=i.number.replace(/\s/g,""),c=Pe.find(g=>g.pattern.test(y));$((c==null?void 0:c.name)||null),r({...i,brand:c==null?void 0:c.name})},[i]);const E=y=>{var R;const g=y.replace(/\s/g,"").replace(/\D/g,"").slice(0,16);return((R=g.match(/.{1,4}/g))==null?void 0:R.join(" "))||g},k=y=>{const c=y.replace(/\D/g,"");return c.length>=2?c.slice(0,2)+"/"+c.slice(2,4):c},B=y=>y.replace(/\D/g,"").slice(0,4),D=y=>y.replace(/[^a-zA-Z√Ä-√ø\s]/g,"").toUpperCase().slice(0,50),w=y=>{const c=E(y.target.value);p({...i,number:c})},N=y=>{const c=k(y.target.value),[g,x]=c.split("/");p({...i,expiryMonth:g||"",expiryYear:x||""})},l=y=>{const c=D(y.target.value);p({...i,holderName:c})},C=y=>{const c=B(y.target.value);p({...i,cvv:c})},v=()=>{const y=Pe.find(c=>c.name===n);return(y==null?void 0:y.color)||"from-slate-700 to-slate-900"};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"relative h-56 mb-8",style:{perspective:"1000px"},children:e.jsxs("div",{className:T("absolute w-full h-full transition-transform duration-700 ease-in-out",b&&"[transform:rotateY(180deg)]"),style:{transformStyle:"preserve-3d"},children:[e.jsxs("div",{className:T("absolute w-full h-full rounded-2xl shadow-2xl p-6 text-white","bg-gradient-to-br",v(),"backdrop-blur-xl"),style:{backfaceVisibility:"hidden",boxShadow:"0 20px 60px -15px rgba(0, 0, 0, 0.3), 0 10px 20px -10px rgba(0, 0, 0, 0.2)"},children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsx("div",{className:"w-12 h-10 bg-gradient-to-br from-yellow-200 to-yellow-400 rounded-md opacity-80"}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs opacity-70 mb-1",children:n||"BANDEIRA"}),e.jsx(te,{className:"h-8 w-8 opacity-70"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:T("text-2xl font-mono tracking-wider transition-all duration-300",f==="number"&&"scale-105"),children:i.number||"‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢"})}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs opacity-70 mb-1",children:"Nome do Titular"}),e.jsx("div",{className:T("text-sm font-semibold transition-all duration-300 truncate",f==="name"&&"scale-105"),children:i.holderName||"SEU NOME AQUI"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs opacity-70 mb-1 text-right",children:"Validade"}),e.jsx("div",{className:T("text-sm font-mono transition-all duration-300",f==="expiry"&&"scale-105"),children:i.expiryMonth&&i.expiryYear?`${i.expiryMonth}/${i.expiryYear}`:"MM/AA"})]})]})]}),e.jsxs("div",{className:T("absolute w-full h-full rounded-2xl shadow-2xl bg-gradient-to-br",v(),"backdrop-blur-xl"),style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)",boxShadow:"0 20px 60px -15px rgba(0, 0, 0, 0.3), 0 10px 20px -10px rgba(0, 0, 0, 0.2)"},children:[e.jsx("div",{className:"w-full h-12 bg-black/40 mt-6"}),e.jsxs("div",{className:"px-6 mt-6",children:[e.jsxs("div",{className:"bg-white rounded p-3 flex justify-end items-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mr-2",children:"CVV"}),e.jsx("div",{className:"text-lg font-mono tracking-wider text-gray-800",children:i.cvv||"‚Ä¢‚Ä¢‚Ä¢"})]}),e.jsx("div",{className:"text-xs text-white/70 mt-2 text-right",children:"C√≥digo de seguran√ßa"})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(_,{htmlFor:"cardNumber",style:{color:o.labelColor},className:"flex items-center gap-2 mb-2",children:[e.jsx(te,{className:"h-4 w-4"}),"N√∫mero do Cart√£o",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(z,{id:"cardNumber",type:"text",placeholder:"1234 5678 9012 3456",value:i.number,onChange:w,onFocus:()=>h("number"),onBlur:()=>h(null),maxLength:19,className:"text-lg font-mono",style:{backgroundColor:o.inputBackgroundColor,borderColor:f==="number"?o.primaryButtonBackgroundColor:o.inputBorderColor,borderRadius:o.inputBorderRadius,color:o.textColor,borderWidth:f==="number"?"2px":"1px",transition:"all 0.3s ease"}}),a.cardNumber&&e.jsxs("div",{className:"flex items-center gap-1 text-red-500 text-sm mt-1",children:[e.jsx(X,{className:"h-3 w-3"}),a.cardNumber]})]}),e.jsxs("div",{children:[e.jsxs(_,{htmlFor:"cardName",style:{color:o.labelColor},className:"mb-2 block",children:["Nome do Titular (como est√° no cart√£o)",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(z,{id:"cardName",type:"text",placeholder:"NOME COMPLETO",value:i.holderName,onChange:l,onFocus:()=>h("name"),onBlur:()=>h(null),className:"uppercase",style:{backgroundColor:o.inputBackgroundColor,borderColor:f==="name"?o.primaryButtonBackgroundColor:o.inputBorderColor,borderRadius:o.inputBorderRadius,color:o.textColor,borderWidth:f==="name"?"2px":"1px",transition:"all 0.3s ease"}}),a.cardName&&e.jsxs("div",{className:"flex items-center gap-1 text-red-500 text-sm mt-1",children:[e.jsx(X,{className:"h-3 w-3"}),a.cardName]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(_,{htmlFor:"cardExpiry",style:{color:o.labelColor},className:"mb-2 block",children:["Validade",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(z,{id:"cardExpiry",type:"text",placeholder:"MM/AA",value:i.expiryMonth&&i.expiryYear?`${i.expiryMonth}/${i.expiryYear}`:"",onChange:N,onFocus:()=>h("expiry"),onBlur:()=>h(null),maxLength:5,className:"font-mono",style:{backgroundColor:o.inputBackgroundColor,borderColor:f==="expiry"?o.primaryButtonBackgroundColor:o.inputBorderColor,borderRadius:o.inputBorderRadius,color:o.textColor,borderWidth:f==="expiry"?"2px":"1px",transition:"all 0.3s ease"}}),a.cardExpiry&&e.jsxs("div",{className:"flex items-center gap-1 text-red-500 text-sm mt-1",children:[e.jsx(X,{className:"h-3 w-3"}),a.cardExpiry]})]}),e.jsxs("div",{children:[e.jsxs(_,{htmlFor:"cardCvv",style:{color:o.labelColor},className:"flex items-center gap-2 mb-2",children:[e.jsx(J,{className:"h-4 w-4"}),"CVV",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(z,{id:"cardCvv",type:"text",placeholder:"123",value:i.cvv,onChange:C,onFocus:()=>{h("cvv"),S(!0)},onBlur:()=>{h(null),S(!1)},maxLength:4,className:"font-mono",style:{backgroundColor:o.inputBackgroundColor,borderColor:f==="cvv"?o.primaryButtonBackgroundColor:o.inputBorderColor,borderRadius:o.inputBorderRadius,color:o.textColor,borderWidth:f==="cvv"?"2px":"1px",transition:"all 0.3s ease"}}),a.cardCvv&&e.jsxs("div",{className:"flex items-center gap-1 text-red-500 text-sm mt-1",children:[e.jsx(X,{className:"h-3 w-3"}),a.cardCvv]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800",children:[e.jsx(J,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),e.jsx("p",{className:"text-xs text-green-700 dark:text-green-300",children:"Seus dados s√£o criptografados e protegidos"})]})]})]})},Tt=({pixData:r,onPaymentConfirmed:o,theme:a={}})=>{const[i,p]=m.useState(!1),[f,h]=m.useState(""),[n,$]=m.useState(0),[b,S]=m.useState(!1),[E,k]=m.useState(!0);m.useEffect(()=>{r!=null&&r.qrCode?ct.toDataURL(r.qrCode,{width:400,margin:1,color:{dark:"#000000",light:"#FFFFFF"},errorCorrectionLevel:"H"}).then(N=>{h(N)}).catch(N=>{console.error("Erro ao gerar QR Code:",N)}):r!=null&&r.qrCodeBase64&&h(r.qrCodeBase64)},[r]),m.useEffect(()=>{if(!(r!=null&&r.expiresAt))return;const N=()=>{const C=new Date().getTime(),y=new Date(r.expiresAt).getTime()-C;if(y<=0){$(0);return}$(Math.floor(y/1e3))};N();const l=setInterval(N,1e3);return()=>clearInterval(l)},[r==null?void 0:r.expiresAt]),m.useEffect(()=>{if(!r)return;const l=setInterval(async()=>{S(!0),setTimeout(()=>{S(!1)},1e3)},5e3);return()=>clearInterval(l)},[r]);const B=N=>{const l=Math.floor(N/60),C=N%60;return`${l.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}`},D=async()=>{if(r!=null&&r.qrCode)try{await navigator.clipboard.writeText(r.qrCode),p(!0),setTimeout(()=>p(!1),3e3)}catch(N){console.error("Erro ao copiar c√≥digo:",N)}};if(!r)return e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-green-400 to-green-600 mb-4 animate-pulse",children:e.jsx(ce,{className:"h-10 w-10 text-white"})}),e.jsx("h3",{className:"text-xl md:text-2xl font-bold mb-2",style:{color:a.headingColor},children:"Gerando c√≥digo PIX..."}),e.jsx("p",{className:"text-sm md:text-base opacity-70",style:{color:a.textColor},children:"Aguarde enquanto preparamos seu pagamento"})]});const w=n<=0&&r.expiresAt;return e.jsxs("div",{className:"space-y-4 md:space-y-6 max-w-2xl mx-auto px-2 md:px-0",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 md:w-20 md:h-20 rounded-full bg-gradient-to-br from-green-400 to-green-600 shadow-lg mb-3",children:e.jsx(ce,{className:"h-8 w-8 md:h-10 md:w-10 text-white"})}),e.jsx("h2",{className:"text-2xl md:text-3xl font-bold",style:{color:a.headingColor},children:"Pague com PIX"}),e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsxs("span",{className:"text-3xl md:text-4xl font-bold text-green-600 dark:text-green-400",children:["R$ ",r.amount.toFixed(2)]})})]}),r.expiresAt&&e.jsxs("div",{className:T("flex items-center justify-center gap-3 p-4 md:p-5 rounded-2xl border-2 transition-all shadow-sm",w?"bg-red-50 border-red-300 dark:bg-red-950/30 dark:border-red-800":n<60?"bg-yellow-50 border-yellow-300 dark:bg-yellow-950/30 dark:border-yellow-800 animate-pulse":"bg-blue-50 border-blue-300 dark:bg-blue-950/30 dark:border-blue-800"),children:[e.jsx(dt,{className:T("h-6 w-6 md:h-7 md:w-7",w?"text-red-600 dark:text-red-400":n<60?"text-yellow-600 dark:text-yellow-400":"text-blue-600 dark:text-blue-400")}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:gap-2",children:[e.jsx("span",{className:T("font-mono text-xl md:text-2xl font-bold",w?"text-red-700 dark:text-red-300":n<60?"text-yellow-700 dark:text-yellow-300":"text-blue-700 dark:text-blue-300"),children:w?"Expirado":B(n)}),!w&&e.jsx("span",{className:T("text-sm md:text-base",n<60?"text-yellow-600 dark:text-yellow-400":"text-blue-600 dark:text-blue-400"),children:"restantes"})]})]}),e.jsxs("div",{className:"flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl",children:[e.jsxs("button",{onClick:()=>k(!0),className:T("flex-1 py-3 px-4 rounded-lg font-semibold text-sm md:text-base transition-all",E?"bg-white dark:bg-gray-900 shadow-md":"hover:bg-gray-200 dark:hover:bg-gray-700"),style:E?{color:a.primaryButtonBackgroundColor}:{color:a.textColor},children:[e.jsx(ce,{className:"h-4 w-4 md:h-5 md:w-5 inline mr-2"}),"QR Code"]}),e.jsxs("button",{onClick:()=>k(!1),className:T("flex-1 py-3 px-4 rounded-lg font-semibold text-sm md:text-base transition-all",E?"hover:bg-gray-200 dark:hover:bg-gray-700":"bg-white dark:bg-gray-900 shadow-md"),style:E?{color:a.textColor}:{color:a.primaryButtonBackgroundColor},children:[e.jsx(ue,{className:"h-4 w-4 md:h-5 md:w-5 inline mr-2"}),"Copia e Cola"]})]}),E&&e.jsx(O,{className:"overflow-hidden border-2 shadow-lg",children:e.jsx(V,{className:"p-6 md:p-8",children:e.jsxs("div",{className:"text-center space-y-4",children:[f?e.jsx("div",{className:"inline-block p-4 md:p-6 bg-white rounded-2xl shadow-xl",children:e.jsx("img",{src:f,alt:"QR Code PIX",className:"w-64 h-64 md:w-80 md:h-80 mx-auto"})}):e.jsx("div",{className:"w-64 h-64 md:w-80 md:h-80 mx-auto bg-gray-100 dark:bg-gray-800 rounded-2xl flex items-center justify-center",children:e.jsx(Re,{className:"h-12 w-12 text-gray-400 animate-spin"})}),b&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-blue-600 dark:text-blue-400",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"}),"Verificando pagamento..."]}),e.jsx("p",{className:"text-sm md:text-base font-medium",style:{color:a.textColor},children:"Abra o app do seu banco e escaneie o QR Code"})]})})}),!E&&e.jsx(O,{className:"overflow-hidden border-2 shadow-lg",children:e.jsxs(V,{className:"p-6 md:p-8 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm md:text-base font-semibold block mb-3",style:{color:a.textColor},children:"C√≥digo PIX Copia e Cola:"}),e.jsx("div",{className:"p-4 md:p-5 bg-gray-50 dark:bg-gray-900 rounded-xl border-2 border-dashed border-gray-300 dark:border-gray-700 overflow-hidden",style:{color:a.textColor},children:e.jsx("code",{className:"text-xs md:text-sm font-mono break-all block",children:r.qrCode})})]}),e.jsx(W,{onClick:D,className:"w-full gap-2 h-12 md:h-14 text-base md:text-lg font-bold shadow-lg hover:shadow-xl transition-all",style:{backgroundColor:i?"#10b981":a.primaryButtonBackgroundColor,color:a.primaryButtonTextColor},children:i?e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-5 w-5 md:h-6 md:w-6"}),"C√≥digo Copiado!"]}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"h-5 w-5 md:h-6 md:w-6"}),"Copiar C√≥digo PIX"]})})]})}),e.jsx(O,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20 border-2 border-blue-200 dark:border-blue-800 shadow-md",children:e.jsx(V,{className:"p-5 md:p-6",children:e.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[e.jsx("div",{className:"shrink-0 mt-1",children:e.jsx(me,{className:"h-7 w-7 md:h-8 md:w-8 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsx("h4",{className:"font-bold text-base md:text-lg",style:{color:a.headingColor},children:"Como pagar:"}),e.jsxs("ol",{className:"space-y-2 md:space-y-3 text-sm md:text-base",style:{color:a.textColor},children:[e.jsxs("li",{className:"flex gap-2 md:gap-3",children:[e.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-6 h-6 md:w-7 md:h-7 rounded-full bg-blue-600 text-white text-xs md:text-sm font-bold",children:"1"}),e.jsx("span",{className:"pt-0.5",children:"Abra o app do seu banco ou carteira digital"})]}),e.jsxs("li",{className:"flex gap-2 md:gap-3",children:[e.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-6 h-6 md:w-7 md:h-7 rounded-full bg-blue-600 text-white text-xs md:text-sm font-bold",children:"2"}),e.jsxs("span",{className:"pt-0.5",children:["Escolha ",e.jsx("strong",{children:"Pix Copia e Cola"})," ou"," ",e.jsx("strong",{children:"Ler QR Code"})]})]}),e.jsxs("li",{className:"flex gap-2 md:gap-3",children:[e.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-6 h-6 md:w-7 md:h-7 rounded-full bg-blue-600 text-white text-xs md:text-sm font-bold",children:"3"}),e.jsx("span",{className:"pt-0.5",children:"Cole o c√≥digo ou escaneie o QR Code acima"})]}),e.jsxs("li",{className:"flex gap-2 md:gap-3",children:[e.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-6 h-6 md:w-7 md:h-7 rounded-full bg-blue-600 text-white text-xs md:text-sm font-bold",children:"4"}),e.jsx("span",{className:"pt-0.5",children:"Confirme o pagamento e pronto! ‚úÖ Aprova√ß√£o autom√°tica"})]})]})]})]})})}),e.jsxs("div",{className:"flex items-center gap-3 p-4 md:p-5 bg-green-50 dark:bg-green-950/20 rounded-xl border border-green-200 dark:border-green-800",children:[e.jsx(Te,{className:"h-5 w-5 md:h-6 md:w-6 text-green-600 dark:text-green-400 flex-shrink-0"}),e.jsx("p",{className:"text-xs md:text-sm text-green-700 dark:text-green-300 font-medium",children:"Pagamento 100% seguro e aprova√ß√£o instant√¢nea"})]}),w&&e.jsx(O,{className:"bg-red-50 dark:bg-red-950/20 border-2 border-red-200 dark:border-red-800",children:e.jsx(V,{className:"p-5 md:p-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(X,{className:"h-6 w-6 text-red-600 dark:text-red-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-700 dark:text-red-300 font-bold mb-2 text-sm md:text-base",children:"C√≥digo PIX Expirado"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:'Este c√≥digo expirou. Clique em "Gerar Novo Pagamento" abaixo para criar um novo c√≥digo PIX.'})]})]})})})]})},At=({boletoData:r,theme:o={}})=>{const[a,i]=m.useState(!1),[p,f]=m.useState(0);m.useEffect(()=>{if(!(r!=null&&r.dueDate))return;(()=>{const D=new Date;D.setHours(0,0,0,0);const w=new Date(r.dueDate);w.setHours(0,0,0,0);const N=w.getTime()-D.getTime(),l=Math.ceil(N/(1e3*60*60*24));f(l)})()},[r==null?void 0:r.dueDate]);const h=async()=>{if(r!=null&&r.digitableLine)try{await navigator.clipboard.writeText(r.digitableLine),i(!0),setTimeout(()=>i(!1),3e3)}catch(B){console.error("Erro ao copiar c√≥digo:",B)}},n=()=>{if(r!=null&&r.boletoUrl)window.open(r.boletoUrl,"_blank");else if(r!=null&&r.pdf){const B=document.createElement("a");B.href=r.pdf,B.download=`boleto-${Date.now()}.pdf`,document.body.appendChild(B),B.click(),document.body.removeChild(B)}},$=()=>{if(r!=null&&r.boletoUrl){const B=window.open(r.boletoUrl,"_blank");B==null||B.print()}},b=B=>new Date(B).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}),S=B=>B.replace(/^(\d{5})(\d{5})(\d{5})(\d{6})(\d{5})(\d{6})(\d)(\d{14})$/,"$1.$2 $3.$4 $5.$6 $7 $8");if(!r)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-orange-100 dark:bg-orange-900/20 mb-4",children:e.jsx(Ee,{className:"h-8 w-8 text-orange-600 dark:text-orange-400 animate-pulse"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:o.headingColor},children:"Gerando boleto..."}),e.jsx("p",{className:"text-sm opacity-70",style:{color:o.textColor},children:"Aguarde enquanto preparamos seu boleto banc√°rio"})]});const E=p<0,k=p<=3&&p>=0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:T("flex items-center justify-between p-4 rounded-xl border-2 transition-all",E?"bg-red-50 border-red-200 dark:bg-red-950/20 dark:border-red-800":k?"bg-yellow-50 border-yellow-200 dark:bg-yellow-950/20 dark:border-yellow-800":"bg-blue-50 border-blue-200 dark:bg-blue-950/20 dark:border-blue-800"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(mt,{className:T("h-6 w-6",E?"text-red-600 dark:text-red-400":k?"text-yellow-600 dark:text-yellow-400":"text-blue-600 dark:text-blue-400")}),e.jsxs("div",{children:[e.jsx("p",{className:T("text-sm font-medium",E?"text-red-700 dark:text-red-300":k?"text-yellow-700 dark:text-yellow-300":"text-blue-700 dark:text-blue-300"),children:E?"Vencido":k?"Vence em breve":"Vencimento"}),e.jsx("p",{className:T("text-lg font-bold",E?"text-red-800 dark:text-red-200":k?"text-yellow-800 dark:text-yellow-200":"text-blue-800 dark:text-blue-200"),children:b(r.dueDate)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm opacity-70",style:{color:o.textColor},children:"Valor"}),e.jsxs("p",{className:"text-xl font-bold",style:{color:o.headingColor},children:["R$ ",r.amount.toFixed(2)]})]})]}),e.jsx(O,{className:"overflow-hidden border-2",children:e.jsx(V,{className:"p-8",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-orange-400 to-orange-600 mb-2",children:e.jsx(Ee,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold mb-2",style:{color:o.headingColor},children:"Boleto Banc√°rio"}),e.jsx("p",{className:"text-sm opacity-70",style:{color:o.textColor},children:"Pague em qualquer banco, lot√©rica ou internet banking"})]}),e.jsxs("div",{className:"py-6 px-4 bg-white dark:bg-gray-900 rounded-xl border-2 border-dashed border-gray-300 dark:border-gray-700",children:[e.jsx("div",{className:"flex justify-center items-end gap-[2px] h-20",children:r.barcode.split("").map((B,D)=>{const w=[60,80,70,90,75,85,65,95,70,80],N=w[parseInt(B)%w.length];return e.jsx("div",{className:"w-1 bg-black dark:bg-white",style:{height:`${N}%`}},D)})}),e.jsx("p",{className:"text-xs font-mono mt-3 text-gray-500 dark:text-gray-400",children:r.barcode})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs(W,{onClick:n,variant:"outline",className:"gap-2 h-12 font-semibold",disabled:!r.boletoUrl&&!r.pdf,children:[e.jsx(ut,{className:"h-4 w-4"}),"Baixar Boleto"]}),e.jsxs(W,{onClick:$,variant:"outline",className:"gap-2 h-12 font-semibold",disabled:!r.boletoUrl,children:[e.jsx(bt,{className:"h-4 w-4"}),"Imprimir"]})]})]})})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium block",style:{color:o.textColor},children:"Linha digit√°vel (para pagar no internet banking):"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"px-4 py-4 bg-gray-50 dark:bg-gray-900 rounded-lg border",style:{color:o.textColor},children:e.jsx("code",{className:"text-sm font-mono block text-center",children:S(r.digitableLine)})}),e.jsx(W,{onClick:h,className:"w-full gap-2 h-12 font-semibold",style:{backgroundColor:o.primaryButtonBackgroundColor,color:o.primaryButtonTextColor},children:a?e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-4 w-4"}),"C√≥digo Copiado!"]}):e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"h-4 w-4"}),"Copiar C√≥digo"]})})]})]}),e.jsx(O,{className:"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-950/20 dark:to-amber-950/20 border-orange-200 dark:border-orange-800",children:e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-lg flex items-center gap-2",style:{color:o.headingColor},children:[e.jsx(xt,{className:"h-5 w-5"}),"Como pagar o boleto:"]}),e.jsxs("ol",{className:"space-y-3 text-sm",style:{color:o.textColor},children:[e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-6 h-6 rounded-full bg-orange-600 text-white text-xs font-bold",children:"1"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Baixe ou imprima"})," o boleto usando os bot√µes acima"]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-6 h-6 rounded-full bg-orange-600 text-white text-xs font-bold",children:"2"}),e.jsxs("span",{children:["Pague no ",e.jsx("strong",{children:"banco"}),", ",e.jsx("strong",{children:"lot√©rica"})," ou"," ",e.jsx("strong",{children:"internet banking"})," at√© a data de vencimento"]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-6 h-6 rounded-full bg-orange-600 text-white text-xs font-bold",children:"3"}),e.jsxs("span",{children:["No internet banking, use a"," ",e.jsx("strong",{children:"linha digit√°vel"})," acima"]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-6 h-6 rounded-full bg-orange-600 text-white text-xs font-bold",children:"4"}),e.jsxs("span",{children:["A confirma√ß√£o do pagamento pode levar at√©"," ",e.jsx("strong",{children:"2 dias √∫teis"})]})]})]})]})})}),E&&e.jsx(O,{className:"bg-red-50 dark:bg-red-950/20 border-red-200 dark:border-red-800",children:e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(X,{className:"h-5 w-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-700 dark:text-red-300 font-medium mb-1",children:"Boleto Vencido"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:"Este boleto est√° vencido. Para pag√°-lo, voc√™ precisar√° gerar uma segunda via ou entrar em contato com o suporte."})]})]})})}),k&&!E&&e.jsx(O,{className:"bg-yellow-50 dark:bg-yellow-950/20 border-yellow-200 dark:border-yellow-800",children:e.jsx(V,{className:"p-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(X,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-700 dark:text-yellow-300 font-medium mb-1",children:"Vencimento Pr√≥ximo"}),e.jsxs("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:["Seu boleto vence em ",p," ",p===1?"dia":"dias",". N√£o se esque√ßa de pag√°-lo para evitar juros."]})]})]})})})]})},It=r=>r.replace(/\D/g,""),Se=r=>It(r),qt=({injectedOrderId:r,injectedTheme:o,previewMode:a=!1})=>{var we;const{orderId:i}=tt(),p=r||i||null,f=ot(),{toast:h}=rt(),[n,$]=m.useState(null),[b,S]=m.useState(null),[E,k]=m.useState(null),[B,D]=m.useState(!0),[w,N]=m.useState(!1),[l,C]=m.useState(1),[v,y]=m.useState(!1),[c,g]=m.useState(!1),[x,R]=m.useState({name:"",email:"",phone:"",document:""}),[u,L]=m.useState({street:"",number:"",complement:"",neighborhood:"",city:"",state:"",zipCode:""}),[F,he]=m.useState("PIX"),[ge,Ve]=m.useState(1),[G,Ue]=m.useState(null),[Q,pe]=m.useState(null),[K,le]=m.useState(null),[Ge,$t]=m.useState({}),[Dt,_t]=m.useState(!1),{calculation:Z,activeDiscount:oe,getDiscountLabel:We,getDiscountInfoForMethod:He}=Ct({userId:(b==null?void 0:b.userId)||null,paymentMethod:F,purchaseAmount:(n==null?void 0:n.subtotal)||0}),U=Z.hasDiscount?Z.finalTotal+((n==null?void 0:n.shipping)||0)+((n==null?void 0:n.tax)||0):(n==null?void 0:n.total)||0,{initialized:Y,trackPageView:fe,trackInitiateCheckout:be,trackAddPaymentInfo:Ce,trackPurchase:Xe}=yt((b==null?void 0:b.userId)||null);m.useEffect(()=>{Y&&b&&fe()},[Y,b,fe]),m.useEffect(()=>{Y&&l===3&&n&&be(U,n.items||[])},[Y,l,U,n,be]),m.useEffect(()=>{Y&&F&&l===3&&Ce(U,F)},[Y,F,U,l,Ce]);const{markAsRecovered:ye,isMonitoring:je}=jt({orderId:p,currentStep:l,customerData:x,addressData:u,checkoutData:n,userId:(b==null?void 0:b.userId)||null});m.useEffect(()=>{je&&console.log("üîç Monitoramento de abandono ativo")},[je]),m.useEffect(()=>{const s=localStorage.getItem(`checkout-${i}`);if(s)try{const d=JSON.parse(s);d.currentStep&&C(d.currentStep),d.customerData&&R(d.customerData),d.addressData&&L(d.addressData),d.paymentMethod&&he(d.paymentMethod),d.pixData&&pe(d.pixData),d.boletoData&&le(d.boletoData)}catch(d){console.error("Erro ao recuperar estado:",d)}},[i]),m.useEffect(()=>{if(i){const s={currentStep:l,customerData:x,addressData:u,paymentMethod:F,pixData:Q,boletoData:K,savedAt:new Date().toISOString()};localStorage.setItem(`checkout-${i}`,JSON.stringify(s))}},[l,x,u,F,Q,K,i]);const t=o?Fe(o):E!=null&&E.theme?Fe(E.theme):Oe;m.useEffect(()=>{p&&Ye()},[p]);const Ye=async()=>{var s;try{D(!0);const{data:d,error:M}=await A.from("Order").select("*").eq("id",p).single();if(M||!d)throw new Error("Pedido n√£o encontrado");const ee=Array.isArray(d.items)?d.items:[],se=Array.isArray((s=d.metadata)==null?void 0:s.originalProducts)?d.metadata.originalProducts:[],j={orderId:d.id,products:ee.map(q=>{const P=se.find(I=>(I==null?void 0:I.variantId)&&String(I.variantId)===String(q.variantId)||(I==null?void 0:I.productId)&&String(I.productId)===String(q.productId)||(I==null?void 0:I.id)&&(String(I.id)===String(q.productId)||String(I.id)===String(q.id)));return{id:q.productId||q.id,name:q.name||(P==null?void 0:P.name)||(P==null?void 0:P.title)||"Produto",price:Number(q.price)||0,quantity:Number(q.quantity)||1,image:q.image||(P==null?void 0:P.image)||(Array.isArray(P==null?void 0:P.images)?P.images[0]:"")||"",sku:q.sku||(P==null?void 0:P.sku)||""}}),total:Number(d.total)||0,subtotal:Number(d.subtotal)||0,tax:Number(d.tax)||0,shipping:Number(d.shipping)||0,discount:Number(d.discount)||0};if($(j),S(d),!a&&d.userId)try{const q=await pt.loadCustomization(d.userId);q&&k(q)}catch{console.log("Usando tema padr√£o")}}catch(d){console.error("Erro ao carregar checkout:",d),h({title:"Erro ao carregar checkout",description:d.message||"Tente novamente mais tarde",variant:"destructive"})}finally{D(!1)}},Qe=async s=>{const d=s.replace(/\D/g,"");if(d.length===8){y(!0);try{const M=await Nt(d);M?(L(ee=>({...ee,street:M.street||"",neighborhood:M.neighborhood||"",city:M.city||"",state:M.state||""})),h({title:"CEP encontrado!",description:`${M.city} - ${M.state}`})):h({title:"CEP n√£o encontrado",description:"Verifique o CEP digitado e tente novamente",variant:"destructive"})}catch(M){console.error("Erro ao buscar CEP:",M),h({title:"Erro ao buscar CEP",description:"Tente novamente mais tarde",variant:"destructive"})}finally{y(!1)}}},ve=s=>{if(s===1){if(!x.name||!x.email||!x.phone)return h({title:"Dados incompletos",description:"Preencha todos os campos obrigat√≥rios",variant:"destructive"}),!1;if(t.requestCpfOnlyAtPayment===!1&&!x.document)return h({title:"CPF obrigat√≥rio",description:"Por favor, informe seu CPF",variant:"destructive"}),!1}return s===2&&(!u.zipCode||!u.street||!u.number||!u.neighborhood||!u.city||!u.state)?(h({title:"Endere√ßo incompleto",description:"Preencha todos os campos obrigat√≥rios",variant:"destructive"}),!1):!0},Ke=()=>{ve(l)&&(C(l+1),window.scrollTo({top:0,behavior:"smooth"}))},Je=()=>{C(l-1),window.scrollTo({top:0,behavior:"smooth"})},Ze=async()=>{var s,d;if(ve(l))try{N(!0);const M=F.toLowerCase();if(console.log("üîç [DEBUG] Payment method original:",F),console.log("üîç [DEBUG] Payment method normalized:",M),F==="CREDIT_CARD"&&(!G||!G.number||!G.holderName||!G.cvv)){h({title:"Dados do cart√£o incompletos",description:"Por favor, preencha todos os dados do cart√£o.",variant:"destructive"}),N(!1);return}const ee=F==="CREDIT_CARD"&&G?{number:G.number.replace(/\s/g,""),holderName:G.holderName,expiryMonth:G.expiryMonth,expiryYear:G.expiryYear,cvv:G.cvv}:void 0;console.log("üìù [UPDATE] Atualizando pedido com dados do cadastro...");const{error:se}=await A.from("Order").update({customerName:x.name,customerEmail:x.email,customerPhone:x.phone,customerCpf:Se(x.document),shippingAddress:{street:u.street,number:u.number,complement:u.complement||"",neighborhood:u.neighborhood,city:u.city,state:u.state,zipCode:u.zipCode,country:"BR"},billingAddress:{street:u.street,number:u.number,complement:u.complement||"",neighborhood:u.neighborhood,city:u.city,state:u.state,zipCode:u.zipCode,country:"BR"},paymentMethod:F,updatedAt:new Date().toISOString()}).eq("id",p);if(se){console.error("‚ùå [UPDATE] Erro ao atualizar pedido:",se),h({title:"Erro ao salvar dados",description:"N√£o foi poss√≠vel salvar os dados do pedido",variant:"destructive"}),N(!1);return}console.log("‚úÖ [UPDATE] Pedido atualizado com sucesso!",{orderId:p,customerName:x.name,customerEmail:x.email});const{data:j,error:q}=await A.functions.invoke("process-payment",{body:{userId:b==null?void 0:b.userId,orderId:p,amount:(n==null?void 0:n.total)||0,currency:"BRL",paymentMethod:M,customer:{name:x.name,email:x.email,document:Se(x.document),phone:x.phone},billingAddress:{street:u.street,number:u.number,complement:u.complement,neighborhood:u.neighborhood,city:u.city,state:u.state,zipCode:u.zipCode},card:ee,installments:F==="CREDIT_CARD"?ge:1}});if(console.log("üîç [DEBUG] Resposta process-payment:",{data:j,error:q}),console.log("üîç [DEBUG] data.success:",j==null?void 0:j.success),console.log("üîç [DEBUG] paymentMethod:",F),console.log("üîç [DEBUG] data.pixData:",j==null?void 0:j.pixData),console.log("üîç [DEBUG] data.transactionId:",j==null?void 0:j.transactionId),console.log("üîç [DEBUG] effectiveOrderId:",p),!(j!=null&&j.success)){if(j!=null&&j.requiresSetup||(j==null?void 0:j.error)==="NO_GATEWAY_CONFIGURED"){h({title:"Gateway n√£o configurado",description:(j==null?void 0:j.hint)||"Configure um gateway de pagamento primeiro",variant:"destructive",duration:1e4}),N(!1);return}throw new Error((j==null?void 0:j.message)||(j==null?void 0:j.error)||"Erro ao processar pagamento")}if(q)throw q;try{console.log("üîÑ [SHOPIFY] Sincronizando pedido com Shopify...",{orderId:p});const{data:P,error:I}=await A.functions.invoke("sync-order-to-shopify",{body:{orderId:p,userId:b==null?void 0:b.userId}});P!=null&&P.success?console.log("‚úÖ [SHOPIFY] Pedido sincronizado com sucesso!",{shopifyOrderId:P.shopifyOrderId,shopifyOrderNumber:P.shopifyOrderNumber,adminUrl:P.shopifyAdminUrl}):I&&console.warn("‚ö†Ô∏è [SHOPIFY] Erro ao sincronizar (n√£o-cr√≠tico):",I)}catch(P){console.warn("‚ö†Ô∏è [SHOPIFY] Erro ao tentar sincronizar com Shopify:",P)}if(j.success)if(Y&&(Xe(p,U,(n==null?void 0:n.items)||[],{email:x.email,phone:x.phone,firstName:(s=x.name)==null?void 0:s.split(" ")[0],lastName:(d=x.name)==null?void 0:d.split(" ").slice(1).join(" "),city:u.city,state:u.state,zipCode:u.zipCode,country:"BR"}),console.log("üìä Purchase event tracked:",p,U)),ye&&(await ye(),console.log("‚úÖ Carrinho marcado como recuperado")),F==="CREDIT_CARD")h({title:"Pagamento processado!",description:"Redirecionando para confirma√ß√£o..."}),setTimeout(()=>{f(`/checkout/success/${j.transactionId||p}`)},1500);else if(F==="PIX"&&j.pixData){console.log("‚úÖ [DEBUG] Entrando no bloco de PIX"),console.log("‚úÖ [DEBUG] Vai redirecionar para:",`/pix/${p}/${j.transactionId}`),console.log("‚úÖ [DEBUG] pixData recebido:",j.pixData);const P={qrCode:j.pixData.qrCode||"",qrCodeBase64:j.pixData.qrCodeBase64||"",expiresAt:j.pixData.expiresAt||"",amount:(n==null?void 0:n.total)||0,transactionId:j.transactionId||""};try{const I=JSON.stringify(P);localStorage.setItem(`pix-${p}`,I),console.log("‚úÖ [DEBUG] Dados salvos no localStorage")}catch(I){console.error("‚ùå [DEBUG] Erro ao salvar no localStorage:",I)}h({title:"PIX gerado com sucesso!",description:"Redirecionando para pagamento..."}),console.log("üöÄ [DEBUG] Iniciando redirecionamento..."),setTimeout(()=>{console.log("üöÄ [DEBUG] Executando navigate..."),f(`/pix/${p}/${j.transactionId}`)},1e3)}else F==="BOLETO"&&j.boletoData?(le(j.boletoData),localStorage.setItem(`boleto-${p}`,JSON.stringify(j.boletoData)),h({title:"Boleto gerado!",description:"Baixe o boleto para completar o pagamento."})):(console.log("‚ùå [DEBUG] N√ÉO entrou em nenhum bloco de pagamento"),console.log("‚ùå [DEBUG] Motivo:"),console.log("   - paymentMethod:",F),console.log("   - paymentMethod === 'CREDIT_CARD'?",F==="CREDIT_CARD"),console.log("   - paymentMethod === 'PIX'?",F==="PIX"),console.log("   - data.pixData existe?",!!j.pixData),console.log("   - paymentMethod === 'BOLETO'?",F==="BOLETO"),console.log("   - data.boletoData existe?",!!j.boletoData))}catch(M){console.error("Erro ao processar checkout:",M),h({title:"Erro ao processar pagamento",description:M.message||"Tente novamente mais tarde",variant:"destructive"})}finally{N(!1)}};if(B)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:t.backgroundColor},children:e.jsxs("div",{className:"text-center",children:[e.jsx(ie,{className:"h-12 w-12 animate-spin mx-auto mb-4",style:{color:t.primaryButtonBackgroundColor}}),e.jsx("p",{style:{color:t.textColor},children:"Carregando checkout..."})]})});if(!n)return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{backgroundColor:t.backgroundColor},children:e.jsxs(Ae,{variant:"destructive",className:"max-w-md",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx(Ie,{children:"Pedido n√£o encontrado. Verifique o link e tente novamente."})]})});const et=3,re=[{number:1,label:"Dados",icon:st},{number:2,label:"Endere√ßo",icon:ht},{number:3,label:"Pagamento",icon:te}];return e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:t.backgroundColor,color:t.textColor,fontFamily:t.fontFamily},children:[t.noticeBarEnabled&&t.noticeBarMessage&&e.jsx("div",{className:"py-3 px-4 text-center text-sm md:text-base font-medium",style:{backgroundColor:t.noticeBarBackgroundColor,color:t.noticeBarTextColor},children:t.noticeBarMessage}),e.jsx("header",{className:"border-b sticky top-0 z-30 backdrop-blur-lg",style:{backgroundColor:t.useGradient?`linear-gradient(135deg, ${t.backgroundColor}, ${t.backgroundGradient})`:`${t.backgroundColor}F5`,borderColor:t.cardBorderColor},children:e.jsx("div",{className:"container mx-auto px-4 py-4 md:py-6 max-w-6xl",children:e.jsx("div",{className:T("flex items-center",t.logoAlignment==="center"&&"justify-center",t.logoAlignment==="right"&&"justify-end",t.logoAlignment==="left"&&"justify-start"),children:t.logoUrl&&e.jsx("img",{src:t.logoUrl,alt:"Logo",className:"h-8 md:h-10 object-contain",style:{width:t.logoWidth||"auto",height:t.logoHeight||40}})})})}),t.bannerEnabled&&t.bannerUrl&&e.jsx("div",{className:"w-full",children:e.jsx("img",{src:t.bannerUrl,alt:"Banner",className:"w-full object-cover",style:{height:t.bannerHeight||90}})}),e.jsxs("main",{className:"container mx-auto px-4 py-6 md:py-8 max-w-6xl pb-32 lg:pb-8",children:[t.showProgressBar&&e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsx("div",{className:"lg:hidden flex items-center justify-between mb-4",children:re.map((s,d)=>e.jsxs(Ne.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center gap-1.5 flex-1",children:[e.jsx("div",{className:T("w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all",l===s.number&&"ring-2 ring-offset-2"),style:{backgroundColor:l>s.number?t.stepCompletedColor:l===s.number?t.stepActiveColor:t.stepInactiveColor,color:l>=s.number?t.primaryButtonTextColor:t.textColor},children:l>s.number?e.jsx(ne,{className:"h-5 w-5"}):e.jsx(s.icon,{className:"h-5 w-5"})}),e.jsx("span",{className:"text-xs font-medium text-center",style:{color:l>=s.number?t.headingColor:t.textColor,opacity:l>=s.number?1:.5},children:s.label})]}),d<re.length-1&&e.jsx("div",{className:"w-8 h-0.5 mx-1 rounded-full transition-all mt-[-20px]",style:{backgroundColor:l>s.number?t.stepCompletedColor:t.stepInactiveColor}})]},s.number))}),e.jsx("div",{className:"hidden lg:flex items-center justify-between mb-4",children:re.map((s,d)=>e.jsxs(Ne.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:T("w-12 h-12 rounded-full flex items-center justify-center font-semibold transition-all",l>s.number&&"scale-110"),style:{backgroundColor:l>s.number?t.stepCompletedColor:l===s.number?t.stepActiveColor:t.stepInactiveColor,color:l>=s.number?t.primaryButtonTextColor:t.textColor},children:l>s.number?e.jsx(ne,{className:"h-6 w-6"}):e.jsx(s.icon,{className:"h-6 w-6"})}),e.jsx("span",{className:"text-xs font-medium",style:{color:l>=s.number?t.headingColor:t.textColor,opacity:l>=s.number?1:.5},children:s.label})]}),d<re.length-1&&e.jsx("div",{className:"flex-1 h-1 mx-2 rounded-full transition-all",style:{backgroundColor:l>s.number?t.stepCompletedColor:t.stepInactiveColor}})]},s.number))})]}),e.jsx("div",{className:"lg:hidden mb-6",children:e.jsx(O,{style:{backgroundColor:t.cardBackgroundColor,borderColor:t.cardBorderColor,borderRadius:t.cardBorderRadius},children:e.jsxs(V,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-bold text-base",style:{color:t.headingColor},children:"Seu Pedido"}),e.jsx("button",{onClick:()=>g(!0),className:"text-sm underline",style:{color:t.primaryButtonBackgroundColor},children:"Ver detalhes"})]}),e.jsx("div",{className:"space-y-3 mb-4",children:n.products.map((s,d)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative flex-shrink-0 rounded-lg overflow-hidden",style:{width:50,height:50,backgroundColor:t.inputBackgroundColor},children:[s.image?e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ae,{className:"h-5 w-5 opacity-30"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold",style:{backgroundColor:t.quantityCircleColor,color:t.quantityTextColor},children:s.quantity})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-sm truncate",children:s.name}),e.jsxs("p",{className:"text-xs opacity-75",children:[s.quantity,"x R$ ",s.price.toFixed(2)]})]}),e.jsx("div",{className:"text-right flex-shrink-0",children:e.jsxs("p",{className:"font-bold text-sm",style:{color:t.headingColor},children:["R$ ",(s.price*s.quantity).toFixed(2)]})})]},d))}),e.jsx(H,{className:"my-3"}),e.jsx(H,{}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsx("span",{className:"text-lg font-bold",style:{color:t.headingColor},children:"Total"}),e.jsxs("span",{className:"text-xl font-bold",style:{color:t.primaryButtonBackgroundColor},children:["R$ ",U.toFixed(2)]})]})]})})}),e.jsxs("div",{className:"grid lg:grid-cols-[1fr_420px] gap-8",children:[e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[l===1&&e.jsx(O,{style:{backgroundColor:t.cardBackgroundColor,borderColor:t.cardBorderColor,borderRadius:t.cardBorderRadius,boxShadow:t.cardShadow},children:e.jsxs(V,{className:"p-5 md:p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-1",style:{color:t.headingColor},children:"Dados Pessoais"}),e.jsx("p",{className:"text-sm opacity-75",children:"Preencha suas informa√ß√µes"})]}),e.jsxs("div",{className:"space-y-4 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"name",style:{color:t.labelColor,fontWeight:t.labelFontWeight},children:"Nome Completo *"}),e.jsx(z,{id:"name",placeholder:"Seu nome completo",value:x.name,onChange:s=>R({...x,name:s.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:t.inputBackgroundColor,borderColor:t.inputBorderColor,height:48,borderRadius:t.inputBorderRadius,color:t.textColor}})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"email",style:{color:t.labelColor,fontWeight:t.labelFontWeight},children:"E-mail *"}),e.jsx(z,{id:"email",type:"email",placeholder:"seu@email.com",value:x.email,onChange:s=>R({...x,email:s.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:t.inputBackgroundColor,borderColor:t.inputBorderColor,height:48,borderRadius:t.inputBorderRadius,color:t.textColor}})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"phone",style:{color:t.labelColor,fontWeight:t.labelFontWeight},children:"Telefone *"}),e.jsx(z,{id:"phone",type:"tel",placeholder:"(11) 99999-9999",value:x.phone,onChange:s=>{const d=ze(s.target.value);R({...x,phone:d})},onBlur:s=>{const d=St(s.target.value);s.target.value&&!d.valid&&h({title:"Telefone inv√°lido",description:d.message,variant:"destructive"})},maxLength:15,className:"mt-1.5 text-base",style:{backgroundColor:t.inputBackgroundColor,borderColor:t.inputBorderColor,height:48,borderRadius:t.inputBorderRadius,color:t.textColor}})]})]}),t.requestCpfOnlyAtPayment===!1&&e.jsxs("div",{children:[e.jsx(_,{htmlFor:"document",style:{color:t.labelColor,fontWeight:t.labelFontWeight},children:"CPF *"}),e.jsx(z,{id:"document",placeholder:"000.000.000-00",maxLength:14,value:x.document,onChange:s=>{const d=_e(s.target.value);R({...x,document:d})},onBlur:s=>{const d=Bt(s.target.value);s.target.value&&!d.valid&&h({title:"CPF inv√°lido",description:d.message,variant:"destructive"})},className:"mt-1.5 text-base",style:{backgroundColor:t.inputBackgroundColor,borderColor:t.inputBorderColor,height:48,borderRadius:t.inputBorderRadius,color:t.textColor}})]}),t.requestBirthDate&&e.jsxs("div",{children:[e.jsx(_,{htmlFor:"birthDate",style:{color:t.labelColor,fontWeight:t.labelFontWeight},children:"Data de Nascimento"}),e.jsx(z,{id:"birthDate",type:"date",value:x.birthDate,onChange:s=>R({...x,birthDate:s.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:t.inputBackgroundColor,borderColor:t.inputBorderColor,height:48,borderRadius:t.inputBorderRadius,color:t.textColor}})]}),t.requestGender&&e.jsxs("div",{children:[e.jsx(_,{htmlFor:"gender",style:{color:t.labelColor,fontWeight:t.labelFontWeight},children:"G√™nero"}),e.jsxs("select",{id:"gender",value:x.gender,onChange:s=>R({...x,gender:s.target.value}),className:"w-full mt-1.5 px-4 rounded-lg text-base",style:{backgroundColor:t.inputBackgroundColor,borderColor:t.inputBorderColor,height:48,borderRadius:t.inputBorderRadius,borderWidth:1,borderStyle:"solid",color:t.textColor},children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"masculino",children:"Masculino"}),e.jsx("option",{value:"feminino",children:"Feminino"}),e.jsx("option",{value:"outro",children:"Outro"}),e.jsx("option",{value:"prefiro_nao_dizer",children:"Prefiro n√£o dizer"})]})]})]})]})}),l===2&&e.jsx(O,{style:{backgroundColor:t.cardBackgroundColor,borderColor:t.cardBorderColor,borderRadius:t.cardBorderRadius,boxShadow:t.cardShadow},children:e.jsxs(V,{className:"p-5 md:p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-1",style:{color:t.headingColor},children:"Endere√ßo de Entrega"}),e.jsx("p",{className:"text-sm opacity-75",children:"Informe onde deseja receber"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"zipCode",style:{color:t.labelColor,fontWeight:t.labelFontWeight},children:"CEP *"}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{id:"zipCode",placeholder:"00000-000",value:u.zipCode,onChange:s=>{const d=$e(s.target.value);L({...u,zipCode:d}),d.replace(/\D/g,"").length===8&&Qe(d)},className:"mt-1.5 text-base",style:{backgroundColor:t.inputBackgroundColor,borderColor:t.inputBorderColor,height:48,borderRadius:t.inputBorderRadius,color:t.textColor}}),v&&e.jsx(ie,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 animate-spin"})]})]}),e.jsxs("div",{className:"grid grid-cols-[1fr_120px] gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"street",style:{color:t.labelColor,fontWeight:t.labelFontWeight},children:"Rua *"}),e.jsx(z,{id:"street",placeholder:"Nome da rua",value:u.street,onChange:s=>L({...u,street:s.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:t.inputBackgroundColor,borderColor:t.inputBorderColor,height:48,borderRadius:t.inputBorderRadius,color:t.textColor}})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"number",style:{color:t.labelColor,fontWeight:t.labelFontWeight},children:"N√∫mero *"}),e.jsx(z,{id:"number",placeholder:"123",value:u.number,onChange:s=>L({...u,number:s.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:t.inputBackgroundColor,borderColor:t.inputBorderColor,height:48,borderRadius:t.inputBorderRadius,color:t.textColor}})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"complement",style:{color:t.labelColor,fontWeight:t.labelFontWeight},children:"Complemento"}),e.jsx(z,{id:"complement",placeholder:"Apto 101",value:u.complement,onChange:s=>L({...u,complement:s.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:t.inputBackgroundColor,borderColor:t.inputBorderColor,height:48,borderRadius:t.inputBorderRadius,color:t.textColor}})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"neighborhood",style:{color:t.labelColor,fontWeight:t.labelFontWeight},children:"Bairro *"}),e.jsx(z,{id:"neighborhood",placeholder:"Nome do bairro",value:u.neighborhood,onChange:s=>L({...u,neighborhood:s.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:t.inputBackgroundColor,borderColor:t.inputBorderColor,height:48,borderRadius:t.inputBorderRadius,color:t.textColor}})]})]}),e.jsxs("div",{className:"grid grid-cols-[1fr_100px] gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"city",style:{color:t.labelColor,fontWeight:t.labelFontWeight},children:"Cidade *"}),e.jsx(z,{id:"city",placeholder:"Cidade",value:u.city,onChange:s=>L({...u,city:s.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:t.inputBackgroundColor,borderColor:t.inputBorderColor,height:48,borderRadius:t.inputBorderRadius,color:t.textColor}})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"state",style:{color:t.labelColor,fontWeight:t.labelFontWeight},children:"UF *"}),e.jsx(z,{id:"state",placeholder:"SP",maxLength:2,value:u.state,onChange:s=>L({...u,state:s.target.value.toUpperCase()}),className:"mt-1.5 text-base",style:{backgroundColor:t.inputBackgroundColor,borderColor:t.inputBorderColor,height:48,borderRadius:t.inputBorderRadius,color:t.textColor}})]})]})]})]})}),l===3&&e.jsx(O,{style:{backgroundColor:t.cardBackgroundColor,borderColor:t.cardBorderColor,borderRadius:t.cardBorderRadius,boxShadow:t.cardShadow},children:e.jsxs(V,{className:"p-5 md:p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-1",style:{color:t.headingColor},children:"Forma de Pagamento"}),e.jsx("p",{className:"text-sm opacity-75",children:"Escolha como deseja pagar"})]}),e.jsx("div",{className:"grid gap-3",children:["PIX","CREDIT_CARD","BOLETO"].map(s=>{const d=He(s);return e.jsxs("button",{type:"button",onClick:()=>he(s),className:T("p-4 md:p-4 rounded-xl border-2 transition-all text-left flex items-center gap-3 md:gap-4 relative",F===s&&"shadow-lg"),style:{borderColor:F===s?t.primaryButtonBackgroundColor:t.inputBorderColor,backgroundColor:F===s?`${t.primaryButtonBackgroundColor}15`:t.inputBackgroundColor},children:[d&&e.jsx(at,{className:"absolute -top-2 -right-2 bg-green-500 hover:bg-green-600 text-white text-xs px-2 py-0.5",children:d.label}),s==="PIX"&&e.jsx(me,{className:"h-7 w-7 md:h-6 md:w-6",style:{color:F===s?t.primaryButtonBackgroundColor:t.textColor}}),s==="CREDIT_CARD"&&e.jsx(te,{className:"h-7 w-7 md:h-6 md:w-6",style:{color:F===s?t.primaryButtonBackgroundColor:t.textColor}}),s==="BOLETO"&&e.jsx(Be,{className:"h-7 w-7 md:h-6 md:w-6",style:{color:F===s?t.primaryButtonBackgroundColor:t.textColor}}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-base md:text-base mb-0.5",style:{color:F===s?t.primaryButtonBackgroundColor:t.headingColor},children:[s==="PIX"&&"PIX",s==="CREDIT_CARD"&&"Cart√£o de Cr√©dito",s==="BOLETO"&&"Boleto Banc√°rio"]}),e.jsxs("div",{className:"text-xs md:text-sm opacity-75",children:[s==="PIX"&&(d?`Aprova√ß√£o instant√¢nea + ${d.label}`:"Aprova√ß√£o instant√¢nea"),s==="CREDIT_CARD"&&(d?`Parcele em at√© 12x + ${d.label}`:"Parcele em at√© 12x"),s==="BOLETO"&&(d?`Vencimento em 3 dias + ${d.label}`:"Vencimento em 3 dias")]})]}),F===s&&e.jsx(Te,{className:"h-6 w-6 md:h-6 md:w-6",style:{color:t.stepCompletedColor}})]},s)})}),F==="CREDIT_CARD"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(Rt,{onCardDataChange:Ue,theme:t,errors:Ge}),n&&e.jsxs("div",{children:[e.jsx(_,{htmlFor:"installments",style:{color:t.labelColor,fontWeight:t.labelFontWeight},children:"N√∫mero de Parcelas"}),e.jsx("select",{id:"installments",value:ge,onChange:s=>Ve(Number(s.target.value)),className:"w-full mt-1.5 px-4 rounded-lg text-base",style:{backgroundColor:t.inputBackgroundColor,borderColor:t.inputBorderColor,height:48,borderRadius:t.inputBorderRadius,borderWidth:1,borderStyle:"solid",color:t.textColor},children:[1,2,3,4,5,6,7,8,9,10,11,12].map(s=>{const d=U/s;return e.jsxs("option",{value:s,children:[s,"x de R$ ",d.toFixed(2),s===1?" √† vista":""]},s)})})]})]}),F==="PIX"&&e.jsx("div",{children:Q?e.jsx(Tt,{pixData:Q,theme:t}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-blue-100 dark:bg-blue-900/20 mb-4",children:e.jsx(me,{className:"h-8 w-8 text-blue-600 dark:text-blue-400 animate-pulse"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:t.headingColor},children:'Clique em "Finalizar Compra" para gerar o PIX'}),e.jsx("p",{className:"text-sm opacity-70",style:{color:t.textColor},children:"Voc√™ receber√° o QR Code para pagamento instant√¢neo"})]})}),F==="BOLETO"&&e.jsx("div",{children:K?e.jsx(At,{boletoData:K,theme:t}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-orange-100 dark:bg-orange-900/20 mb-4",children:e.jsx(Be,{className:"h-8 w-8 text-orange-600 dark:text-orange-400 animate-pulse"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:t.headingColor},children:'Clique em "Finalizar Compra" para gerar o Boleto'}),e.jsx("p",{className:"text-sm opacity-70",style:{color:t.textColor},children:"Voc√™ poder√° baixar e imprimir o boleto banc√°rio"})]})})]})}),e.jsxs("div",{className:"flex items-center justify-between gap-3 pt-4",children:[l>1&&e.jsxs(W,{variant:"outline",onClick:Je,className:"flex items-center gap-2 px-6 md:px-8",style:{borderColor:t.inputBorderColor,color:t.textColor,height:52,borderWidth:2},children:[e.jsx(ft,{className:"h-5 w-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Voltar"})]}),e.jsx("div",{className:T("flex-1",l===1&&"ml-auto"),children:l<et?e.jsxs(W,{onClick:Ke,className:"w-full flex items-center justify-center gap-2 font-semibold text-base shadow-lg",style:{backgroundColor:t.primaryButtonBackgroundColor,color:t.primaryButtonTextColor,height:52,borderRadius:t.primaryButtonBorderRadius},children:["Continuar",e.jsx(nt,{className:"h-5 w-5"})]}):e.jsxs(e.Fragment,{children:[!Q&&!K&&e.jsx(W,{onClick:Ze,disabled:w||a,className:"w-full font-bold text-base md:text-lg shadow-lg",style:{backgroundColor:t.checkoutButtonBackgroundColor,color:t.checkoutButtonTextColor,height:56,borderRadius:t.checkoutButtonBorderRadius},children:w?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"h-5 w-5 animate-spin mr-2"}),"Processando..."]}):a?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-5 w-5 mr-2"}),"Checkout Desabilitado (Preview)"]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-5 w-5 mr-2"}),"Finalizar Compra - R$"," ",((we=n==null?void 0:n.total)==null?void 0:we.toFixed(2))||"0.00"]})}),(Q||K)&&e.jsxs(W,{onClick:()=>{pe(null),le(null),i&&localStorage.removeItem(`checkout-${i}`),h({title:"Pronto para novo pagamento",description:"Clique em Finalizar Compra novamente"})},variant:"outline",className:"w-full gap-2 h-12 font-semibold",style:{borderColor:t.primaryButtonBackgroundColor,color:t.primaryButtonBackgroundColor},children:[e.jsx(Re,{className:"h-5 w-5"}),"Gerar Novo Pagamento"]})]})})]})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsxs("div",{className:"sticky top-8 rounded-xl border p-6 space-y-5",style:{backgroundColor:t.cardBackgroundColor,borderColor:t.cardBorderColor,borderRadius:t.cardBorderRadius,boxShadow:t.cardShadow},children:[e.jsx("div",{children:e.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:t.headingColor},children:"Resumo do Pedido"})}),e.jsx("div",{className:"space-y-4",children:n.products.map((s,d)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"relative flex-shrink-0 rounded-lg overflow-hidden",style:{width:70,height:70,backgroundColor:t.inputBackgroundColor},children:[s.image?e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ae,{className:"h-8 w-8",style:{opacity:.3}})}),t.showCartIcon&&e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shadow-md",style:{backgroundColor:t.quantityCircleColor,color:t.quantityTextColor},children:s.quantity})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm mb-1",style:{color:t.headingColor},children:s.name}),s.sku&&e.jsxs("p",{className:"text-xs opacity-60",children:["SKU: ",s.sku]}),e.jsxs("p",{className:"text-xs opacity-75 mt-1",children:["Quantidade: ",s.quantity]})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsxs("p",{className:"font-bold",style:{color:t.headingColor},children:["R$ ",(s.price*s.quantity).toFixed(2)]}),s.quantity>1&&e.jsxs("p",{className:"text-xs opacity-60",children:["R$ ",s.price.toFixed(2)," un."]})]})]},d))}),e.jsx(H,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["R$ ",n.subtotal.toFixed(2)]})]}),n.shipping>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Frete"}),e.jsxs("span",{className:"font-medium",children:["R$ ",n.shipping.toFixed(2)]})]}),n.tax>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Taxa"}),e.jsxs("span",{className:"font-medium",children:["R$ ",n.tax.toFixed(2)]})]}),n.discount&&n.discount>0&&e.jsxs("div",{className:"flex justify-between text-sm font-medium",style:{color:t.stepCompletedColor},children:[e.jsx("span",{children:"Desconto"}),e.jsxs("span",{children:["-R$ ",n.discount.toFixed(2)]})]}),Z.hasDiscount&&e.jsxs("div",{className:"space-y-1 py-2 px-3 rounded-lg bg-green-50 dark:bg-green-900/10 border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex justify-between text-sm font-semibold",style:{color:t.stepCompletedColor},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(gt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Desconto ",We()]})]}),e.jsxs("span",{children:["-R$ ",Z.discountAmount.toFixed(2)]})]}),(oe==null?void 0:oe.description)&&e.jsx("p",{className:"text-xs opacity-75 pl-6",children:oe.description}),Z.cappedAtMaximum&&e.jsx("p",{className:"text-xs opacity-75 pl-6 text-orange-600 dark:text-orange-400",children:"Desconto m√°ximo aplicado"})]}),e.jsx(H,{}),e.jsxs("div",{className:"flex justify-between text-xl font-bold pt-2",children:[e.jsx("span",{style:{color:t.headingColor},children:"Total"}),e.jsxs("span",{style:{color:t.headingColor},children:["R$ ",U.toFixed(2)]})]})]}),t.showTrustBadges&&e.jsxs(e.Fragment,{children:[e.jsx(H,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(de,{className:"h-5 w-5",style:{color:t.trustBadgeColor}}),e.jsx("span",{className:"opacity-75",children:"Compra 100% Segura"})]}),t.sslBadgeEnabled&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(J,{className:"h-5 w-5",style:{color:t.trustBadgeColor}}),e.jsx("span",{className:"opacity-75",children:"Certificado SSL"})]})]})]})]})})]}),e.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 p-4 border-t backdrop-blur-xl z-40 safe-area-bottom",style:{backgroundColor:`${t.cardBackgroundColor}F8`,borderColor:t.cardBorderColor,boxShadow:"0 -4px 16px rgba(0,0,0,0.08)"},children:e.jsxs(W,{onClick:()=>g(!c),className:"w-full flex items-center justify-between shadow-lg font-semibold rounded-xl",style:{backgroundColor:t.primaryButtonBackgroundColor,color:t.primaryButtonTextColor,height:56},children:[e.jsxs("span",{className:"flex items-center gap-2.5",children:[e.jsx(ae,{className:"h-5 w-5"}),e.jsx("span",{className:"text-base",children:c?"Ocultar Resumo":"Ver Resumo"})]}),e.jsxs("span",{className:"font-bold text-lg",children:["R$ ",U.toFixed(2)]})]})}),c&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/60 z-50 backdrop-blur-sm animate-in fade-in duration-200",onClick:()=>g(!1),children:e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 rounded-t-3xl p-6 max-h-[85vh] overflow-y-auto animate-in slide-in-from-bottom duration-300",style:{backgroundColor:t.cardBackgroundColor,color:t.textColor,boxShadow:"0 -8px 32px rgba(0,0,0,0.12)"},onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-12 h-1.5 rounded-full opacity-30",style:{backgroundColor:t.textColor}})}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold",style:{color:t.headingColor},children:"Resumo do Pedido"}),e.jsx("button",{onClick:()=>g(!1),className:"p-2 rounded-full hover:bg-gray-100/10 transition-colors active:scale-95",children:e.jsx(qe,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"space-y-4 mb-6",children:n.products.map((s,d)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"relative flex-shrink-0 rounded-lg overflow-hidden",style:{width:70,height:70,backgroundColor:t.inputBackgroundColor},children:[s.image?e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ae,{className:"h-8 w-8 opacity-30"})}),e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",style:{backgroundColor:t.quantityCircleColor,color:t.quantityTextColor},children:s.quantity})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm mb-1",children:s.name}),e.jsxs("p",{className:"text-xs opacity-75",children:["Qtd: ",s.quantity]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-bold",children:["R$ ",(s.price*s.quantity).toFixed(2)]})})]},d))}),e.jsx(H,{className:"mb-4"}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["R$ ",n.subtotal.toFixed(2)]})]}),n.shipping>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Frete"}),e.jsxs("span",{className:"font-medium",children:["R$ ",n.shipping.toFixed(2)]})]}),n.tax>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Taxa"}),e.jsxs("span",{className:"font-medium",children:["R$ ",n.tax.toFixed(2)]})]}),n.discount&&n.discount>0&&e.jsxs("div",{className:"flex justify-between text-sm font-medium",style:{color:t.stepCompletedColor},children:[e.jsx("span",{children:"Desconto"}),e.jsxs("span",{children:["-R$ ",n.discount.toFixed(2)]})]}),e.jsx(H,{}),e.jsxs("div",{className:"flex justify-between text-xl font-bold pt-2",children:[e.jsx("span",{style:{color:t.headingColor},children:"Total"}),e.jsxs("span",{style:{color:t.headingColor},children:["R$ ",U.toFixed(2)]})]})]}),e.jsx(W,{onClick:()=>g(!1),className:"w-full font-semibold text-base shadow-lg rounded-xl",style:{backgroundColor:t.primaryButtonBackgroundColor,color:t.primaryButtonTextColor,height:52},children:"Fechar"})]})})]}),e.jsx(vt,{userId:(b==null?void 0:b.userId)||null,position:"bottom-left"}),e.jsx("footer",{className:"border-t py-8 md:py-10 mt-12 md:mt-16",style:{backgroundColor:t.footerBackgroundColor,borderColor:t.cardBorderColor,color:t.footerTextColor},children:e.jsx("div",{className:"container mx-auto px-4 max-w-6xl",children:e.jsxs("div",{className:"text-center space-y-5 md:space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2.5 md:gap-3",children:[e.jsx(J,{className:"h-5 w-5 md:h-6 md:w-6 text-green-600"}),e.jsx("span",{className:"font-bold text-lg md:text-xl",children:"Checkout Seguro"})]}),t.showTrustBadges&&e.jsxs("div",{className:"flex items-center justify-center gap-4 md:gap-8 flex-wrap text-xs md:text-sm",children:[t.sslBadgeEnabled&&e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsx(de,{className:"h-4 w-4 md:h-5 md:w-5 text-green-600"}),e.jsx("span",{className:"whitespace-nowrap",children:"Certificado SSL"})]}),t.showPaymentMethods&&e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsx(te,{className:"h-4 w-4 md:h-5 md:w-5"}),e.jsx("span",{className:"whitespace-nowrap",children:"Pagamento Seguro"})]}),t.securityIconsEnabled&&e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsx(de,{className:"h-4 w-4 md:h-5 md:w-5"}),e.jsx("span",{className:"whitespace-nowrap",children:"Dados Protegidos"})]})]}),(t.showCnpjCpf||t.showContactEmail||t.showPhone||t.showAddress)&&e.jsxs("div",{className:"text-xs md:text-sm space-y-1 opacity-80 max-w-md mx-auto",children:[t.showStoreName&&e.jsx("p",{className:"font-semibold text-sm md:text-base",children:"Minha Loja"}),t.showCnpjCpf&&e.jsx("p",{children:"CNPJ: 00.000.000/0001-00"}),t.showAddress&&e.jsx("p",{className:"text-balance",children:"Endere√ßo: Rua Exemplo, 123 - S√£o Paulo/SP"}),t.showContactEmail&&e.jsx("p",{children:"E-mail: contato@loja.com.br"}),t.showPhone&&e.jsx("p",{children:"Telefone: (11) 99999-9999"})]}),(t.showPrivacyPolicy||t.showTermsConditions||t.showReturns)&&e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"my-3 md:my-4"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 md:gap-6 text-xs md:text-sm flex-wrap px-4",children:[t.showPrivacyPolicy&&e.jsx("a",{href:"#",style:{color:t.footerLinkColor},className:"hover:underline transition-all whitespace-nowrap",children:"Pol√≠tica de Privacidade"}),t.showTermsConditions&&e.jsx("a",{href:"#",style:{color:t.footerLinkColor},className:"hover:underline transition-all whitespace-nowrap",children:"Termos e Condi√ß√µes"}),t.showReturns&&e.jsx("a",{href:"#",style:{color:t.footerLinkColor},className:"hover:underline transition-all whitespace-nowrap",children:"Trocas e Devolu√ß√µes"})]})]}),e.jsx(H,{className:"my-3 md:my-4"}),e.jsxs("p",{className:"text-xs md:text-xs opacity-60 pb-2",children:["¬© ",new Date().getFullYear()," - Todos os direitos reservados"]})]})})})]})},lo=Object.freeze(Object.defineProperty({__proto__:null,default:qt},Symbol.toStringTag,{value:"Module"}));export{Oe as D,qt as P,lo as a,pt as c};

import{u as I,r as i,j as e,C as S,s as t}from"./index-BXl307GV.js";import{M as q}from"./monitor-BeafcpSr.js";import{D as U}from"./dollar-sign-Cdq1qSDT.js";import{T as A}from"./truck-CUx6P4go.js";const G=()=>{const r=I(a=>a.user),[l,n]=i.useState(""),[c,h]=i.useState(!1),[d,f]=i.useState(!1),[m,u]=i.useState(!1),[g,p]=i.useState(!1),[x,o]=i.useState(!0),b=a=>a.split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()).join(" "),j=async()=>{try{if(!(r!=null&&r.id)){o(!1);return}const{data:a}=await t.from("User").select("name, email").eq("id",r.id).single();if(a!=null&&a.name)n(b(a.name));else if(a!=null&&a.email){const s=a.email.split("@")[0];n(s.charAt(0).toUpperCase()+s.slice(1))}else n("Usuário")}catch(a){console.error("Erro ao carregar nome:",a),n("Usuário")}finally{o(!1)}},N=async a=>{try{const{data:s}=await t.from("Organization").select("subscriptionId, stripeCustomerId").eq("id",a).single();return!!(s!=null&&s.subscriptionId&&(s!=null&&s.stripeCustomerId))}catch{return!1}},y=async a=>{try{const{data:s}=await t.from("Organization").select("domain, domainVerified").eq("id",a).single();return!!(s!=null&&s.domain&&(s!=null&&s.domainVerified))}catch{return!1}},v=async a=>{try{const{data:s}=await t.from("GatewayConfig").select("id").eq("organizationId",a).eq("isActive",!0).limit(1);return((s==null?void 0:s.length)||0)>0}catch{return!1}},w=async a=>{try{const{data:s}=await t.from("ShippingMethod").select("id").eq("organizationId",a).eq("isActive",!0).limit(1);return((s==null?void 0:s.length)||0)>0}catch{return!1}},k=async()=>{try{if(!(r!=null&&r.organizationId)){o(!1);return}const[a,s,C,z]=await Promise.all([N(r.organizationId),y(r.organizationId),v(r.organizationId),w(r.organizationId)]);h(a),f(s),u(C),p(z)}catch(a){console.error("Erro ao verificar status do checkout:",a)}finally{o(!1)}};return i.useEffect(()=>{(async()=>{r!=null&&r.organizationId&&await Promise.all([j(),k()])})()},[r==null?void 0:r.organizationId]),e.jsxs("div",{className:"space-y-6 p-6 max-w-4xl mx-auto",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:x?"Olá...":l?`Olá ${l},`:"Olá,"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Seja bem vindo"})]}),e.jsx("div",{children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Para ativar seu checkout você precisa concluir todos passos abaixo:"})}),!x&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`
            flex items-start gap-4 p-4 border-2 rounded-lg transition-all cursor-pointer
            ${c?"bg-green-50 border-green-200":"bg-white border-gray-200 hover:border-pink-300"}
          `,children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(S,{className:"h-8 w-8 text-pink-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Faturamento"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Adicione um cartão de crédito em sua conta"})]}),e.jsx("div",{className:"flex-shrink-0 pt-1",children:c?e.jsx("div",{className:"h-3 w-3 rounded-full bg-green-500"}):e.jsx("div",{className:"h-3 w-3 rounded-full bg-gray-300"})})]}),e.jsxs("div",{className:`
            flex items-start gap-4 p-4 border-2 rounded-lg transition-all cursor-pointer
            ${d?"bg-green-50 border-green-200":"bg-white border-gray-200 hover:border-pink-300"}
          `,children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(q,{className:"h-8 w-8 text-pink-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Domínio"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Verifique seu domínio. Deve ser o mesmo utilizado na Shopify, WooCommerce ou na sua landing page."})]}),e.jsx("div",{className:"flex-shrink-0 pt-1",children:d?e.jsx("div",{className:"h-3 w-3 rounded-full bg-green-500"}):e.jsx("div",{className:"h-3 w-3 rounded-full bg-gray-300"})})]}),e.jsxs("div",{className:`
            flex items-start gap-4 p-4 border-2 rounded-lg transition-all cursor-pointer
            ${m?"bg-green-50 border-green-200":"bg-white border-gray-200 hover:border-pink-300"}
          `,children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(U,{className:"h-8 w-8 text-pink-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Gateway"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure os meios de pagamentos que serão exibidos em sua loja."})]}),e.jsx("div",{className:"flex-shrink-0 pt-1",children:m?e.jsx("div",{className:"h-3 w-3 rounded-full bg-green-500"}):e.jsx("div",{className:"h-3 w-3 rounded-full bg-gray-300"})})]}),e.jsxs("div",{className:`
            flex items-start gap-4 p-4 border-2 rounded-lg transition-all cursor-pointer
            ${g?"bg-green-50 border-green-300":"bg-white border-gray-200 hover:border-pink-300"}
          `,children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(A,{className:"h-8 w-8 text-pink-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Frete"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Crie métodos de entrega para ser exibido no seu checkout."})]}),e.jsx("div",{className:"flex-shrink-0 pt-1",children:g?e.jsx("div",{className:"h-3 w-3 rounded-full bg-green-500"}):e.jsx("div",{className:"h-3 w-3 rounded-full bg-gray-300"})})]})]}),e.jsx("div",{className:"text-center pt-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Caso tenha alguma dúvida,"," ",e.jsx("a",{href:"#",className:"underline text-gray-900 hover:text-pink-600",children:"visite nossa central de ajuda"}),"."]})})]})};export{G as default};

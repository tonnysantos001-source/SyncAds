import{c as fe,s as N,n as ye,e as je,f as ve,r as p,j as e,m as O,O as A,a6 as Ne,C as _,R as xe,d as re,P as W,av as we,X as ke,g as Z,l as ee,I as S,T as ze,B as X}from"./index-DJMbRzNM.js";import{L as B}from"./label-8OP_CO6t.js";import{S as I}from"./separator-Ba1vnKIO.js";import{A as qe,a as Le}from"./alert-BJFKSd9K.js";import{T as Be}from"./truck-DzonNmN1.js";import{F as Fe}from"./file-text-Capm8b4Z.js";import{L as Y}from"./lock-Bknmu2fJ.js";import{S as oe}from"./shield-check-CvuBPHxI.js";import{C as We}from"./circle-alert-DiegeVw7.js";/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=fe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=fe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Ee={async saveCustomization(i){try{const{data:a,error:l}=await N.from("CheckoutCustomization").upsert({...i,updatedAt:new Date().toISOString()}).select().single();if(l)throw l;return a}catch(a){throw console.error("Error saving checkout customization:",a),a}},async loadCustomization(i){try{const{data:a,error:l}=await N.from("CheckoutCustomization").select("*").eq("userId",i).eq("isActive",!0).single();if(l&&l.code!=="PGRST116")throw l;return a}catch(a){throw console.error("Error loading checkout customization:",a),a}},async listCustomizations(i){try{const{data:a,error:l}=await N.from("CheckoutCustomization").select("*").eq("userId",i).order("createdAt",{ascending:!1});if(l)throw l;return a}catch(a){throw console.error("Error listing checkout customizations:",a),a}},async activateCustomization(i){try{const a=await N.from("CheckoutCustomization").select("userId").eq("id",i).single();a.data&&await N.from("CheckoutCustomization").update({isActive:!1}).eq("userId",a.data.userId);const{data:l,error:g}=await N.from("CheckoutCustomization").update({isActive:!0,updatedAt:new Date().toISOString()}).eq("id",i).select().single();if(g)throw g;return l}catch(a){throw console.error("Error activating checkout customization:",a),a}},async deleteCustomization(i){try{const{error:a}=await N.from("CheckoutCustomization").delete().eq("id",i);if(a)throw a}catch(a){throw console.error("Error deleting checkout customization:",a),a}},async duplicateCustomization(i,a){try{const{data:l,error:g}=await N.from("CheckoutCustomization").select("*").eq("id",i).single();if(g)throw g;const{data:E,error:$}=await N.from("CheckoutCustomization").insert({userId:l.userId,name:a,theme:l.theme,isActive:!1}).select().single();if($)throw $;return E}catch(l){throw console.error("Error duplicating checkout customization:",l),l}},async generatePreviewUrl(i){try{const{data:a,error:l}=await N.from("CheckoutCustomization").insert({userId:i.userId,name:`Preview-${Date.now()}`,theme:i.theme||{},isActive:!1}).select().single();if(l)throw l;return`/checkout/preview/${a.id}`}catch(a){throw console.error("Error generating preview URL:",a),a}},async exportCustomization(i){try{const{data:a,error:l}=await N.from("CheckoutCustomization").select("*").eq("id",i).single();if(l)throw l;return{name:a.name,theme:a.theme,exportedAt:new Date().toISOString(),version:"1.0"}}catch(a){throw console.error("Error exporting checkout customization:",a),a}},async importCustomization(i,a){try{const{data:l,error:g}=await N.from("CheckoutCustomization").insert({userId:i,name:`${a.name} (Importado)`,theme:a.theme,isActive:!1}).select().single();if(g)throw g;return l}catch(l){throw console.error("Error importing checkout customization:",l),l}}},ge=i=>{const a=i.replace(/\D/g,"");return a.length<=5?a:`${a.slice(0,5)}-${a.slice(5,8)}`},Se=i=>i.replace(/\D/g,""),Oe=i=>Se(i).length===8,Te=async i=>{const a=Se(i);if(!Oe(a))throw new Error("CEP inv√°lido. Deve conter 8 d√≠gitos.");try{const l=await fetch(`https://viacep.com.br/ws/${a}/json/`);if(!l.ok)throw new Error("Erro ao buscar CEP");const g=await l.json();return g.erro?null:{street:g.logradouro||"",neighborhood:g.bairro||"",city:g.localidade||"",state:g.uf||"",zipCode:ge(a)}}catch(l){throw console.error("Erro ao buscar CEP:",l),l}},pe=i=>{const a=i.replace(/\D/g,"");return a.length===0?"":a.length<=3?a:a.length<=6?`${a.slice(0,3)}.${a.slice(3)}`:a.length<=9?`${a.slice(0,3)}.${a.slice(3,6)}.${a.slice(6)}`:`${a.slice(0,3)}.${a.slice(3,6)}.${a.slice(6,9)}-${a.slice(9,11)}`},De=i=>i.replace(/\D/g,""),_e=i=>{const a=De(i);if(a.length!==11||/^(\d)\1{10}$/.test(a))return!1;let l=0;for(let x=0;x<9;x++)l+=parseInt(a.charAt(x))*(10-x);let g=11-l%11;if((g>=10?0:g)!==parseInt(a.charAt(9)))return!1;l=0;for(let x=0;x<10;x++)l+=parseInt(a.charAt(x))*(11-x);return g=11-l%11,(g>=10?0:g)===parseInt(a.charAt(10))},Ie=i=>{const a=De(i);return a?a.length!==11?{valid:!1,message:"CPF deve conter 11 d√≠gitos"}:/^(\d)\1{10}$/.test(a)?{valid:!1,message:"CPF inv√°lido"}:_e(a)?{valid:!0,formatted:pe(a),message:"CPF v√°lido"}:{valid:!1,message:"CPF inv√°lido. Verifique os n√∫meros digitados."}:{valid:!1,message:"CPF n√£o pode estar vazio"}},Ue=[11,12,13,14,15,16,17,18,19,21,22,24,27,28,31,32,33,34,35,37,38,41,42,43,44,45,46,47,48,49,51,53,54,55,61,62,64,63,65,66,67,68,69,71,73,74,75,77,79,81,87,82,83,84,85,88,86,89,91,93,94,92,97,95,96,98,99],Ce=i=>{const a=i.replace(/\D/g,"");return a.length===0?"":a.length<=2?`(${a}`:a.length<=6?`(${a.slice(0,2)}) ${a.slice(2)}`:a.length<=10?`(${a.slice(0,2)}) ${a.slice(2,6)}-${a.slice(6,10)}`:`(${a.slice(0,2)}) ${a.slice(2,7)}-${a.slice(7,11)}`},Ae=i=>i.replace(/\D/g,""),Me=i=>Ue.includes(i),Ge=i=>{const a=Ae(i);if(a.length===11)return parseInt(a.charAt(2))===9?"mobile":null;if(a.length===10){const l=parseInt(a.charAt(2));return l>=2&&l<=5?"landline":null}return null},$e=i=>{const a=Ae(i);if(!a)return{valid:!1,message:"Telefone n√£o pode estar vazio"};if(a.length<10)return{valid:!1,message:`Digite mais ${10-a.length} d√≠gitos`};if(a.length>11)return{valid:!1,message:"Telefone deve ter no m√°ximo 11 d√≠gitos"};const l=parseInt(a.slice(0,2));if(!Me(l))return{valid:!1,message:"DDD inv√°lido"};const g=Ge(i);return g?/^(\d)\1+$/.test(a)?{valid:!1,message:"Telefone inv√°lido"}:{valid:!0,formatted:Ce(a),type:g,message:g==="mobile"?"Celular v√°lido":"Telefone fixo v√°lido"}:a.length===11?{valid:!1,message:"Celular deve come√ßar com 9 ap√≥s o DDD"}:{valid:!1,message:"Formato de telefone inv√°lido"}},be={logoUrl:"",faviconUrl:"",logoAlignment:"left",showLogoAtTop:!0,logoWidth:180,logoHeight:50,backgroundColor:"#F9FAFB",backgroundGradient:"linear-gradient(180deg, #F9FAFB 0%, #F3F4F6 100%)",useGradient:!1,textColor:"#1F2937",headingColor:"#111827",noticeBarEnabled:!0,noticeBarMessage:"üéâ FRETE GR√ÅTIS para todo o Brasil em compras acima de R$ 199!",noticeBarBackgroundColor:"#1F2937",noticeBarTextColor:"#FFFFFF",noticeBarAnimation:!0,bannerEnabled:!1,bannerUrl:"",bannerHeight:200,cartDisplay:"drawer",cartBorderColor:"#E5E7EB",cartBackgroundColor:"#FFFFFF",quantityCircleColor:"#8B5CF6",quantityTextColor:"#FFFFFF",showCartIcon:!0,showCartReminder:!0,allowCouponEdit:!0,navigationSteps:3,nextStepStyle:"rounded",showProgressBar:!0,progressBarColor:"#8B5CF6",stepActiveColor:"#8B5CF6",stepInactiveColor:"#D1D5DB",stepCompletedColor:"#10B981",primaryButtonBackgroundColor:"#8B5CF6",primaryButtonTextColor:"#FFFFFF",primaryButtonBorderRadius:12,primaryButtonHover:!0,primaryButtonHoverColor:"#7C3AED",primaryButtonFlow:!0,primaryButtonShadow:!0,checkoutButtonBackgroundColor:"#10B981",checkoutButtonTextColor:"#FFFFFF",checkoutButtonBorderRadius:14,checkoutButtonHover:!0,checkoutButtonHoverColor:"#059669",checkoutButtonFlow:!0,checkoutButtonShadow:!0,checkoutButtonPulse:!0,highlightedBorderColor:"#8B5CF6",highlightedBorderTextColor:"#FFFFFF",highlightedBorderWidth:2,footerBackgroundColor:"#F3F4F6",footerTextColor:"#6B7280",showStoreName:!0,showPaymentMethods:!0,showCnpjCpf:!0,showContactEmail:!0,showAddress:!0,showPhone:!0,showPrivacyPolicy:!0,showTermsConditions:!0,showReturns:!0,footerLinkColor:"#8B5CF6",discountTagTextColor:"#FFFFFF",discountTagBackgroundColor:"#EF4444",discountTagBorderRadius:6,discountTagFontWeight:"700",useVisible:!0,expirationTime:60,forceRemovalTime:90,showCountdownTimer:!0,urgencyMessageColor:"#DC2626",urgencyBackgroundColor:"#FEE2E2",orderBumpEnabled:!0,orderBumpTextColor:"#374151",orderBumpBackgroundColor:"#FFFBEB",orderBumpPriceColor:"#DC2626",orderBumpBorderColor:"#FCD34D",orderBumpBorderWidth:2,orderBumpBorderRadius:12,orderBumpButtonTextColor:"#FFFFFF",orderBumpButtonBackgroundColor:"#EF4444",orderBumpShadow:!0,fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif",fontSize:{xs:"0.75rem",sm:"0.875rem",base:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem"},fontWeight:{normal:"400",medium:"500",semibold:"600",bold:"700"},spacing:{xs:"0.25rem",sm:"0.5rem",md:"1rem",lg:"1.5rem",xl:"2rem","2xl":"3rem"},borderRadius:{sm:"0.375rem",md:"0.5rem",lg:"0.75rem",xl:"1rem",full:"9999px"},boxShadow:{sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},inputBorderColor:"#D1D5DB",inputFocusBorderColor:"#8B5CF6",inputBackgroundColor:"#FFFFFF",inputHeight:48,inputBorderRadius:10,labelColor:"#374151",labelFontWeight:"600",placeholderColor:"#9CA3AF",cardBackgroundColor:"#FFFFFF",cardBorderColor:"#E5E7EB",cardBorderRadius:16,cardShadow:!0,cardPadding:"1.5rem",showTrustBadges:!0,trustBadgeColor:"#10B981",sslBadgeEnabled:!0,securityIconsEnabled:!0,language:"pt",currency:"BRL",presellPage:"cart-in-cart",requestCpfOnlyAtPayment:!1,requestBirthDate:!1,requestGender:!1,disableCarrot:!1,mobileBreakpoint:640,tabletBreakpoint:1024,desktopBreakpoint:1280,enableAnimations:!0,animationDuration:"300ms",animationTiming:"cubic-bezier(0.4, 0, 0.2, 1)",highContrast:!1,focusIndicatorColor:"#8B5CF6",reducedMotion:!1};function te(i){return{...be,...i}}const Ve=({injectedOrderId:i,injectedTheme:a,previewMode:l=!1})=>{const{orderId:g}=ye(),E=i||g||null,$=je(),{toast:x}=ve(),[d,se]=p.useState(null),[z,ae]=p.useState(null),[D,le]=p.useState(null),[ne,U]=p.useState(!0),[q,L]=p.useState(!1),[u,M]=p.useState(1),[ie,G]=p.useState(!1),[V,T]=p.useState(!1),[h,F]=p.useState({name:"",email:"",phone:"",document:""}),[n,y]=p.useState({street:"",number:"",complement:"",neighborhood:"",city:"",state:"",zipCode:""}),[C,ce]=p.useState("PIX"),[H,de]=p.useState(1),r=a?te(a):D!=null&&D.theme?te(D.theme):be;p.useEffect(()=>{E&&me()},[E]);const me=async()=>{var s;try{U(!0);const{data:m,error:j}=await N.from("Order").select("*").eq("id",E).single();if(j||!m)throw new Error("Pedido n√£o encontrado");const t=Array.isArray(m.items)?m.items:[],c=Array.isArray((s=m.metadata)==null?void 0:s.originalProducts)?m.metadata.originalProducts:[],P={orderId:m.id,products:t.map(b=>{const f=c.find(w=>(w==null?void 0:w.variantId)&&String(w.variantId)===String(b.variantId)||(w==null?void 0:w.productId)&&String(w.productId)===String(b.productId)||(w==null?void 0:w.id)&&(String(w.id)===String(b.productId)||String(w.id)===String(b.id)));return{id:b.productId||b.id,name:b.name||(f==null?void 0:f.name)||(f==null?void 0:f.title)||"Produto",price:Number(b.price)||0,quantity:Number(b.quantity)||1,image:b.image||(f==null?void 0:f.image)||(Array.isArray(f==null?void 0:f.images)?f.images[0]:"")||"",sku:b.sku||(f==null?void 0:f.sku)||""}}),total:Number(m.total)||0,subtotal:Number(m.subtotal)||0,tax:Number(m.tax)||0,shipping:Number(m.shipping)||0,discount:Number(m.discount)||0};if(se(P),ae(m),!l&&m.userId)try{const b=await Ee.loadCustomization(m.userId);b&&le(b)}catch{console.log("Usando tema padr√£o")}}catch(m){console.error("Erro ao carregar checkout:",m),x({title:"Erro ao carregar checkout",description:m.message||"Tente novamente mais tarde",variant:"destructive"})}finally{U(!1)}},o=async s=>{const m=s.replace(/\D/g,"");if(m.length===8){G(!0);try{const j=await Te(m);j?(y(t=>({...t,street:j.street||"",neighborhood:j.neighborhood||"",city:j.city||"",state:j.state||""})),x({title:"CEP encontrado!",description:`${j.city} - ${j.state}`})):x({title:"CEP n√£o encontrado",description:"Verifique o CEP digitado e tente novamente",variant:"destructive"})}catch(j){console.error("Erro ao buscar CEP:",j),x({title:"Erro ao buscar CEP",description:"Tente novamente mais tarde",variant:"destructive"})}finally{G(!1)}}},K=s=>{if(s===1){if(!h.name||!h.email||!h.phone)return x({title:"Preencha todos os campos",description:"Nome, e-mail e telefone s√£o obrigat√≥rios",variant:"destructive"}),!1;if(r.requestCpfOnlyAtPayment===!1&&!h.document)return x({title:"CPF obrigat√≥rio",description:"Por favor, informe seu CPF",variant:"destructive"}),!1}return s===2&&(!n.zipCode||!n.street||!n.number||!n.neighborhood||!n.city||!n.state)?(x({title:"Endere√ßo incompleto",description:"Preencha todos os campos obrigat√≥rios",variant:"destructive"}),!1):!0},ue=()=>{K(u)&&(M(u+1),window.scrollTo({top:0,behavior:"smooth"}))},J=()=>{M(u-1),window.scrollTo({top:0,behavior:"smooth"})},he=async()=>{if(K(u))try{L(!0);const{data:s,error:m}=await N.functions.invoke("process-payment",{body:{userId:z==null?void 0:z.userId,orderId:E,amount:(d==null?void 0:d.total)||0,currency:"BRL",paymentMethod:C.toLowerCase().replace("_","_"),customer:{name:h.name,email:h.email,document:h.document,phone:h.phone},billingAddress:{street:n.street,number:n.number,complement:n.complement,neighborhood:n.neighborhood,city:n.city,state:n.state,zipCode:n.zipCode},installments:C==="CREDIT_CARD"?H:1}});if(console.log("üîç [DEBUG] Resposta process-payment:",{data:s,error:m}),!(s!=null&&s.success)){if(s!=null&&s.requiresSetup||(s==null?void 0:s.error)==="NO_GATEWAY_CONFIGURED"){x({title:"Gateway n√£o configurado",description:(s==null?void 0:s.hint)||"Configure um gateway de pagamento primeiro",variant:"destructive",duration:1e4}),L(!1);return}throw new Error((s==null?void 0:s.message)||(s==null?void 0:s.error)||"Erro ao processar pagamento")}if(m)throw m;s.success&&(x({title:"Pedido confirmado!",description:"Redirecionando..."}),setTimeout(()=>{$(`/checkout/success/${s.transactionId}`)},1500))}catch(s){console.error("Erro ao processar checkout:",s),x({title:"Erro ao processar pagamento",description:s.message||"Tente novamente",variant:"destructive"})}finally{L(!1)}};if(ne)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:r.backgroundColor},children:e.jsxs("div",{className:"text-center",children:[e.jsx(O,{className:"h-10 w-10 animate-spin mx-auto mb-3",style:{color:r.primaryButtonBackgroundColor}}),e.jsx("p",{style:{color:r.textColor},className:"text-sm",children:"Carregando..."})]})});if(!d)return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{backgroundColor:r.backgroundColor},children:e.jsx("div",{className:"text-center",children:e.jsx("p",{style:{color:r.textColor},children:"Pedido n√£o encontrado"})})});const Q=[{number:1,label:"Dados",icon:Ne},{number:2,label:"Entrega",icon:Be},{number:3,label:"Pagamento",icon:_}];return e.jsxs("div",{className:"min-h-screen pb-32",style:{backgroundColor:r.backgroundColor,color:r.textColor,fontFamily:r.fontFamily},children:[r.noticeBarEnabled&&r.noticeBarMessage&&e.jsx("div",{className:"py-3 px-4 text-center text-sm font-medium",style:{backgroundColor:r.noticeBarBackgroundColor,color:r.noticeBarTextColor},children:r.noticeBarMessage}),e.jsx("header",{className:"sticky top-0 z-30 backdrop-blur-lg border-b",style:{backgroundColor:`${r.backgroundColor}F8`,borderColor:r.cardBorderColor},children:e.jsx("div",{className:"px-4 py-4",children:r.logoUrl&&e.jsx("div",{className:A("flex",r.logoAlignment==="center"&&"justify-center"),children:e.jsx("img",{src:r.logoUrl,alt:"Logo",className:"h-8 object-contain",style:{maxWidth:r.logoWidth||150}})})})}),r.bannerEnabled&&r.bannerImage&&e.jsx("img",{src:r.bannerImage,alt:"Banner",className:"w-full object-cover",style:{height:r.bannerHeight||80}}),e.jsxs("main",{className:"px-4 py-6",children:[r.showProgressBar&&e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex items-center justify-between mb-3",children:Q.map((s,m)=>e.jsxs(xe.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[e.jsx("div",{className:A("w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm transition-all",u===s.number&&"ring-2 ring-offset-2"),style:{backgroundColor:u>s.number?r.stepCompletedColor:u===s.number?r.stepActiveColor:r.stepInactiveColor,color:u>=s.number?r.primaryButtonTextColor:r.textColor,ringColor:r.stepActiveColor,opacity:u>=s.number?1:.6},children:u>s.number?e.jsx(re,{className:"h-5 w-5"}):e.jsx(s.icon,{className:"h-5 w-5"})}),e.jsx("span",{className:"text-xs font-medium",style:{color:u>=s.number?r.headingColor:r.textColor,opacity:u>=s.number?1:.5},children:s.label})]}),m<Q.length-1&&e.jsx("div",{className:"flex-1 h-1 mx-2 rounded-full transition-all",style:{backgroundColor:u>s.number?r.stepCompletedColor:r.stepInactiveColor,maxWidth:"60px"}})]},s.number))})}),e.jsxs("div",{className:"rounded-xl p-4 mb-6",style:{backgroundColor:r.cardBackgroundColor,borderColor:r.cardBorderColor,border:"1px solid"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-sm",style:{color:r.headingColor},children:"Seu Pedido"}),e.jsx("button",{onClick:()=>T(!0),className:"text-xs underline",style:{color:r.primaryButtonBackgroundColor},children:"Ver detalhes"})]}),e.jsx("div",{className:"space-y-2.5",children:d.products.map((s,m)=>e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsxs("div",{className:"relative flex-shrink-0 rounded-lg overflow-hidden",style:{width:48,height:48,backgroundColor:r.inputBackgroundColor},children:[s.image?e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(W,{className:"h-5 w-5 opacity-30"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold",style:{backgroundColor:r.quantityCircleColor,color:r.quantityTextColor},children:s.quantity})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-xs truncate",children:s.name}),e.jsxs("p",{className:"text-xs opacity-75",children:[s.quantity,"x R$ ",s.price.toFixed(2)]})]}),e.jsx("div",{className:"text-right flex-shrink-0",children:e.jsxs("p",{className:"font-bold text-sm",style:{color:r.headingColor},children:["R$ ",(s.price*s.quantity).toFixed(2)]})})]},m))}),e.jsx("div",{className:"h-px my-3",style:{backgroundColor:r.cardBorderColor}}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold",style:{color:r.headingColor},children:"Total"}),e.jsxs("span",{className:"text-lg font-bold",style:{color:r.primaryButtonBackgroundColor},children:["R$ ",d.total.toFixed(2)]})]})]}),u===1&&e.jsxs("div",{className:"rounded-xl p-5 space-y-4",style:{backgroundColor:r.cardBackgroundColor,borderColor:r.cardBorderColor,border:"1px solid"},children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold mb-1",style:{color:r.headingColor},children:"Seus Dados"}),e.jsx("p",{className:"text-xs opacity-75",children:"Preencha suas informa√ß√µes"})]}),e.jsxs("div",{className:"space-y-3.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"Nome Completo *"}),e.jsx("input",{type:"text",placeholder:"Seu nome completo",value:h.name,onChange:s=>F({...h,name:s.target.value}),className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"E-mail *"}),e.jsx("input",{type:"email",placeholder:"seu@email.com",value:h.email,onChange:s=>F({...h,email:s.target.value}),className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"Telefone *"}),e.jsx("input",{type:"tel",placeholder:"(11) 99999-9999",value:h.phone,onChange:s=>{const m=Ce(s.target.value);F({...h,phone:m})},onBlur:s=>{const m=$e(s.target.value);s.target.value&&!m.valid&&x({title:"Telefone inv√°lido",description:m.message,variant:"destructive"})},maxLength:15,className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}})]}),r.requestCpfOnlyAtPayment===!1&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"CPF *"}),e.jsx("input",{type:"text",placeholder:"000.000.000-00",maxLength:14,value:h.document,onChange:s=>{const m=pe(s.target.value);F({...h,document:m})},onBlur:s=>{const m=Ie(s.target.value);s.target.value&&!m.valid&&x({title:"CPF inv√°lido",description:m.message,variant:"destructive"})},className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}})]}),r.requestBirthDate&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"Data de Nascimento"}),e.jsx("input",{type:"date",value:h.birthDate,onChange:s=>F({...h,birthDate:s.target.value}),className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}})]}),r.requestGender&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"G√™nero"}),e.jsxs("select",{value:h.gender,onChange:s=>F({...h,gender:s.target.value}),className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48},children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"masculino",children:"Masculino"}),e.jsx("option",{value:"feminino",children:"Feminino"}),e.jsx("option",{value:"outro",children:"Outro"})]})]})]})]}),u===2&&e.jsxs("div",{className:"rounded-xl p-5 space-y-4",style:{backgroundColor:r.cardBackgroundColor,borderColor:r.cardBorderColor,border:"1px solid"},children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold mb-1",style:{color:r.headingColor},children:"Endere√ßo de Entrega"}),e.jsx("p",{className:"text-xs opacity-75",children:"Onde voc√™ quer receber"})]}),e.jsxs("div",{className:"space-y-3.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"CEP *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"00000-000",value:n.zipCode,onChange:s=>{const m=ge(s.target.value);y({...n,zipCode:m}),m.replace(/\D/g,"").length===8&&o(m)},className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}}),ie&&e.jsx(O,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 animate-spin"})]})]}),e.jsxs("div",{className:"grid grid-cols-[1fr_100px] gap-2.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"Rua *"}),e.jsx("input",{type:"text",placeholder:"Nome da rua",value:n.street,onChange:s=>y({...n,street:s.target.value}),className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"N¬∫ *"}),e.jsx("input",{type:"text",placeholder:"123",value:n.number,onChange:s=>y({...n,number:s.target.value}),className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"Complemento"}),e.jsx("input",{type:"text",placeholder:"Apto, bloco, etc",value:n.complement,onChange:s=>y({...n,complement:s.target.value}),className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"Bairro *"}),e.jsx("input",{type:"text",placeholder:"Nome do bairro",value:n.neighborhood,onChange:s=>y({...n,neighborhood:s.target.value}),className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}})]}),e.jsxs("div",{className:"grid grid-cols-[1fr_80px] gap-2.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"Cidade *"}),e.jsx("input",{type:"text",placeholder:"Cidade",value:n.city,onChange:s=>y({...n,city:s.target.value}),className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"UF *"}),e.jsx("input",{type:"text",placeholder:"SP",maxLength:2,value:n.state,onChange:s=>y({...n,state:s.target.value.toUpperCase()}),className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}})]})]})]})]}),u===3&&e.jsxs("div",{className:"rounded-xl p-5 space-y-4",style:{backgroundColor:r.cardBackgroundColor,borderColor:r.cardBorderColor,border:"1px solid"},children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold mb-1",style:{color:r.headingColor},children:"Forma de Pagamento"}),e.jsx("p",{className:"text-xs opacity-75",children:"Como deseja pagar"})]}),e.jsx("div",{className:"space-y-3",children:["PIX","CREDIT_CARD","BOLETO"].map(s=>e.jsxs("button",{onClick:()=>ce(s),className:A("w-full p-4 rounded-xl border-2 transition-all flex items-center gap-3",C===s&&"shadow-lg"),style:{borderColor:C===s?r.primaryButtonBackgroundColor:r.inputBorderColor,backgroundColor:C===s?`${r.primaryButtonBackgroundColor}15`:r.inputBackgroundColor},children:[s==="PIX"&&e.jsx(Re,{className:"h-6 w-6",style:{color:C===s?r.primaryButtonBackgroundColor:r.textColor}}),s==="CREDIT_CARD"&&e.jsx(_,{className:"h-6 w-6",style:{color:C===s?r.primaryButtonBackgroundColor:r.textColor}}),s==="BOLETO"&&e.jsx(Fe,{className:"h-6 w-6",style:{color:C===s?r.primaryButtonBackgroundColor:r.textColor}}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("div",{className:"font-semibold text-sm mb-0.5",style:{color:C===s?r.primaryButtonBackgroundColor:r.headingColor},children:[s==="PIX"&&"PIX",s==="CREDIT_CARD"&&"Cart√£o de Cr√©dito",s==="BOLETO"&&"Boleto"]}),e.jsxs("div",{className:"text-xs opacity-75",children:[s==="PIX"&&"Aprova√ß√£o instant√¢nea",s==="CREDIT_CARD"&&"Parcele em at√© 12x",s==="BOLETO"&&"Vencimento em 3 dias"]})]}),C===s&&e.jsx(re,{className:"h-5 w-5",style:{color:r.stepCompletedColor}})]},s))}),C==="CREDIT_CARD"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"Parcelas"}),e.jsx("select",{value:H,onChange:s=>de(Number(s.target.value)),className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48},children:[1,2,3,4,5,6,7,8,9,10,11,12].map(s=>{const m=d.total/s;return e.jsxs("option",{value:s,children:[s,"x R$ ",m.toFixed(2)]},s)})})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[u>1&&e.jsx("button",{onClick:J,className:"flex items-center justify-center gap-2 px-6 py-3 rounded-xl border-2 transition-all active:scale-95",style:{borderColor:r.inputBorderColor,color:r.textColor,backgroundColor:r.inputBackgroundColor},children:e.jsx(Pe,{className:"h-5 w-5"})}),e.jsx("div",{className:"flex-1",children:u<3?e.jsxs("button",{onClick:ue,className:"w-full py-3 rounded-xl font-semibold text-base shadow-lg transition-all active:scale-98 flex items-center justify-center gap-2",style:{backgroundColor:r.primaryButtonBackgroundColor,color:r.primaryButtonTextColor},children:["Continuar",e.jsx(we,{className:"h-5 w-5"})]}):e.jsx("button",{onClick:he,disabled:q||l,className:"w-full py-3.5 rounded-xl font-bold text-base shadow-lg transition-all active:scale-98 flex items-center justify-center gap-2",style:{backgroundColor:r.checkoutButtonBackgroundColor,color:r.checkoutButtonTextColor,opacity:q||l?.6:1},children:q?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-5 w-5 animate-spin"}),"Processando..."]}):l?"Modo Preview":e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"h-5 w-5"}),"Finalizar - R$ ",d.total.toFixed(2)]})})})]})]}),V&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 backdrop-blur-sm animate-in fade-in",onClick:()=>T(!1),children:e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 rounded-t-3xl p-6 max-h-[85vh] overflow-y-auto animate-in slide-in-from-bottom",style:{backgroundColor:r.cardBackgroundColor,color:r.textColor,boxShadow:"0 -8px 32px rgba(0,0,0,0.12)"},onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-12 h-1.5 rounded-full opacity-30",style:{backgroundColor:r.textColor}})}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold",style:{color:r.headingColor},children:"Resumo do Pedido"}),e.jsx("button",{onClick:()=>T(!1),className:"p-2 rounded-full hover:bg-gray-100/10 transition-colors active:scale-95",children:e.jsx(ke,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"space-y-3.5 mb-5",children:d.products.map((s,m)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"relative flex-shrink-0 rounded-lg overflow-hidden",style:{width:64,height:64,backgroundColor:r.inputBackgroundColor},children:[s.image?e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(W,{className:"h-7 w-7 opacity-30"})}),e.jsx("div",{className:"absolute -top-1.5 -right-1.5 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shadow-md",style:{backgroundColor:r.quantityCircleColor,color:r.quantityTextColor},children:s.quantity})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm mb-1",children:s.name}),s.sku&&e.jsxs("p",{className:"text-xs opacity-60 mb-1",children:["SKU: ",s.sku]}),e.jsxs("p",{className:"text-xs opacity-75",children:[s.quantity,"x R$ ",s.price.toFixed(2)]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-bold text-sm",style:{color:r.headingColor},children:["R$ ",(s.price*s.quantity).toFixed(2)]})})]},m))}),e.jsx("div",{className:"h-px mb-4",style:{backgroundColor:r.cardBorderColor}}),e.jsxs("div",{className:"space-y-2.5 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["R$ ",d.subtotal.toFixed(2)]})]}),d.shipping>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Frete"}),e.jsxs("span",{className:"font-medium",children:["R$ ",d.shipping.toFixed(2)]})]}),d.tax>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Taxa"}),e.jsxs("span",{className:"font-medium",children:["R$ ",d.tax.toFixed(2)]})]}),d.discount&&d.discount>0&&e.jsxs("div",{className:"flex justify-between text-sm font-medium",style:{color:r.stepCompletedColor},children:[e.jsx("span",{children:"Desconto"}),e.jsxs("span",{children:["-R$ ",d.discount.toFixed(2)]})]}),e.jsx("div",{className:"h-px",style:{backgroundColor:r.cardBorderColor}}),e.jsxs("div",{className:"flex justify-between text-lg font-bold pt-2",children:[e.jsx("span",{style:{color:r.headingColor},children:"Total"}),e.jsxs("span",{style:{color:r.headingColor},children:["R$ ",d.total.toFixed(2)]})]})]}),e.jsx("button",{onClick:()=>T(!1),className:"w-full py-3 rounded-xl font-semibold text-base shadow-lg transition-all active:scale-98",style:{backgroundColor:r.primaryButtonBackgroundColor,color:r.primaryButtonTextColor},children:"Fechar"})]})}),e.jsx("footer",{className:"border-t py-8 mt-12",style:{backgroundColor:r.footerBackgroundColor,borderColor:r.cardBorderColor,color:r.footerTextColor},children:e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Y,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"font-bold text-base",children:"Checkout Seguro"})]}),r.showTrustBadges&&e.jsxs("div",{className:"flex items-center justify-center gap-4 flex-wrap text-xs",children:[r.sslBadgeEnabled&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(oe,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"SSL Seguro"})]}),r.showPaymentMethods&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{children:"Pagamento Seguro"})]})]}),(r.showCnpjCpf||r.showContactEmail||r.showPhone)&&e.jsxs("div",{className:"text-xs space-y-1 opacity-80",children:[r.showStoreName&&e.jsx("p",{className:"font-semibold text-sm",children:"Minha Loja"}),r.showCnpjCpf&&e.jsx("p",{children:"CNPJ: 00.000.000/0001-00"}),r.showContactEmail&&e.jsx("p",{children:"contato@loja.com.br"}),r.showPhone&&e.jsx("p",{children:"(11) 99999-9999"})]}),(r.showPrivacyPolicy||r.showTermsConditions||r.showReturns)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-px mx-auto w-24",style:{backgroundColor:r.cardBorderColor}}),e.jsxs("div",{className:"flex items-center justify-center gap-3 text-xs flex-wrap",children:[r.showPrivacyPolicy&&e.jsx("a",{href:"#",style:{color:r.footerLinkColor},className:"underline",children:"Privacidade"}),r.showTermsConditions&&e.jsx("a",{href:"#",style:{color:r.footerLinkColor},className:"underline",children:"Termos"}),r.showReturns&&e.jsx("a",{href:"#",style:{color:r.footerLinkColor},className:"underline",children:"Trocas"})]})]}),e.jsxs("p",{className:"text-xs opacity-60 pt-2",children:["¬© ",new Date().getFullYear()," - Todos os direitos reservados"]})]})})})]})},He=({injectedOrderId:i,injectedTheme:a,previewMode:l=!1})=>{const{orderId:g}=ye(),E=i||g||null,$=je(),{toast:x}=ve(),[d,se]=p.useState(null),[z,ae]=p.useState(null),[D,le]=p.useState(null),[ne,U]=p.useState(!0),[q,L]=p.useState(!1),[u,M]=p.useState(1),[ie,G]=p.useState(!1),[V,T]=p.useState(!1),[h,F]=p.useState({name:"",email:"",phone:"",document:""}),[n,y]=p.useState({street:"",number:"",complement:"",neighborhood:"",city:"",state:"",zipCode:""}),[C,ce]=p.useState("PIX"),[H,de]=p.useState(1),[r,me]=p.useState(!1);p.useEffect(()=>{const t=()=>{me(window.innerWidth<1024)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const o=a?te(a):D!=null&&D.theme?te(D.theme):be;p.useEffect(()=>{E&&K()},[E]);const K=async()=>{var t;try{U(!0);const{data:c,error:P}=await N.from("Order").select("*").eq("id",E).single();if(P||!c)throw new Error("Pedido n√£o encontrado");const b=Array.isArray(c.items)?c.items:[],f=Array.isArray((t=c.metadata)==null?void 0:t.originalProducts)?c.metadata.originalProducts:[],w={orderId:c.id,products:b.map(k=>{const v=f.find(R=>(R==null?void 0:R.variantId)&&String(R.variantId)===String(k.variantId)||(R==null?void 0:R.productId)&&String(R.productId)===String(k.productId)||(R==null?void 0:R.id)&&(String(R.id)===String(k.productId)||String(R.id)===String(k.id)));return{id:k.productId||k.id,name:k.name||(v==null?void 0:v.name)||(v==null?void 0:v.title)||"Produto",price:Number(k.price)||0,quantity:Number(k.quantity)||1,image:k.image||(v==null?void 0:v.image)||(Array.isArray(v==null?void 0:v.images)?v.images[0]:"")||"",sku:k.sku||(v==null?void 0:v.sku)||""}}),total:Number(c.total)||0,subtotal:Number(c.subtotal)||0,tax:Number(c.tax)||0,shipping:Number(c.shipping)||0,discount:Number(c.discount)||0};if(se(w),ae(c),!l&&c.userId)try{const k=await Ee.loadCustomization(c.userId);k&&le(k)}catch{console.log("Usando tema padr√£o")}}catch(c){console.error("Erro ao carregar checkout:",c),x({title:"Erro ao carregar checkout",description:c.message||"Tente novamente mais tarde",variant:"destructive"})}finally{U(!1)}},ue=async t=>{const c=t.replace(/\D/g,"");if(c.length===8){G(!0);try{const P=await Te(c);P?(y(b=>({...b,street:P.street||"",neighborhood:P.neighborhood||"",city:P.city||"",state:P.state||""})),x({title:"CEP encontrado!",description:`${P.city} - ${P.state}`})):x({title:"CEP n√£o encontrado",description:"Verifique o CEP digitado e tente novamente",variant:"destructive"})}catch(P){console.error("Erro ao buscar CEP:",P),x({title:"Erro ao buscar CEP",description:"Tente novamente mais tarde",variant:"destructive"})}finally{G(!1)}}},J=t=>{if(t===1){if(!h.name||!h.email||!h.phone)return x({title:"Dados incompletos",description:"Preencha todos os campos obrigat√≥rios",variant:"destructive"}),!1;if(o.requestCpfOnlyAtPayment===!1&&!h.document)return x({title:"CPF obrigat√≥rio",description:"Por favor, informe seu CPF",variant:"destructive"}),!1}return t===2&&(!n.zipCode||!n.street||!n.number||!n.neighborhood||!n.city||!n.state)?(x({title:"Endere√ßo incompleto",description:"Preencha todos os campos obrigat√≥rios",variant:"destructive"}),!1):!0},he=()=>{J(u)&&(M(u+1),window.scrollTo({top:0,behavior:"smooth"}))},Q=()=>{M(u-1),window.scrollTo({top:0,behavior:"smooth"})},s=async()=>{if(J(u))try{L(!0);const{data:t,error:c}=await N.functions.invoke("process-payment",{body:{userId:z==null?void 0:z.userId,orderId:E,amount:(d==null?void 0:d.total)||0,currency:"BRL",paymentMethod:C.toLowerCase().replace("_","_"),customer:{name:h.name,email:h.email,document:h.document,phone:h.phone},billingAddress:{street:n.street,number:n.number,complement:n.complement,neighborhood:n.neighborhood,city:n.city,state:n.state,zipCode:n.zipCode},installments:C==="CREDIT_CARD"?H:1}});if(console.log("üîç [DEBUG] Resposta process-payment:",{data:t,error:c}),!(t!=null&&t.success)){if(t!=null&&t.requiresSetup||(t==null?void 0:t.error)==="NO_GATEWAY_CONFIGURED"){x({title:"Gateway n√£o configurado",description:(t==null?void 0:t.hint)||"Configure um gateway de pagamento primeiro",variant:"destructive",duration:1e4}),L(!1);return}throw new Error((t==null?void 0:t.message)||(t==null?void 0:t.error)||"Erro ao processar pagamento")}if(c)throw c;t.success&&(x({title:"Pedido confirmado!",description:"Redirecionando para confirma√ß√£o..."}),setTimeout(()=>{$(`/checkout/success/${t.transactionId}`)},1500))}catch(t){console.error("Erro ao processar checkout:",t),x({title:"Erro ao processar pagamento",description:t.message||"Tente novamente mais tarde",variant:"destructive"})}finally{L(!1)}};if(ne)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:o.backgroundColor},children:e.jsxs("div",{className:"text-center",children:[e.jsx(O,{className:"h-12 w-12 animate-spin mx-auto mb-4",style:{color:o.primaryButtonBackgroundColor}}),e.jsx("p",{style:{color:o.textColor},children:"Carregando checkout..."})]})});if(!d)return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{backgroundColor:o.backgroundColor},children:e.jsxs(qe,{variant:"destructive",className:"max-w-md",children:[e.jsx(We,{className:"h-4 w-4"}),e.jsx(Le,{children:"Pedido n√£o encontrado. Verifique o link e tente novamente."})]})});const m=3,j=[{number:1,label:"Dados",icon:Ne},{number:2,label:"Endere√ßo",icon:Be},{number:3,label:"Pagamento",icon:_}];return r?e.jsx(Ve,{injectedOrderId:i,injectedTheme:a,previewMode:l}):e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:o.backgroundColor,color:o.textColor,fontFamily:o.fontFamily},children:[o.noticeBarEnabled&&o.noticeBarMessage&&e.jsx("div",{className:"py-3 px-4 text-center text-sm md:text-base font-medium",style:{backgroundColor:o.noticeBarBackgroundColor,color:o.noticeBarTextColor},children:o.noticeBarMessage}),e.jsx("header",{className:"border-b sticky top-0 z-30 backdrop-blur-lg",style:{backgroundColor:o.useGradient?`linear-gradient(135deg, ${o.backgroundColor}, ${o.backgroundGradient})`:`${o.backgroundColor}F5`,borderColor:o.cardBorderColor},children:e.jsx("div",{className:"container mx-auto px-4 py-4 md:py-6 max-w-6xl",children:e.jsx("div",{className:A("flex items-center",o.logoAlignment==="center"&&"justify-center",o.logoAlignment==="right"&&"justify-end",o.logoAlignment==="left"&&"justify-start"),children:o.logoUrl&&e.jsx("img",{src:o.logoUrl,alt:"Logo",className:"h-8 md:h-10 object-contain",style:{width:o.logoWidth||"auto",height:o.logoHeight||40}})})})}),o.bannerEnabled&&o.bannerUrl&&e.jsx("div",{className:"w-full",children:e.jsx("img",{src:o.bannerUrl,alt:"Banner",className:"w-full object-cover",style:{height:o.bannerHeight||90}})}),e.jsxs("main",{className:"container mx-auto px-4 py-6 md:py-8 max-w-6xl pb-32 lg:pb-8",children:[o.showProgressBar&&e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsx("div",{className:"lg:hidden flex items-center justify-between mb-4",children:j.map((t,c)=>e.jsxs(xe.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center gap-1.5 flex-1",children:[e.jsx("div",{className:A("w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all",u===t.number&&"ring-2 ring-offset-2"),style:{backgroundColor:u>t.number?o.stepCompletedColor:u===t.number?o.stepActiveColor:o.stepInactiveColor,color:u>=t.number?o.primaryButtonTextColor:o.textColor},children:u>t.number?e.jsx(re,{className:"h-5 w-5"}):e.jsx(t.icon,{className:"h-5 w-5"})}),e.jsx("span",{className:"text-xs font-medium text-center",style:{color:u>=t.number?o.headingColor:o.textColor,opacity:u>=t.number?1:.5},children:t.label})]}),c<j.length-1&&e.jsx("div",{className:"w-8 h-0.5 mx-1 rounded-full transition-all mt-[-20px]",style:{backgroundColor:u>t.number?o.stepCompletedColor:o.stepInactiveColor}})]},t.number))}),e.jsx("div",{className:"hidden lg:flex items-center justify-between mb-4",children:j.map((t,c)=>e.jsxs(xe.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:A("w-12 h-12 rounded-full flex items-center justify-center font-semibold transition-all",u>t.number&&"scale-110"),style:{backgroundColor:u>t.number?o.stepCompletedColor:u===t.number?o.stepActiveColor:o.stepInactiveColor,color:u>=t.number?o.primaryButtonTextColor:o.textColor},children:u>t.number?e.jsx(re,{className:"h-6 w-6"}):e.jsx(t.icon,{className:"h-6 w-6"})}),e.jsx("span",{className:"text-xs font-medium",style:{color:u>=t.number?o.headingColor:o.textColor,opacity:u>=t.number?1:.5},children:t.label})]}),c<j.length-1&&e.jsx("div",{className:"flex-1 h-1 mx-2 rounded-full transition-all",style:{backgroundColor:u>t.number?o.stepCompletedColor:o.stepInactiveColor}})]},t.number))})]}),e.jsx("div",{className:"lg:hidden mb-6",children:e.jsx(Z,{style:{backgroundColor:o.cardBackgroundColor,borderColor:o.cardBorderColor,borderRadius:o.cardBorderRadius},children:e.jsxs(ee,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-bold text-base",style:{color:o.headingColor},children:"Seu Pedido"}),e.jsx("button",{onClick:()=>T(!0),className:"text-sm underline",style:{color:o.primaryButtonBackgroundColor},children:"Ver detalhes"})]}),e.jsx("div",{className:"space-y-3 mb-4",children:d.products.map((t,c)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative flex-shrink-0 rounded-lg overflow-hidden",style:{width:50,height:50,backgroundColor:o.inputBackgroundColor},children:[t.image?e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(W,{className:"h-5 w-5 opacity-30"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold",style:{backgroundColor:o.quantityCircleColor,color:o.quantityTextColor},children:t.quantity})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-sm truncate",children:t.name}),e.jsxs("p",{className:"text-xs opacity-75",children:[t.quantity,"x R$ ",t.price.toFixed(2)]})]}),e.jsx("div",{className:"text-right flex-shrink-0",children:e.jsxs("p",{className:"font-bold text-sm",style:{color:o.headingColor},children:["R$ ",(t.price*t.quantity).toFixed(2)]})})]},c))}),e.jsx(I,{className:"my-3"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-base font-semibold",style:{color:o.headingColor},children:"Total"}),e.jsxs("span",{className:"text-xl font-bold",style:{color:o.primaryButtonBackgroundColor},children:["R$ ",d.total.toFixed(2)]})]})]})})}),e.jsxs("div",{className:"grid lg:grid-cols-[1fr_420px] gap-8",children:[e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[u===1&&e.jsx(Z,{style:{backgroundColor:o.cardBackgroundColor,borderColor:o.cardBorderColor,borderRadius:o.cardBorderRadius,boxShadow:o.cardShadow},children:e.jsxs(ee,{className:"p-5 md:p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-1",style:{color:o.headingColor},children:"Dados Pessoais"}),e.jsx("p",{className:"text-sm opacity-75",children:"Preencha suas informa√ß√µes"})]}),e.jsxs("div",{className:"space-y-4 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"name",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"Nome Completo *"}),e.jsx(S,{id:"name",placeholder:"Seu nome completo",value:h.name,onChange:t=>F({...h,name:t.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"email",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"E-mail *"}),e.jsx(S,{id:"email",type:"email",placeholder:"seu@email.com",value:h.email,onChange:t=>F({...h,email:t.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"phone",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"Telefone *"}),e.jsx(S,{id:"phone",type:"tel",placeholder:"(11) 99999-9999",value:h.phone,onChange:t=>{const c=Ce(t.target.value);F({...h,phone:c})},onBlur:t=>{const c=$e(t.target.value);t.target.value&&!c.valid&&x({title:"Telefone inv√°lido",description:c.message,variant:"destructive"})},maxLength:15,className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]})]}),o.requestCpfOnlyAtPayment===!1&&e.jsxs("div",{children:[e.jsx(B,{htmlFor:"document",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"CPF *"}),e.jsx(S,{id:"document",placeholder:"000.000.000-00",maxLength:14,value:h.document,onChange:t=>{const c=pe(t.target.value);F({...h,document:c})},onBlur:t=>{const c=Ie(t.target.value);t.target.value&&!c.valid&&x({title:"CPF inv√°lido",description:c.message,variant:"destructive"})},className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]}),o.requestBirthDate&&e.jsxs("div",{children:[e.jsx(B,{htmlFor:"birthDate",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"Data de Nascimento"}),e.jsx(S,{id:"birthDate",type:"date",value:h.birthDate,onChange:t=>F({...h,birthDate:t.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]}),o.requestGender&&e.jsxs("div",{children:[e.jsx(B,{htmlFor:"gender",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"G√™nero"}),e.jsxs("select",{id:"gender",value:h.gender,onChange:t=>F({...h,gender:t.target.value}),className:"w-full mt-1.5 px-4 rounded-lg text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,borderWidth:1,borderStyle:"solid",color:o.textColor},children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"masculino",children:"Masculino"}),e.jsx("option",{value:"feminino",children:"Feminino"}),e.jsx("option",{value:"outro",children:"Outro"}),e.jsx("option",{value:"prefiro_nao_dizer",children:"Prefiro n√£o dizer"})]})]})]})]})}),u===2&&e.jsx(Z,{style:{backgroundColor:o.cardBackgroundColor,borderColor:o.cardBorderColor,borderRadius:o.cardBorderRadius,boxShadow:o.cardShadow},children:e.jsxs(ee,{className:"p-5 md:p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-1",style:{color:o.headingColor},children:"Endere√ßo de Entrega"}),e.jsx("p",{className:"text-sm opacity-75",children:"Informe onde deseja receber"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"zipCode",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"CEP *"}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{id:"zipCode",placeholder:"00000-000",value:n.zipCode,onChange:t=>{const c=ge(t.target.value);y({...n,zipCode:c}),c.replace(/\D/g,"").length===8&&ue(c)},className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}}),ie&&e.jsx(O,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 animate-spin"})]})]}),e.jsxs("div",{className:"grid grid-cols-[1fr_120px] gap-4",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"street",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"Rua *"}),e.jsx(S,{id:"street",placeholder:"Nome da rua",value:n.street,onChange:t=>y({...n,street:t.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"number",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"N√∫mero *"}),e.jsx(S,{id:"number",placeholder:"123",value:n.number,onChange:t=>y({...n,number:t.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"complement",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"Complemento"}),e.jsx(S,{id:"complement",placeholder:"Apto 101",value:n.complement,onChange:t=>y({...n,complement:t.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"neighborhood",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"Bairro *"}),e.jsx(S,{id:"neighborhood",placeholder:"Nome do bairro",value:n.neighborhood,onChange:t=>y({...n,neighborhood:t.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]})]}),e.jsxs("div",{className:"grid grid-cols-[1fr_100px] gap-4",children:[e.jsxs("div",{children:[e.jsx(B,{htmlFor:"city",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"Cidade *"}),e.jsx(S,{id:"city",placeholder:"Cidade",value:n.city,onChange:t=>y({...n,city:t.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]}),e.jsxs("div",{children:[e.jsx(B,{htmlFor:"state",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"UF *"}),e.jsx(S,{id:"state",placeholder:"SP",maxLength:2,value:n.state,onChange:t=>y({...n,state:t.target.value.toUpperCase()}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]})]})]})]})}),u===3&&e.jsx(Z,{style:{backgroundColor:o.cardBackgroundColor,borderColor:o.cardBorderColor,borderRadius:o.cardBorderRadius,boxShadow:o.cardShadow},children:e.jsxs(ee,{className:"p-5 md:p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-1",style:{color:o.headingColor},children:"Forma de Pagamento"}),e.jsx("p",{className:"text-sm opacity-75",children:"Escolha como deseja pagar"})]}),e.jsx("div",{className:"grid gap-3",children:["PIX","CREDIT_CARD","BOLETO"].map(t=>e.jsxs("button",{onClick:()=>ce(t),className:A("p-4 md:p-4 rounded-xl border-2 transition-all text-left flex items-center gap-3 md:gap-4",C===t&&"shadow-lg"),style:{borderColor:C===t?o.primaryButtonBackgroundColor:o.inputBorderColor,backgroundColor:C===t?`${o.primaryButtonBackgroundColor}15`:o.inputBackgroundColor},children:[t==="PIX"&&e.jsx(Re,{className:"h-7 w-7 md:h-6 md:w-6",style:{color:C===t?o.primaryButtonBackgroundColor:o.textColor}}),t==="CREDIT_CARD"&&e.jsx(_,{className:"h-7 w-7 md:h-6 md:w-6",style:{color:C===t?o.primaryButtonBackgroundColor:o.textColor}}),t==="BOLETO"&&e.jsx(Fe,{className:"h-7 w-7 md:h-6 md:w-6",style:{color:C===t?o.primaryButtonBackgroundColor:o.textColor}}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-base md:text-base mb-0.5",style:{color:C===t?o.primaryButtonBackgroundColor:o.headingColor},children:[t==="PIX"&&"PIX",t==="CREDIT_CARD"&&"Cart√£o de Cr√©dito",t==="BOLETO"&&"Boleto Banc√°rio"]}),e.jsxs("div",{className:"text-xs md:text-sm opacity-75",children:[t==="PIX"&&"Aprova√ß√£o instant√¢nea",t==="CREDIT_CARD"&&"Parcele em at√© 12x",t==="BOLETO"&&"Vencimento em 3 dias"]})]}),C===t&&e.jsx(ze,{className:"h-6 w-6 md:h-6 md:w-6",style:{color:o.stepCompletedColor}})]},t))}),C==="CREDIT_CARD"&&d&&e.jsxs("div",{children:[e.jsx(B,{htmlFor:"installments",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"N√∫mero de Parcelas"}),e.jsx("select",{id:"installments",value:H,onChange:t=>de(Number(t.target.value)),className:"w-full mt-1.5 px-4 rounded-lg text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,borderWidth:1,borderStyle:"solid",color:o.textColor},children:[1,2,3,4,5,6,7,8,9,10,11,12].map(t=>{const c=d.total/t;return e.jsxs("option",{value:t,children:[t,"x de R$ ",c.toFixed(2),t===1?" √† vista":""]},t)})})]})]})}),e.jsxs("div",{className:"flex items-center justify-between gap-3 pt-4",children:[u>1&&e.jsxs(X,{variant:"outline",onClick:Q,className:"flex items-center gap-2 px-6 md:px-8",style:{borderColor:o.inputBorderColor,color:o.textColor,height:52,borderWidth:2},children:[e.jsx(Pe,{className:"h-5 w-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Voltar"})]}),e.jsx("div",{className:A("flex-1",u===1&&"ml-auto"),children:u<m?e.jsxs(X,{onClick:he,className:"w-full flex items-center justify-center gap-2 font-semibold text-base shadow-lg",style:{backgroundColor:o.primaryButtonBackgroundColor,color:o.primaryButtonTextColor,height:52,borderRadius:o.primaryButtonBorderRadius},children:["Continuar",e.jsx(we,{className:"h-5 w-5"})]}):e.jsx(X,{onClick:s,disabled:q||l,className:"w-full font-bold text-base md:text-lg shadow-lg",style:{backgroundColor:o.checkoutButtonBackgroundColor,color:o.checkoutButtonTextColor,height:56,borderRadius:o.checkoutButtonBorderRadius,opacity:q||l?.6:1},children:q?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-5 w-5 animate-spin mr-2"}),"Processando..."]}):l?"Modo Pr√©-visualiza√ß√£o":e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"h-5 w-5 mr-2"}),e.jsxs("span",{className:"hidden sm:inline",children:["Finalizar Compra -"," "]}),e.jsx("span",{className:"sm:hidden",children:"Finalizar - "}),"R$ ",d==null?void 0:d.total.toFixed(2)]})})})]})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsxs("div",{className:"sticky top-8 rounded-xl border p-6 space-y-5",style:{backgroundColor:o.cardBackgroundColor,borderColor:o.cardBorderColor,borderRadius:o.cardBorderRadius,boxShadow:o.cardShadow},children:[e.jsx("div",{children:e.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:o.headingColor},children:"Resumo do Pedido"})}),e.jsx("div",{className:"space-y-4",children:d.products.map((t,c)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"relative flex-shrink-0 rounded-lg overflow-hidden",style:{width:70,height:70,backgroundColor:o.inputBackgroundColor},children:[t.image?e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(W,{className:"h-8 w-8",style:{opacity:.3}})}),o.showCartIcon&&e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shadow-md",style:{backgroundColor:o.quantityCircleColor,color:o.quantityTextColor},children:t.quantity})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm mb-1",style:{color:o.headingColor},children:t.name}),t.sku&&e.jsxs("p",{className:"text-xs opacity-60",children:["SKU: ",t.sku]}),e.jsxs("p",{className:"text-xs opacity-75 mt-1",children:["Quantidade: ",t.quantity]})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsxs("p",{className:"font-bold",style:{color:o.headingColor},children:["R$ ",(t.price*t.quantity).toFixed(2)]}),t.quantity>1&&e.jsxs("p",{className:"text-xs opacity-60",children:["R$ ",t.price.toFixed(2)," un."]})]})]},c))}),e.jsx(I,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["R$ ",d.subtotal.toFixed(2)]})]}),d.shipping>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Frete"}),e.jsxs("span",{className:"font-medium",children:["R$ ",d.shipping.toFixed(2)]})]}),d.tax>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Taxa"}),e.jsxs("span",{className:"font-medium",children:["R$ ",d.tax.toFixed(2)]})]}),d.discount&&d.discount>0&&e.jsxs("div",{className:"flex justify-between text-sm font-medium",style:{color:o.stepCompletedColor},children:[e.jsx("span",{children:"Desconto"}),e.jsxs("span",{children:["-R$ ",d.discount.toFixed(2)]})]}),e.jsx(I,{}),e.jsxs("div",{className:"flex justify-between text-xl font-bold pt-2",children:[e.jsx("span",{style:{color:o.headingColor},children:"Total"}),e.jsxs("span",{style:{color:o.headingColor},children:["R$ ",d.total.toFixed(2)]})]})]}),o.showTrustBadges&&e.jsxs(e.Fragment,{children:[e.jsx(I,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(oe,{className:"h-5 w-5",style:{color:o.trustBadgeColor}}),e.jsx("span",{className:"opacity-75",children:"Compra 100% Segura"})]}),o.sslBadgeEnabled&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Y,{className:"h-5 w-5",style:{color:o.trustBadgeColor}}),e.jsx("span",{className:"opacity-75",children:"Certificado SSL"})]})]})]})]})})]}),e.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 p-4 border-t backdrop-blur-xl z-40 safe-area-bottom",style:{backgroundColor:`${o.cardBackgroundColor}F8`,borderColor:o.cardBorderColor,boxShadow:"0 -4px 16px rgba(0,0,0,0.08)"},children:e.jsxs(X,{onClick:()=>T(!V),className:"w-full flex items-center justify-between shadow-lg font-semibold rounded-xl",style:{backgroundColor:o.primaryButtonBackgroundColor,color:o.primaryButtonTextColor,height:56},children:[e.jsxs("span",{className:"flex items-center gap-2.5",children:[e.jsx(W,{className:"h-5 w-5"}),e.jsx("span",{className:"text-base",children:V?"Ocultar Resumo":"Ver Resumo"})]}),e.jsxs("span",{className:"font-bold text-lg",children:["R$ ",d.total.toFixed(2)]})]})}),V&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/60 z-50 backdrop-blur-sm animate-in fade-in duration-200",onClick:()=>T(!1),children:e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 rounded-t-3xl p-6 max-h-[85vh] overflow-y-auto animate-in slide-in-from-bottom duration-300",style:{backgroundColor:o.cardBackgroundColor,color:o.textColor,boxShadow:"0 -8px 32px rgba(0,0,0,0.12)"},onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-12 h-1.5 rounded-full opacity-30",style:{backgroundColor:o.textColor}})}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold",style:{color:o.headingColor},children:"Resumo do Pedido"}),e.jsx("button",{onClick:()=>T(!1),className:"p-2 rounded-full hover:bg-gray-100/10 transition-colors active:scale-95",children:e.jsx(ke,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"space-y-4 mb-6",children:d.products.map((t,c)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"relative flex-shrink-0 rounded-lg overflow-hidden",style:{width:70,height:70,backgroundColor:o.inputBackgroundColor},children:[t.image?e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(W,{className:"h-8 w-8 opacity-30"})}),e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",style:{backgroundColor:o.quantityCircleColor,color:o.quantityTextColor},children:t.quantity})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm mb-1",children:t.name}),e.jsxs("p",{className:"text-xs opacity-75",children:["Qtd: ",t.quantity]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-bold",children:["R$ ",(t.price*t.quantity).toFixed(2)]})})]},c))}),e.jsx(I,{className:"mb-4"}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["R$ ",d.subtotal.toFixed(2)]})]}),d.shipping>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Frete"}),e.jsxs("span",{className:"font-medium",children:["R$ ",d.shipping.toFixed(2)]})]}),d.tax>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Taxa"}),e.jsxs("span",{className:"font-medium",children:["R$ ",d.tax.toFixed(2)]})]}),d.discount&&d.discount>0&&e.jsxs("div",{className:"flex justify-between text-sm font-medium",style:{color:o.stepCompletedColor},children:[e.jsx("span",{children:"Desconto"}),e.jsxs("span",{children:["-R$ ",d.discount.toFixed(2)]})]}),e.jsx(I,{}),e.jsxs("div",{className:"flex justify-between text-xl font-bold pt-2",children:[e.jsx("span",{style:{color:o.headingColor},children:"Total"}),e.jsxs("span",{style:{color:o.headingColor},children:["R$ ",d.total.toFixed(2)]})]})]}),e.jsx(X,{onClick:()=>T(!1),className:"w-full font-semibold text-base shadow-lg rounded-xl",style:{backgroundColor:o.primaryButtonBackgroundColor,color:o.primaryButtonTextColor,height:52},children:"Fechar"})]})})]}),e.jsx("footer",{className:"border-t py-8 md:py-10 mt-12 md:mt-16",style:{backgroundColor:o.footerBackgroundColor,borderColor:o.cardBorderColor,color:o.footerTextColor},children:e.jsx("div",{className:"container mx-auto px-4 max-w-6xl",children:e.jsxs("div",{className:"text-center space-y-5 md:space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2.5 md:gap-3",children:[e.jsx(Y,{className:"h-5 w-5 md:h-6 md:w-6 text-green-600"}),e.jsx("span",{className:"font-bold text-lg md:text-xl",children:"Checkout Seguro"})]}),o.showTrustBadges&&e.jsxs("div",{className:"flex items-center justify-center gap-4 md:gap-8 flex-wrap text-xs md:text-sm",children:[o.sslBadgeEnabled&&e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsx(oe,{className:"h-4 w-4 md:h-5 md:w-5 text-green-600"}),e.jsx("span",{className:"whitespace-nowrap",children:"Certificado SSL"})]}),o.showPaymentMethods&&e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsx(_,{className:"h-4 w-4 md:h-5 md:w-5"}),e.jsx("span",{className:"whitespace-nowrap",children:"Pagamento Seguro"})]}),o.securityIconsEnabled&&e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsx(oe,{className:"h-4 w-4 md:h-5 md:w-5"}),e.jsx("span",{className:"whitespace-nowrap",children:"Dados Protegidos"})]})]}),(o.showCnpjCpf||o.showContactEmail||o.showPhone||o.showAddress)&&e.jsxs("div",{className:"text-xs md:text-sm space-y-1 opacity-80 max-w-md mx-auto",children:[o.showStoreName&&e.jsx("p",{className:"font-semibold text-sm md:text-base",children:"Minha Loja"}),o.showCnpjCpf&&e.jsx("p",{children:"CNPJ: 00.000.000/0001-00"}),o.showAddress&&e.jsx("p",{className:"text-balance",children:"Endere√ßo: Rua Exemplo, 123 - S√£o Paulo/SP"}),o.showContactEmail&&e.jsx("p",{children:"E-mail: contato@loja.com.br"}),o.showPhone&&e.jsx("p",{children:"Telefone: (11) 99999-9999"})]}),(o.showPrivacyPolicy||o.showTermsConditions||o.showReturns)&&e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"my-3 md:my-4"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 md:gap-6 text-xs md:text-sm flex-wrap px-4",children:[o.showPrivacyPolicy&&e.jsx("a",{href:"#",style:{color:o.footerLinkColor},className:"hover:underline transition-all whitespace-nowrap",children:"Pol√≠tica de Privacidade"}),o.showTermsConditions&&e.jsx("a",{href:"#",style:{color:o.footerLinkColor},className:"hover:underline transition-all whitespace-nowrap",children:"Termos e Condi√ß√µes"}),o.showReturns&&e.jsx("a",{href:"#",style:{color:o.footerLinkColor},className:"hover:underline transition-all whitespace-nowrap",children:"Trocas e Devolu√ß√µes"})]})]}),e.jsx(I,{className:"my-3 md:my-4"}),e.jsxs("p",{className:"text-xs md:text-xs opacity-60 pb-2",children:["¬© ",new Date().getFullYear()," - Todos os direitos reservados"]})]})})})]})},to=Object.freeze(Object.defineProperty({__proto__:null,default:He},Symbol.toStringTag,{value:"Module"}));export{be as D,Ve as M,He as P,Re as S,to as a,Ee as c};

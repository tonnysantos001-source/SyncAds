import{j as e}from"./vendor-ui-DAyDU-p2.js";import{e as s,r as a}from"./vendor-react-BDwqAlkB.js";import{s as t,H as r,r as i,t as l,v as n,C as o,a as c,b as d,w as x,d as m,c as p,B as h,x as u,y as g,e as j,z as y,D as v,E as b,F as N,G as f}from"./index-B3dE3s0w.js";import{S as w}from"./SuperAdminLayout-Mc5GN7CV.js";import{m as C}from"./vendor-animation-x8f1c1kX.js";import"./vendor-supabase-rKXMzPQL.js";import"./vendor-utils-Dl0_yMKq.js";import"./vendor-query-D3VdSFIC.js";import"./vendor-icons-CzCc3fGi.js";const k=({title:s,value:a,subtitle:t,icon:r,gradient:i,trend:l,delay:n=0,onClick:d})=>e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n,duration:.5},whileHover:{scale:1.02},className:"cursor-pointer",onClick:d,children:e.jsxs(o,{className:"relative overflow-hidden border-gray-700/50 bg-gray-900/50 backdrop-blur-xl hover:border-gray-600 transition-all duration-300 group",children:[e.jsx("div",{className:`absolute inset-0 opacity-10 group-hover:opacity-20 transition-opacity ${i}`}),e.jsx(c,{className:"relative z-10 pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`p-3 rounded-xl ${i} bg-opacity-20 backdrop-blur-sm`,children:e.jsx(r,{className:"w-6 h-6 text-white"})}),l&&e.jsxs(j,{variant:l.positive?"default":"destructive",className:"gap-1",children:[e.jsx(b,{className:"w-3 h-3 "+(l.positive?"":"rotate-180")}),l.value]})]})}),e.jsx(p,{className:"relative z-10",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:s}),e.jsx("h3",{className:"text-3xl font-bold text-white",children:a}),e.jsx("p",{className:"text-xs text-gray-500",children:t})]})})]})});function R(){const R=s(),[U,A]=a.useState({totalUsers:0,activeUsers:0,totalRevenue:0,monthlyRevenue:0,totalAiConnections:0,totalMessages:0,totalTokens:0,gatewaysConfigured:0,plansDistribution:{free:0,starter:0,pro:0,enterprise:0}}),[D,M]=a.useState(!0);a.useEffect(()=>{E()},[]);const E=async()=>{try{const{count:e}=await t.from("User").select("*",{count:"exact",head:!0}),{count:s}=await t.from("User").select("*",{count:"exact",head:!0}).eq("isActive",!0),{count:a}=await t.from("GlobalAiConnection").select("*",{count:"exact",head:!0}),{count:r}=await t.from("ChatMessage").select("*",{count:"exact",head:!0}),{data:i}=await t.from("PlanDailyUsage").select("aiMessagesUsed, aiImagesUsed"),l=i?.reduce((e,s)=>e+(s.aiMessagesUsed||0),0)||0,{count:n}=await t.from("GatewayConfig").select("*",{count:"exact",head:!0}),{data:o}=await t.from("User").select("plan").eq("isActive",!0),c={free:o?.filter(e=>"FREE"===e.plan||!e.plan).length||0,starter:o?.filter(e=>"STARTER"===e.plan).length||0,pro:o?.filter(e=>"PRO"===e.plan).length||0,enterprise:o?.filter(e=>"ENTERPRISE"===e.plan).length||0},d={free:0,starter:49.9,pro:199.9,enterprise:999.9},x=c.starter*d.starter+c.pro*d.pro+c.enterprise*d.enterprise;A({totalUsers:e||0,activeUsers:s||0,totalRevenue:3*x,monthlyRevenue:x,totalAiConnections:a||0,totalMessages:r||0,totalTokens:l,gatewaysConfigured:n||0,plansDistribution:c})}catch(e){}finally{M(!1)}},T=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),I=e=>new Intl.NumberFormat("pt-BR").format(e);return D?e.jsx(w,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-gray-400 animate-pulse",children:"Carregando estatísticas..."})]})})}):e.jsx(w,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs(C.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"space-y-2",children:[e.jsx("h1",{className:"text-3xl font-black text-white",children:"Dashboard Administrativo"}),e.jsx("p",{className:"text-gray-400",children:"Visão geral completa do sistema e métricas principais"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(k,{title:"Total de Usuários",value:I(U.totalUsers),subtitle:`${U.activeUsers} ativos`,icon:r,gradient:"bg-gradient-to-br from-blue-500 to-cyan-500",trend:{value:"+12%",positive:!0},delay:0,onClick:()=>R("/super-admin/clients")}),e.jsx(k,{title:"Receita Mensal (MRR)",value:T(U.monthlyRevenue),subtitle:"Receita recorrente",icon:i,gradient:"bg-gradient-to-br from-green-500 to-emerald-500",trend:{value:"+8%",positive:!0},delay:.1,onClick:()=>R("/super-admin/billing")}),e.jsx(k,{title:"Mensagens IA",value:I(U.totalMessages),subtitle:"Total de interações",icon:l,gradient:"bg-gradient-to-br from-purple-500 to-pink-500",trend:{value:"+24%",positive:!0},delay:.2,onClick:()=>R("/super-admin/usage")}),e.jsx(k,{title:"Gateways Ativos",value:U.gatewaysConfigured,subtitle:"Configurados e prontos",icon:n,gradient:"bg-gradient-to-br from-orange-500 to-red-500",delay:.3,onClick:()=>R("/super-admin/gateways")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(C.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},children:e.jsxs(o,{className:"border-gray-700/50 bg-gray-900/50 backdrop-blur-xl",children:[e.jsxs(c,{children:[e.jsxs(d,{className:"text-white flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5 text-purple-400"}),"Conexões de IA"]}),e.jsx(m,{className:"text-gray-400",children:"IAs globais configuradas"})]}),e.jsx(p,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-4xl font-bold text-white",children:U.totalAiConnections}),e.jsxs(h,{variant:"ghost",size:"sm",onClick:()=>R("/super-admin/ai-connections"),className:"text-purple-400 hover:text-purple-300 hover:bg-purple-500/10",children:["Ver todas",e.jsx(u,{className:"ml-2 w-4 h-4"})]})]})})]})}),e.jsx(C.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},children:e.jsxs(o,{className:"border-gray-700/50 bg-gray-900/50 backdrop-blur-xl",children:[e.jsxs(c,{children:[e.jsxs(d,{className:"text-white flex items-center gap-2",children:[e.jsx(g,{className:"w-5 h-5 text-blue-400"}),"Taxa de Ativação"]}),e.jsx(m,{className:"text-gray-400",children:"Usuários ativos vs total"})]}),e.jsx(p,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-4xl font-bold text-white",children:[Math.round(U.activeUsers/U.totalUsers*100),"%"]}),e.jsxs(j,{variant:"default",className:"bg-green-500/20 text-green-400 border-green-500/30",children:[e.jsx(y,{className:"mr-1 w-3 h-3"}),"Ótimo"]})]}),e.jsx("div",{className:"w-full bg-gray-800 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 h-2 rounded-full transition-all duration-500",style:{width:U.activeUsers/U.totalUsers*100+"%"}})})]})})]})}),e.jsx(C.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6},children:e.jsxs(o,{className:"border-gray-700/50 bg-gray-900/50 backdrop-blur-xl",children:[e.jsxs(c,{children:[e.jsxs(d,{className:"text-white flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5 text-orange-400"}),"Crescimento Trimestral"]}),e.jsx(m,{className:"text-gray-400",children:"Receita estimada"})]}),e.jsx(p,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-2xl font-bold text-white",children:T(U.totalRevenue)}),e.jsx(b,{className:"w-8 h-8 text-green-400"})]})})]})})]}),e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:e.jsxs(o,{className:"border-gray-700/50 bg-gray-900/50 backdrop-blur-xl",children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(d,{className:"text-white",children:"Distribuição de Planos"}),e.jsx(m,{className:"text-gray-400",children:"Usuários por plano de assinatura"})]}),e.jsxs(h,{onClick:()=>R("/super-admin/plans"),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:["Gerenciar Planos",e.jsx(u,{className:"ml-2 w-4 h-4"})]})]})}),e.jsx(p,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{name:"Gratuito",count:U.plansDistribution.free,color:"from-gray-500 to-gray-600",icon:r},{name:"Starter",count:U.plansDistribution.starter,color:"from-blue-500 to-cyan-500",icon:N},{name:"Pro",count:U.plansDistribution.pro,color:"from-purple-500 to-pink-500",icon:f},{name:"Enterprise",count:U.plansDistribution.enterprise,color:"from-orange-500 to-red-500",icon:v}].map((s,a)=>e.jsxs(C.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.8+.1*a},className:"relative p-4 rounded-xl bg-gray-800/50 border border-gray-700/50 hover:border-gray-600 transition-all group",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${s.color} opacity-5 group-hover:opacity-10 rounded-xl transition-opacity`}),e.jsxs("div",{className:"relative space-y-2",children:[e.jsx(s.icon,{className:"w-8 h-8 text-gray-400 group-hover:text-white transition-colors"}),e.jsx("p",{className:"text-sm text-gray-400",children:s.name}),e.jsx("p",{className:"text-2xl font-bold text-white",children:s.count})]})]},s.name))})})]})}),e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},children:e.jsxs(o,{className:"border-gray-700/50 bg-gray-900/50 backdrop-blur-xl",children:[e.jsxs(c,{children:[e.jsx(d,{className:"text-white",children:"Ações Rápidas"}),e.jsx(m,{className:"text-gray-400",children:"Acesso rápido às principais funcionalidades"})]}),e.jsx(p,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(h,{onClick:()=>R("/super-admin/chat"),variant:"outline",className:"justify-start h-auto py-4 border-gray-700 hover:border-purple-500 hover:bg-purple-500/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-500/20",children:e.jsx(l,{className:"w-5 h-5 text-purple-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-semibold text-white",children:"Chat Admin"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Conversar com IA como admin"})]})]})}),e.jsx(h,{onClick:()=>R("/super-admin/clients"),variant:"outline",className:"justify-start h-auto py-4 border-gray-700 hover:border-blue-500 hover:bg-blue-500/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:e.jsx(r,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-semibold text-white",children:"Gerenciar Clientes"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Ver e gerenciar usuários"})]})]})}),e.jsx(h,{onClick:()=>R("/super-admin/payment-split"),variant:"outline",className:"justify-start h-auto py-4 border-gray-700 hover:border-green-500 hover:bg-green-500/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-500/20",children:e.jsx(i,{className:"w-5 h-5 text-green-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-semibold text-white",children:"Split de Pagamento"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Configurar divisão de receita"})]})]})})]})})]})})]})})}export{R as default};

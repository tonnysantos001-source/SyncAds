import{d as Se,r as u,s as m,j as e,O as A,B as g,aB as L,I as y,af as M,as as P,aD as Ce,aa as k,e as R,f as $,g as I,h as O,i as D,aI as Y,aq as E,o as q,aJ as Te,aK as Ae,an as Ke,aL as Pe,aM as ke,aN as Ee}from"./index-DB1lyyic.js";import{L as o}from"./label-C-ELawTK.js";import{S as qe}from"./switch-B9cafkgt.js";import{D as Re,a as $e,b as Ie,c as De,d as _e,e as Ge,f as Ve}from"./dialog-DYuYRGiI.js";import{S as U,a as J,b as Q,c as W,d as C}from"./select-B3kWVwj5.js";import{T as Fe,a as He,b as Z,c as h,d as ze,e as b}from"./table-D7NWkaoR.js";import{A as ee,b as ae,a as se}from"./alert-Cw_zs5l2.js";import{S as te}from"./SuperAdminLayout-BTy8AnuX.js";import"./index-_7OXcJ15.js";import"./x-B30QQG3_.js";const Xe={slug:"paguex",name:"Pague-X",type:"payment_processor",endpoints:{test:"https://api.inpagamentos.com/v1/transactions"},authType:"basic",requiredFields:["publicKey","secretKey"],async detect(s){const{publicKey:n,secretKey:r}=s;if(!n||!r)return{success:!1,message:"Pague-X: publicKey e secretKey são obrigatórios"};try{const c=btoa(`${n}:${r}`),x=await fetch(`${this.endpoints.test}?limit=1`,{method:"GET",headers:{Authorization:`Basic ${c}`,"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});return x.ok?{success:!0,gateway:{slug:this.slug,name:this.name,type:this.type},message:"Pague-X detectado e credenciais válidas",capabilities:{pix:!0,credit_card:!0,debit_card:!0,boleto:!0}}:{success:!1,message:`Pague-X: Erro ${x.status}`}}catch(c){return{success:!1,message:`Pague-X: ${c.message}`}}}},Be={slug:"mercadopago",name:"Mercado Pago",type:"payment_processor",endpoints:{test:"https://api.mercadopago.com/v1/account/settings"},authType:"bearer",requiredFields:["accessToken"],async detect(s){const{accessToken:n}=s;if(!n)return{success:!1,message:"Mercado Pago: accessToken é obrigatório"};try{const r=await fetch(this.endpoints.test,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});return r.ok?{success:!0,gateway:{slug:this.slug,name:this.name,type:this.type},message:"Mercado Pago detectado e credenciais válidas",capabilities:{pix:!0,credit_card:!0,debit_card:!1,boleto:!0}}:{success:!1,message:`Mercado Pago: Erro ${r.status}`}}catch(r){return{success:!1,message:`Mercado Pago: ${r.message}`}}}},Le={slug:"pagseguro",name:"PagSeguro",type:"payment_processor",endpoints:{test:"https://api.pagseguro.com/charges"},authType:"bearer",requiredFields:["apiKey"],async detect(s){const{apiKey:n}=s;if(!n)return{success:!1,message:"PagSeguro: apiKey é obrigatório"};try{const r=await fetch(this.endpoints.test,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});return r.ok||r.status===400?{success:!0,gateway:{slug:this.slug,name:this.name,type:this.type},message:"PagSeguro detectado e credenciais válidas",capabilities:{pix:!0,credit_card:!0,debit_card:!0,boleto:!0}}:{success:!1,message:`PagSeguro: Erro ${r.status}`}}catch(r){return{success:!1,message:`PagSeguro: ${r.message}`}}}},Me={slug:"stripe",name:"Stripe",type:"payment_processor",endpoints:{test:"https://api.stripe.com/v1/balance"},authType:"bearer",requiredFields:["secretKey"],async detect(s){const{secretKey:n}=s;if(!n)return{success:!1,message:"Stripe: secretKey é obrigatório"};try{const r=await fetch(this.endpoints.test,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});return r.ok?{success:!0,gateway:{slug:this.slug,name:this.name,type:this.type},message:"Stripe detectado e credenciais válidas",capabilities:{pix:!1,credit_card:!0,debit_card:!0,boleto:!1}}:{success:!1,message:`Stripe: Erro ${r.status}`}}catch(r){return{success:!1,message:`Stripe: ${r.message}`}}}},Oe={slug:"asaas",name:"Asaas",type:"payment_processor",endpoints:{test:"https://api.asaas.com/v3/customers"},authType:"apikey",requiredFields:["apiKey"],async detect(s){const{apiKey:n}=s;if(!n)return{success:!1,message:"Asaas: apiKey é obrigatório"};try{const r=await fetch(`${this.endpoints.test}?limit=1`,{method:"GET",headers:{access_token:n,"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});return r.ok?{success:!0,gateway:{slug:this.slug,name:this.name,type:this.type},message:"Asaas detectado e credenciais válidas",capabilities:{pix:!0,credit_card:!0,debit_card:!1,boleto:!0}}:{success:!1,message:`Asaas: Erro ${r.status}`}}catch(r){return{success:!1,message:`Asaas: ${r.message}`}}}},Ye=[Xe,Be,Le,Me,Oe];async function Ue(s){console.log("[Auto-Detect] Iniciando detecção de gateway...");const n={publicKey:s.publicKey||s.PUBLIC_KEY||s.public_key,secretKey:s.secretKey||s.SECRET_KEY||s.secret_key,apiKey:s.apiKey||s.API_KEY||s.api_key,apiSecret:s.apiSecret||s.API_SECRET||s.api_secret,accessToken:s.accessToken||s.ACCESS_TOKEN||s.access_token,clientId:s.clientId||s.CLIENT_ID||s.client_id,clientSecret:s.clientSecret||s.CLIENT_SECRET||s.client_secret};console.log("[Auto-Detect] Credenciais normalizadas:",Object.keys(n).filter(r=>n[r]));for(const r of Ye){console.log(`[Auto-Detect] Testando ${r.name}...`);try{const c=await r.detect(n);if(c.success)return console.log(`[Auto-Detect] ✅ ${r.name} detectado!`),c;console.log(`[Auto-Detect] ❌ ${r.name}: ${c.message}`)}catch(c){console.error(`[Auto-Detect] Erro ao testar ${r.name}:`,c.message)}}return{success:!1,message:"Nenhum gateway compatível detectado. Verifique suas credenciais."}}const T=({title:s,value:n,description:r,icon:c,gradient:x,delay:p=0})=>e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:p},whileHover:{scale:1.02},children:e.jsxs(R,{className:"border-gray-700/50 bg-gray-900/50 backdrop-blur-xl hover:border-gray-600 transition-all group cursor-pointer relative overflow-hidden",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${x} opacity-10 group-hover:opacity-20 transition-opacity`}),e.jsxs($,{className:"flex flex-row items-center justify-between space-y-0 pb-2 relative z-10",children:[e.jsx(I,{className:"text-sm font-medium text-gray-300",children:s}),e.jsx("div",{className:`p-2.5 rounded-xl bg-gradient-to-br ${x} shadow-lg`,children:e.jsx(c,{className:"h-4 w-4 text-white"})})]}),e.jsxs(D,{className:"relative z-10",children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:n}),e.jsx("p",{className:"text-xs text-gray-400",children:r})]})]})});function na(){const{toast:s}=Se(),[n,r]=u.useState(!0),[c,x]=u.useState([]),[p,re]=u.useState({totalTransactions:0,adminTransactions:0,clientTransactions:0,adminRevenue:0,splitPercentage:0}),[ie,ne]=u.useState([]),[ce,v]=u.useState(!1),[S,_]=u.useState(null),[t,l]=u.useState({name:"",description:"",type:"frequency",frequencyEvery:10,frequencyTake:2,percentage:20,minValue:0,maxValue:0,adminGatewayId:"",isActive:!0,priority:0}),[d,K]=u.useState({publicKey:"",secretKey:""}),[G,V]=u.useState(!1),[F,H]=u.useState(!1),[j,z]=u.useState({configured:!1});u.useEffect(()=>{N(),X()},[]);const N=async()=>{r(!0);try{await Promise.all([oe(),le(),de()])}catch(a){console.error("Error loading data:",a)}finally{r(!1)}},oe=async()=>{const{data:a,error:i}=await m.from("PaymentSplitRule").select("*").order("priority",{ascending:!1});!i&&a&&x(a)},le=async()=>{const{data:a}=await m.from("PaymentSplitLog").select("decision, adminRevenue");if(a){const i=a.length,f=a.filter(w=>w.decision==="admin").length,fe=a.filter(w=>w.decision==="client").length,ve=a.reduce((w,we)=>w+(we.adminRevenue||0),0),Ne=i>0?f/i*100:0;re({totalTransactions:i,adminTransactions:f,clientTransactions:fe,adminRevenue:ve,splitPercentage:Ne})}},de=async()=>{const{data:a}=await m.from("Gateway").select("*").eq("isActive",!0).order("name");a&&ne(a)},X=async()=>{var i;const{data:a}=await m.from("GatewayConfig").select("credentials").eq("gatewayId","ebac558d-e799-4246-b7fe-2c7c68393460").eq("userId","admin").single();if(a!=null&&a.credentials){const f=a.credentials;z({configured:!0,publicKey:((i=f.publicKey)==null?void 0:i.substring(0,20))+"***"}),K({publicKey:f.publicKey||"",secretKey:f.secretKey||""})}},ue=async()=>{if(!d.publicKey||!d.secretKey){s({title:"Erro",description:"Preencha Public Key e Secret Key",variant:"destructive"});return}V(!0);try{const{error:a}=await m.from("GatewayConfig").upsert({gatewayId:"ebac558d-e799-4246-b7fe-2c7c68393460",userId:"admin",credentials:{publicKey:d.publicKey,secretKey:d.secretKey},isActive:!0});if(a)throw a;s({title:"Sucesso!",description:"Credenciais salvas com sucesso"}),X()}catch(a){s({title:"Erro",description:a.message,variant:"destructive"})}finally{V(!1)}},me=async()=>{var a;if(!d.publicKey&&!d.secretKey){s({title:"Erro",description:"Preencha pelo menos uma credencial antes de testar",variant:"destructive"});return}H(!0);try{const i=await Ue({publicKey:d.publicKey,secretKey:d.secretKey});i.success&&i.gateway?(s({title:`${i.gateway.name} Detectado!`,description:i.message}),z({configured:!0,publicKey:((a=d.publicKey)==null?void 0:a.substring(0,20))+"***",gatewayName:i.gateway.name,gatewaySlug:i.gateway.slug})):s({title:"Gateway Não Detectado",description:i.message,variant:"destructive"})}catch(i){s({title:"Erro de Conexão",description:i.message,variant:"destructive"})}finally{H(!1)}},ge=async()=>{try{const a={name:t.name,description:t.description,type:t.type,frequencyEvery:t.type==="frequency"?t.frequencyEvery:null,frequencyTake:t.type==="frequency"?t.frequencyTake:null,percentage:t.type==="percentage"?t.percentage:null,minValue:t.type==="value"?t.minValue:null,maxValue:t.type==="value"?t.maxValue:null,adminGatewayId:t.adminGatewayId||null,isActive:t.isActive,priority:t.priority};S?(await m.from("PaymentSplitRule").update(a).eq("id",S.id),s({title:"Sucesso!",description:"Regra atualizada com sucesso"})):(await m.from("PaymentSplitRule").insert(a),s({title:"Sucesso!",description:"Regra criada com sucesso"})),v(!1),B(),N()}catch(a){s({title:"Erro",description:a.message,variant:"destructive"})}},ye=async(a,i)=>{await m.from("PaymentSplitRule").update({isActive:!i}).eq("id",a),s({title:"Sucesso!",description:`Regra ${i?"desativada":"ativada"}`}),N()},pe=async a=>{confirm("Tem certeza que deseja excluir esta regra?")&&(await m.from("PaymentSplitRule").delete().eq("id",a),s({title:"Sucesso!",description:"Regra excluída"}),N())},xe=async a=>{await m.from("PaymentSplitRule").update({transactionCounter:0}).eq("id",a),s({title:"Sucesso!",description:"Contador resetado"}),N()},he=a=>{_(a),l({name:a.name,description:a.description||"",type:a.type,frequencyEvery:a.frequencyEvery||10,frequencyTake:a.frequencyTake||2,percentage:a.percentage||20,minValue:a.minValue||0,maxValue:a.maxValue||0,adminGatewayId:a.adminGatewayId||"",isActive:a.isActive,priority:a.priority}),v(!0)},B=()=>{l({name:"",description:"",type:"frequency",frequencyEvery:10,frequencyTake:2,percentage:20,minValue:0,maxValue:0,adminGatewayId:"",isActive:!0,priority:0}),_(null)},be=a=>{switch(a){case"frequency":return Ee;case"percentage":return ke;case"value":return k;case"time":return Pe;default:return M}},je=a=>{switch(a.type){case"frequency":return`A cada ${a.frequencyEvery} transações, ${a.frequencyTake} vão para o admin`;case"percentage":return`${a.percentage}% das transações para o admin`;case"value":return`Transações entre R$ ${a.minValue||0} e R$ ${a.maxValue||"∞"}`;default:return a.description||""}};return n?e.jsx(te,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsx(A.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-cyan-500/30 border-t-cyan-500 rounded-full"})})}):e.jsx(te,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(A.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent",children:"Split de Pagamento"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Controle a distribuição de transações entre seu gateway e o dos clientes"})]}),e.jsxs(Re,{open:ce,onOpenChange:v,children:[e.jsx($e,{asChild:!0,children:e.jsxs(g,{onClick:B,className:"bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 text-white border-0",children:[e.jsx(L,{className:"h-5 w-5 mr-2"}),"Nova Regra"]})}),e.jsxs(Ie,{className:"max-w-2xl bg-gray-900 border-gray-700",children:[e.jsxs(De,{children:[e.jsx(_e,{className:"text-white",children:S?"Editar Regra":"Criar Nova Regra"}),e.jsx(Ge,{className:"text-gray-400",children:"Configure como as transações serão distribuídas"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-gray-300",children:"Nome da Regra"}),e.jsx(y,{value:t.name,onChange:a=>l({...t,name:a.target.value}),placeholder:"Ex: Split 20% Admin",className:"bg-gray-800 border-gray-700 text-white"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-gray-300",children:"Descrição"}),e.jsx(y,{value:t.description,onChange:a=>l({...t,description:a.target.value}),className:"bg-gray-800 border-gray-700 text-white"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-gray-300",children:"Tipo de Regra"}),e.jsxs(U,{value:t.type,onValueChange:a=>l({...t,type:a}),children:[e.jsx(J,{className:"bg-gray-800 border-gray-700 text-white",children:e.jsx(Q,{})}),e.jsxs(W,{className:"bg-gray-800 border-gray-700",children:[e.jsx(C,{value:"frequency",children:"Frequência (A cada X transações)"}),e.jsx(C,{value:"percentage",children:"Percentual (X% das transações)"}),e.jsx(C,{value:"value",children:"Valor (Transações acima de X reais)"})]})]})]}),t.type==="frequency"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-gray-300",children:"A cada quantas transações?"}),e.jsx(y,{type:"number",value:t.frequencyEvery,onChange:a=>l({...t,frequencyEvery:parseInt(a.target.value)}),min:1,className:"bg-gray-800 border-gray-700 text-white"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-gray-300",children:"Quantas vão para o admin?"}),e.jsx(y,{type:"number",value:t.frequencyTake,onChange:a=>l({...t,frequencyTake:parseInt(a.target.value)}),min:1,className:"bg-gray-800 border-gray-700 text-white"})]})]}),t.type==="percentage"&&e.jsxs("div",{children:[e.jsx(o,{className:"text-gray-300",children:"Percentual para o admin (%)"}),e.jsx(y,{type:"number",value:t.percentage,onChange:a=>l({...t,percentage:parseFloat(a.target.value)}),min:0,max:100,step:.1,className:"bg-gray-800 border-gray-700 text-white"})]}),t.type==="value"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-gray-300",children:"Valor Mínimo (R$)"}),e.jsx(y,{type:"number",value:t.minValue,onChange:a=>l({...t,minValue:parseFloat(a.target.value)}),min:0,step:.01,className:"bg-gray-800 border-gray-700 text-white"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-gray-300",children:"Valor Máximo (R$)"}),e.jsx(y,{type:"number",value:t.maxValue,onChange:a=>l({...t,maxValue:parseFloat(a.target.value)}),min:0,step:.01,className:"bg-gray-800 border-gray-700 text-white"})]})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-gray-300",children:"Gateway do Admin"}),e.jsxs(U,{value:t.adminGatewayId,onValueChange:a=>l({...t,adminGatewayId:a}),children:[e.jsx(J,{className:"bg-gray-800 border-gray-700 text-white",children:e.jsx(Q,{placeholder:"Selecione um gateway"})}),e.jsx(W,{className:"bg-gray-800 border-gray-700",children:ie.map(a=>e.jsx(C,{value:a.id,children:a.name},a.id))})]})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-gray-300",children:"Prioridade (maior = maior prioridade)"}),e.jsx(y,{type:"number",value:t.priority,onChange:a=>l({...t,priority:parseInt(a.target.value)}),min:0,className:"bg-gray-800 border-gray-700 text-white"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800/50 rounded-lg border border-gray-700",children:[e.jsx(o,{className:"text-gray-300",children:"Regra Ativa"}),e.jsx(qe,{checked:t.isActive,onCheckedChange:a=>l({...t,isActive:a})})]})]}),e.jsxs(Ve,{children:[e.jsx(g,{variant:"outline",onClick:()=>v(!1),className:"border-gray-700 text-gray-300 hover:bg-gray-800",children:"Cancelar"}),e.jsx(g,{onClick:ge,className:"bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 text-white border-0",children:S?"Atualizar":"Criar"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(T,{title:"Total",value:p.totalTransactions,description:"Transações processadas",icon:M,gradient:"from-cyan-500 to-blue-500",delay:.1}),e.jsx(T,{title:"Admin",value:p.adminTransactions,description:`${p.splitPercentage.toFixed(1)}% do total`,icon:P,gradient:"from-green-500 to-emerald-500",delay:.2}),e.jsx(T,{title:"Cliente",value:p.clientTransactions,description:`${(100-p.splitPercentage).toFixed(1)}% do total`,icon:Ce,gradient:"from-blue-500 to-indigo-500",delay:.3}),e.jsx(T,{title:"Receita Admin",value:`R$ ${p.adminRevenue.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,description:"Via split",icon:k,gradient:"from-purple-500 to-pink-500",delay:.4})]}),e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsxs(R,{className:"border-gray-700/50 bg-gray-900/50 backdrop-blur-xl",children:[e.jsxs($,{children:[e.jsx(I,{className:"text-white",children:"Gateway do Admin (Seu Gateway)"}),e.jsx(O,{className:"text-gray-400",children:"Configure o gateway que receberá as transações quando o split direcionar para o admin. Use suas credenciais da Pague-X ou outro gateway compatível."})]}),e.jsx(D,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ee,{className:"border-gray-700/50 bg-gray-800/50",children:[e.jsx(Y,{className:"h-4 w-4 text-cyan-400"}),e.jsx(ae,{className:"text-white",children:"Sistema Multi-Gateway com Auto-Detecção"}),e.jsx(se,{className:"text-gray-400",children:'O sistema detecta automaticamente qual gateway você está usando. Suporta: Pague-X, Mercado Pago, PagSeguro, Stripe, Asaas e outros. Insira suas credenciais e clique em "Testar Conexão".'})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx(o,{children:"Gateway"}),j.configured&&j.gatewayName?e.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded bg-green-50 dark:bg-green-900/20",children:[e.jsx(P,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium",children:j.gatewayName})]}):e.jsx("div",{className:"p-2 border rounded bg-gray-50 dark:bg-gray-800 text-sm text-muted-foreground",children:"Auto-detectado após testar conexão"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Suportamos: Pague-X, Mercado Pago, PagSeguro, Stripe, Asaas"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Public Key"}),e.jsx(y,{type:"text",placeholder:"Sua Public Key da Pague-X",className:"font-mono text-sm",value:d.publicKey,onChange:a=>K({...d,publicKey:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Secret Key"}),e.jsx(y,{type:"password",placeholder:"Sua Secret Key da Pague-X",className:"font-mono text-sm",value:d.secretKey,onChange:a=>K({...d,secretKey:a.target.value})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{onClick:ue,disabled:G,children:G?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-4 w-4 mr-2 animate-spin"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Salvar Credenciais"]})}),e.jsx(g,{variant:"outline",onClick:me,disabled:F,children:F?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-4 w-4 mr-2 animate-spin"}),"Testando..."]}):"Testar Conexão"})]}),j.configured&&e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-800 rounded",children:e.jsx(k,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-1",children:"Gateway Configurado"}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[j.gatewayName||"Gateway"," • Configurado e ativo"]}),e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:["Public Key: ",j.publicKey]})]}),e.jsx(q,{className:"bg-green-500",children:"Ativo"})]})})]})})]})}),e.jsxs(ee,{children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx(ae,{children:"Como funciona?"}),e.jsx(se,{children:"O sistema distribui automaticamente as transações entre seu gateway (configurado acima) e o gateway do cliente. Configure regras baseadas em frequência, percentual ou valor."})]}),e.jsxs(R,{children:[e.jsxs($,{children:[e.jsx(I,{children:"Regras Configuradas"}),e.jsx(O,{children:"Gerenciar regras de split de pagamento"})]}),e.jsx(D,{children:c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"Nenhuma regra configurada"}),e.jsxs(g,{onClick:()=>v(!0),children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Criar Primeira Regra"]})]}):e.jsxs(Fe,{children:[e.jsx(He,{children:e.jsxs(Z,{children:[e.jsx(h,{children:"Nome"}),e.jsx(h,{children:"Tipo"}),e.jsx(h,{children:"Configuração"}),e.jsx(h,{children:"Contador"}),e.jsx(h,{children:"Stats"}),e.jsx(h,{children:"Status"}),e.jsx(h,{className:"text-right",children:"Ações"})]})}),e.jsx(ze,{children:c.map(a=>{const i=be(a.type);return e.jsxs(Z,{children:[e.jsxs(b,{children:[e.jsx("div",{className:"font-medium",children:a.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:a.description})]}),e.jsx(b,{children:e.jsxs(q,{variant:"outline",className:"flex items-center gap-1 w-fit",children:[e.jsx(i,{className:"h-3 w-3"}),a.type]})}),e.jsx(b,{className:"text-sm",children:je(a)}),e.jsx(b,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm",children:a.transactionCounter}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>xe(a.id),children:e.jsx(E,{className:"h-3 w-3"})})]})}),e.jsx(b,{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:["Total: ",a.totalTransactions]}),e.jsxs("div",{className:"text-green-600",children:["Admin: ",a.adminTransactions]}),e.jsxs("div",{className:"text-blue-600",children:["Cliente: ",a.clientTransactions]})]})}),e.jsx(b,{children:e.jsx(q,{variant:a.isActive?"default":"secondary",children:a.isActive?"Ativa":"Inativa"})}),e.jsx(b,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>ye(a.id,a.isActive),className:"hover:bg-gray-700 text-gray-300",children:e.jsx(Te,{className:`h-4 w-4 ${a.isActive?"text-red-400":"text-green-400"}`})}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>he(a),className:"hover:bg-gray-700 text-gray-300",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>pe(a.id),className:"hover:bg-gray-700 text-red-400",children:e.jsx(Ke,{className:"h-4 w-4"})})]})})]},a.id)})})]})})]})]})})}export{na as default};

import{u as j,e as k,r as s,C as w,s as r,j as a,aK as c,t as N}from"./index-DsYjGZ6P.js";import{M as C}from"./monitor-DYDlAuHo.js";import{D as S}from"./dollar-sign-lRT-IsbZ.js";import{T as E}from"./truck-BBRpZ407.js";function L(){var n;const t=j(e=>e.user),i=k(),[d,l]=s.useState([]),[m,h]=s.useState(!0);s.useEffect(()=>{t!=null&&t.id&&g()},[t==null?void 0:t.id]);const g=async()=>{if(t!=null&&t.id)try{const[e,o,b,v]=await Promise.all([x(),u(),p(),f()]);l([{id:"billing",title:"Faturamento",description:"Adicione um cartão de crédito em sua conta",icon:w,completed:e,route:"/settings?tab=billing"},{id:"domain",title:"Domínio",description:"Verifique seu domínio. Deve ser o mesmo utilizado na shopify, woocommerce ou na sua landing page.",icon:C,completed:o,route:"/checkout/domain"},{id:"gateway",title:"Gateway",description:"Configure os meios de pagamentos que serão exibidos em sua loja.",icon:S,completed:b,route:"/checkout/gateways"},{id:"shipping",title:"Frete",description:"Crie métodos de entrega para ser exibido no seu checkout.",icon:E,completed:v,route:"/checkout/shipping"}])}catch(e){console.error("Erro ao carregar status de onboarding:",e)}finally{h(!1)}},x=async()=>{if(!(t!=null&&t.id))return!1;try{const{data:e}=await r.from("User").select("stripeCustomerId, subscriptionId").eq("id",t.id).single();return!!(e!=null&&e.stripeCustomerId&&(e!=null&&e.subscriptionId))}catch(e){return console.error("Erro ao verificar billing:",e),!1}},u=async()=>{if(!(t!=null&&t.id))return!1;try{const{data:e}=await r.from("User").select("domain, domainVerified").eq("id",t.id).single();return!!(e!=null&&e.domain&&(e!=null&&e.domainVerified))}catch(e){return console.error("Erro ao verificar domínio:",e),!1}},p=async()=>{if(!(t!=null&&t.id))return!1;try{const{data:e}=await r.from("GatewayConfig").select("id, isActive").eq("userId",t.id).eq("isActive",!0).limit(1);return((e==null?void 0:e.length)||0)>0}catch(e){return console.error("Erro ao verificar gateway:",e),!1}},f=async()=>{if(!(t!=null&&t.id))return!1;try{const{data:e}=await r.from("ShippingMethod").select("id").eq("userId",t.id).limit(1);return((e==null?void 0:e.length)||0)>0}catch(e){return console.error("Erro ao verificar frete:",e),!1}};if(m)return a.jsx(c,{children:a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx(N,{className:"h-8 w-8 animate-spin text-gray-400"})})});const y=(t==null?void 0:t.name)||((n=t==null?void 0:t.email)==null?void 0:n.split("@")[0])||"usuário";return a.jsxs(c,{children:[a.jsxs("div",{className:"p-6 sm:p-8 max-w-4xl mx-auto",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["Olá ",y,","]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Seja bem vindo"})]}),a.jsx("div",{className:"mb-6",children:a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Para ativar seu checkout você precisa concluir todos passos abaixo:"})}),a.jsx("div",{className:"space-y-4",children:d.map(e=>{const o=e.icon;return a.jsxs("div",{className:"flex items-start gap-4 p-4 border-2 rounded-lg bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 cursor-pointer hover:border-gray-300 dark:hover:border-gray-600 transition-all",onClick:()=>i(e.route),children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(o,{className:"h-8 w-8 text-gray-600 dark:text-gray-400"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:e.title}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.description})]}),a.jsx("div",{className:"flex-shrink-0 pt-1",children:a.jsx("div",{className:`h-3 w-3 rounded-full ${e.completed?"bg-green-500":"bg-red-500"}`,title:e.completed?"Concluído":"Pendente"})})]},e.id)})}),a.jsxs("div",{className:"mt-8 text-center text-sm text-gray-600 dark:text-gray-400",children:["Caso tenha alguma dúvida,"," ",a.jsx("button",{onClick:()=>i("/help"),className:"underline hover:text-gray-900 dark:hover:text-white",children:"visite nossa central de ajuda"}),"."]})]}),a.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:a.jsx("button",{className:"rounded-full bg-pink-500 hover:bg-pink-600 text-white px-6 py-3 shadow-lg transition-colors",onClick:()=>i("/chat"),children:"Precisa de ajuda?"})})]})}export{L as default};

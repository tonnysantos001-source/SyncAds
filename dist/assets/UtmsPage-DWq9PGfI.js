import{G as g,g as k,D as Q,F as ee,j as e,k as b,B as re,ap as te,C as y,l as j,o as f,t as M,q as v,a9 as ae,x as A}from"./index-ykOkhvXK.js";import{S as se,a as oe,b as ne,c as ie,d as X}from"./select-DlOWF329.js";import{S as R}from"./skeleton-xn_TbVIw.js";import{t as ce,c as le}from"./constructFrom-rJN6zrQ_.js";import{M as de}from"./mouse-pointer-DtpvYYjS.js";import{T as Z}from"./target-B2vJmgj8.js";import{D as H}from"./dollar-sign-DAw56agX.js";import{P as me}from"./percent-Bz5QXj71.js";import{C as ge}from"./chart-column-QUIHT7R1.js";import{R as q,C as D,X as E,Y as F,T as V,q as W,B as O}from"./generateCategoricalChart-CvCDx5aa.js";import{B as Y}from"./BarChart-C1e7NUOd.js";import{A as _}from"./activity-DK0Hnrz3.js";import{a as xe,L as he}from"./LineChart-Ddt5VZpu.js";import{Z as J}from"./zap-DwdBfJNt.js";import{T as ue}from"./trending-up-9OkONing.js";import{A as pe}from"./arrow-up-right-D3V77W1v.js";import{A as ye}from"./arrow-down-right-DWG2Bamr.js";import"./index-BGEeziH0.js";const P={async track(n){try{const{data:r,error:t}=await g.from("UTMTracking").insert({...n,converted:!1}).select().single();if(t)throw t;return r}catch(r){throw console.error("Error tracking UTM:",r),r}},async getById(n){try{const{data:r,error:t}=await g.from("UTMTracking").select("*").eq("id",n).single();if(t)throw t;return r}catch(r){throw console.error("Error getting UTM:",r),r}},async getBySession(n){try{const{data:r,error:t}=await g.from("UTMTracking").select("*").eq("sessionId",n).order("createdAt",{ascending:!1}).limit(1).single();if(t){if(t.code==="PGRST116")return null;throw t}return r}catch(r){throw console.error("Error getting UTM by session:",r),r}},async getByUser(n,r){try{let t=g.from("UTMTracking").select("*").eq("userId",n).order("createdAt",{ascending:!1});r!=null&&r.source&&(t=t.eq("utmSource",r.source)),r!=null&&r.medium&&(t=t.eq("utmMedium",r.medium)),r!=null&&r.campaign&&(t=t.eq("utmCampaign",r.campaign)),(r==null?void 0:r.converted)!==void 0&&(t=t.eq("converted",r.converted)),r!=null&&r.dateFrom&&(t=t.gte("createdAt",r.dateFrom)),r!=null&&r.dateTo&&(t=t.lte("createdAt",r.dateTo)),r!=null&&r.limit&&(t=t.limit(r.limit)),r!=null&&r.offset&&(t=t.range(r.offset,r.offset+(r.limit||50)-1));const{data:o,error:c}=await t;if(c)throw c;return o}catch(t){throw console.error("Error listing UTMs:",t),t}},async markAsConverted(n,r,t){try{const{data:o,error:c}=await g.from("UTMTracking").update({converted:!0,convertedAt:new Date().toISOString(),orderId:r,orderValue:t,updatedAt:new Date().toISOString()}).eq("id",n).select().single();if(c)throw c;return o}catch(o){throw console.error("Error marking UTM as converted:",o),o}},async markSessionConverted(n,r,t){try{const o=await P.getBySession(n);return o?await P.markAsConverted(o.id,r,t):null}catch(o){throw console.error("Error marking session as converted:",o),o}},async update(n,r){try{const{data:t,error:o}=await g.from("UTMTracking").update({...r,updatedAt:new Date().toISOString()}).eq("id",n).select().single();if(o)throw o;return t}catch(t){throw console.error("Error updating UTM:",t),t}},async delete(n){try{const{error:r}=await g.from("UTMTracking").delete().eq("id",n);if(r)throw r}catch(r){throw console.error("Error deleting UTM:",r),r}},async getAnalytics(n,r){try{let t=g.from("UTMAnalytics").select("*").eq("userId",n);r&&(t=t.gte("createdAt",r.from).lte("createdAt",r.to));const{data:o,error:c}=await t;if(c)throw c;return o}catch(t){throw console.error("Error getting analytics:",t),t}},async getStats(n,r){try{let t=g.from("UTMTracking").select("*").eq("userId",n);r&&(t=t.gte("createdAt",r.from).lte("createdAt",r.to));const{data:o,error:c}=await t;if(c)throw c;const d=o,s=d.length,x=d.filter(i=>i.converted).length,u=d.filter(i=>i.converted&&i.orderValue).reduce((i,a)=>i+(a.orderValue||0),0),C=s>0?x/s*100:0,h=x>0?u/x:0,w={};[...new Set(d.map(i=>i.utmSource).filter(Boolean))].forEach(i=>{const a=d.filter(m=>m.utmSource===i),l=a.filter(m=>m.converted),p=l.reduce((m,T)=>m+(T.orderValue||0),0);w[i]={utmSource:i,totalVisits:a.length,totalConversions:l.length,conversionRate:l.length/a.length*100,totalRevenue:p,averageOrderValue:l.length>0?p/l.length:0}});const S={};[...new Set(d.map(i=>i.utmMedium).filter(Boolean))].forEach(i=>{const a=d.filter(m=>m.utmMedium===i),l=a.filter(m=>m.converted),p=l.reduce((m,T)=>m+(T.orderValue||0),0);S[i]={utmMedium:i,totalVisits:a.length,totalConversions:l.length,conversionRate:l.length/a.length*100,totalRevenue:p,averageOrderValue:l.length>0?p/l.length:0}});const N={};[...new Set(d.map(i=>i.utmCampaign).filter(Boolean))].forEach(i=>{const a=d.filter(m=>m.utmCampaign===i),l=a.filter(m=>m.converted),p=l.reduce((m,T)=>m+(T.orderValue||0),0);N[i]={utmCampaign:i,totalVisits:a.length,totalConversions:l.length,conversionRate:l.length/a.length*100,totalRevenue:p,averageOrderValue:l.length>0?p/l.length:0}});const $=Object.entries(w).map(([i,a])=>({name:i,conversions:a.totalConversions,revenue:a.totalRevenue})).sort((i,a)=>a.revenue-i.revenue).slice(0,10),G=Object.entries(S).map(([i,a])=>({name:i,conversions:a.totalConversions,revenue:a.totalRevenue})).sort((i,a)=>a.revenue-i.revenue).slice(0,10),B=Object.entries(N).map(([i,a])=>({name:i,conversions:a.totalConversions,revenue:a.totalRevenue})).sort((i,a)=>a.revenue-i.revenue).slice(0,10);return{totalSessions:s,totalConversions:x,totalRevenue:u,conversionRate:C,averageOrderValue:h,bySource:w,byMedium:S,byCampaign:N,topPerformers:{sources:$,mediums:G,campaigns:B}}}catch(t){throw console.error("Error getting UTM stats:",t),t}},async getConversionRate(n,r){try{let t=g.from("UTMTracking").select("converted").eq("userId",n);r&&(t=t.gte("createdAt",r.from).lte("createdAt",r.to));const{data:o,error:c}=await t;if(c)throw c;const d=o,s=d.length,x=d.filter(u=>u.converted).length;return s>0?x/s*100:0}catch(t){throw console.error("Error getting conversion rate:",t),t}},async getBySource(n,r){try{const{data:t,error:o}=await g.from("UTMTracking").select("*").eq("userId",n).eq("utmSource",r).order("createdAt",{ascending:!1});if(o)throw o;return t}catch(t){throw console.error("Error getting UTMs by source:",t),t}},async getByMedium(n,r){try{const{data:t,error:o}=await g.from("UTMTracking").select("*").eq("userId",n).eq("utmMedium",r).order("createdAt",{ascending:!1});if(o)throw o;return t}catch(t){throw console.error("Error getting UTMs by medium:",t),t}},async getByCampaign(n,r){try{const{data:t,error:o}=await g.from("UTMTracking").select("*").eq("userId",n).eq("utmCampaign",r).order("createdAt",{ascending:!1});if(o)throw o;return t}catch(t){throw console.error("Error getting UTMs by campaign:",t),t}},async getUniqueSources(n){try{const{data:r,error:t}=await g.from("UTMTracking").select("utmSource").eq("userId",n).not("utmSource","is",null);if(t)throw t;return[...new Set(r.map(c=>c.utmSource).filter(Boolean))]}catch(r){throw console.error("Error getting unique sources:",r),r}},async getUniqueMediums(n){try{const{data:r,error:t}=await g.from("UTMTracking").select("utmMedium").eq("userId",n).not("utmMedium","is",null);if(t)throw t;return[...new Set(r.map(c=>c.utmMedium).filter(Boolean))]}catch(r){throw console.error("Error getting unique mediums:",r),r}},async getUniqueCampaigns(n){try{const{data:r,error:t}=await g.from("UTMTracking").select("utmCampaign").eq("userId",n).not("utmCampaign","is",null);if(t)throw t;return[...new Set(r.map(c=>c.utmCampaign).filter(Boolean))]}catch(r){throw console.error("Error getting unique campaigns:",r),r}},async getCampaignROI(n,r,t){try{const o=await P.getByCampaign(n,r),c=o.filter(u=>u.converted),d=c.reduce((u,C)=>u+(C.orderValue||0),0),s=t>0?(d-t)/t*100:0,x=o.length>0?c.length/o.length*100:0;return{campaign:r,adSpend:t,revenue:d,roi:s,conversions:c.length,conversionRate:x}}catch(o){throw console.error("Error calculating campaign ROI:",o),o}}};function je(n,r){const t=ce(n);return isNaN(r)?le(n,NaN):(r&&t.setDate(t.getDate()+r),t)}function fe(n,r){return je(n,-r)}const I=({title:n,value:r,change:t,icon:o,color:c,delay:d=0,subtitle:s})=>{const x=t>=0;return e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:d},children:e.jsxs(y,{className:"relative overflow-hidden border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 ${c} opacity-10 rounded-full blur-3xl`}),e.jsxs(j,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(f,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:n}),e.jsx("div",{className:`p-2 rounded-lg ${c} bg-opacity-10`,children:e.jsx(o,{className:`h-4 w-4 ${c.replace("bg-","text-")}`})})]}),e.jsxs(v,{children:[e.jsx("div",{className:"text-3xl font-bold bg-gradient-to-br from-gray-900 to-gray-600 dark:from-white dark:to-gray-300 bg-clip-text text-transparent",children:r}),e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[x?e.jsx(pe,{className:"h-4 w-4 text-green-500"}):e.jsx(ye,{className:"h-4 w-4 text-red-500"}),e.jsxs("span",{className:`text-sm font-semibold ${x?"text-green-500":"text-red-500"}`,children:[Math.abs(t).toFixed(1),"%"]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:s||"vs período anterior"})]})]})]})})},L=({active:n,payload:r,label:t})=>n&&r&&r.length?e.jsxs("div",{className:"bg-gray-900/95 dark:bg-gray-800/95 backdrop-blur-xl border border-gray-700 rounded-lg p-4 shadow-xl",children:[e.jsx("p",{className:"text-white font-semibold mb-2",children:t}),r.map((o,c)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:o.color}}),e.jsxs("span",{className:"text-gray-300",children:[o.name,":"]}),e.jsx("span",{className:"text-white font-semibold",children:o.value})]},c))]}):null,Oe=()=>{const[n,r]=k.useState(!0),[t,o]=k.useState(!1),[c,d]=k.useState("30days"),[s,x]=k.useState(null),[u,C]=k.useState(""),h=Q(a=>a.user),{toast:w}=ee();k.useEffect(()=>{h!=null&&h.id&&z()},[h==null?void 0:h.id,c]);const z=async()=>{try{if(!(h!=null&&h.id))return;r(!0);const l={from:fe(new Date,c==="7days"?7:c==="30days"?30:90).toISOString(),to:new Date().toISOString()},p=await P.getStats(h.id,l);x(p)}catch(a){console.error("Erro ao carregar dados UTM:",a),w({title:"Erro ao carregar dados",description:a.message||"Não foi possível carregar os dados UTM",variant:"destructive"})}finally{r(!1)}},S=async()=>{o(!0),await z(),o(!1),w({title:"Dados atualizados",description:"Os dados UTM foram atualizados com sucesso"})},U=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a),N=a=>`${a.toFixed(1)}%`,K=s!=null&&s.bySource?Object.values(s.bySource).map(a=>({name:a.utmSource||"Direto",visitas:a.totalVisits,conversões:a.totalConversions,receita:a.totalRevenue,taxa:a.conversionRate})):[],$=s!=null&&s.byMedium?Object.values(s.byMedium).map(a=>({name:a.utmMedium||"Não definido",visitas:a.totalVisits,conversões:a.totalConversions,receita:a.totalRevenue,taxa:a.conversionRate})):[],G=s!=null&&s.byCampaign?Object.values(s.byCampaign).slice(0,10).map(a=>({name:a.utmCampaign||"Sem campanha",visitas:a.totalVisits,conversões:a.totalConversions,receita:a.totalRevenue,taxa:a.conversionRate})):[],B=["#3B82F6","#8B5CF6","#EC4899","#10B981","#F59E0B","#EF4444","#06B6D4","#6366F1"],i=s!=null&&s.bySource?Object.values(s.bySource).filter(a=>(a.utmSource||"direto").toLowerCase().includes(u.toLowerCase())):[];return n?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-850 to-purple-900/40 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(R,{className:"h-8 w-64 mb-2"}),e.jsx(R,{className:"h-4 w-96"})]}),e.jsx(R,{className:"h-10 w-40"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(a=>e.jsx(R,{className:"h-32"},a))}),e.jsx(R,{className:"h-96"})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-850 to-purple-900/40 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs(b.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Rastreamento UTM"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Analise o desempenho de suas campanhas de marketing"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(se,{value:c,onValueChange:d,children:[e.jsx(oe,{className:"w-[180px] bg-white/10 dark:bg-gray-900/50 backdrop-blur-xl border-gray-700",children:e.jsx(ne,{})}),e.jsxs(ie,{children:[e.jsx(X,{value:"7days",children:"Últimos 7 dias"}),e.jsx(X,{value:"30days",children:"Últimos 30 dias"}),e.jsx(X,{value:"90days",children:"Últimos 90 dias"})]})]}),e.jsxs(re,{onClick:S,disabled:t,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:[e.jsx(te,{className:`h-4 w-4 mr-2 ${t?"animate-spin":""}`}),"Atualizar"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(I,{title:"Total de Sessões",value:(s==null?void 0:s.totalSessions.toLocaleString("pt-BR"))||"0",change:12.5,icon:de,color:"bg-blue-500",delay:.1,subtitle:"visitantes únicos"}),e.jsx(I,{title:"Conversões",value:(s==null?void 0:s.totalConversions.toLocaleString("pt-BR"))||"0",change:(s==null?void 0:s.conversionRate)||0,icon:Z,color:"bg-green-500",delay:.2,subtitle:"pedidos confirmados"}),e.jsx(I,{title:"Receita Total",value:U((s==null?void 0:s.totalRevenue)||0),change:18.3,icon:H,color:"bg-purple-500",delay:.3,subtitle:"faturamento"}),e.jsx(I,{title:"Taxa de Conversão",value:N((s==null?void 0:s.conversionRate)||0),change:(s==null?void 0:s.conversionRate)||0,icon:me,color:"bg-pink-500",delay:.4,subtitle:"sessões → vendas"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(b.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.5},children:e.jsxs(y,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg",children:[e.jsxs(j,{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5 text-blue-500"}),"Performance por Fonte"]}),e.jsx(M,{children:"Visitas e conversões por origem do tráfego"})]}),e.jsx(v,{children:e.jsx(q,{width:"100%",height:300,children:e.jsxs(Y,{data:K,children:[e.jsx(D,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(E,{dataKey:"name",stroke:"#9CA3AF",fontSize:12,tickLine:!1}),e.jsx(F,{stroke:"#9CA3AF",fontSize:12,tickLine:!1}),e.jsx(V,{content:e.jsx(L,{})}),e.jsx(W,{}),e.jsx(O,{dataKey:"visitas",name:"Visitas",fill:"#3B82F6",radius:[8,8,0,0]}),e.jsx(O,{dataKey:"conversões",name:"Conversões",fill:"#10B981",radius:[8,8,0,0]})]})})})]})}),e.jsx(b.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.6},children:e.jsxs(y,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg",children:[e.jsxs(j,{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5 text-green-500"}),"Receita por Fonte"]}),e.jsx(M,{children:"Faturamento gerado por origem"})]}),e.jsx(v,{children:e.jsx(q,{width:"100%",height:300,children:e.jsxs(Y,{data:K,children:[e.jsx(D,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(E,{dataKey:"name",stroke:"#9CA3AF",fontSize:12,tickLine:!1}),e.jsx(F,{stroke:"#9CA3AF",fontSize:12,tickLine:!1}),e.jsx(V,{content:e.jsx(L,{})}),e.jsx(O,{dataKey:"receita",name:"Receita (R$)",fill:"url(#colorGradient)",radius:[8,8,0,0]}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#8B5CF6"}),e.jsx("stop",{offset:"100%",stopColor:"#EC4899"})]})})]})})})]})}),e.jsx(b.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.7},children:e.jsxs(y,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg",children:[e.jsxs(j,{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-purple-500"}),"Taxa de Conversão por Meio"]}),e.jsx(M,{children:"Performance de conversão por canal"})]}),e.jsx(v,{children:e.jsx(q,{width:"100%",height:300,children:e.jsxs(xe,{data:$,children:[e.jsx(D,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(E,{dataKey:"name",stroke:"#9CA3AF",fontSize:12,tickLine:!1}),e.jsx(F,{stroke:"#9CA3AF",fontSize:12,tickLine:!1}),e.jsx(V,{content:e.jsx(L,{})}),e.jsx(W,{}),e.jsx(he,{type:"monotone",dataKey:"taxa",name:"Taxa (%)",stroke:"#8B5CF6",strokeWidth:3,dot:{fill:"#8B5CF6",r:5},activeDot:{r:7}})]})})})]})}),e.jsx(b.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.8},children:e.jsxs(y,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg",children:[e.jsxs(j,{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5 text-yellow-500"}),"Top 10 Campanhas"]}),e.jsx(M,{children:"Campanhas com melhor desempenho"})]}),e.jsx(v,{children:e.jsx(q,{width:"100%",height:300,children:e.jsxs(Y,{data:G,layout:"vertical",children:[e.jsx(D,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(E,{type:"number",stroke:"#9CA3AF",fontSize:12}),e.jsx(F,{type:"category",dataKey:"name",stroke:"#9CA3AF",fontSize:10,width:100}),e.jsx(V,{content:e.jsx(L,{})}),e.jsx(O,{dataKey:"conversões",name:"Conversões",fill:"#10B981",radius:[0,8,8,0]})]})})})]})})]}),e.jsx(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.9},children:e.jsxs(y,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg",children:[e.jsx(j,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5 text-pink-500"}),"Detalhamento por Fonte"]}),e.jsx(M,{children:"Análise completa de performance"})]}),e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar fonte...",value:u,onChange:a=>C(a.target.value),className:"w-full pl-10 pr-4 py-2 bg-white/50 dark:bg-gray-800/50 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]})}),e.jsx(v,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Fonte"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Visitas"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Conversões"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Taxa"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Receita"}),e.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-600 dark:text-gray-400",children:"Ticket Médio"})]})}),e.jsx("tbody",{children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-8 text-gray-500",children:"Nenhuma fonte encontrada"})}):i.map((a,l)=>e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:B[l%B.length]}}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:a.utmSource||"Direto"})]})}),e.jsx("td",{className:"text-right py-3 px-4 text-gray-700 dark:text-gray-300",children:a.totalVisits.toLocaleString("pt-BR")}),e.jsx("td",{className:"text-right py-3 px-4",children:e.jsx(A,{variant:"secondary",className:"bg-green-500/10 text-green-600 dark:text-green-400",children:a.totalConversions})}),e.jsx("td",{className:"text-right py-3 px-4",children:e.jsx(A,{variant:"secondary",className:"bg-purple-500/10 text-purple-600 dark:text-purple-400",children:N(a.conversionRate)})}),e.jsx("td",{className:"text-right py-3 px-4 font-semibold text-gray-900 dark:text-gray-100",children:U(a.totalRevenue)}),e.jsx("td",{className:"text-right py-3 px-4 text-gray-700 dark:text-gray-300",children:U(a.averageOrderValue)})]},l))})]})})})]})}),(s==null?void 0:s.topPerformers)&&e.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:1},className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(y,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg",children:[e.jsx(j,{children:e.jsxs(f,{className:"text-lg flex items-center gap-2",children:[e.jsx(ue,{className:"h-5 w-5 text-blue-500"}),"Top Fontes"]})}),e.jsx(v,{children:e.jsx("div",{className:"space-y-3",children:s.topPerformers.sources.map((a,l)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gradient-to-r from-blue-500/10 to-purple-500/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-semibold text-lg text-blue-600 dark:text-blue-400",children:["#",l+1]}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:a.utmSource||"Direto"})]}),e.jsxs(A,{className:"bg-blue-500 text-white",children:[a.totalConversions," vendas"]})]},l))})})]}),e.jsxs(y,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg",children:[e.jsx(j,{children:e.jsxs(f,{className:"text-lg flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-purple-500"}),"Top Meios"]})}),e.jsx(v,{children:e.jsx("div",{className:"space-y-3",children:s.topPerformers.mediums.map((a,l)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gradient-to-r from-purple-500/10 to-pink-500/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-semibold text-lg text-purple-600 dark:text-purple-400",children:["#",l+1]}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:a.utmMedium||"Não definido"})]}),e.jsxs(A,{className:"bg-purple-500 text-white",children:[a.totalConversions," vendas"]})]},l))})})]}),e.jsxs(y,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg",children:[e.jsx(j,{children:e.jsxs(f,{className:"text-lg flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5 text-pink-500"}),"Top Campanhas"]})}),e.jsx(v,{children:e.jsx("div",{className:"space-y-3",children:s.topPerformers.campaigns.map((a,l)=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg bg-
gradient-to-r from-pink-500/10 to-red-500/10`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-semibold text-lg text-pink-600 dark:text-pink-400",children:["#",l+1]}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 font-medium",children:a.utmCampaign||"Sem campanha"})]}),e.jsxs(A,{className:"bg-pink-500 text-white",children:[a.totalConversions," vendas"]})]},l))})})]})]})]})})};export{Oe as default};

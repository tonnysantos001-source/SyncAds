import{c as H,r as i,f as F,u as q,j as e,B as n,I as g,g as C,h as y,i as b,l as k,Q as O,o as R}from"./index-cv_3AjYH.js";import{T as M,a as Q,b as w,c as m,d as V,e as x}from"./table-CAl8U431.js";import{D as Z,a as $,b as G,c as J,d as U,f as W}from"./dialog-NgvdcstS.js";import{L as u}from"./label-Co2Fsf7J.js";import{T as X}from"./textarea-umE8IWU1.js";import{p as d}from"./productsApi-CJ615rzg.js";import{S as D}from"./skeleton-Dwl6bjMs.js";import{P as T}from"./plus-DeRxOzV_.js";import{S as Y}from"./square-pen-DJcbrpGA.js";import{T as _}from"./trash-2-CsfsLv24.js";import"./index-CmPm4aog.js";/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=H("Package2",[["path",{d:"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z",key:"1ront0"}],["path",{d:"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9",key:"19h2x1"}],["path",{d:"M12 3v6",key:"1holv5"}]]),me=()=>{const[f,K]=i.useState([]),[ee,A]=i.useState([]),[P,I]=i.useState(!0),[v,z]=i.useState(""),[E,c]=i.useState(!1),[h,j]=i.useState(null),{toast:r}=F(),a=q(s=>s.user),[t,l]=i.useState({name:"",description:"",price:0,isActive:!0});i.useEffect(()=>{p()},[]);const p=async()=>{try{if(!(a!=null&&a.organizationId))return;const[s,o]=await Promise.all([d.kits.list(a.organizationId),d.list()]);K(s),A(o)}catch(s){r({title:"Erro ao carregar",description:s.message,variant:"destructive"})}finally{I(!1)}},L=async s=>{s.preventDefault();try{if(!(a!=null&&a.organizationId))return;h?(await d.kits.update(h.id,t),r({title:"Kit atualizado!"})):(await d.kits.create({...t,organizationId:a.organizationId}),r({title:"Kit criado!"})),c(!1),j(null),p()}catch(o){r({title:"Erro",description:o.message,variant:"destructive"})}},B=async s=>{if(confirm("Deletar kit?"))try{await d.kits.delete(s),r({title:"Kit deletado"}),p()}catch(o){r({title:"Erro",description:o.message,variant:"destructive"})}},N=f.filter(s=>s.name.toLowerCase().includes(v.toLowerCase()));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Kits de Produtos"}),e.jsx("p",{className:"text-muted-foreground",children:"Crie kits com múltiplos produtos"})]}),e.jsxs(Z,{open:E,onOpenChange:c,children:[e.jsx($,{asChild:!0,children:e.jsxs(n,{onClick:()=>{j(null),l({name:"",description:"",price:0,isActive:!0})},children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),"Criar Kit"]})}),e.jsxs(G,{children:[e.jsx(J,{children:e.jsx(U,{children:h?"Editar Kit":"Novo Kit"})}),e.jsxs("form",{onSubmit:L,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(u,{children:"Nome do Kit"}),e.jsx(g,{value:t.name,onChange:s=>l({...t,name:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(u,{children:"Descrição"}),e.jsx(X,{value:t.description,onChange:s=>l({...t,description:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(u,{children:"Preço"}),e.jsx(g,{type:"number",step:"0.01",value:t.price,onChange:s=>l({...t,price:parseFloat(s.target.value)}),required:!0})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:t.isActive,onChange:s=>l({...t,isActive:s.target.checked})}),e.jsx(u,{children:"Ativo"})]})]}),e.jsxs(W,{className:"mt-4",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancelar"}),e.jsx(n,{type:"submit",children:h?"Atualizar":"Criar"})]})]})]})]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:e.jsxs(C,{children:[e.jsxs(y,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(b,{className:"text-sm font-medium",children:"Total de Kits"}),e.jsx(S,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(k,{children:e.jsx("div",{className:"text-2xl font-bold",children:f.length})})]})}),e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(g,{placeholder:"Buscar kits...",value:v,onChange:s=>z(s.target.value),className:"pl-9"})]}),e.jsxs(C,{children:[e.jsx(y,{children:e.jsx(b,{children:"Lista de Kits"})}),e.jsx(k,{children:P?e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{className:"h-12 w-full"}),e.jsx(D,{className:"h-12 w-full"})]}):N.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(S,{className:"h-12 w-12 text-muted-foreground mb-4 mx-auto"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Nenhum kit encontrado"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Comece criando o primeiro kit"}),e.jsxs(n,{onClick:()=>c(!0),children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),"Criar Primeiro Kit"]})]}):e.jsxs(M,{children:[e.jsx(Q,{children:e.jsxs(w,{children:[e.jsx(m,{children:"Nome"}),e.jsx(m,{children:"Preço"}),e.jsx(m,{children:"Status"}),e.jsx(m,{className:"text-right",children:"Ações"})]})}),e.jsx(V,{children:N.map(s=>e.jsxs(w,{children:[e.jsx(x,{className:"font-medium",children:s.name}),e.jsxs(x,{children:["R$ ",s.price.toFixed(2)]}),e.jsx(x,{children:e.jsx(R,{variant:s.isActive?"default":"secondary",children:s.isActive?"Ativo":"Inativo"})}),e.jsx(x,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{variant:"ghost",size:"icon",onClick:()=>{j(s),l(s),c(!0)},children:e.jsx(Y,{className:"h-4 w-4"})}),e.jsx(n,{variant:"ghost",size:"icon",onClick:()=>B(s.id),children:e.jsx(_,{className:"h-4 w-4"})})]})})]},s.id))})]})})]})]})};export{me as default};

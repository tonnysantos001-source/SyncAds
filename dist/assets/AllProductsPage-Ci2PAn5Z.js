import{c as K,r,f as U,u as Z,j as e,B as d,I as m,g as f,h as g,i as v,E as G,l as y,S as J,k as Q,n as E}from"./index-hGGesvR-.js";import{T as W,a as X,b as I,c as h,d as Y,e as u}from"./table-aEb8Rx4H.js";import{D as _,f as $,a as ee,b as se,c as ae,d as te,e as re}from"./dialog-B3i1dnv-.js";import{L as x}from"./label-dUvRNs4e.js";import{T as ie}from"./textarea-C34dg_q9.js";import{p as N}from"./productsApi-CIdcHlza.js";import{S as w}from"./skeleton-DNs0LOA0.js";import{P as F}from"./plus-DacAskVz.js";import{E as oe}from"./eye-BXMelpaJ.js";import{D as le}from"./dollar-sign-KiY0SZE2.js";import{S as ce}from"./square-pen-CwWT5u86.js";import{T as ne}from"./trash-2-C6PCtzkr.js";/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=K("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]),ke=()=>{const[c,z]=r.useState([]),[P,k]=r.useState([]),[B,L]=r.useState(!0),[o,M]=r.useState(""),[q,j]=r.useState(!1),[p,b]=r.useState(null),{toast:n}=U(),l=Z(s=>s.user),[a,i]=r.useState({name:"",description:"",price:0,compareAtPrice:0,sku:"",stock:0,categoryId:"",isActive:!0});r.useEffect(()=>{C()},[]),r.useEffect(()=>{V()},[o,c]);const C=async()=>{try{if(!(l!=null&&l.organizationId))return;const s=await N.list({status:"ACTIVE"});z(s),k(s)}catch(s){n({title:"Erro ao carregar produtos",description:s.message,variant:"destructive"})}finally{L(!1)}},V=()=>{if(!o){k(c);return}const s=c.filter(t=>{var D;return t.name.toLowerCase().includes(o.toLowerCase())||((D=t.sku)==null?void 0:D.toLowerCase().includes(o.toLowerCase()))});k(s)},R=async s=>{s.preventDefault();try{if(!(l!=null&&l.organizationId))return;p?(await N.updateProduct(p.id,a),n({title:"Produto atualizado!",description:"As alterações foram salvas com sucesso."})):(await N.createProduct({...a,organizationId:l.organizationId}),n({title:"Produto criado!",description:"O produto foi adicionado ao catálogo."})),j(!1),T(),C()}catch(t){n({title:"Erro",description:t.message,variant:"destructive"})}},O=async s=>{if(confirm("Tem certeza que deseja deletar este produto?"))try{await N.deleteProduct(s),n({title:"Produto deletado",description:"O produto foi removido do catálogo."}),C()}catch(t){n({title:"Erro ao deletar",description:t.message,variant:"destructive"})}},H=s=>{b(s),i({name:s.name,description:s.description||"",price:s.price,compareAtPrice:s.compareAtPrice||0,sku:s.sku||"",stock:s.stock,categoryId:s.categoryId||"",isActive:s.isActive}),j(!0)},T=()=>{b(null),i({name:"",description:"",price:0,compareAtPrice:0,sku:"",stock:0,categoryId:"",isActive:!0})},S=()=>{T(),j(!0)},A=s=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(s);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Produtos"}),e.jsx("p",{className:"text-muted-foreground",children:"Gerencie o catálogo completo de produtos da sua loja"})]}),e.jsxs(_,{open:q,onOpenChange:j,children:[e.jsx($,{asChild:!0,children:e.jsxs(d,{onClick:S,children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),"Adicionar Produto"]})}),e.jsxs(ee,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(se,{children:[e.jsx(ae,{children:p?"Editar Produto":"Novo Produto"}),e.jsx(te,{children:p?"Atualize as informações do produto":"Adicione um novo produto ao catálogo"})]}),e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx(x,{htmlFor:"name",children:"Nome do Produto *"}),e.jsx(m,{id:"name",value:a.name,onChange:s=>i({...a,name:s.target.value}),placeholder:"Ex: Camiseta Básica Preta",required:!0})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(x,{htmlFor:"description",children:"Descrição"}),e.jsx(ie,{id:"description",value:a.description,onChange:s=>i({...a,description:s.target.value}),placeholder:"Descrição detalhada do produto",rows:3})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"price",children:"Preço *"}),e.jsx(m,{id:"price",type:"number",step:"0.01",min:"0",value:a.price,onChange:s=>i({...a,price:parseFloat(s.target.value)}),required:!0})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"compareAtPrice",children:"Preço Comparação"}),e.jsx(m,{id:"compareAtPrice",type:"number",step:"0.01",min:"0",value:a.compareAtPrice,onChange:s=>i({...a,compareAtPrice:parseFloat(s.target.value)})})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"sku",children:"SKU"}),e.jsx(m,{id:"sku",value:a.sku,onChange:s=>i({...a,sku:s.target.value}),placeholder:"Ex: CAM-BAS-PRE-M"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"stock",children:"Estoque *"}),e.jsx(m,{id:"stock",type:"number",min:"0",value:a.stock,onChange:s=>i({...a,stock:parseInt(s.target.value)}),required:!0})]})]}),e.jsxs(re,{children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>j(!1),children:"Cancelar"}),e.jsxs(d,{type:"submit",children:[p?"Atualizar":"Criar"," Produto"]})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(f,{children:[e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(v,{className:"text-sm font-medium",children:"Total de Produtos"}),e.jsx(G,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(y,{children:e.jsx("div",{className:"text-2xl font-bold",children:c.length})})]}),e.jsxs(f,{children:[e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(v,{className:"text-sm font-medium",children:"Produtos Ativos"}),e.jsx(oe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(y,{children:e.jsx("div",{className:"text-2xl font-bold",children:c.filter(s=>s.status==="ACTIVE").length})})]}),e.jsxs(f,{children:[e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(v,{className:"text-sm font-medium",children:"Valor Total"}),e.jsx(le,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(y,{children:e.jsx("div",{className:"text-2xl font-bold",children:A(c.reduce((s,t)=>s+t.price*t.stock,0))})})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(J,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(m,{placeholder:"Buscar produtos por nome ou SKU...",value:o,onChange:s=>M(s.target.value),className:"pl-9"})]})}),e.jsxs(f,{children:[e.jsxs(g,{children:[e.jsx(v,{children:"Catálogo de Produtos"}),e.jsxs(Q,{children:[P.length," produto(s) encontrado(s)"]})]}),e.jsx(y,{children:B?e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{className:"h-12 w-full"}),e.jsx(w,{className:"h-12 w-full"}),e.jsx(w,{className:"h-12 w-full"})]}):P.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(de,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Nenhum produto encontrado"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:o?"Tente ajustar sua busca":"Comece adicionando seu primeiro produto"}),!o&&e.jsxs(d,{onClick:S,children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),"Adicionar Primeiro Produto"]})]}):e.jsxs(W,{children:[e.jsx(X,{children:e.jsxs(I,{children:[e.jsx(h,{children:"Produto"}),e.jsx(h,{children:"SKU"}),e.jsx(h,{children:"Preço"}),e.jsx(h,{children:"Estoque"}),e.jsx(h,{children:"Status"}),e.jsx(h,{className:"text-right",children:"Ações"})]})}),e.jsx(Y,{children:P.map(s=>e.jsxs(I,{children:[e.jsx(u,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),s.description&&e.jsx("div",{className:"text-sm text-muted-foreground line-clamp-1",children:s.description})]})}),e.jsx(u,{children:e.jsx("code",{className:"text-sm",children:s.sku||"-"})}),e.jsx(u,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:A(s.price)}),s.compareAtPrice&&s.compareAtPrice>s.price&&e.jsx("div",{className:"text-sm text-muted-foreground line-through",children:A(s.compareAtPrice)})]})}),e.jsx(u,{children:e.jsxs(E,{variant:s.stock>0?"default":"destructive",children:[s.stock," un."]})}),e.jsx(u,{children:e.jsx(E,{variant:s.status==="ACTIVE"?"default":"secondary",children:s.status==="ACTIVE"?"Ativo":s.status==="DRAFT"?"Rascunho":"Arquivado"})}),e.jsx(u,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>H(s),children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>O(s.id),children:e.jsx(ne,{className:"h-4 w-4"})})]})})]},s.id))})]})})]})]})};export{ke as default};

import{j as e}from"./vendor-ui-D3JNL6pE.js";import{f as i,r as t}from"./vendor-react-X41Bjl18.js";import{f as r,s as a}from"./index-Bq7EMBPF.js";import{r as s,g as o,b9 as n,D as d,bd as c,L as l}from"./vendor-icons-BvRy6l6m.js";import"./vendor-supabase-HUq0BeMy.js";import"./vendor-utils-Dl0_yMKq.js";import"./vendor-animation-DtB50Lbk.js";import"./vendor-query-DqG_mm-v.js";function m(){const m=r(e=>e.user),u=i(),[p,h]=t.useState([]),[g,x]=t.useState(!0);t.useEffect(()=>{m?.id&&f()},[m?.id]);const f=async()=>{if(m?.id)try{const[e,i,t,r,a]=await Promise.all([y().catch(e=>!1),v().catch(e=>!1),j().catch(e=>!1),b().catch(e=>!1),k().catch(e=>!1)]);h([{id:"email-verification",title:"Verificação de Email",description:"Verifique seu endereço de email para ativar todos os recursos",icon:s,completed:e,route:"/settings/email-verification"},{id:"billing",title:"Faturamento",description:"Configure seu plano e método de pagamento",icon:o,completed:i,route:"/billing"},{id:"domain",title:"Domínio",description:"Verifique seu domínio. Deve ser o mesmo utilizado na shopify, woocommerce ou na sua landing page.",icon:n,completed:t,route:"/checkout/domain"},{id:"gateway",title:"Gateway",description:"Configure os meios de pagamentos que serão exibidos em sua loja.",icon:d,completed:r,route:"/checkout/gateways"},{id:"shipping",title:"Frete",description:"Crie métodos de entrega para ser exibido no seu checkout.",icon:c,completed:a,route:"/checkout/shipping"}])}catch(e){h([{id:"email-verification",title:"Verificação de Email",description:"Verifique seu endereço de email para ativar todos os recursos",icon:s,completed:!1,route:"/settings/email-verification"},{id:"billing",title:"Faturamento",description:"Configure seu plano e método de pagamento",icon:o,completed:!1,route:"/billing"},{id:"domain",title:"Domínio",description:"Verifique seu domínio. Deve ser o mesmo utilizado na shopify, woocommerce ou na sua landing page.",icon:n,completed:!1,route:"/checkout/domain"},{id:"gateway",title:"Gateway",description:"Configure os meios de pagamentos que serão exibidos em sua loja.",icon:d,completed:!1,route:"/checkout/gateways"},{id:"shipping",title:"Frete",description:"Crie métodos de entrega para ser exibido no seu checkout.",icon:c,completed:!1,route:"/checkout/shipping"}])}finally{x(!1)}else u("/login")},y=async()=>{if(!m?.id)return!1;try{const{data:e,error:i}=await a.from("User").select("emailVerified").eq("id",m.id).single();if(i)return!1;return!0===e?.emailVerified}catch(e){return!1}},v=async()=>{if(!m?.id)return!1;try{const{data:e,error:i}=await a.from("User").select("currentPlanId, planId").eq("id",m.id).single();if(e?.currentPlanId||e?.planId)return!0;const{data:t,error:r}=await a.from("Subscription").select("id, status").eq("userId",m.id).eq("status","active").maybeSingle();r&&r.message.includes("does not exist");return!!t}catch(e){return!1}},j=async()=>{if(!m?.id)return!1;try{const{data:e,error:i}=await a.from("User").select("domain, domainVerified").eq("id",m.id).single();if(i)return!1;return!(!e?.domain||!e?.domainVerified)}catch(e){return!1}},b=async()=>{if(!m?.id)return!1;try{const{data:e,error:i}=await a.from("GatewayConfig").select("id, isActive").eq("userId",m.id).eq("isActive",!0).limit(1);if(i)return!1;return(e?.length||0)>0}catch(e){return!1}},k=async()=>{if(!m?.id)return!1;try{const{data:e,error:i}=await a.from("ShippingMethod").select("id").eq("userId",m.id).limit(1);if(i)return i.message.includes("does not exist"),!1;return(e?.length||0)>0}catch(e){return!1}};if(g)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(l,{className:"h-8 w-8 animate-spin text-gray-400"})});const w=m?.name||m?.email?.split("@")[0]||"usuário";return e.jsxs("div",{className:"p-6 sm:p-8 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["Olá ",w,","]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Seja bem vindo"})]}),e.jsx("div",{className:"mb-6",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Para ativar seu checkout você precisa concluir todos passos abaixo:"})}),e.jsx("div",{className:"space-y-4",children:p.map(i=>{const t=i.icon;return e.jsxs("div",{className:"flex items-start gap-4 p-4 border-2 rounded-lg bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 cursor-pointer hover:border-gray-300 dark:hover:border-gray-600 transition-all",onClick:()=>u(i.route),children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(t,{className:"h-8 w-8 text-gray-600 dark:text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:i.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:i.description})]}),e.jsx("div",{className:"flex-shrink-0 pt-1",children:e.jsx("div",{className:"h-3 w-3 rounded-full "+(i.completed?"bg-green-500":"bg-red-500"),title:i.completed?"Concluído":"Pendente"})})]},i.id)})}),e.jsxs("div",{className:"mt-8 text-center text-sm text-gray-600 dark:text-gray-400",children:["Caso tenha alguma dúvida,"," ",e.jsx("button",{onClick:()=>u("/help"),className:"underline hover:text-gray-900 dark:hover:text-white",children:"visite nossa central de ajuda"}),"."]}),e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:e.jsx("button",{className:"rounded-full bg-pink-500 hover:bg-pink-600 text-white px-6 py-3 shadow-lg transition-colors",onClick:()=>u("/chat"),children:"Precisa de ajuda?"})})]})}export{m as default};

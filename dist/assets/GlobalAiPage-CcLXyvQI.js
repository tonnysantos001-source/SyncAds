import{j as e}from"./vendor-ui-DAyDU-p2.js";import{r as a}from"./vendor-react-BDwqAlkB.js";import{e as s,h as r,g as i,s as t,B as o,a1 as l,I as n,C as d,a as c,a5 as m,b as x,d as p,a3 as h,a6 as g,Q as u,c as v,a4 as j}from"./index-EaXzEAgW.js";import{D as b,e as N,a as y,b as f,c as A,d as C,f as E}from"./dialog-BjhT-lg3.js";import{L as I}from"./label-SGM-8x_9.js";import{T as R}from"./textarea-Ci4_YyQ1.js";import{S as w,a as O,b as G,c as T,d as P}from"./select-CTqsdm-E.js";import{S as U}from"./SuperAdminLayout-BsZ6w_iI.js";import{h as k,aa as S,Z as L,a4 as K}from"./vendor-icons-ByXnbRBH.js";import"./vendor-supabase-rKXMzPQL.js";import"./vendor-utils-Dl0_yMKq.js";import"./vendor-animation-x8f1c1kX.js";import"./vendor-query-D3VdSFIC.js";const z={REASONING:{label:"Racioc√≠nio",icon:K,gradient:"from-purple-500 to-indigo-500",bgColor:"bg-purple-500/20",textColor:"text-purple-300",borderColor:"border-purple-500/30"},EXECUTOR:{label:"Executora",icon:L,gradient:"from-orange-500 to-red-500",bgColor:"bg-orange-500/20",textColor:"text-orange-300",borderColor:"border-orange-500/30"},NAVIGATOR:{label:"Navega√ß√£o",icon:S,gradient:"from-blue-500 to-cyan-500",bgColor:"bg-blue-500/20",textColor:"text-blue-300",borderColor:"border-blue-500/30"},GENERAL:{label:"Geral",icon:k,gradient:"from-gray-500 to-gray-600",bgColor:"bg-gray-500/20",textColor:"text-gray-300",borderColor:"border-gray-500/30"}},M={sm:{badge:"px-2 py-0.5 text-xs",icon:"w-3 h-3"},md:{badge:"px-3 py-1 text-sm",icon:"w-4 h-4"},lg:{badge:"px-4 py-1.5 text-base",icon:"w-5 h-5"}},F=({role:a,size:i="md",showIcon:t=!0,className:o})=>{const l=z[a],n=M[i],d=l.icon;return e.jsxs(s,{variant:"outline",className:r("gap-1.5 font-medium border",l.bgColor,l.textColor,l.borderColor,n.badge,o),children:[t&&e.jsx(d,{className:n.icon}),l.label]})};function q(){const[r,k]=a.useState([]),[S,L]=a.useState(!0),[K,z]=a.useState(!1),[M,q]=a.useState(!1),[D,H]=a.useState(null),{toast:$}=i(),[V,B]=a.useState({name:"",provider:"OPENAI",apiKey:"",baseUrl:"",model:"",maxTokens:4096,temperature:.7,aiRole:"GENERAL"});a.useEffect(()=>{Q()},[]);const Q=async()=>{try{const{data:e,error:a}=await t.from("GlobalAiConnection").select("*").order("createdAt",{ascending:!1});if(a)throw a;k(e||[])}catch(e){$({title:"Erro ao carregar dados",description:e.message,variant:"destructive"})}finally{L(!1)}},W={OPENAI:{model:"gpt-4o-mini",baseUrl:"https://api.openai.com/v1",description:"GPT-4, GPT-3.5, DALL-E, Whisper"},ANTHROPIC:{model:"claude-3-5-sonnet-20241022",baseUrl:"https://api.anthropic.com/v1",description:"Claude 3.5 Sonnet, Claude 3 Opus"},GOOGLE:{model:"gemini-2.0-flash-exp",baseUrl:"https://generativelanguage.googleapis.com/v1",description:"Gemini Pro, Gemini Flash"},OPENROUTER:{model:"openai/gpt-4-turbo",baseUrl:"https://openrouter.ai/api/v1",description:"Acesso a 200+ modelos (OpenAI, Anthropic, Google, Meta, etc)"},GROQ:{model:"llama-3.3-70b-versatile",baseUrl:"https://api.groq.com/openai/v1",description:"Llama 3.3, Mixtral - Ultra r√°pido"},COHERE:{model:"command-r-plus",baseUrl:"https://api.cohere.ai/v1",description:"Command R+, Command R"},MISTRAL:{model:"mistral-large-latest",baseUrl:"https://api.mistral.ai/v1",description:"Mistral Large, Mistral Medium"},PERPLEXITY:{model:"llama-3.1-sonar-large-128k-online",baseUrl:"https://api.perplexity.ai",description:"Sonar Online - IA com busca web"},TOGETHER:{model:"meta-llama/Meta-Llama-3.1-405B-Instruct-Turbo",baseUrl:"https://api.together.xyz/v1",description:"Llama, Qwen, DeepSeek"},FIREWORKS:{model:"accounts/fireworks/models/llama-v3p1-405b-instruct",baseUrl:"https://api.fireworks.ai/inference/v1",description:"Modelos open source otimizados"}};return S?e.jsx(U,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-76px)]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600"})})}):e.jsx(U,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Conex√µes de IA Globais"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Adicionar e gerenciar IAs que ser√£o atribu√≠das √†s organiza√ß√µes"})]}),e.jsxs(b,{open:K,onOpenChange:z,children:[e.jsx(N,{asChild:!0,children:e.jsxs(o,{children:[e.jsx(l,{className:"h-4 w-4 mr-2"}),"Nova IA"]})}),e.jsxs(y,{className:"sm:max-w-[500px] bg-gray-900 border-gray-700",children:[e.jsxs(f,{children:[e.jsx(A,{className:"text-white",children:"Nova Conex√£o de IA"}),e.jsx(C,{children:"Adicionar uma nova IA global ao sistema"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(I,{htmlFor:"name",className:"text-gray-300",children:"Nome"}),e.jsx(n,{id:"name",placeholder:"OpenAI GPT-4",value:V.name,onChange:e=>B({...V,name:e.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(I,{htmlFor:"provider",className:"text-gray-300",children:"Provider"}),e.jsxs(w,{value:V.provider,onValueChange:e=>{const a=W[e];B({...V,provider:e,model:a?.model||"",baseUrl:a?.baseUrl||""})},children:[e.jsx(O,{children:e.jsx(G,{})}),e.jsxs(T,{children:[e.jsx(P,{value:"OPENAI",children:"ü§ñ OpenAI"}),e.jsx(P,{value:"ANTHROPIC",children:"üß† Anthropic (Claude)"}),e.jsx(P,{value:"GOOGLE",children:"üîµ Google (Gemini)"}),e.jsx(P,{value:"OPENROUTER",children:"üåê OpenRouter (200+ modelos)"}),e.jsx(P,{value:"GROQ",children:"‚ö° Groq (Ultra r√°pido)"}),e.jsx(P,{value:"MISTRAL",children:"üá´üá∑ Mistral AI"}),e.jsx(P,{value:"COHERE",children:"üíú Cohere"}),e.jsx(P,{value:"PERPLEXITY",children:"üîç Perplexity (Web)"}),e.jsx(P,{value:"TOGETHER",children:"ü§ù Together AI"}),e.jsx(P,{value:"FIREWORKS",children:"üéÜ Fireworks AI"})]})]}),W[V.provider]&&e.jsx("p",{className:"text-xs text-gray-500",children:W[V.provider].description})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(I,{htmlFor:"apiKey",className:"text-gray-300",children:"API Key"}),e.jsx(n,{id:"apiKey",type:"text",autoComplete:"off",placeholder:"sk-...",value:V.apiKey,onChange:e=>B({...V,apiKey:e.target.value}),onPaste:e=>{e.stopPropagation();const a=e.clipboardData.getData("text");a&&B({...V,apiKey:a})}})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(I,{htmlFor:"model",className:"text-gray-300",children:"Modelo"}),e.jsx(n,{id:"model",placeholder:W[V.provider]?.model||"gpt-4-turbo",value:V.model,onChange:e=>B({...V,model:e.target.value})}),e.jsx("p",{className:"text-xs text-gray-500",children:"OPENROUTER"===V.provider?"Formato: provider/model (ex: openai/gpt-4-turbo, anthropic/claude-3-5-sonnet)":"Nome do modelo a ser usado"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(I,{htmlFor:"aiRole",className:"text-gray-300",children:"Fun√ß√£o da IA"}),e.jsxs(w,{value:V.aiRole,onValueChange:e=>B({...V,aiRole:e}),children:[e.jsx(O,{children:e.jsx(G,{})}),e.jsxs(T,{children:[e.jsx(P,{value:"REASONING",children:"üß† Racioc√≠nio (Thinking)"}),e.jsx(P,{value:"EXECUTOR",children:"‚ö° Executora (Actions)"}),e.jsx(P,{value:"NAVIGATOR",children:"üåê Navega√ß√£o (Browser)"}),e.jsx(P,{value:"GENERAL",children:"‚ú® Geral (Multipurpose)"})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Define a fun√ß√£o desta IA no sistema multi-agente"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(I,{htmlFor:"baseUrl",className:"text-gray-300",children:"Base URL"}),e.jsx(n,{id:"baseUrl",placeholder:W[V.provider]?.baseUrl||"https://api.openai.com/v1",value:V.baseUrl,onChange:e=>B({...V,baseUrl:e.target.value})}),e.jsx("p",{className:"text-xs text-gray-500",children:"URL da API do provider"})]})]}),e.jsxs(E,{children:[e.jsx(o,{variant:"outline",onClick:()=>z(!1),children:"Cancelar"}),e.jsx(o,{onClick:async()=>{try{const{data:{user:e},error:a}=await t.auth.getUser();if(a||!e)throw new Error("Voc√™ precisa estar autenticado. Fa√ßa login novamente.");const{error:s}=await t.from("GlobalAiConnection").insert({name:V.name,provider:V.provider,apiKey:V.apiKey,baseUrl:V.baseUrl||null,model:V.model||null,maxTokens:V.maxTokens,temperature:V.temperature,aiRole:V.aiRole,isActive:!0});if(s)throw s;$({title:"‚úÖ IA adicionada!",description:`${V.name} foi criada com sucesso.`}),z(!1),Q(),B({name:"",provider:"OPENAI",apiKey:"",baseUrl:"",model:"",maxTokens:4096,temperature:.7,aiRole:"GENERAL"})}catch(e){$({title:"Erro ao criar IA",description:e.message,variant:"destructive"})}},children:"Criar IA"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 mt-6",children:[r.map(a=>{return e.jsxs(d,{className:"border-gray-700/50 bg-gray-800/30 hover:bg-gray-800/50 transition-all",children:[e.jsx(c,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-pink-500 p-3 rounded-lg",children:e.jsx(m,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{children:a.name}),a.isActive&&e.jsx(s,{className:"bg-gradient-to-r from-green-500/20 to-emerald-500/20 text-green-300 border-green-500/30 border",children:"‚úì Testada"})]}),e.jsxs(p,{className:"mt-1 flex items-center gap-2 flex-wrap",children:[(r=a.provider,e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${{OPENAI:"bg-green-100 text-green-800",ANTHROPIC:"bg-orange-100 text-orange-800",GOOGLE:"bg-blue-100 text-blue-800",OPENROUTER:"bg-indigo-100 text-indigo-800",GROQ:"bg-red-100 text-red-800",COHERE:"bg-purple-100 text-purple-800",MISTRAL:"bg-amber-100 text-amber-800",PERPLEXITY:"bg-cyan-100 text-cyan-800",TOGETHER:"bg-pink-100 text-pink-800",FIREWORKS:"bg-yellow-100 text-yellow-800"}[r]||"bg-gray-100 text-gray-800"}`,children:r})),a.aiRole&&e.jsx(F,{role:a.aiRole,size:"sm"}),a.model&&e.jsxs("span",{className:"text-sm",children:["‚Ä¢ ",a.model]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(o,{size:"sm",variant:"outline",onClick:()=>(e=>{H(e),q(!0)})(a),title:"Configurar prompt e mensagens",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Configurar"]}),e.jsxs(o,{size:"sm",variant:"outline",onClick:()=>(async e=>{try{if(!e.apiKey||e.apiKey.length<10)throw new Error("API Key inv√°lida ou muito curta");$({title:"üß™ Validando configura√ß√£o...",description:`Verificando ${e.provider}`});const{error:a}=await t.from("GlobalAiConnection").update({isActive:!0}).eq("id",e.id);if(a)throw a;k(a=>a.map(a=>a.id===e.id?{...a,isActive:!0}:a)),$({title:"‚úÖ Configura√ß√£o v√°lida!",description:`${e.provider} configurada e ativada. Teste no chat para confirmar funcionamento.`})}catch(a){$({title:"‚ùå Erro na valida√ß√£o",description:a.message,variant:"destructive"})}})(a),title:"Testar conex√£o com a IA",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Testar"]}),e.jsx(o,{size:"sm",variant:a.isActive?"outline":"default",onClick:()=>(async(e,a)=>{try{const{error:s}=await t.from("GlobalAiConnection").update({isActive:!a}).eq("id",e);if(s)throw s;$({title:"Status atualizado",description:`IA ${a?"desativada":"ativada"}.`}),Q()}catch(s){$({title:"Erro ao atualizar status",description:s.message,variant:"destructive"})}})(a.id,a.isActive),children:a.isActive?"Desativar":"Ativar"}),e.jsx(o,{size:"sm",variant:"destructive",onClick:()=>(async(e,a)=>{if(confirm(`Tem certeza que deseja remover "${a}"?\n\nEsta a√ß√£o n√£o pode ser desfeita.`))try{const{error:s}=await t.from("GlobalAiConnection").delete().eq("id",e);if(s)throw s;$({title:"üóëÔ∏è IA removida!",description:`${a} foi removida com sucesso.`}),Q()}catch(s){$({title:"Erro ao remover IA",description:s.message,variant:"destructive"})}})(a.id,a.name),title:"Remover IA",children:e.jsx(u,{className:"h-4 w-4"})})]})]})}),e.jsx(v,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"API Key"}),e.jsxs("div",{className:"font-mono text-xs mt-1",children:[a.apiKey.substring(0,10),"..."]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Max Tokens"}),e.jsx("div",{className:"font-medium mt-1",children:a.maxTokens})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Temperature"}),e.jsx("div",{className:"font-medium mt-1",children:a.temperature})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-400",children:"Criada em"}),e.jsx("div",{className:"font-medium mt-1",children:new Date(a.createdAt).toLocaleDateString("pt-BR")})]})]})})]},a.id);var r}),0===r.length&&e.jsx(d,{children:e.jsxs(v,{className:"py-12 text-center",children:[e.jsx(m,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Nenhuma IA configurada"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Adicione sua primeira conex√£o de IA para come√ßar"}),e.jsxs(o,{onClick:()=>z(!0),children:[e.jsx(l,{className:"h-4 w-4 mr-2"}),"Adicionar IA"]})]})})]}),e.jsx(b,{open:M,onOpenChange:q,children:e.jsxs(y,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto bg-gray-900 border-gray-700",children:[e.jsxs(f,{children:[e.jsxs(A,{children:["Configurar IA: ",D?.name]}),e.jsx(C,{children:"Configure o prompt de sistema e mensagens iniciais da IA"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"systemPrompt",children:"Prompt de Sistema"}),e.jsx(R,{id:"systemPrompt",value:D?.systemPrompt||"",onChange:e=>H(a=>a?{...a,systemPrompt:e.target.value}:null),rows:12,className:"font-mono text-sm",placeholder:"Digite o prompt de sistema que define o comportamento da IA..."}),e.jsx("p",{className:"text-xs text-gray-500",children:"Este prompt define a personalidade, capacidades e comportamento da IA. Seja espec√≠fico sobre o que a IA pode fazer."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(I,{children:"Mensagens Iniciais"}),e.jsxs(o,{size:"sm",variant:"outline",onClick:()=>{const e=[...D?.initialGreetings||[],"Nova mensagem inicial"];H(a=>a?{...a,initialGreetings:e}:null)},children:[e.jsx(l,{className:"h-4 w-4 mr-1"}),"Adicionar"]})]}),e.jsx("div",{className:"space-y-2",children:(D?.initialGreetings||[]).map((a,s)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{value:a,onChange:e=>{const a=[...D?.initialGreetings||[]];a[s]=e.target.value,H(e=>e?{...e,initialGreetings:a}:null)},placeholder:`Mensagem inicial ${s+1}`}),e.jsx(o,{size:"icon",variant:"ghost",onClick:()=>{const e=(D?.initialGreetings||[]).filter((e,a)=>a!==s);H(a=>a?{...a,initialGreetings:e}:null)},children:e.jsx(j,{className:"h-4 w-4"})})]},s))}),e.jsx("p",{className:"text-xs text-gray-500",children:"A IA escolher√° aleatoriamente uma dessas mensagens para saudar novos usu√°rios."})]})]}),e.jsxs(E,{children:[e.jsx(o,{variant:"outline",onClick:()=>q(!1),children:"Cancelar"}),e.jsx(o,{onClick:async()=>{if(D)try{const{error:e}=await t.from("GlobalAiConnection").update({systemPrompt:D.systemPrompt,initialGreetings:D.initialGreetings}).eq("id",D.id);if(e)throw e;$({title:"‚úÖ Configura√ß√£o salva!",description:"Prompt e mensagens iniciais atualizados."}),q(!1),Q()}catch(e){$({title:"Erro ao salvar configura√ß√£o",description:e.message,variant:"destructive"})}},children:"Salvar Configura√ß√£o"})]})]})})]})})}export{q as default};

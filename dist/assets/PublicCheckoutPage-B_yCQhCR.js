import{j as e}from"./vendor-ui-DAyDU-p2.js";import{r as t,j as a,e as s}from"./vendor-react-BDwqAlkB.js";import{s as r,h as o,g as i}from"./index-CDBCMWET.js";import{m as l,A as n}from"./vendor-animation-x8f1c1kX.js";import{L as c,ay as d,l as m,aH as h,r as u,P as x,s as p,p as g,aI as f,g as y,aD as b,aJ as w,aK as v,h as j,aL as C,f as N,Z as B,w as k,U as F,ai as S,a1 as T,aj as D,X as E,a0 as P,B as I,t as $,aB as M,C as R,aM as A,aN as z,J as q}from"./vendor-icons-_K587lK_.js";const L={async saveCustomization(e){try{const{data:t,error:a}=await r.from("CheckoutCustomization").upsert({...e,updatedAt:(new Date).toISOString()}).select().single();if(a)throw a;return t}catch(t){throw t}},async loadCustomization(e){try{const{data:t,error:a}=await r.from("CheckoutCustomization").select("*").eq("userId",e).eq("isActive",!0).single();if(a&&"PGRST116"!==a.code)throw a;return t}catch(t){throw t}},async listCustomizations(e){try{const{data:t,error:a}=await r.from("CheckoutCustomization").select("*").eq("userId",e).order("createdAt",{ascending:!1});if(a)throw a;return t}catch(t){throw t}},async activateCustomization(e){try{const t=await r.from("CheckoutCustomization").select("userId").eq("id",e).single();t.data&&await r.from("CheckoutCustomization").update({isActive:!1}).eq("userId",t.data.userId);const{data:a,error:s}=await r.from("CheckoutCustomization").update({isActive:!0,updatedAt:(new Date).toISOString()}).eq("id",e).select().single();if(s)throw s;return a}catch(t){throw t}},async deleteCustomization(e){try{const{error:t}=await r.from("CheckoutCustomization").delete().eq("id",e);if(t)throw t}catch(t){throw t}},async duplicateCustomization(e,t){try{const{data:a,error:s}=await r.from("CheckoutCustomization").select("*").eq("id",e).single();if(s)throw s;const{data:o,error:i}=await r.from("CheckoutCustomization").insert({userId:a.userId,name:t,theme:a.theme,isActive:!1}).select().single();if(i)throw i;return o}catch(a){throw a}},async generatePreviewUrl(e){try{const{data:t,error:a}=await r.from("CheckoutCustomization").insert({userId:e.userId,name:`Preview-${Date.now()}`,theme:e.theme||{},isActive:!1}).select().single();if(a)throw a;return`/checkout/preview/${t.id}`}catch(t){throw t}},async exportCustomization(e){try{const{data:t,error:a}=await r.from("CheckoutCustomization").select("*").eq("id",e).single();if(a)throw a;return{name:t.name,theme:t.theme,exportedAt:(new Date).toISOString(),version:"1.0"}}catch(t){throw t}},async importCustomization(e,t){try{const{data:a,error:s}=await r.from("CheckoutCustomization").insert({userId:e,name:`${t.name} (Importado)`,theme:t.theme,isActive:!1}).select().single();if(s)throw s;return a}catch(a){throw a}}},H={logoUrl:"",faviconUrl:"",logoAlignment:"left",showLogoAtTop:!0,logoWidth:180,logoHeight:50,backgroundColor:"#F9FAFB",backgroundGradient:"linear-gradient(180deg, #F9FAFB 0%, #F3F4F6 100%)",useGradient:!1,textColor:"#1F2937",headingColor:"#111827",noticeBarEnabled:!0,noticeBarMessage:"üéâ FRETE GR√ÅTIS para todo o Brasil em compras acima de R$ 199!",noticeBarBackgroundColor:"#1F2937",noticeBarTextColor:"#FFFFFF",noticeBarAnimation:!0,bannerEnabled:!1,bannerUrl:"",bannerHeight:200,cartDisplay:"drawer",cartBorderColor:"#E5E7EB",cartBackgroundColor:"#FFFFFF",quantityCircleColor:"#8B5CF6",quantityTextColor:"#FFFFFF",showCartIcon:!0,showCartReminder:!0,allowCouponEdit:!0,navigationSteps:3,nextStepStyle:"rounded",showProgressBar:!0,progressBarColor:"#8B5CF6",stepActiveColor:"#8B5CF6",stepInactiveColor:"#D1D5DB",stepCompletedColor:"#10B981",primaryButtonBackgroundColor:"#8B5CF6",primaryButtonTextColor:"#FFFFFF",primaryButtonBorderRadius:12,primaryButtonHover:!0,primaryButtonHoverColor:"#7C3AED",primaryButtonFlow:!0,primaryButtonShadow:!0,checkoutButtonBackgroundColor:"#10B981",checkoutButtonTextColor:"#FFFFFF",checkoutButtonBorderRadius:14,checkoutButtonHover:!0,checkoutButtonHoverColor:"#059669",checkoutButtonFlow:!0,checkoutButtonShadow:!0,checkoutButtonPulse:!0,highlightedBorderColor:"#8B5CF6",highlightedBorderTextColor:"#FFFFFF",highlightedBorderWidth:2,footerBackgroundColor:"#F3F4F6",footerTextColor:"#6B7280",showStoreName:!0,showPaymentMethods:!0,showCnpjCpf:!0,showContactEmail:!0,showAddress:!0,showPhone:!0,showPrivacyPolicy:!0,showTermsConditions:!0,showReturns:!0,footerLinkColor:"#8B5CF6",discountTagTextColor:"#FFFFFF",discountTagBackgroundColor:"#EF4444",discountTagBorderRadius:6,discountTagFontWeight:"700",useVisible:!0,expirationTime:60,forceRemovalTime:90,showCountdownTimer:!0,urgencyMessageColor:"#DC2626",urgencyBackgroundColor:"#FEE2E2",orderBumpEnabled:!0,orderBumpTextColor:"#374151",orderBumpBackgroundColor:"#FFFBEB",orderBumpPriceColor:"#DC2626",orderBumpBorderColor:"#FCD34D",orderBumpBorderWidth:2,orderBumpBorderRadius:12,orderBumpButtonTextColor:"#FFFFFF",orderBumpButtonBackgroundColor:"#EF4444",orderBumpShadow:!0,fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif",fontSize:{xs:"0.75rem",sm:"0.875rem",base:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem"},fontWeight:{normal:"400",medium:"500",semibold:"600",bold:"700"},spacing:{xs:"0.25rem",sm:"0.5rem",md:"1rem",lg:"1.5rem",xl:"2rem","2xl":"3rem"},borderRadius:{sm:"0.375rem",md:"0.5rem",lg:"0.75rem",xl:"1rem",full:"9999px"},boxShadow:{sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},inputBorderColor:"#D1D5DB",inputFocusBorderColor:"#8B5CF6",inputBackgroundColor:"#FFFFFF",inputHeight:48,inputBorderRadius:10,labelColor:"#374151",labelFontWeight:"600",placeholderColor:"#9CA3AF",cardBackgroundColor:"#FFFFFF",cardBorderColor:"#E5E7EB",cardBorderRadius:16,cardShadow:!0,cardPadding:"1.5rem",showTrustBadges:!0,trustBadgeColor:"#10B981",sslBadgeEnabled:!0,securityIconsEnabled:!0,language:"pt",currency:"BRL",presellPage:"cart-in-cart",requestCpfOnlyAtPayment:!1,requestBirthDate:!1,requestGender:!1,disableCarrot:!1,mobileBreakpoint:640,tabletBreakpoint:1024,desktopBreakpoint:1280,enableAnimations:!0,animationDuration:"300ms",animationTiming:"cubic-bezier(0.4, 0, 0.2, 1)",highContrast:!1,focusIndicatorColor:"#8B5CF6",reducedMotion:!1},O=({children:a,onClick:s,disabled:r=!1,loading:i=!1,type:n="button",variant:d="primary",theme:m,className:h="",fullWidth:u=!1,size:x="md",icon:p,iconPosition:g="left"})=>{const[f,y]=t.useState(!1),b=(()=>{switch(d){case"checkout":return{backgroundColor:m.checkoutButtonBackgroundColor||"#10b981",textColor:m.checkoutButtonTextColor||"#ffffff",borderRadius:m.checkoutButtonBorderRadius||8,hover:!1!==m.checkoutButtonHover,hoverColor:m.checkoutButtonHoverColor||"#059669",flow:m.checkoutButtonFlow||!1,shadow:!1!==m.checkoutButtonShadow,pulse:m.checkoutButtonPulse||!1};case"secondary":return{backgroundColor:m.secondaryButtonBackgroundColor||"#6b7280",textColor:m.secondaryButtonTextColor||"#ffffff",borderRadius:m.primaryButtonBorderRadius||8,hover:!0,hoverColor:"#4b5563",flow:!1,shadow:!1,pulse:!1};default:return{backgroundColor:m.primaryButtonBackgroundColor||"#8b5cf6",textColor:m.primaryButtonTextColor||"#ffffff",borderRadius:m.primaryButtonBorderRadius||8,hover:!1!==m.primaryButtonHover,hoverColor:m.primaryButtonHoverColor||"#7c3aed",flow:m.primaryButtonFlow||!1,shadow:!1!==m.primaryButtonShadow,pulse:!1}}})(),w={backgroundColor:r||i?"#d1d5db":f&&b.hover&&b.hoverColor?b.hoverColor:b.backgroundColor,color:r||i?"#9ca3af":b.textColor,borderRadius:`${b.borderRadius}px`,transition:"all 0.3s ease",boxShadow:b.shadow?f?"0 10px 25px -5px rgba(0, 0, 0, 0.2), 0 8px 10px -6px rgba(0, 0, 0, 0.15)":"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)":"none",transform:!f||r||i?"translateY(0)":"translateY(-2px)"};return e.jsxs(l.button,{type:n,onClick:r||i?void 0:s,disabled:r||i,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),className:o("relative font-semibold inline-flex items-center justify-center gap-2","focus:outline-none focus:ring-2 focus:ring-offset-2","transition-all duration-300 ease-in-out","disabled:cursor-not-allowed disabled:opacity-50",(()=>{switch(x){case"sm":return"px-4 py-2 text-sm";case"lg":return"px-8 py-4 text-lg";default:return"px-6 py-3 text-base"}})(),(()=>{const e=[];return!b.pulse||r||i||e.push("animate-pulse"),!b.flow||r||i||e.push("animate-gradient-x bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 bg-[length:200%_auto]"),e.join(" ")})(),u&&"w-full",h),style:w,whileHover:r||i?{}:{scale:1.02},whileTap:r||i?{}:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[i&&e.jsx(c,{className:o("animate-spin","sm"===x?"w-4 h-4":"lg"===x?"w-6 h-6":"w-5 h-5")}),p&&"left"===g&&!i&&e.jsx("span",{className:"flex-shrink-0",children:p}),e.jsx("span",{className:"flex-1 text-center",children:a}),p&&"right"===g&&!i&&e.jsx("span",{className:"flex-shrink-0",children:p}),!r&&!i&&e.jsx("span",{className:"absolute inset-0 overflow-hidden rounded-[inherit]",children:e.jsx("span",{className:"absolute inset-0 rounded-[inherit] bg-white opacity-0 group-active:opacity-20 transition-opacity duration-200"})})]})},V=t.forwardRef(({label:a,error:s,success:r=!1,theme:i,icon:c,iconPosition:h="left",mask:u="none",showValidation:x=!0,helperText:p,required:g=!1,fullWidth:f=!0,className:y="",value:b,onChange:w,onFocus:v,onBlur:j,...C},N)=>{const[B,k]=t.useState(!1),[F,S]=t.useState(!!b),T=()=>s?"#ef4444":r&&x?"#10b981":B?i.inputFocusBorderColor||"#8b5cf6":i.inputBorderColor||"#d1d5db",D={backgroundColor:i.inputBackgroundColor||"#ffffff",borderColor:T(),borderRadius:`${i.inputBorderRadius||8}px`,height:`${i.inputHeight||48}px`,color:i.textColor||"#111827",borderWidth:"1px",borderStyle:"solid",transition:"all 0.3s ease"},E={color:s?"#ef4444":B||F?i.labelColor||"#111827":i.labelColor||"#6b7280",fontWeight:i.labelFontWeight||"500",fontSize:"14px",transition:"all 0.3s ease"};return e.jsxs("div",{className:o("relative",f&&"w-full"),children:[a&&e.jsxs(l.label,{className:"block mb-2",style:E,initial:{opacity:0,y:-5},animate:{opacity:1,y:0},transition:{duration:.2},children:[a,g&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[c&&"left"===h&&e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",style:{color:B?T():void 0},children:c}),e.jsx("input",{ref:N,value:b,onChange:e=>{const t=(e=>{if(!e)return"";switch(u){case"cpf":return e.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1");case"phone":return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{5})(\d)/,"$1-$2").replace(/(-\d{4})\d+?$/,"$1");case"cep":return e.replace(/\D/g,"").replace(/(\d{5})(\d)/,"$1-$2").replace(/(-\d{3})\d+?$/,"$1");case"card":return e.replace(/\D/g,"").replace(/(\d{4})(\d)/,"$1 $2").replace(/(\d{4})(\d)/,"$1 $2").replace(/(\d{4})(\d)/,"$1 $2").replace(/(\d{4})\d+?$/,"$1");case"date":return e.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1/$2").replace(/(\d{2})(\d)/,"$1/$2").replace(/(\/\d{4})\d+?$/,"$1");default:return e}})(e.target.value);S(!!t);const a={...e,target:{...e.target,value:t}};w?.(a)},onFocus:e=>{k(!0),v?.(e)},onBlur:e=>{k(!1),j?.(e)},className:o("w-full px-4 outline-none transition-all duration-300","focus:ring-2 focus:ring-opacity-20",c&&"left"===h&&"pl-11",c&&"right"===h&&"pr-11",(s||r&&x)&&"pr-11",y),style:{...D,...B&&{boxShadow:`0 0 0 3px ${i.inputFocusBorderColor||"#8b5cf6"}20`}},"aria-invalid":!!s,"aria-describedby":s?`${C.id}-error`:p?`${C.id}-helper`:void 0,...C}),e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[x&&!c&&e.jsxs(n,{mode:"wait",children:[s&&e.jsx(l.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{duration:.3},children:e.jsx(d,{className:"w-5 h-5 text-red-500"})},"error"),r&&!s&&F&&e.jsx(l.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{duration:.3},children:e.jsx(m,{className:"w-5 h-5 text-green-500"})},"success")]}),c&&"right"===h&&e.jsx("div",{className:"text-gray-400",style:{color:B?T():void 0},children:c})]})]}),e.jsx(n,{children:s&&e.jsxs(l.p,{id:`${C.id}-error`,className:"mt-2 text-sm text-red-500 flex items-center gap-1",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[e.jsx(d,{className:"w-4 h-4"}),s]})}),p&&!s&&e.jsx("p",{id:`${C.id}-helper`,className:"mt-2 text-sm",style:{color:i.textColor||"#6b7280",opacity:.7},children:p}),B&&e.jsx(l.div,{className:"absolute inset-0 rounded-[inherit] pointer-events-none",style:{border:`2px solid ${i.inputFocusBorderColor||"#8b5cf6"}`,opacity:.2},initial:{scale:.95},animate:{scale:1},exit:{scale:.95},transition:{duration:.2}})]})});V.displayName="CheckoutInput";const _=({theme:t,isMobile:a=!1,storeData:s={},className:r=""})=>{if(!(t.showStoreName||t.showCnpjCpf||t.showContactEmail||t.showAddress||t.showPhone||t.showPaymentMethods||t.showPrivacyPolicy||t.showTermsConditions||t.showReturns))return null;const{name:i="Minha Loja",cnpj:n,cpf:c,email:d="contato@loja.com",phone:m="(11) 99999-9999",address:v="Rua Exemplo, 123 - S√£o Paulo, SP"}=s,j={backgroundColor:t.footerBackgroundColor||"#ffffff",color:t.footerTextColor||"#6b7280",borderTopColor:t.footerTextColor?`${t.footerTextColor}20`:"#e5e7eb"},C={color:t.footerLinkColor||t.footerTextColor||"#8b5cf6"},N=[{name:"Cart√£o de Cr√©dito",icon:y},{name:"PIX",icon:b},{name:"Boleto",icon:w}];return e.jsx(l.footer,{className:o("border-t",a?"mt-6":"mt-12",r),style:j,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:e.jsxs("div",{className:o("mx-auto",a?"px-2 py-4":"px-4 py-8 max-w-7xl"),children:[e.jsxs("div",{className:o("grid gap-6",a?"grid-cols-1 gap-4":"grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"),children:[(t.showStoreName||t.showCnpjCpf)&&e.jsxs("div",{className:o(a?"space-y-2":"space-y-3"),children:[t.showStoreName&&e.jsx("h3",{className:o("font-bold",a?"text-sm mb-2":"text-lg mb-4"),style:{color:t.footerTextColor||"#111827"},children:i}),t.showCnpjCpf&&(n||c)&&e.jsxs("div",{className:o("space-y-1.5",a?"text-xs":"text-sm"),children:[n&&e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx(h,{className:o("mt-0.5 flex-shrink-0",a?"w-3 h-3":"w-4 h-4")}),e.jsxs("span",{children:[e.jsx("strong",{children:"CNPJ:"})," ",n]})]}),c&&!n&&e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx(h,{className:o("mt-0.5 flex-shrink-0",a?"w-3 h-3":"w-4 h-4")}),e.jsxs("span",{children:[e.jsx("strong",{children:"CPF:"})," ",c]})]})]})]}),(t.showContactEmail||t.showPhone)&&e.jsxs("div",{className:o(a?"space-y-2":"space-y-3"),children:[e.jsx("h4",{className:o("font-semibold",a?"text-sm mb-2":"text-base mb-4"),style:{color:t.footerTextColor||"#111827"},children:"Contato"}),e.jsxs("div",{className:o(a?"space-y-2 text-xs":"space-y-3 text-sm"),children:[t.showContactEmail&&d&&e.jsxs("a",{href:`mailto:${d}`,className:"flex items-center gap-2 hover:underline transition-all",style:C,children:[e.jsx(u,{className:o("flex-shrink-0",a?"w-3 h-3":"w-4 h-4")}),e.jsx("span",{children:d})]}),t.showPhone&&m&&e.jsxs("a",{href:`tel:${m.replace(/\D/g,"")}`,className:"flex items-center gap-2 hover:underline transition-all",style:C,children:[e.jsx(x,{className:o("flex-shrink-0",a?"w-3 h-3":"w-4 h-4")}),e.jsx("span",{children:m})]}),t.showAddress&&v&&e.jsxs("p",{className:o("flex items-start gap-2",a?"text-xs":"text-sm"),children:[e.jsx(p,{className:o("mt-0.5 flex-shrink-0",a?"w-3 h-3":"w-4 h-4")}),e.jsx("span",{children:v})]})]})]}),(t.showPrivacyPolicy||t.showTermsConditions||t.showReturns)&&e.jsxs("div",{className:o(a?"space-y-2":"space-y-3"),children:[e.jsx("h4",{className:o("font-semibold",a?"text-sm mb-2":"text-base mb-4"),style:{color:t.footerTextColor||"#111827"},children:"Informa√ß√µes"}),e.jsxs("div",{className:o(a?"space-y-1.5 text-xs":"space-y-2 text-sm"),children:[t.showPrivacyPolicy&&e.jsxs("a",{href:"/politica-de-privacidade",className:"flex items-center gap-2 hover:underline transition-all",style:C,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(g,{className:o("flex-shrink-0",a?"w-3 h-3":"w-4 h-4")}),e.jsx("span",{children:"Pol√≠tica de Privacidade"})]}),t.showTermsConditions&&e.jsxs("a",{href:"/termos-e-condicoes",className:"flex items-center gap-2 hover:underline transition-all",style:C,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(h,{className:o("flex-shrink-0",a?"w-3 h-3":"w-4 h-4")}),e.jsx("span",{children:"Termos e Condi√ß√µes"})]}),t.showReturns&&e.jsxs("a",{href:"/trocas-e-devolucoes",className:"flex items-center gap-2 hover:underline transition-all",style:C,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(f,{className:o("flex-shrink-0",a?"w-3 h-3":"w-4 h-4")}),e.jsx("span",{children:"Trocas e Devolu√ß√µes"})]})]})]}),t.showPaymentMethods&&e.jsxs("div",{className:o(a?"space-y-2":"space-y-3"),children:[e.jsx("h4",{className:o("font-semibold",a?"text-sm mb-2":"text-base mb-4"),style:{color:t.footerTextColor||"#111827"},children:"Formas de Pagamento"}),e.jsx("div",{className:o("flex flex-wrap",a?"gap-2":"gap-3"),children:N.map((s,r)=>e.jsxs(l.div,{className:o("flex items-center rounded-lg border transition-all hover:shadow-md",a?"gap-1.5 px-2 py-1.5":"gap-2 px-3 py-2"),style:{borderColor:t.footerTextColor?`${t.footerTextColor}20`:"#e5e7eb",backgroundColor:t.footerTextColor?`${t.footerTextColor}05`:"#f9fafb"},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1*r},whileHover:{scale:1.05},children:[e.jsx(s.icon,{className:o(a?"w-4 h-4":"w-5 h-5"),style:{color:t.footerTextColor||"#6b7280"}}),e.jsx("span",{className:o("font-medium",a?"text-[10px]":"text-xs"),children:s.name})]},s.name))}),e.jsxs("div",{className:o(a?"mt-3 space-y-1.5":"mt-6 space-y-2"),children:[e.jsxs("div",{className:o("flex items-center gap-2",a?"text-[10px]":"text-xs"),children:[e.jsx(g,{className:o(a?"w-3 h-3":"w-4 h-4"),style:{color:"#10b981"}}),e.jsx("span",{children:"Compra 100% Segura"})]}),e.jsxs("div",{className:o("flex items-center gap-2",a?"text-[10px]":"text-xs"),children:[e.jsx(g,{className:o(a?"w-3 h-3":"w-4 h-4"),style:{color:"#10b981"}}),e.jsx("span",{children:"Certificado SSL"})]})]})]})]}),e.jsx("div",{className:o("h-px",a?"my-4":"my-6"),style:{backgroundColor:t.footerTextColor?`${t.footerTextColor}20`:"#e5e7eb"}}),e.jsxs("div",{className:o("text-center",a?"text-xs":"text-sm"),children:[e.jsxs("p",{children:["¬© ",(new Date).getFullYear()," ",t.showStoreName?i:"Todos os direitos reservados"]}),e.jsxs("p",{className:o("mt-1 opacity-70",a?"text-[10px]":"text-xs"),children:["Powered by"," ",e.jsx("a",{href:"https://syncads.com.br",target:"_blank",rel:"noopener noreferrer",className:"hover:underline font-medium",style:C,children:"SyncAds"})]})]})]})})},W=({orderBump:a,theme:s,selected:r=!1,onToggle:i,className:c=""})=>{const[d,h]=t.useState(!1);if(!s.orderBumpEnabled)return null;const u=a.originalPrice?Math.round((a.originalPrice-a.price)/a.originalPrice*100):0,x={backgroundColor:s.orderBumpBackgroundColor||"#ffffff",borderColor:r?s.primaryButtonBackgroundColor||"#8b5cf6":s.orderBumpBorderColor||"#e5e7eb",borderWidth:`${s.orderBumpBorderWidth||2}px`,borderRadius:`${s.orderBumpBorderRadius||12}px`,boxShadow:s.orderBumpShadow?r?`0 8px 30px ${s.primaryButtonBackgroundColor||"#8b5cf6"}30`:"0 4px 6px rgba(0, 0, 0, 0.1)":"none",transition:"all 0.3s ease"},p={backgroundColor:s.orderBumpButtonBackgroundColor||"#8b5cf6",color:s.orderBumpButtonTextColor||"#ffffff",borderRadius:(s.orderBumpBorderRadius||12)-4+"px"},g=()=>{i(a.id)};return e.jsxs(l.div,{className:o("relative border cursor-pointer overflow-hidden",c),style:x,onClick:g,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.3},children:[(u>0||a.badge)&&e.jsx("div",{className:"absolute top-3 right-3 z-10",children:e.jsxs(l.div,{className:"px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1 shadow-lg",style:{backgroundColor:s.discountTagBackgroundColor||"#ef4444",color:s.discountTagTextColor||"#ffffff"},initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{duration:.5,delay:.2},children:[e.jsx(v,{className:"w-3 h-3"}),e.jsx("span",{children:a.badge||`-${u}%`})]})}),e.jsx("div",{className:"absolute top-3 left-3 z-10",children:e.jsx(l.div,{className:o("w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all",r?"bg-green-500 border-green-500":"bg-white border-gray-300"),whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(n,{children:r&&e.jsx(l.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{duration:.3},children:e.jsx(m,{className:"w-4 h-4 text-white"})})})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex gap-4 mb-4",children:[a.image&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden bg-gray-100",children:e.jsx("img",{src:a.image,alt:a.title,className:"w-full h-full object-cover"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold mb-2",style:{color:s.orderBumpTextColor||"#111827"},children:a.title}),e.jsx("p",{className:"text-sm mb-3",style:{color:s.orderBumpTextColor?`${s.orderBumpTextColor}80`:"#6b7280"},children:a.description})]})]}),a.bullets&&a.bullets.length>0&&e.jsx("div",{className:"mb-4 space-y-2",children:a.bullets.slice(0,3).map((t,a)=>e.jsxs(l.div,{className:"flex items-start gap-2 text-sm",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1*a},children:[e.jsx(j,{className:"w-4 h-4 flex-shrink-0 mt-0.5",style:{color:s.orderBumpPriceColor||"#8b5cf6"}}),e.jsx("span",{style:{color:s.orderBumpTextColor||"#374151"},children:t})]},a))}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-4",children:[a.originalPrice&&e.jsxs("span",{className:"text-sm line-through opacity-60",style:{color:s.orderBumpTextColor||"#6b7280"},children:["R$ ",a.originalPrice.toFixed(2)]}),e.jsxs("span",{className:"text-2xl font-bold",style:{color:s.orderBumpPriceColor||"#10b981"},children:["R$ ",a.price.toFixed(2)]}),e.jsx("span",{className:"text-sm",style:{color:s.orderBumpTextColor?`${s.orderBumpTextColor}60`:"#9ca3af"},children:"√† vista"})]}),e.jsx(l.button,{className:"w-full py-3 px-4 rounded-lg font-semibold flex items-center justify-center gap-2 transition-all",style:p,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e=>{e.stopPropagation(),g()},children:r?e.jsxs(e.Fragment,{children:[e.jsx(m,{className:"w-5 h-5"}),e.jsx("span",{children:"Adicionado ao Pedido"})]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-5 h-5"}),e.jsx("span",{children:"Adicionar ao Pedido"})]})}),r&&e.jsx(l.p,{className:"text-center text-xs mt-3 font-medium",style:{color:s.orderBumpPriceColor||"#10b981"},initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:"‚úì Oferta adicionada com sucesso!"})]}),r&&e.jsx(l.div,{className:"absolute inset-0 pointer-events-none",style:{background:`linear-gradient(135deg, ${s.primaryButtonBackgroundColor||"#8b5cf6"}10, transparent)`},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),e.jsx(n,{children:d&&!r&&e.jsx(l.div,{className:"absolute inset-0 pointer-events-none",style:{background:`linear-gradient(135deg, ${s.orderBumpBorderColor||"#e5e7eb"}20, transparent)`},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}})})]})},G=({theme:a,className:s="",onExpire:r,customMessage:i,compact:c=!1,showIcon:m=!0})=>{const[h,u]=t.useState({days:0,hours:0,minutes:0,seconds:0,total:0}),[x,p]=t.useState(!1);if(!a.useVisible)return null;const g=a.expirationTime||15,f=!1!==a.showCountdownTimer,y=a.urgencyMessageColor||"#ef4444",b=a.urgencyBackgroundColor||"#fee2e2";a.forceRemovalTime;const w=t.useMemo(()=>{const e="checkout_expiration_time",t=localStorage.getItem(e);if(t)return new Date(t);{const t=new Date;return t.setMinutes(t.getMinutes()+g),localStorage.setItem(e,t.toISOString()),t}},[g]),v=()=>{const e=(new Date).getTime(),t=w.getTime()-e;if(t<=0)return{days:0,hours:0,minutes:0,seconds:0,total:0};return{days:Math.floor(t/864e5),hours:Math.floor(t%864e5/36e5),minutes:Math.floor(t%36e5/6e4),seconds:Math.floor(t%6e4/1e3),total:t}};t.useEffect(()=>{const e=setInterval(()=>{const e=v();u(e),e.total<=0&&!x&&(p(!0),r&&r())},1e3);return u(v()),()=>clearInterval(e)},[w,x,r]);const j=e=>e.toString().padStart(2,"0"),C=(()=>{const{minutes:e,total:t}=h;return t<=0||e<=2?"high":e<=5?"medium":"low"})(),F={backgroundColor:b,borderLeft:`4px solid ${y}`},S={color:y},T={scale:[1,1.05,1],transition:{duration:2,repeat:1/0,ease:"easeInOut"}},D={scale:[1,1.08,1],opacity:[1,.9,1],transition:{duration:1,repeat:1/0,ease:"easeInOut"}};return c?e.jsxs(l.div,{className:o("inline-flex items-center gap-2 px-3 py-1 rounded-lg",s),style:F,animate:"high"===C?D:{},children:[m&&e.jsx(N,{className:"w-4 h-4",style:{color:y}}),f&&e.jsxs("span",{className:"font-mono font-semibold text-sm",style:S,children:[j(h.minutes),":",j(h.seconds)]})]}):e.jsx(n,{children:e.jsx(l.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:o("w-full overflow-hidden",s),children:e.jsxs(l.div,{className:"p-4 rounded-lg shadow-md",style:F,animate:"high"===C?D:T,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[m&&e.jsx("div",{className:"flex-shrink-0",children:"high"===C?e.jsx(d,{className:"w-6 h-6",style:{color:y}}):"medium"===C?e.jsx(B,{className:"w-6 h-6",style:{color:y}}):e.jsx(k,{className:"w-6 h-6",style:{color:y}})}),e.jsx("p",{className:"font-semibold text-sm md:text-base flex-1",style:S,children:(()=>{if(i)return i;const{total:e,minutes:t}=h;return e<=0?"‚ö†Ô∏è Oferta expirada! Recarregue a p√°gina para nova tentativa.":t<=2?"üî• √öLTIMOS MINUTOS! Complete sua compra agora!":t<=5?"‚è∞ Restam poucos minutos! Garanta sua oferta!":t<=10?"‚ö° Oferta por tempo limitado! N√£o perca!":"üéØ Oferta especial expira em breve!"})()})]}),f&&!x&&e.jsxs("div",{className:"grid grid-cols-4 gap-2 md:gap-4",children:[h.days>0&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(l.div,{className:"bg-white rounded-lg p-2 md:p-3 shadow-sm min-w-[50px] md:min-w-[60px]",animate:{scale:[1,1.02,1]},transition:{duration:1,repeat:1/0},children:e.jsx("span",{className:"font-mono font-bold text-xl md:text-3xl block text-center",style:{color:y},children:j(h.days)})}),e.jsx("span",{className:"text-xs md:text-sm font-medium mt-1",style:S,children:"Dias"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(l.div,{className:"bg-white rounded-lg p-2 md:p-3 shadow-sm min-w-[50px] md:min-w-[60px]",animate:{scale:[1,1.02,1]},transition:{duration:1,repeat:1/0,delay:.1},children:e.jsx("span",{className:"font-mono font-bold text-xl md:text-3xl block text-center",style:{color:y},children:j(h.hours)})}),e.jsx("span",{className:"text-xs md:text-sm font-medium mt-1",style:S,children:"Horas"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(l.div,{className:"bg-white rounded-lg p-2 md:p-3 shadow-sm min-w-[50px] md:min-w-[60px]",animate:{scale:[1,1.02,1]},transition:{duration:1,repeat:1/0,delay:.2},children:e.jsx("span",{className:"font-mono font-bold text-xl md:text-3xl block text-center",style:{color:y},children:j(h.minutes)})}),e.jsx("span",{className:"text-xs md:text-sm font-medium mt-1",style:S,children:"Min"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(l.div,{className:"bg-white rounded-lg p-2 md:p-3 shadow-sm min-w-[50px] md:min-w-[60px]",animate:{scale:[1,1.05,1]},transition:{duration:.5,repeat:1/0},children:e.jsx("span",{className:"font-mono font-bold text-xl md:text-3xl block text-center",style:{color:y},children:j(h.seconds)})}),e.jsx("span",{className:"text-xs md:text-sm font-medium mt-1",style:S,children:"Seg"})]})]}),x&&e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-4",children:[e.jsx(d,{className:"w-12 h-12 mx-auto mb-2",style:{color:y}}),e.jsx("p",{className:"font-bold text-lg",style:S,children:"Oferta Expirada"}),e.jsx("p",{className:"text-sm mt-1",style:{color:y,opacity:.8},children:"Recarregue a p√°gina para tentar novamente"})]})]})})})},U=({currentStep:t,totalSteps:a=3,theme:s,className:r="",labels:i,showLabels:n=!0,vertical:c=!1})=>{if(!s.showProgressBar)return null;const d=s.progressBarColor||"#8b5cf6",h=s.stepActiveColor||"#8b5cf6",u=s.stepInactiveColor||"#d1d5db",x=s.stepCompletedColor||"#10b981",g=s.nextStepStyle||"rounded",f=s.navigationSteps||3,b=i||["Dados","Entrega","Pagamento"],w=[];if(1===f)w.push({number:1,label:"Checkout",icon:y,completed:t>1,active:1===t});else{const e=[F,p,y];for(let s=1;s<=a;s++)w.push({number:s,label:b[s-1]||`Step ${s}`,icon:e[s-1]||F,completed:t>s,active:t===s})}const v=(t-1)/(a-1)*100,j=()=>{switch(g){case"square":return"rounded-none";case"pill":return"rounded-full";default:return"rounded-lg"}},C=e=>e.completed?x:e.active?h:u;return c?e.jsx("div",{className:o("flex flex-col gap-4",r),children:w.map((t,a)=>{const s=t.icon,r=C(t),i=a===w.length-1;return e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(l.div,{className:o("flex-shrink-0 w-10 h-10 flex items-center justify-center",j(),"font-semibold transition-all duration-300"),style:{backgroundColor:r,color:"#ffffff"},initial:{scale:0},animate:{scale:1},transition:{delay:.1*a},children:t.completed?e.jsx(m,{className:"w-5 h-5"}):e.jsx(s,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1",children:[n&&e.jsx(l.p,{className:"font-medium text-sm mb-1",style:{color:t.active||t.completed?r:"#6b7280"},initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*a+.05},children:t.label}),!i&&e.jsxs("div",{className:"relative h-12 ml-5",children:[e.jsx("div",{className:"absolute w-0.5 h-full",style:{backgroundColor:u}}),(t.completed||t.active)&&e.jsx(l.div,{className:"absolute w-0.5 h-full",style:{backgroundColor:d},initial:{height:0},animate:{height:"100%"},transition:{duration:.5,delay:.1*a}})]})]})]},t.number)})}):e.jsx("div",{className:o("w-full",r),children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-5 left-0 w-full h-1 rounded-full",style:{backgroundColor:u}}),e.jsx(l.div,{className:"absolute top-5 left-0 h-1 rounded-full",style:{backgroundColor:d},initial:{width:0},animate:{width:`${v}%`},transition:{duration:.5,ease:"easeInOut"}}),e.jsx("div",{className:"relative flex justify-between",children:w.map((t,a)=>{const s=t.icon,r=C(t);return e.jsxs(l.div,{className:"flex flex-col items-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.1*a},children:[e.jsx(l.div,{className:o("w-10 h-10 flex items-center justify-center",j(),"font-semibold shadow-md transition-all duration-300"),style:{backgroundColor:r,color:"#ffffff"},whileHover:{scale:1.1},whileTap:{scale:.95},children:t.completed?e.jsx(l.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:200},children:e.jsx(m,{className:"w-5 h-5"})}):e.jsx(s,{className:"w-5 h-5"})}),n&&e.jsx(l.p,{className:"mt-2 text-xs md:text-sm font-medium text-center",style:{color:t.active||t.completed?r:"#6b7280"},initial:{opacity:0},animate:{opacity:1},transition:{delay:.1*a+.2},children:t.label})]},t.number)})})]}),a>3&&e.jsxs("div",{className:"mt-6 md:hidden",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-sm font-medium",style:{color:h},children:["Passo ",t," de ",a]}),e.jsxs("span",{className:"text-sm font-semibold",style:{color:h},children:[Math.round(v),"%"]})]}),e.jsx("div",{className:"w-full h-2 rounded-full overflow-hidden",style:{backgroundColor:u},children:e.jsx(l.div,{className:"h-full rounded-full",style:{backgroundColor:d},initial:{width:0},animate:{width:`${v}%`},transition:{duration:.5,ease:"easeInOut"}})})]})]})})},X=({theme:a,storeName:s="Minha Loja",storeUrl:r,className:i="",showBackground:n=!1,compact:c=!1})=>{const[d,m]=t.useState(!1),[h,u]=t.useState(!0);if(!a.showLogoAtTop)return null;const x=a.logoUrl,p=a.logoAlignment||"center",g=a.logoWidth||180,f=a.logoHeight||60,y=a.backgroundColor||"#ffffff",b=a.textColor||"#1f2937",w=()=>{m(!0),u(!1)},v=()=>{u(!1)},j=!x||d?e.jsxs(l.div,{className:"flex items-center gap-3",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:a.primaryButtonBackgroundColor||"#8b5cf6"},children:e.jsx(S,{className:"w-6 h-6 text-white"})}),e.jsx("h1",{className:"text-xl md:text-2xl font-bold",style:{color:b},children:s})]}):e.jsxs(l.div,{className:"relative",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},style:{maxWidth:g},children:[h&&e.jsx("div",{className:"animate-pulse rounded-lg flex items-center justify-center",style:{width:g,height:f,backgroundColor:a.cardBackgroundColor||"#f3f4f6"},children:e.jsx(T,{className:"w-8 h-8 text-gray-400"})}),e.jsx("img",{src:x,alt:`${s} Logo`,className:o("object-contain transition-opacity duration-300",h?"opacity-0 absolute inset-0":"opacity-100"),style:{width:c?.7*g:g,height:c?.7*f:f,maxWidth:"100%"},onError:w,onLoad:v,loading:"eager"})]}),C=r?e.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"inline-block transition-transform hover:scale-105 active:scale-95","aria-label":`Visitar ${s}`,children:j}):j;return e.jsx(l.header,{className:o("w-full transition-all duration-300",n?"shadow-sm":"",c?"py-3":"py-4 md:py-6",i),style:{backgroundColor:n?y:"transparent"},initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:o("flex items-center",(()=>{switch(p){case"left":return"justify-start";case"right":return"justify-end";default:return"justify-center"}})()),children:C})})})},Y=({theme:a,birthDate:s="",gender:r="",onBirthDateChange:i,onGenderChange:c,className:h="",errors:u={}})=>{const[x,p]=t.useState(null),[g,f]=t.useState({birthDate:{isValid:!0,message:""},gender:{isValid:!0,message:""}}),y=a.requestBirthDate||!1,b=a.requestGender||!1;if(!y&&!b)return null;const w=a.inputBorderColor||"#d1d5db",v=a.inputFocusBorderColor||"#8b5cf6",j=a.inputBackgroundColor||"#ffffff",C=a.inputHeight||48,N=a.inputBorderRadius||8,B=a.labelColor||"#374151",k=a.labelFontWeight||"600",S=a.placeholderColor||"#9ca3af",T=a.textColor||"#1f2937",E=[{value:"",label:"Selecione seu g√™nero"},{value:"masculino",label:"Masculino"},{value:"feminino",label:"Feminino"},{value:"outro",label:"Outro"},{value:"prefiro-nao-informar",label:"Prefiro n√£o informar"}],P=e=>{const t=(e=>{const t=e.replace(/\D/g,"");let a=t;return t.length>=3&&(a=`${t.slice(0,2)}/${t.slice(2)}`),t.length>=5&&(a=`${t.slice(0,2)}/${t.slice(2,4)}/${t.slice(4,8)}`),a})(e.target.value);if(i&&i(t),10===t.length){const e=(e=>{if(!e||e.length<10)return{isValid:!1,message:"Data de nascimento incompleta"};const[t,a,s]=e.split("/").map(Number);if(!t||!a||!s)return{isValid:!1,message:"Data inv√°lida"};if(t<1||t>31)return{isValid:!1,message:"Dia inv√°lido"};if(a<1||a>12)return{isValid:!1,message:"M√™s inv√°lido"};const r=(new Date).getFullYear();if(s<1900||s>r)return{isValid:!1,message:"Ano inv√°lido"};const o=new Date(s,a-1,t),i=new Date;let l=i.getFullYear()-o.getFullYear();const n=i.getMonth()-o.getMonth();return(n<0||0===n&&i.getDate()<o.getDate())&&l--,l<18?{isValid:!1,message:"Voc√™ precisa ter pelo menos 18 anos"}:l>120?{isValid:!1,message:"Data de nascimento inv√°lida"}:{isValid:!0,message:"Data v√°lida"}})(t);f(t=>({...t,birthDate:e}))}else f(e=>({...e,birthDate:{isValid:!0,message:""}}))},I=e=>{const t=e.target.value;c&&c(t),f(e=>({...e,gender:{isValid:""!==t,message:""===t?"Selecione uma op√ß√£o":""}}))},$=(e,t)=>({backgroundColor:j,borderColor:t?"#ef4444":x===e?v:w,borderRadius:`${N}px`,height:`${C}px`,color:T,borderWidth:"2px",borderStyle:"solid"}),M={color:B,fontWeight:k},R={initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3}};return e.jsxs("div",{className:o("space-y-4",h),children:[(()=>{if(!y)return null;const t=!g.birthDate.isValid||!!u.birthDate,a=u.birthDate||g.birthDate.message,r=g.birthDate.isValid&&10===s.length;return e.jsxs(l.div,{...R,className:"space-y-2",children:[e.jsxs("label",{htmlFor:"birthDate",className:"block text-sm font-semibold",style:M,children:["Data de Nascimento",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(D,{className:"w-5 h-5",style:{color:"birthDate"===x?v:S}})}),e.jsx("input",{type:"text",id:"birthDate",value:s,onChange:P,onFocus:()=>p("birthDate"),onBlur:()=>p(null),placeholder:"DD/MM/AAAA",maxLength:10,className:o("w-full pl-10 pr-10 font-medium transition-all duration-200","focus:outline-none focus:ring-0",t&&"border-red-500"),style:$("birthDate",t),autoComplete:"bday"}),e.jsx(n,{children:10===s.length&&e.jsx(l.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:r?e.jsx(m,{className:"w-5 h-5 text-green-500"}):e.jsx(d,{className:"w-5 h-5 text-red-500"})})})]}),e.jsxs(n,{children:[t&&a&&e.jsxs(l.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-red-600 flex items-center gap-1",children:[e.jsx(d,{className:"w-4 h-4"}),a]}),!t&&!s&&"birthDate"===x&&e.jsx(l.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"text-xs",style:{color:S},children:"Digite sua data de nascimento no formato DD/MM/AAAA"})]})]})})(),(()=>{if(!b)return null;const t=!g.gender.isValid||!!u.gender,a=u.gender||g.gender.message;return e.jsxs(l.div,{...R,transition:{delay:.1},className:"space-y-2",children:[e.jsxs("label",{htmlFor:"gender",className:"block text-sm font-semibold",style:M,children:["G√™nero",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(F,{className:"w-5 h-5",style:{color:"gender"===x?v:S}})}),e.jsx("select",{id:"gender",value:r,onChange:I,onFocus:()=>p("gender"),onBlur:()=>p(null),className:o("w-full pl-10 pr-4 font-medium transition-all duration-200","focus:outline-none focus:ring-0 appearance-none cursor-pointer",t&&"border-red-500"),style:$("gender",t),autoComplete:"sex",children:E.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"w-5 h-5",style:{color:"gender"===x?v:S},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),e.jsx(n,{children:t&&a&&e.jsxs(l.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-red-600 flex items-center gap-1",children:[e.jsx(d,{className:"w-4 h-4"}),a]})})]})})()]})},J=({theme:a,className:s="",isMobile:r=!1,closeable:i=!1,autoHide:c=!1,autoHideDelay:d=5e3})=>{const[m,h]=t.useState(!0),[u,x]=t.useState(!1);if(!a.noticeBarEnabled||!a.noticeBarText)return null;t.useEffect(()=>{if(c&&!u){const e=setTimeout(()=>{h(!1)},d);return()=>clearTimeout(e)}},[c,d,u]);const p=a.noticeBarStyle||"normal",g=a.noticeBarPosition||"top",f=a.noticeBarAnimation||"slide",y=(()=>{if(a.noticeBarTextColor&&a.noticeBarBackgroundColor)return{bg:a.noticeBarBackgroundColor,text:a.noticeBarTextColor};switch(p){case"urgent":return{bg:"#ef4444",text:"#ffffff",accent:"#fca5a5"};case"highlight":return{bg:"#8b5cf6",text:"#ffffff",accent:"#c4b5fd"};default:return{bg:"#3b82f6",text:"#ffffff",accent:"#93c5fd"}}})(),b=(()=>{switch(p){case"urgent":return B;case"highlight":return j;default:return I}})(),w=()=>{const e="top"===g?-100:100;switch(f){case"fade":return{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5}};case"slide":return{initial:{y:e,opacity:0},animate:{y:0,opacity:1},exit:{y:e,opacity:0},transition:{type:"spring",stiffness:100,damping:15}};case"scale":return{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",stiffness:150}};default:return{initial:{y:e,opacity:0},animate:{y:0,opacity:1},exit:{y:e,opacity:0},transition:{duration:.4}}}},v="urgent"===p?{scale:[1,1.02,1],transition:{duration:2,repeat:1/0,ease:"easeInOut"}}:{};return e.jsx(n,{mode:"wait",children:m&&e.jsxs(l.div,{className:o("w-full relative overflow-hidden","top"===g?"top-0":"bottom-0",s),style:{backgroundColor:y.bg,color:y.text},...w(),animate:{...w().animate,...v},onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:["highlight"===p&&e.jsx(l.div,{className:"absolute inset-0 opacity-10",animate:{backgroundPosition:["0% 0%","100% 100%"]},transition:{duration:10,repeat:1/0,ease:"linear"},style:{background:`linear-gradient(45deg, ${y.accent} 25%, transparent 25%, transparent 75%, ${y.accent} 75%, ${y.accent})`,backgroundSize:"20px 20px"}}),e.jsxs("div",{className:o("relative flex items-center justify-center gap-3 z-10",r?"px-3 py-2.5":"px-6 py-3"),children:[e.jsx(l.div,{animate:{rotate:"urgent"===p?[0,-10,10,-10,0]:0},transition:{duration:.5,repeat:"urgent"===p?1/0:0,repeatDelay:2},children:e.jsx(b,{className:o("flex-shrink-0",r?"w-4 h-4":"w-5 h-5"),style:{color:y.text}})}),e.jsx(l.p,{className:o("font-semibold text-center flex-1",r?"text-xs":"text-sm"),initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},children:a.noticeBarText}),i&&e.jsx(l.button,{onClick:()=>h(!1),className:o("flex-shrink-0 hover:bg-white hover:bg-opacity-20 rounded-full p-1 transition-all",r?"ml-1":"ml-2"),whileHover:{scale:1.1},whileTap:{scale:.9},"aria-label":"Fechar aviso",children:e.jsx(E,{className:o(r?"w-4 h-4":"w-5 h-5"),style:{color:y.text}})}),!r&&"highlight"===p&&e.jsx(l.div,{animate:{x:[0,5,0]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:e.jsx(P,{className:"w-5 h-5",style:{color:y.text}})})]}),c&&!u&&e.jsx(l.div,{className:"absolute bottom-0 left-0 h-1 bg-white bg-opacity-30",initial:{width:"100%"},animate:{width:"0%"},transition:{duration:d/1e3,ease:"linear"}}),"highlight"===p&&e.jsx(l.div,{className:"absolute inset-0 pointer-events-none",animate:{background:["linear-gradient(90deg, transparent 0%, rgba(255,255,255,0) 40%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0) 60%, transparent 100%)","linear-gradient(90deg, transparent 0%, rgba(255,255,255,0) 40%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0) 60%, transparent 100%)"],backgroundPosition:["-200%","200%"]},transition:{duration:3,repeat:1/0,ease:"linear"},style:{backgroundSize:"200% 100%"}})]})})},Q=({theme:t,className:a="",isMobile:s=!1,variant:r="horizontal",showText:i=!0})=>{const n=[{icon:g,text:"Compra Segura",description:"Certificado SSL",color:"#10b981"},{icon:$,text:"Dados Protegidos",description:"Criptografia 256-bit",color:"#3b82f6"},{icon:M,text:"Site Verificado",description:"Google Safe Browsing",color:"#8b5cf6"},{icon:R,text:"Pagamento Seguro",description:"PCI DSS Compliant",color:"#f59e0b"}],c={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};return e.jsxs(l.div,{className:o("w-full",a),variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",children:[e.jsx("div",{className:"grid"===r?s?"grid grid-cols-2 gap-3":"grid grid-cols-4 gap-4":"vertical"===r?"flex flex-col gap-3":s?"flex flex-wrap gap-2 justify-center":"flex gap-4 justify-center",children:n.map((a,n)=>{const d=a.icon;return e.jsxs(l.div,{variants:c,whileHover:{scale:1.05},className:o("flex items-center rounded-lg border-2 transition-all duration-300 hover:shadow-lg",s?"gap-2 p-2":"gap-3 p-3","grid"===r&&"flex-col text-center"),style:{borderColor:`${a.color}20`,backgroundColor:t?.cardBackgroundColor||"#ffffff"},children:[e.jsx("div",{className:o("rounded-full flex items-center justify-center",s?"w-8 h-8":"w-10 h-10"),style:{backgroundColor:`${a.color}15`},children:e.jsx(d,{className:o(s?"w-4 h-4":"w-5 h-5"),style:{color:a.color}})}),i&&e.jsxs("div",{className:o("grid"===r&&"mt-2"),children:[e.jsx("p",{className:o("font-semibold",s?"text-[10px]":"text-xs"),style:{color:t?.textColor||"#111827"},children:a.text}),!s&&"horizontal"!==r&&e.jsx("p",{className:"text-[9px] opacity-70",style:{color:t?.textColor||"#6b7280"},children:a.description})]})]},n)})}),i&&!s&&e.jsx(l.p,{className:"text-center text-xs mt-4 opacity-70",style:{color:t?.textColor||"#6b7280"},initial:{opacity:0},animate:{opacity:.7},transition:{delay:.5},children:"‚úì Seus dados est√£o seguros e protegidos com criptografia de ponta a ponta"})]})},K=({theme:t,className:a="",isMobile:s=!1,variant:r="horizontal",showText:i=!1,methods:n=["visa","mastercard","amex","elo","pix","boleto"]})=>{const c={visa:{name:"Visa",color:"#1434CB",svg:'<svg viewBox="0 0 48 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <rect width="48" height="32" rx="4" fill="white"/>\n        <rect width="48" height="32" rx="4" stroke="#E5E7EB" stroke-width="1"/>\n        <path d="M20.5 11h-3.2L14 21h2.4l.6-1.5h2.8l.4 1.5h2.6L20.5 11zm-2.3 6.5l1-3 .6 3h-1.6z" fill="#1434CB"/>\n        <path d="M24 11l-2 10h2.2l2-10H24z" fill="#1434CB"/>\n        <path d="M31 11c-.7 0-1.3.2-1.7.6l-.1-.5h-2.1l-1.5 10h2.3l.6-3.5c.2-.8.7-1.3 1.3-1.3.5 0 .7.3.7.8 0 .3 0 .5-.1.8l-.7 4.2h2.3l.7-4.4c.1-.4.1-.8.1-1.1 0-1.4-.9-2.1-2-2.1-.8 0-1.5.3-2 .9l.2-1.4z" fill="#1434CB"/>\n        <path d="M36 14.5c0-.9-.7-1.5-2-1.5-1.5 0-2.6.8-2.6 2 0 1 .8 1.3 1.5 1.5.6.2 1 .3 1 .6 0 .4-.5.6-1 .6-.7 0-1.3-.2-1.7-.5l-.3 1.4c.5.2 1.2.4 2 .4 1.7 0 2.8-.8 2.8-2.1 0-1-.8-1.4-1.5-1.6-.5-.2-.9-.3-.9-.6 0-.3.4-.5.8-.5.5 0 1 .1 1.4.3l.3-1.4c-.4-.2-1-.3-1.6-.3.1 0 .1.1.1.1z" fill="#1434CB"/>\n      </svg>'},mastercard:{name:"Mastercard",color:"#EB001B",svg:'<svg viewBox="0 0 48 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <rect width="48" height="32" rx="4" fill="white"/>\n        <rect width="48" height="32" rx="4" stroke="#E5E7EB" stroke-width="1"/>\n        <circle cx="18" cy="16" r="7" fill="#EB001B"/>\n        <circle cx="30" cy="16" r="7" fill="#F79E1B"/>\n        <path d="M24 11.5c-1.3 1.2-2.1 2.9-2.1 4.5s.8 3.3 2.1 4.5c1.3-1.2 2.1-2.9 2.1-4.5s-.8-3.3-2.1-4.5z" fill="#FF5F00"/>\n      </svg>'},amex:{name:"American Express",color:"#006FCF",svg:'<svg viewBox="0 0 48 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <rect width="48" height="32" rx="4" fill="#006FCF"/>\n        <path d="M15 12h-3l-1.5 4L9 12H6l2.5 8h2.2l.8-2.5.8 2.5h2.2L15 12z" fill="white"/>\n        <path d="M19 12l-2.5 8h2.2l.4-1h2.8l.4 1h2.5l-2.5-8H19zm-.5 5.5l.8-2.5.8 2.5h-1.6z" fill="white"/>\n        <path d="M26 12v8h2v-2.5h2c1.7 0 2.5-.8 2.5-2.8 0-1.9-.8-2.7-2.5-2.7h-4zm2 1.8h1.5c.5 0 .8.3.8.9s-.3.8-.8.8H28v-1.7z" fill="white"/>\n        <path d="M35 12l-2 3-2-3h-2.5l3.2 4.2-3.2 3.8h2.5l2-2.5 2 2.5H38l-3.2-3.8L38 12h-3z" fill="white"/>\n      </svg>'},elo:{name:"Elo",color:"#FFCB05",svg:'<svg viewBox="0 0 48 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <rect width="48" height="32" rx="4" fill="white"/>\n        <rect width="48" height="32" rx="4" stroke="#E5E7EB" stroke-width="1"/>\n        <circle cx="16" cy="16" r="8" fill="#FFCB05"/>\n        <circle cx="32" cy="16" r="8" fill="#000000"/>\n        <path d="M24 10c-2.2 0-4.2 1.2-5.3 3 1.1 1.8 3.1 3 5.3 3s4.2-1.2 5.3-3c-1.1-1.8-3.1-3-5.3-3z" fill="#EE4023"/>\n      </svg>'},hipercard:{name:"Hipercard",color:"#B41E1E",svg:'<svg viewBox="0 0 48 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <rect width="48" height="32" rx="4" fill="white"/>\n        <rect width="48" height="32" rx="4" stroke="#E5E7EB" stroke-width="1"/>\n        <path d="M12 12h2v8h-2v-8zm3 0h2v8h-2v-8zm3 0v8h2v-3h2v-2h-2v-1h2v-2h-4zm5 0v8h4v-2h-2v-1h2v-2h-2v-1h2v-2h-4zm5 0v8h2v-3h1l1 3h2l-1.5-3.5c.8-.3 1.5-1 1.5-2 0-1.4-1-2.5-2.5-2.5h-3.5zm2 2h1c.5 0 .8.3.8.8s-.3.7-.8.7h-1v-1.5z" fill="#B41E1E"/>\n      </svg>'},diners:{name:"Diners Club",color:"#0079BE",svg:'<svg viewBox="0 0 48 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <rect width="48" height="32" rx="4" fill="white"/>\n        <rect width="48" height="32" rx="4" stroke="#E5E7EB" stroke-width="1"/>\n        <circle cx="18" cy="16" r="8" fill="#0079BE"/>\n        <circle cx="30" cy="16" r="8" fill="#0079BE"/>\n        <path d="M24 10v12" stroke="white" stroke-width="2"/>\n      </svg>'},pix:{name:"PIX",color:"#32BCAD",svg:'<svg viewBox="0 0 48 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <rect width="48" height="32" rx="4" fill="white"/>\n        <rect width="48" height="32" rx="4" stroke="#E5E7EB" stroke-width="1"/>\n        <path d="M24 8l-8 8 8 8 8-8-8-8zm0 2.8l5.2 5.2-5.2 5.2-5.2-5.2L24 10.8z" fill="#32BCAD"/>\n        <path d="M20 16h8M24 12v8" stroke="#32BCAD" stroke-width="2"/>\n      </svg>'},boleto:{name:"Boleto",color:"#FF6B00",svg:'<svg viewBox="0 0 48 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <rect width="48" height="32" rx="4" fill="white"/>\n        <rect width="48" height="32" rx="4" stroke="#E5E7EB" stroke-width="1"/>\n        <rect x="10" y="10" width="1.5" height="12" fill="#FF6B00"/>\n        <rect x="13" y="10" width="2" height="12" fill="#FF6B00"/>\n        <rect x="17" y="10" width="1" height="12" fill="#FF6B00"/>\n        <rect x="20" y="10" width="2.5" height="12" fill="#FF6B00"/>\n        <rect x="24" y="10" width="1" height="12" fill="#FF6B00"/>\n        <rect x="27" y="10" width="2" height="12" fill="#FF6B00"/>\n        <rect x="31" y="10" width="1.5" height="12" fill="#FF6B00"/>\n        <rect x="34" y="10" width="2.5" height="12" fill="#FF6B00"/>\n      </svg>'}},d={hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1,transition:{duration:.3}}};return e.jsxs(l.div,{className:o("w-full",a),variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},initial:"hidden",animate:"visible",children:[e.jsx("div",{className:"grid"===r?s?"grid grid-cols-3 gap-2":"grid grid-cols-4 gap-3":s?"flex flex-wrap gap-2 justify-center":"flex flex-wrap gap-3 justify-center",children:n.map(a=>{const r=c[a.toLowerCase()];return r?e.jsxs(l.div,{variants:d,whileHover:{scale:1.05,y:-2},className:o("relative rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-all duration-300 bg-white border border-gray-200",s?"w-14 h-9":"w-16 h-10"),style:{borderColor:t?.borderColor||"#e5e7eb"},children:[e.jsx("div",{className:"w-full h-full flex items-center justify-center",dangerouslySetInnerHTML:{__html:r.svg}}),i&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white text-[8px] text-center py-0.5",children:r.name})]},a):null})}),!s&&e.jsx(l.p,{className:"text-center text-xs mt-3 opacity-60",style:{color:t?.textColor||"#6b7280"},initial:{opacity:0},animate:{opacity:.6},transition:{delay:.5},children:"Aceitamos as principais bandeiras de cart√£o"})]})},Z=({injectedOrderId:m,injectedTheme:h,previewMode:p=!1,isMobile:g=!1})=>{const{orderId:f}=a(),b=m||f,w=s(),{toast:v}=i(),[j,C]=t.useState(!0),[N,B]=t.useState(!1),[k,S]=t.useState(null),[T,D]=t.useState(null),[E,P]=t.useState(H),[I,M]=t.useState(1),[R,Z]=t.useState({name:"Minha Loja",email:"contato@loja.com",phone:"(11) 99999-9999",address:"S√£o Paulo, SP - Brasil"}),[ee,te]=t.useState([]),[ae,se]=t.useState([]),[re,oe]=t.useState({name:"",email:"",phone:"",document:""}),[ie,le]=t.useState({zipCode:"",street:"",number:"",complement:"",neighborhood:"",city:"",state:""}),[ne,ce]=t.useState("PIX"),[de,me]=t.useState({number:"",holderName:"",expiryMonth:"",expiryYear:"",cvv:""}),[he,ue]=t.useState(""),[xe,pe]=t.useState(""),ge=E.navigationSteps||3,fe=()=>`${E.cardBorderRadius||16}px`,ye=()=>E.fontFamily||"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif";ye(),t.useEffect(()=>{b&&be()},[b]);const be=async()=>{try{C(!0);const{data:t,error:a}=await r.from("Order").select("*").eq("id",b).single();if(a||!t)throw new Error("Pedido n√£o encontrado");const s=Array.isArray(t.items)?t.items:[],o=Array.isArray(t.metadata?.originalProducts)?t.metadata.originalProducts:[],i={orderId:t.id,products:s.map((e,t)=>{const a=o.find(t=>String(t?.id)===String(e?.productId));return{id:e?.productId||e?.id||`temp-${t}`,name:e?.name||a?.name||a?.title||"Produto",price:Number(e?.price)||Number(e?.total)||0,quantity:Number(e?.quantity)||1,image:e?.image||a?.image||Array.isArray(a?.images)&&a.images[0]||""}}),total:Number(t.total)||0,subtotal:Number(t.subtotal)||0,shipping:Number(t.shipping)||0,discount:Number(t.discount)||0};S(i),D(t);const l=t.paymentMethod;if(!l||"PIX"!==l&&"CREDIT_CARD"!==l&&"BOLETO"!==l||ce(l),h)P({...H,...h});else if(t.userId)try{const e=await L.loadCustomization(t.userId);e?.theme&&P({...H,...e.theme})}catch(e){}if(t.userId){try{const{data:e,error:a}=await r.from("User").select("name, email, phone, cnpj, cpf, address").eq("id",t.userId).single();!a&&e&&Z({name:e?.name||"Minha Loja",email:e?.email||"contato@loja.com",phone:e?.phone||"(11) 99999-9999",cnpj:e?.cnpj||"",cpf:e?.cpf||"",address:e?.address||"S√£o Paulo, SP - Brasil"})}catch(e){}try{const{data:e,error:a}=await r.from("OrderBump").select("*").eq("userId",t.userId).eq("isActive",!0).order("order",{ascending:!0});!a&&e&&te(e)}catch(e){}}}catch(t){v({title:"Erro ao carregar checkout",description:t.message||"N√£o foi poss√≠vel carregar os dados do pedido",variant:"destructive"})}finally{C(!1)}},we=e=>{se(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},ve=(k?.total||0)+ee.filter(e=>ae.includes(e.id)).reduce((e,t)=>e+Number(t.price||0),0),je=async()=>{if(b&&k){B(!0);try{const{error:t}=await r.from("Order").update({customerName:re.name,customerEmail:re.email,customerPhone:re.phone,customerCpf:(e=re.document,(e=>e.replace(/\D/g,""))(e)),shippingAddress:ie,paymentMethod:ne,updatedAt:(new Date).toISOString()}).eq("id",b);if(t)throw t;const{data:a,error:s}=await r.rpc("determine_split_gateway",{p_user_id:T.userId,p_order_value:k.total});let o=null,i=!1;if("admin"===a?.decision&&a?.gatewayId){const{data:e}=await r.from("GatewayConfig").select("\n            *,\n            gateway:Gateway(*)\n          ").eq("userId","admin").eq("gatewayId",a.gatewayId).eq("isActive",!0).single();e&&(o=e,i=!0)}if(!o){const{data:e}=await r.from("GatewayConfig").select("\n            *,\n            gateway:Gateway(*)\n          ").eq("userId",T.userId).eq("isActive",!0);if(!e||0===e.length)throw new Error("Nenhum gateway de pagamento configurado");for(const t of e){const e=t.gateway;if(!e)continue;const a=t.isDefault||!1;if("PIX"===ne&&e.supportsPix){if(o=t,a)break}else if("CREDIT_CARD"===ne&&e.supportsCreditCard){if(o=t,a)break}else if("BOLETO"===ne&&e.supportsBoleto&&(o=t,a))break}}if(!o)throw new Error(`Gateway de ${ne} n√£o configurado`);const{data:l,error:n}=await r.from("Transaction").insert({orderId:b,gatewayId:o.gatewayId,userId:T.userId,amount:k.total,status:"PENDING",paymentMethod:ne,metadata:{customerData:re,addressData:ie,cardData:"CREDIT_CARD"===ne?de:null}}).select().single();if(n||!l)throw new Error("Erro ao criar transa√ß√£o");const{data:c,error:d}=await r.functions.invoke("process-payment",{body:{transactionId:l.id,gatewaySlug:o.gateway.slug,paymentMethod:ne,amount:k.total,customerData:re,addressData:ie,cardData:"CREDIT_CARD"===ne?de:null}});if(d||!c?.success)throw new Error(c?.error||"Erro ao processar pagamento");a&&await r.from("PaymentSplitLog").insert({transactionId:l.id,orderId:b,userId:T.userId,ruleId:a.ruleId||null,decision:a.decision||"client",gatewayId:o.gatewayId,gatewayName:o.gateway?.name,amount:k.total,adminRevenue:i?k.total:0,clientRevenue:i?0:k.total,ruleType:a.ruleType||null,ruleName:a.ruleName||null,reason:a.reason||"No split rule active",counterValue:a.counterValue||null,metadata:{paymentMethod:ne,isAdminGateway:i}}),w("PIX"===ne?`/pix/${b}/${l.id}`:`/checkout/success/${l.id}`)}catch(t){v({title:"Erro no pagamento",description:t.message||"Tente novamente",variant:"destructive"})}finally{B(!1)}var e}};return j?e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#f9fafb"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{className:"w-12 h-12 animate-spin text-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando checkout..."})]})}):k&&k.products&&Array.isArray(k.products)?e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:E.backgroundColor||"#f9fafb",fontFamily:ye()},children:[e.jsx(J,{theme:E,isMobile:g,closeable:!1}),e.jsx(X,{theme:E,storeName:R.name,storeUrl:T?.storeUrl,showBackground:!0}),E.bannerEnabled&&E.bannerImage&&e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("img",{src:E.bannerImage,alt:"Banner",className:"w-full object-cover",style:{maxHeight:E.bannerHeight||"200px"}})}),e.jsx(G,{theme:E,className:"max-w-7xl mx-auto px-4 mt-6"}),e.jsx(U,{currentStep:I,totalSteps:3,theme:E,showLabels:!0}),e.jsx("div",{className:o("mx-auto py-6",g?"px-2 max-w-full":"px-4 max-w-7xl"),children:e.jsxs("div",{className:o("grid gap-4",g?"grid-cols-1":"grid-cols-1 lg:grid-cols-3 gap-6"),children:[e.jsx("div",{className:o(g?"":"lg:col-span-2"),children:e.jsxs(l.div,{className:o("bg-white shadow-lg",g?"p-3":"p-6"),style:{borderRadius:fe(),backgroundColor:E.cardBackgroundColor||"#ffffff"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:o(g?"mb-3":"mb-6"),children:[e.jsx("h1",{className:o("font-bold mb-1",g?"text-lg":"text-2xl"),style:{color:E.headingColor||"#111827"},children:1===ge?"Finalizar Pedido":1===I?"Seus Dados":2===I?"Endere√ßo":"Pagamento"}),e.jsx("p",{className:"text-sm",style:{color:E.textColor||"#6b7280"},children:"Preencha as informa√ß√µes para continuar"})]}),e.jsxs(n,{mode:"wait",children:[(1===ge||1===I)&&e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"space-y-4",children:[e.jsx(V,{label:"Nome Completo",type:"text",value:re.name,onChange:e=>oe({...re,name:e.target.value}),theme:E,icon:e.jsx(F,{className:"w-5 h-5"}),placeholder:"Seu nome completo",required:!0}),e.jsxs("div",{className:o("grid gap-4",g?"grid-cols-1":"grid-cols-1 md:grid-cols-2"),children:[e.jsx(V,{label:"E-mail",type:"email",value:re.email,onChange:e=>oe({...re,email:e.target.value}),theme:E,icon:e.jsx(u,{className:"w-5 h-5"}),placeholder:"seu@email.com",required:!0}),e.jsx(V,{label:"Telefone",type:"tel",value:re.phone,onChange:e=>oe({...re,phone:e.target.value}),theme:E,icon:e.jsx(x,{className:"w-5 h-5"}),placeholder:"(11) 99999-9999",mask:"phone",required:!0})]}),e.jsx(V,{label:"CPF",type:"text",value:re.document,onChange:e=>oe({...re,document:e.target.value}),theme:E,icon:e.jsx(A,{className:"w-5 h-5"}),placeholder:"000.000.000-00",mask:"cpf",required:!0}),e.jsx(Y,{theme:E,birthDate:he,gender:xe,onBirthDateChange:ue,onGenderChange:pe,className:"mt-4"})]},"step1"),(1===ge||2===I)&&e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:1===ge?"mt-6 space-y-4":"space-y-4",children:[1===ge&&e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Endere√ßo de Entrega"}),e.jsxs("div",{className:o("grid gap-4",g?"grid-cols-1":"grid-cols-1 md:grid-cols-3"),children:[e.jsx(V,{label:"CEP",type:"text",value:ie.zipCode,onChange:e=>le({...ie,zipCode:e.target.value}),theme:E,placeholder:"00000-000",mask:"cep",required:!0}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(V,{label:"Rua",type:"text",value:ie.street,onChange:e=>le({...ie,street:e.target.value}),theme:E,placeholder:"Nome da rua",required:!0})})]}),e.jsxs("div",{className:o("grid gap-3",g?"grid-cols-2":"grid-cols-2 md:grid-cols-4 gap-4"),children:[e.jsx(V,{label:"N√∫mero",type:"text",value:ie.number,onChange:e=>le({...ie,number:e.target.value}),theme:E,placeholder:"123",required:!0}),e.jsx("div",{className:"col-span-1 md:col-span-3",children:e.jsx(V,{label:"Complemento",type:"text",value:ie.complement,onChange:e=>le({...ie,complement:e.target.value}),theme:E,placeholder:"Apto, bloco..."})})]}),e.jsx(V,{label:"Bairro",type:"text",value:ie.neighborhood,onChange:e=>le({...ie,neighborhood:e.target.value}),theme:E,placeholder:"Seu bairro",required:!0}),e.jsxs("div",{className:o("grid",g?"grid-cols-1 gap-3":"grid-cols-2 gap-4"),children:[e.jsx(V,{label:"Cidade",type:"text",value:ie.city,onChange:e=>le({...ie,city:e.target.value}),theme:E,placeholder:"Cidade",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:E.labelColor||"#111827"},children:"Estado *"}),e.jsxs("select",{value:ie.state,onChange:e=>le({...ie,state:e.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 outline-none transition-all",style:{backgroundColor:E.inputBackgroundColor||"#ffffff",borderColor:E.inputBorderColor||"#d1d5db",borderRadius:`${E.inputBorderRadius||8}px`,height:`${E.inputHeight||48}px`,color:E.textColor||"#111827"},children:[e.jsx("option",{value:"",children:"Selecione"}),e.jsx("option",{value:"SP",children:"SP"}),e.jsx("option",{value:"RJ",children:"RJ"}),e.jsx("option",{value:"MG",children:"MG"}),e.jsx("option",{value:"RS",children:"RS"}),e.jsx("option",{value:"SC",children:"SC"}),e.jsx("option",{value:"PR",children:"PR"})]})]})]})]},"step2"),(1===ge||3===I)&&e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:1===ge?"mt-6 space-y-4":"space-y-4",children:[1===ge&&e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Forma de Pagamento"}),e.jsx("div",{className:"mb-4",children:e.jsx(K,{theme:E,isMobile:g,variant:"horizontal",methods:["visa","mastercard","amex","elo","pix","boleto"]})}),e.jsxs("div",{className:o("grid gap-3",g?"grid-cols-1":"grid-cols-3"),children:[e.jsx("button",{onClick:()=>ce("PIX"),className:"p-4 rounded-lg border-2 font-semibold transition "+("PIX"===ne?"border-purple-600 bg-purple-50":"border-gray-200"),children:"PIX"}),e.jsx("button",{onClick:()=>ce("CREDIT_CARD"),className:"p-4 rounded-lg border-2 font-semibold transition "+("CREDIT_CARD"===ne?"border-purple-600 bg-purple-50":"border-gray-200"),children:"Cart√£o"}),e.jsx("button",{onClick:()=>ce("BOLETO"),className:"p-4 rounded-lg border-2 font-semibold transition "+("BOLETO"===ne?"border-purple-600 bg-purple-50":"border-gray-200"),children:"Boleto"})]}),"CREDIT_CARD"===ne&&e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsx(V,{label:"N√∫mero do Cart√£o",type:"text",value:de.number,onChange:e=>me({...de,number:e.target.value}),theme:E,icon:e.jsx(y,{className:"w-5 h-5"}),placeholder:"0000 0000 0000 0000",mask:"card",required:!0}),e.jsx(V,{label:"Nome no Cart√£o",type:"text",value:de.holderName,onChange:e=>me({...de,holderName:e.target.value}),theme:E,placeholder:"Nome como est√° no cart√£o",required:!0}),e.jsxs("div",{className:o("grid gap-3",g?"grid-cols-2":"grid-cols-3 gap-4"),children:[e.jsx(V,{label:"M√™s",type:"text",value:de.expiryMonth,onChange:e=>me({...de,expiryMonth:e.target.value}),theme:E,placeholder:"MM",maxLength:2,required:!0}),e.jsx(V,{label:"Ano",type:"text",value:de.expiryYear,onChange:e=>me({...de,expiryYear:e.target.value}),theme:E,placeholder:"AA",maxLength:2,required:!0}),e.jsx(V,{label:"CVV",type:"text",value:de.cvv,onChange:e=>me({...de,cvv:e.target.value}),theme:E,placeholder:"123",maxLength:4,required:!0})]})]}),"PIX"===ne&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mt-4",children:e.jsx("p",{className:"text-sm text-green-800",children:"‚úÖ Ap√≥s clicar em finalizar, voc√™ receber√° o QR Code do PIX"})}),"BOLETO"===ne&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4",children:e.jsx("p",{className:"text-sm text-blue-800",children:"‚ÑπÔ∏è O boleto ser√° gerado ap√≥s a finaliza√ß√£o"})})]},"step3")]}),E.orderBumpEnabled&&ee.length>0&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:E.headingColor||"#111827"},children:"üéÅ Aproveite essa oferta especial!"}),ee.map(t=>e.jsx(W,{orderBump:{id:t.id,title:t.title,description:t.description,originalPrice:t.originalPrice,price:t.price,image:t.image,badge:t.badge,bullets:t.bullets||[]},theme:E,selected:ae.includes(t.id),onToggle:we},t.id))]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[3===ge&&I>1&&e.jsx(O,{onClick:()=>{I>1&&(M(I-1),window.scrollTo({top:0,behavior:"smooth"}))},variant:"secondary",theme:E,icon:e.jsx(z,{className:"w-5 h-5"}),iconPosition:"left",fullWidth:!0,children:"Voltar"}),e.jsx(O,{onClick:()=>{1===ge?je():I<3?(M(I+1),window.scrollTo({top:0,behavior:"smooth"})):je()},disabled:N,loading:N,variant:1===ge||3===I?"checkout":"primary",theme:E,icon:1===ge||3===I?e.jsx($,{className:"w-5 h-5"}):void 0,iconPosition:"left",fullWidth:!0,size:"lg",children:1===ge||3===I?"Finalizar Compra":"Continuar"})]}),e.jsx("div",{className:"mt-6 pt-6 border-t",children:e.jsx(Q,{theme:E,isMobile:g,variant:"horizontal",showText:!0})})]})}),e.jsx("div",{className:o(g?"":"lg:col-span-1"),children:e.jsxs(l.div,{className:o("bg-white shadow-lg",g?"p-3":"p-6 sticky top-6"),style:{borderRadius:fe(),backgroundColor:E.cardBackgroundColor||"#ffffff"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[e.jsxs("h2",{className:o("font-bold mb-3 flex items-center gap-2",g?"text-base":"text-xl mb-4"),style:{color:E.headingColor||"#111827"},children:[e.jsx(q,{className:o(g?"w-4 h-4":"w-5 h-5")}),"Resumo do Pedido"]}),e.jsx("div",{className:o("mb-3",g?"space-y-2":"space-y-3 mb-4"),children:k?.products?.filter(e=>e&&e.name).map((t,a)=>e.jsxs("div",{className:o("flex",g?"gap-2":"gap-3"),children:[e.jsx("div",{className:o("rounded-lg bg-gray-100 flex-shrink-0 overflow-hidden",g?"w-12 h-12":"w-16 h-16"),children:t?.image?e.jsx("img",{src:t.image,alt:t?.name||"Produto",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(q,{className:o("text-gray-400",g?"w-6 h-6":"w-8 h-8")})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:o("font-semibold truncate",g?"text-xs":"text-sm"),children:t?.name||"Produto"}),e.jsxs("p",{className:o("text-gray-500",g?"text-[10px]":"text-xs"),children:["Qtd: ",t?.quantity||1]}),e.jsxs("p",{className:o("font-bold text-gray-900",g?"text-xs mt-0.5":"text-sm mt-1"),children:["R$"," ",((t?.price||0)*(t?.quantity||1)).toFixed(2)]})]})]},t?.id||a))}),e.jsx("div",{className:o("border-t",g?"my-3":"my-4")}),e.jsxs("div",{className:o(g?"space-y-1.5":"space-y-2"),children:[e.jsxs("div",{className:o("flex justify-between",g?"text-xs":"text-sm"),children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["R$ ",k.subtotal.toFixed(2)]})]}),k.shipping>0&&e.jsxs("div",{className:o("flex justify-between",g?"text-xs":"text-sm"),children:[e.jsx("span",{className:"text-gray-600",children:"Frete"}),e.jsxs("span",{className:"font-medium",children:["R$ ",k.shipping.toFixed(2)]})]}),k.discount&&k.discount>0&&e.jsxs("div",{className:o("flex justify-between text-green-600",g?"text-xs":"text-sm"),children:[e.jsx("span",{children:"Desconto"}),e.jsxs("span",{className:"font-medium",children:["- R$ ",k.discount.toFixed(2)]})]})]}),e.jsx("div",{className:o("border-t",g?"mt-3 pt-3":"mt-4 pt-4"),children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:o("font-bold",g?"text-base":"text-lg"),style:{color:E.headingColor||"#111827"},children:"Total"}),e.jsxs("span",{className:o("font-bold",g?"text-xl":"text-3xl"),style:{color:E.primaryButtonBackgroundColor||"#8b5cf6"},children:["R$ ",ve.toFixed(2)]})]})}),ae.length>0&&e.jsxs("div",{className:o("border-t",g?"mt-3 pt-3":"mt-4 pt-4"),children:[e.jsx("h4",{className:o("font-semibold",g?"text-xs mb-2":"text-sm mb-3"),style:{color:E.headingColor||"#111827"},children:"Itens Adicionais"}),ee.filter(e=>ae.includes(e.id)).map(t=>e.jsxs("div",{className:o("flex justify-between",g?"text-xs mb-1.5":"text-sm mb-2"),children:[e.jsx("span",{className:"text-gray-600",children:t.title}),e.jsxs("span",{className:"font-medium text-gray-900",children:["R$ ",Number(t.price||0).toFixed(2)]})]},t.id))]})]})})]})}),e.jsx(_,{theme:E,isMobile:g,storeData:R||{name:"Minha Loja",email:"contato@loja.com",phone:"(11) 99999-9999",address:"S√£o Paulo, SP - Brasil"}})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:e.jsxs("div",{className:"bg-white shadow-lg p-8 max-w-md w-full text-center",style:{borderRadius:fe()},children:[e.jsx(d,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Pedido n√£o encontrado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"N√£o foi poss√≠vel carregar os dados do pedido."}),e.jsx("button",{onClick:()=>window.history.back(),className:"px-6 py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700",children:"Voltar"})]})})},ee=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"}));export{Z as P,ee as a,L as c};

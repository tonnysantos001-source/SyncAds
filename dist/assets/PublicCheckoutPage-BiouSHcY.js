import{s as h,c as J,r as C,j as e,M as B,m as q,k as K,K as _,C as Q,n as te,a as re,b as ae,_ as V,i as oe}from"./index-C14FxL5X.js";import{C as U}from"./circle-alert-BbA3Ng15.js";import{M as se}from"./mail-C_PiNCm0.js";import{P as le}from"./phone-DXCAQ9At.js";import{C as Z}from"./credit-card-Uzas87Sa.js";import{L as W}from"./lock-_9uEFvKa.js";import{S as ne}from"./shield-check-m5QMwidv.js";import{P as G}from"./package-J0yViNqz.js";import{M as ie}from"./map-pin-bQfMhqE-.js";const ce={async saveCustomization(l){try{const{data:r,error:a}=await h.from("CheckoutCustomization").upsert({...l,updatedAt:new Date().toISOString()}).select().single();if(a)throw a;return r}catch(r){throw console.error("Error saving checkout customization:",r),r}},async loadCustomization(l){try{const{data:r,error:a}=await h.from("CheckoutCustomization").select("*").eq("userId",l).eq("isActive",!0).single();if(a&&a.code!=="PGRST116")throw a;return r}catch(r){throw console.error("Error loading checkout customization:",r),r}},async listCustomizations(l){try{const{data:r,error:a}=await h.from("CheckoutCustomization").select("*").eq("userId",l).order("createdAt",{ascending:!1});if(a)throw a;return r}catch(r){throw console.error("Error listing checkout customizations:",r),r}},async activateCustomization(l){try{const r=await h.from("CheckoutCustomization").select("userId").eq("id",l).single();r.data&&await h.from("CheckoutCustomization").update({isActive:!1}).eq("userId",r.data.userId);const{data:a,error:s}=await h.from("CheckoutCustomization").update({isActive:!0,updatedAt:new Date().toISOString()}).eq("id",l).select().single();if(s)throw s;return a}catch(r){throw console.error("Error activating checkout customization:",r),r}},async deleteCustomization(l){try{const{error:r}=await h.from("CheckoutCustomization").delete().eq("id",l);if(r)throw r}catch(r){throw console.error("Error deleting checkout customization:",r),r}},async duplicateCustomization(l,r){try{const{data:a,error:s}=await h.from("CheckoutCustomization").select("*").eq("id",l).single();if(s)throw s;const{data:x,error:j}=await h.from("CheckoutCustomization").insert({userId:a.userId,name:r,theme:a.theme,isActive:!1}).select().single();if(j)throw j;return x}catch(a){throw console.error("Error duplicating checkout customization:",a),a}},async generatePreviewUrl(l){try{const{data:r,error:a}=await h.from("CheckoutCustomization").insert({userId:l.userId,name:`Preview-${Date.now()}`,theme:l.theme||{},isActive:!1}).select().single();if(a)throw a;return`/checkout/preview/${r.id}`}catch(r){throw console.error("Error generating preview URL:",r),r}},async exportCustomization(l){try{const{data:r,error:a}=await h.from("CheckoutCustomization").select("*").eq("id",l).single();if(a)throw a;return{name:r.name,theme:r.theme,exportedAt:new Date().toISOString(),version:"1.0"}}catch(r){throw console.error("Error exporting checkout customization:",r),r}},async importCustomization(l,r){try{const{data:a,error:s}=await h.from("CheckoutCustomization").insert({userId:l,name:`${r.name} (Importado)`,theme:r.theme,isActive:!1}).select().single();if(s)throw s;return a}catch(a){throw console.error("Error importing checkout customization:",a),a}}};/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=J("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=J("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),X={logoUrl:"",faviconUrl:"",logoAlignment:"left",showLogoAtTop:!0,logoWidth:180,logoHeight:50,backgroundColor:"#F9FAFB",backgroundGradient:"linear-gradient(180deg, #F9FAFB 0%, #F3F4F6 100%)",useGradient:!1,textColor:"#1F2937",headingColor:"#111827",noticeBarEnabled:!0,noticeBarMessage:"ðŸŽ‰ FRETE GRÃTIS para todo o Brasil em compras acima de R$ 199!",noticeBarBackgroundColor:"#1F2937",noticeBarTextColor:"#FFFFFF",noticeBarAnimation:!0,bannerEnabled:!1,bannerUrl:"",bannerHeight:200,cartDisplay:"drawer",cartBorderColor:"#E5E7EB",cartBackgroundColor:"#FFFFFF",quantityCircleColor:"#8B5CF6",quantityTextColor:"#FFFFFF",showCartIcon:!0,showCartReminder:!0,allowCouponEdit:!0,navigationSteps:3,nextStepStyle:"rounded",showProgressBar:!0,progressBarColor:"#8B5CF6",stepActiveColor:"#8B5CF6",stepInactiveColor:"#D1D5DB",stepCompletedColor:"#10B981",primaryButtonBackgroundColor:"#8B5CF6",primaryButtonTextColor:"#FFFFFF",primaryButtonBorderRadius:12,primaryButtonHover:!0,primaryButtonHoverColor:"#7C3AED",primaryButtonFlow:!0,primaryButtonShadow:!0,checkoutButtonBackgroundColor:"#10B981",checkoutButtonTextColor:"#FFFFFF",checkoutButtonBorderRadius:14,checkoutButtonHover:!0,checkoutButtonHoverColor:"#059669",checkoutButtonFlow:!0,checkoutButtonShadow:!0,checkoutButtonPulse:!0,highlightedBorderColor:"#8B5CF6",highlightedBorderTextColor:"#FFFFFF",highlightedBorderWidth:2,footerBackgroundColor:"#F3F4F6",footerTextColor:"#6B7280",showStoreName:!0,showPaymentMethods:!0,showCnpjCpf:!0,showContactEmail:!0,showAddress:!0,showPhone:!0,showPrivacyPolicy:!0,showTermsConditions:!0,showReturns:!0,footerLinkColor:"#8B5CF6",discountTagTextColor:"#FFFFFF",discountTagBackgroundColor:"#EF4444",discountTagBorderRadius:6,discountTagFontWeight:"700",useVisible:!0,expirationTime:60,forceRemovalTime:90,showCountdownTimer:!0,urgencyMessageColor:"#DC2626",urgencyBackgroundColor:"#FEE2E2",orderBumpEnabled:!0,orderBumpTextColor:"#374151",orderBumpBackgroundColor:"#FFFBEB",orderBumpPriceColor:"#DC2626",orderBumpBorderColor:"#FCD34D",orderBumpBorderWidth:2,orderBumpBorderRadius:12,orderBumpButtonTextColor:"#FFFFFF",orderBumpButtonBackgroundColor:"#EF4444",orderBumpShadow:!0,fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif",fontSize:{xs:"0.75rem",sm:"0.875rem",base:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem"},fontWeight:{normal:"400",medium:"500",semibold:"600",bold:"700"},spacing:{xs:"0.25rem",sm:"0.5rem",md:"1rem",lg:"1.5rem",xl:"2rem","2xl":"3rem"},borderRadius:{sm:"0.375rem",md:"0.5rem",lg:"0.75rem",xl:"1rem",full:"9999px"},boxShadow:{sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},inputBorderColor:"#D1D5DB",inputFocusBorderColor:"#8B5CF6",inputBackgroundColor:"#FFFFFF",inputHeight:48,inputBorderRadius:10,labelColor:"#374151",labelFontWeight:"600",placeholderColor:"#9CA3AF",cardBackgroundColor:"#FFFFFF",cardBorderColor:"#E5E7EB",cardBorderRadius:16,cardShadow:!0,cardPadding:"1.5rem",showTrustBadges:!0,trustBadgeColor:"#10B981",sslBadgeEnabled:!0,securityIconsEnabled:!0,language:"pt",currency:"BRL",presellPage:"cart-in-cart",requestCpfOnlyAtPayment:!1,requestBirthDate:!1,requestGender:!1,disableCarrot:!1,mobileBreakpoint:640,tabletBreakpoint:1024,desktopBreakpoint:1280,enableAnimations:!0,animationDuration:"300ms",animationTiming:"cubic-bezier(0.4, 0, 0.2, 1)",highContrast:!1,focusIndicatorColor:"#8B5CF6",reducedMotion:!1},me=l=>l.replace(/\D/g,""),pe=l=>me(l),Y=({children:l,onClick:r,disabled:a=!1,loading:s=!1,type:x="button",variant:j="primary",theme:d,className:p="",fullWidth:S=!1,size:P="md",icon:k,iconPosition:o="left"})=>{const[F,u]=C.useState(!1),n=(()=>{switch(j){case"checkout":return{backgroundColor:d.checkoutButtonBackgroundColor||"#10b981",textColor:d.checkoutButtonTextColor||"#ffffff",borderRadius:d.checkoutButtonBorderRadius||8,hover:d.checkoutButtonHover!==!1,hoverColor:d.checkoutButtonHoverColor||"#059669",flow:d.checkoutButtonFlow||!1,shadow:d.checkoutButtonShadow!==!1,pulse:d.checkoutButtonPulse||!1};case"secondary":return{backgroundColor:d.secondaryButtonBackgroundColor||"#6b7280",textColor:d.secondaryButtonTextColor||"#ffffff",borderRadius:d.primaryButtonBorderRadius||8,hover:!0,hoverColor:"#4b5563",flow:!1,shadow:!1,pulse:!1};case"primary":default:return{backgroundColor:d.primaryButtonBackgroundColor||"#8b5cf6",textColor:d.primaryButtonTextColor||"#ffffff",borderRadius:d.primaryButtonBorderRadius||8,hover:d.primaryButtonHover!==!1,hoverColor:d.primaryButtonHoverColor||"#7c3aed",flow:d.primaryButtonFlow||!1,shadow:d.primaryButtonShadow!==!1,pulse:!1}}})(),N=()=>{switch(P){case"sm":return"px-4 py-2 text-sm";case"lg":return"px-8 py-4 text-lg";case"md":default:return"px-6 py-3 text-base"}},i={backgroundColor:a||s?"#d1d5db":F&&n.hover&&n.hoverColor?n.hoverColor:n.backgroundColor,color:a||s?"#9ca3af":n.textColor,borderRadius:`${n.borderRadius}px`,transition:"all 0.3s ease",boxShadow:n.shadow?F?"0 10px 25px -5px rgba(0, 0, 0, 0.2), 0 8px 10px -6px rgba(0, 0, 0, 0.15)":"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)":"none",transform:F&&!a&&!s?"translateY(-2px)":"translateY(0)"},g=()=>{const m=[];return n.pulse&&!a&&!s&&m.push("animate-pulse"),n.flow&&!a&&!s&&m.push("animate-gradient-x bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 bg-[length:200%_auto]"),m.join(" ")};return e.jsxs(B.button,{type:x,onClick:a||s?void 0:r,disabled:a||s,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),className:q("relative font-semibold inline-flex items-center justify-center gap-2","focus:outline-none focus:ring-2 focus:ring-offset-2","transition-all duration-300 ease-in-out","disabled:cursor-not-allowed disabled:opacity-50",N(),g(),S&&"w-full",p),style:i,whileHover:!a&&!s?{scale:1.02}:{},whileTap:!a&&!s?{scale:.98}:{},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[s&&e.jsx(K,{className:q("animate-spin",P==="sm"?"w-4 h-4":P==="lg"?"w-6 h-6":"w-5 h-5")}),k&&o==="left"&&!s&&e.jsx("span",{className:"flex-shrink-0",children:k}),e.jsx("span",{className:"flex-1 text-center",children:l}),k&&o==="right"&&!s&&e.jsx("span",{className:"flex-shrink-0",children:k}),!a&&!s&&e.jsx("span",{className:"absolute inset-0 overflow-hidden rounded-[inherit]",children:e.jsx("span",{className:"absolute inset-0 rounded-[inherit] bg-white opacity-0 group-active:opacity-20 transition-opacity duration-200"})})]})},y=C.forwardRef(({label:l,error:r,success:a=!1,theme:s,icon:x,iconPosition:j="left",mask:d="none",showValidation:p=!0,helperText:S,required:P=!1,fullWidth:k=!0,className:o="",value:F,onChange:u,onFocus:D,onBlur:n,...N},i)=>{const[g,m]=C.useState(!1),[R,v]=C.useState(!!F),$=t=>{if(!t)return"";switch(d){case"cpf":return t.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1");case"phone":return t.replace(/\D/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{5})(\d)/,"$1-$2").replace(/(-\d{4})\d+?$/,"$1");case"cep":return t.replace(/\D/g,"").replace(/(\d{5})(\d)/,"$1-$2").replace(/(-\d{3})\d+?$/,"$1");case"card":return t.replace(/\D/g,"").replace(/(\d{4})(\d)/,"$1 $2").replace(/(\d{4})(\d)/,"$1 $2").replace(/(\d{4})(\d)/,"$1 $2").replace(/(\d{4})\d+?$/,"$1");case"date":return t.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1/$2").replace(/(\d{2})(\d)/,"$1/$2").replace(/(\/\d{4})\d+?$/,"$1");default:return t}},f=t=>{const c=$(t.target.value);v(!!c);const I={...t,target:{...t.target,value:c}};u==null||u(I)},M=t=>{m(!0),D==null||D(t)},H=t=>{m(!1),n==null||n(t)},A=()=>r?"#ef4444":a&&p?"#10b981":g?s.inputFocusBorderColor||"#8b5cf6":s.inputBorderColor||"#d1d5db",L={backgroundColor:s.inputBackgroundColor||"#ffffff",borderColor:A(),borderRadius:`${s.inputBorderRadius||8}px`,height:`${s.inputHeight||48}px`,color:s.textColor||"#111827",borderWidth:"1px",borderStyle:"solid",transition:"all 0.3s ease"},z={color:r?"#ef4444":g||R?s.labelColor||"#111827":s.labelColor||"#6b7280",fontWeight:s.labelFontWeight||"500",fontSize:"14px",transition:"all 0.3s ease"};return e.jsxs("div",{className:q("relative",k&&"w-full"),children:[l&&e.jsxs(B.label,{className:"block mb-2",style:z,initial:{opacity:0,y:-5},animate:{opacity:1,y:0},transition:{duration:.2},children:[l,P&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[x&&j==="left"&&e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",style:{color:g?A():void 0},children:x}),e.jsx("input",{ref:i,value:F,onChange:f,onFocus:M,onBlur:H,className:q("w-full px-4 outline-none transition-all duration-300","focus:ring-2 focus:ring-opacity-20",x&&j==="left"&&"pl-11",x&&j==="right"&&"pr-11",(r||a&&p)&&"pr-11",o),style:{...L,...g&&{boxShadow:`0 0 0 3px ${s.inputFocusBorderColor||"#8b5cf6"}20`}},"aria-invalid":!!r,"aria-describedby":r?`${N.id}-error`:S?`${N.id}-helper`:void 0,...N}),e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[p&&!x&&e.jsxs(_,{mode:"wait",children:[r&&e.jsx(B.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{duration:.3},children:e.jsx(U,{className:"w-5 h-5 text-red-500"})},"error"),a&&!r&&R&&e.jsx(B.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{duration:.3},children:e.jsx(Q,{className:"w-5 h-5 text-green-500"})},"success")]}),x&&j==="right"&&e.jsx("div",{className:"text-gray-400",style:{color:g?A():void 0},children:x})]})]}),e.jsx(_,{children:r&&e.jsxs(B.p,{id:`${N.id}-error`,className:"mt-2 text-sm text-red-500 flex items-center gap-1",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[e.jsx(U,{className:"w-4 h-4"}),r]})}),S&&!r&&e.jsx("p",{id:`${N.id}-helper`,className:"mt-2 text-sm",style:{color:s.textColor||"#6b7280",opacity:.7},children:S}),g&&e.jsx(B.div,{className:"absolute inset-0 rounded-[inherit] pointer-events-none",style:{border:`2px solid ${s.inputFocusBorderColor||"#8b5cf6"}`,opacity:.2},initial:{scale:.95},animate:{scale:1},exit:{scale:.95},transition:{duration:.2}})]})});y.displayName="CheckoutInput";const he=({currentStep:l,theme:r})=>{const a=[{number:1,label:"Dados",icon:V},{number:2,label:"Entrega",icon:ie},{number:3,label:"Pagamento",icon:Z}];return e.jsx("div",{className:"w-full py-6 px-4",children:e.jsx("div",{className:"max-w-3xl mx-auto flex items-center justify-between",children:a.map((s,x)=>e.jsxs(oe.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(B.div,{className:"w-12 h-12 rounded-full flex items-center justify-center font-bold shadow-lg",style:{backgroundColor:l>=s.number?r.primaryButtonBackgroundColor||"#8b5cf6":"#e5e7eb",color:l>=s.number?"#ffffff":"#9ca3af"},whileHover:{scale:1.05},children:l>s.number?e.jsx(Q,{className:"w-6 h-6"}):e.jsx(s.icon,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-xs mt-2 font-medium",style:{color:l>=s.number?"#111827":"#9ca3af"},children:s.label})]}),x<a.length-1&&e.jsx("div",{className:"flex-1 mx-2",children:e.jsx("div",{className:"h-1 rounded-full",style:{backgroundColor:l>s.number?r.primaryButtonBackgroundColor||"#8b5cf6":"#e5e7eb"}})})]},s.number))})})},xe=()=>{const{orderId:l}=te(),r=re(),{toast:a}=ae(),[s,x]=C.useState(!0),[j,d]=C.useState(!1),[p,S]=C.useState(null),[P,k]=C.useState(null),[o,F]=C.useState(X),[u,D]=C.useState(1),[n,N]=C.useState({name:"",email:"",phone:"",document:""}),[i,g]=C.useState({zipCode:"",street:"",number:"",complement:"",neighborhood:"",city:"",state:""}),[m,R]=C.useState("PIX"),[v,$]=C.useState({number:"",holderName:"",expiryMonth:"",expiryYear:"",cvv:""}),f=o.navigationSteps||3;C.useEffect(()=>{l&&M()},[l]);const M=async()=>{var t;try{x(!0);const{data:c,error:I}=await h.from("Order").select("*").eq("id",l).single();if(I||!c)throw new Error("Pedido nÃ£o encontrado");const T=Array.isArray(c.items)?c.items:[],O=Array.isArray((t=c.metadata)==null?void 0:t.originalProducts)?c.metadata.originalProducts:[],E={orderId:c.id,products:T.map(b=>{const w=O.find(ee=>String(ee.id)===String(b.productId));return{id:b.productId||b.id,name:b.name||(w==null?void 0:w.name)||(w==null?void 0:w.title)||"Produto",price:Number(b.price)||0,quantity:Number(b.quantity)||1,image:b.image||(w==null?void 0:w.image)||(Array.isArray(w==null?void 0:w.images)?w.images[0]:"")}}),total:Number(c.total)||0,subtotal:Number(c.subtotal)||0,shipping:Number(c.shipping)||0,discount:Number(c.discount)||0};if(S(E),k(c),c.userId)try{const b=await ce.loadCustomization(c.userId);b!=null&&b.theme&&F({...X,...b.theme})}catch{console.log("Usando tema padrÃ£o")}}catch(c){console.error("Erro ao carregar checkout:",c),a({title:"Erro ao carregar checkout",description:c.message,variant:"destructive"})}finally{x(!1)}},H=()=>{f===1?z():L()&&(u<3?(D(u+1),window.scrollTo({top:0,behavior:"smooth"})):z())},A=()=>{u>1&&(D(u-1),window.scrollTo({top:0,behavior:"smooth"}))},L=()=>u===1&&(!n.name||!n.email||!n.phone||!n.document)?(a({title:"Preencha todos os campos",variant:"destructive"}),!1):u===2&&(!i.zipCode||!i.street||!i.number||!i.city||!i.state)?(a({title:"Preencha o endereÃ§o completo",variant:"destructive"}),!1):!0,z=async()=>{if(!(!l||!p)){d(!0);try{const{error:t}=await h.from("Order").update({customerName:n.name,customerEmail:n.email,customerPhone:n.phone,customerDocument:pe(n.document),shippingAddress:i,paymentMethod:m,updatedAt:new Date().toISOString()}).eq("id",l);if(t)throw t;const{data:c}=await h.from("PaymentGateway").select("*").eq("userId",P.userId).eq("type",m==="PIX"?"PIX":m==="CREDIT_CARD"?"CREDIT_CARD":"BOLETO").eq("isActive",!0).limit(1);if(!c||c.length===0)throw new Error(`Gateway de ${m} nÃ£o configurado`);const I=c[0],{data:T,error:O}=await h.from("Transaction").insert({orderId:l,gatewayId:I.id,amount:p.total,status:"PENDING",paymentMethod:m,metadata:{customerData:n,addressData:i,cardData:m==="CREDIT_CARD"?v:null}}).select().single();if(O||!T)throw new Error("Erro ao criar transaÃ§Ã£o");const{data:E,error:b}=await h.functions.invoke("process-payment",{body:{transactionId:T.id,gatewaySlug:I.slug,paymentMethod:m,amount:p.total,customerData:n,addressData:i,cardData:m==="CREDIT_CARD"?v:null}});if(b||!(E!=null&&E.success))throw new Error((E==null?void 0:E.error)||"Erro ao processar pagamento");r(m==="PIX"?`/pix/${l}/${T.id}`:`/checkout/success/${T.id}`)}catch(t){console.error("Erro ao processar pagamento:",t),a({title:"Erro no pagamento",description:t.message||"Tente novamente",variant:"destructive"})}finally{d(!1)}}};return s?e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#f9fafb"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(K,{className:"w-12 h-12 animate-spin text-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando checkout..."})]})}):p?e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:o.backgroundColor||"#f9fafb"},children:[o.noticeBarEnabled&&o.noticeBarMessage&&e.jsx("div",{className:"py-3 px-4 text-center text-sm font-medium",style:{backgroundColor:o.noticeBarBackgroundColor||"#8b5cf6",color:o.noticeBarTextColor||"#ffffff"},children:o.noticeBarMessage}),o.showLogoAtTop&&o.logoUrl&&e.jsx("div",{className:"bg-white shadow-sm py-4",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 flex justify-center",children:e.jsx("img",{src:o.logoUrl,alt:"Logo",className:"h-10 object-contain"})})}),o.bannerEnabled&&o.bannerUrl&&e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("img",{src:o.bannerUrl,alt:"Banner",className:"w-full object-cover",style:{maxHeight:o.bannerHeight||"200px"}})}),f===3&&e.jsx(he,{currentStep:u,theme:o}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(B.div,{className:"bg-white rounded-2xl shadow-lg p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-1",style:{color:o.headingColor||"#111827"},children:f===1?"Finalizar Pedido":u===1?"Seus Dados":u===2?"EndereÃ§o":"Pagamento"}),e.jsx("p",{className:"text-sm",style:{color:o.textColor||"#6b7280"},children:"Preencha as informaÃ§Ãµes para continuar"})]}),e.jsxs(_,{mode:"wait",children:[(f===1||u===1)&&e.jsxs(B.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[e.jsx(y,{label:"Nome Completo",type:"text",value:n.name,onChange:t=>N({...n,name:t.target.value}),theme:o,icon:e.jsx(V,{className:"w-5 h-5"}),placeholder:"Seu nome completo",required:!0}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(y,{label:"E-mail",type:"email",value:n.email,onChange:t=>N({...n,email:t.target.value}),theme:o,icon:e.jsx(se,{className:"w-5 h-5"}),placeholder:"seu@email.com",required:!0}),e.jsx(y,{label:"Telefone",type:"tel",value:n.phone,onChange:t=>N({...n,phone:t.target.value}),theme:o,icon:e.jsx(le,{className:"w-5 h-5"}),placeholder:"(11) 99999-9999",mask:"phone",required:!0})]}),e.jsx(y,{label:"CPF",type:"text",value:n.document,onChange:t=>N({...n,document:t.target.value}),theme:o,icon:e.jsx(ue,{className:"w-5 h-5"}),placeholder:"000.000.000-00",mask:"cpf",required:!0})]},"step1"),(f===1||u===2)&&e.jsxs(B.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:f===1?"mt-6 space-y-4":"space-y-4",children:[f===1&&e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"EndereÃ§o de Entrega"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(y,{label:"CEP",type:"text",value:i.zipCode,onChange:t=>g({...i,zipCode:t.target.value}),theme:o,placeholder:"00000-000",mask:"cep",required:!0}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(y,{label:"Rua",type:"text",value:i.street,onChange:t=>g({...i,street:t.target.value}),theme:o,placeholder:"Nome da rua",required:!0})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(y,{label:"NÃºmero",type:"text",value:i.number,onChange:t=>g({...i,number:t.target.value}),theme:o,placeholder:"123",required:!0}),e.jsx("div",{className:"col-span-1 md:col-span-3",children:e.jsx(y,{label:"Complemento",type:"text",value:i.complement,onChange:t=>g({...i,complement:t.target.value}),theme:o,placeholder:"Apto, bloco..."})})]}),e.jsx(y,{label:"Bairro",type:"text",value:i.neighborhood,onChange:t=>g({...i,neighborhood:t.target.value}),theme:o,placeholder:"Seu bairro",required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(y,{label:"Cidade",type:"text",value:i.city,onChange:t=>g({...i,city:t.target.value}),theme:o,placeholder:"Cidade",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:o.labelColor||"#111827"},children:"Estado *"}),e.jsxs("select",{value:i.state,onChange:t=>g({...i,state:t.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 outline-none transition-all",style:{backgroundColor:o.inputBackgroundColor||"#ffffff",borderColor:o.inputBorderColor||"#d1d5db",borderRadius:`${o.inputBorderRadius||8}px`,height:`${o.inputHeight||48}px`,color:o.textColor||"#111827"},children:[e.jsx("option",{value:"",children:"Selecione"}),e.jsx("option",{value:"SP",children:"SP"}),e.jsx("option",{value:"RJ",children:"RJ"}),e.jsx("option",{value:"MG",children:"MG"}),e.jsx("option",{value:"RS",children:"RS"}),e.jsx("option",{value:"SC",children:"SC"}),e.jsx("option",{value:"PR",children:"PR"})]})]})]})]},"step2"),(f===1||u===3)&&e.jsxs(B.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:f===1?"mt-6 space-y-4":"space-y-4",children:[f===1&&e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Forma de Pagamento"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx("button",{onClick:()=>R("PIX"),className:`p-4 rounded-lg border-2 font-semibold transition ${m==="PIX"?"border-purple-600 bg-purple-50":"border-gray-200"}`,children:"PIX"}),e.jsx("button",{onClick:()=>R("CREDIT_CARD"),className:`p-4 rounded-lg border-2 font-semibold transition ${m==="CREDIT_CARD"?"border-purple-600 bg-purple-50":"border-gray-200"}`,children:"CartÃ£o"}),e.jsx("button",{onClick:()=>R("BOLETO"),className:`p-4 rounded-lg border-2 font-semibold transition ${m==="BOLETO"?"border-purple-600 bg-purple-50":"border-gray-200"}`,children:"Boleto"})]}),m==="CREDIT_CARD"&&e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsx(y,{label:"NÃºmero do CartÃ£o",type:"text",value:v.number,onChange:t=>$({...v,number:t.target.value}),theme:o,icon:e.jsx(Z,{className:"w-5 h-5"}),placeholder:"0000 0000 0000 0000",mask:"card",required:!0}),e.jsx(y,{label:"Nome no CartÃ£o",type:"text",value:v.holderName,onChange:t=>$({...v,holderName:t.target.value}),theme:o,placeholder:"Nome como estÃ¡ no cartÃ£o",required:!0}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(y,{label:"MÃªs",type:"text",value:v.expiryMonth,onChange:t=>$({...v,expiryMonth:t.target.value}),theme:o,placeholder:"MM",maxLength:2,required:!0}),e.jsx(y,{label:"Ano",type:"text",value:v.expiryYear,onChange:t=>$({...v,expiryYear:t.target.value}),theme:o,placeholder:"AA",maxLength:2,required:!0}),e.jsx(y,{label:"CVV",type:"text",value:v.cvv,onChange:t=>$({...v,cvv:t.target.value}),theme:o,placeholder:"123",maxLength:4,required:!0})]})]}),m==="PIX"&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mt-4",children:e.jsx("p",{className:"text-sm text-green-800",children:"âœ… ApÃ³s clicar em finalizar, vocÃª receberÃ¡ o QR Code do PIX"})}),m==="BOLETO"&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4",children:e.jsx("p",{className:"text-sm text-blue-800",children:"â„¹ï¸ O boleto serÃ¡ gerado apÃ³s a finalizaÃ§Ã£o"})})]},"step3")]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[f===3&&u>1&&e.jsx(Y,{onClick:A,variant:"secondary",theme:o,icon:e.jsx(de,{className:"w-5 h-5"}),iconPosition:"left",fullWidth:!0,children:"Voltar"}),e.jsx(Y,{onClick:H,disabled:j,loading:j,variant:f===1||u===3?"checkout":"primary",theme:o,icon:f===1||u===3?e.jsx(W,{className:"w-5 h-5"}):void 0,iconPosition:"left",fullWidth:!0,size:"lg",children:f===1||u===3?"Finalizar Compra":"Continuar"})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t flex items-center justify-center gap-6 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{children:"Compra Segura"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{children:"SSL Certificado"})]})]})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(B.div,{className:"bg-white rounded-2xl shadow-lg p-6 sticky top-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",style:{color:o.headingColor||"#111827"},children:[e.jsx(G,{className:"w-5 h-5"}),"Resumo do Pedido"]}),e.jsx("div",{className:"space-y-3 mb-4",children:p.products.map((t,c)=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg bg-gray-100 flex-shrink-0 overflow-hidden",children:t.image?e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(G,{className:"w-8 h-8 text-gray-400"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm truncate",children:t.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Qtd: ",t.quantity]}),e.jsxs("p",{className:"text-sm font-bold text-gray-900 mt-1",children:["R$ ",(t.price*t.quantity).toFixed(2)]})]})]},c))}),e.jsx("div",{className:"border-t my-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["R$ ",p.subtotal.toFixed(2)]})]}),p.shipping>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Frete"}),e.jsxs("span",{className:"font-medium",children:["R$ ",p.shipping.toFixed(2)]})]}),p.discount&&p.discount>0&&e.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[e.jsx("span",{children:"Desconto"}),e.jsxs("span",{className:"font-medium",children:["- R$ ",p.discount.toFixed(2)]})]})]}),e.jsx("div",{className:"border-t mt-4 pt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold",style:{color:o.headingColor||"#111827"},children:"Total"}),e.jsxs("span",{className:"text-3xl font-bold",style:{color:o.primaryButtonBackgroundColor||"#8b5cf6"},children:["R$ ",p.total.toFixed(2)]})]})})]})})]})}),o.showStoreName&&e.jsx("div",{className:"bg-white border-t mt-12 py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 text-center text-sm text-gray-600",children:e.jsxs("p",{children:["Â© ",new Date().getFullYear()," - Todos os direitos reservados"]})})})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx(U,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Pedido nÃ£o encontrado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"NÃ£o foi possÃ­vel carregar os dados do pedido."}),e.jsx("button",{onClick:()=>window.history.back(),className:"px-6 py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700",children:"Voltar"})]})})},Be=Object.freeze(Object.defineProperty({__proto__:null,default:xe},Symbol.toStringTag,{value:"Module"}));export{X as D,xe as P,Be as a,ce as c};

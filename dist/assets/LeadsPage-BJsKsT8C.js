import{c as Q,r,b as ae,u as se,j as e,B as x,I as g,d as f,e as p,f as v,h as b,S as te,n as re}from"./index-pv9-bCb3.js";import{T as le,a as ie,b as z,c as h,d as ne,e as m}from"./table-DsBrCG4J.js";import{D as de,a as oe,b as ce,c as xe,d as he,f as me}from"./dialog-DOgw0Z3w.js";import{L as N}from"./label-CQc93LhS.js";import{S as F,a as O,b as U,c as W,d as l}from"./select-BLGUCMxK.js";import{c as k}from"./customersApi-BjULwtXy.js";import{S as V}from"./skeleton-LbgFXE17.js";import{P as q}from"./plus-BEI-SorK.js";import{U as B}from"./users-CaUZ3yuZ.js";import{S as ue}from"./square-pen-MxoMz57M.js";import{T as je}from"./trash-2-BYBVv0xG.js";import"./x-DbzY-YeI.js";import"./index-CuXWbZPY.js";import"./chevron-up-Cb5yFYWD.js";/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=Q("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=Q("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Ae=()=>{const[n,R]=r.useState([]),[L,E]=r.useState([]),[P,G]=r.useState(!0),[o,M]=r.useState(""),[y,X]=r.useState("ALL"),[J,u]=r.useState(!1),[w,T]=r.useState(null),{toast:c}=ae(),i=se(a=>a.user),[s,d]=r.useState({name:"",email:"",phone:"",status:"NEW",source:""});r.useEffect(()=>{C()},[]),r.useEffect(()=>{K()},[o,y,n]);const C=async()=>{try{if(!(i!=null&&i.organizationId))return;const a=await k.leads.list(i.organizationId);R(a),E(a)}catch(a){c({title:"Erro ao carregar leads",description:a.message,variant:"destructive"})}finally{G(!1)}},K=()=>{let a=n;o&&(a=a.filter(t=>{var j,A,I;return((j=t.name)==null?void 0:j.toLowerCase().includes(o.toLowerCase()))||((A=t.email)==null?void 0:A.toLowerCase().includes(o.toLowerCase()))||((I=t.phone)==null?void 0:I.includes(o))})),y!=="ALL"&&(a=a.filter(t=>t.status===y)),E(a)},Y=async a=>{a.preventDefault();try{if(!(i!=null&&i.organizationId))return;w?(await k.leads.update(w.id,s),c({title:"Lead atualizado!"})):(await k.leads.create({...s,organizationId:i.organizationId}),c({title:"Lead criado!",description:"Novo lead adicionado com sucesso."})),u(!1),S(),C()}catch(t){c({title:"Erro",description:t.message,variant:"destructive"})}},Z=async a=>{if(confirm("Tem certeza que deseja deletar este lead?"))try{await k.leads.delete(a),c({title:"Lead deletado"}),C()}catch(t){c({title:"Erro ao deletar",description:t.message,variant:"destructive"})}},_=a=>{T(a),d({name:a.name||"",email:a.email||"",phone:a.phone||"",status:a.status||"NEW",source:a.source||""}),u(!0)},S=()=>{T(null),d({name:"",email:"",phone:"",status:"NEW",source:""})},$=a=>{const t={NEW:{variant:"secondary",label:"Novo"},CONTACTED:{variant:"default",label:"Contatado"},QUALIFIED:{variant:"default",label:"Qualificado"},CONVERTED:{variant:"default",label:"Convertido"}},j=t[a]||t.NEW;return e.jsx(re,{variant:j.variant,children:j.label})},ee=n.filter(a=>a.status==="NEW").length,D=n.filter(a=>a.status==="CONVERTED").length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-black bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 dark:from-blue-400 dark:via-purple-400 dark:to-pink-400 bg-clip-text text-transparent",children:"Leads"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:"Gerencie seus leads e contatos"})]}),e.jsxs(de,{open:J,onOpenChange:u,children:[e.jsx(oe,{asChild:!0,children:e.jsxs(x,{onClick:S,children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Adicionar Lead"]})}),e.jsxs(ce,{children:[e.jsx(xe,{children:e.jsx(he,{children:w?"Editar Lead":"Novo Lead"})}),e.jsxs("form",{onSubmit:Y,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Nome Completo"}),e.jsx(g,{value:s.name,onChange:a=>d({...s,name:a.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(N,{children:"E-mail"}),e.jsx(g,{type:"email",value:s.email,onChange:a=>d({...s,email:a.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(N,{children:"Telefone"}),e.jsx(g,{value:s.phone,onChange:a=>d({...s,phone:a.target.value}),placeholder:"(11) 99999-9999"})]}),e.jsxs("div",{children:[e.jsx(N,{children:"Status"}),e.jsxs(F,{value:s.status,onValueChange:a=>d({...s,status:a}),children:[e.jsx(O,{children:e.jsx(U,{})}),e.jsxs(W,{children:[e.jsx(l,{value:"NEW",children:"Novo"}),e.jsx(l,{value:"CONTACTED",children:"Contatado"}),e.jsx(l,{value:"QUALIFIED",children:"Qualificado"}),e.jsx(l,{value:"CONVERTED",children:"Convertido"})]})]})]}),e.jsxs("div",{children:[e.jsx(N,{children:"Origem"}),e.jsx(g,{value:s.source,onChange:a=>d({...s,source:a.target.value}),placeholder:"Ex: Facebook, Google Ads..."})]})]}),e.jsxs(me,{className:"mt-4",children:[e.jsx(x,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Cancelar"}),e.jsx(x,{type:"submit",children:w?"Atualizar":"Criar"})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[e.jsxs(f,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(v,{className:"text-sm font-medium",children:"Total de Leads"}),e.jsx(B,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})]}),e.jsx(b,{children:e.jsx("div",{className:"text-2xl font-bold",children:n.length})})]}),e.jsxs(f,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(v,{className:"text-sm font-medium",children:"Novos"}),e.jsx(ge,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})]}),e.jsx(b,{children:e.jsx("div",{className:"text-2xl font-bold",children:ee})})]}),e.jsxs(f,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(v,{className:"text-sm font-medium",children:"Convertidos"}),e.jsx(H,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})]}),e.jsx(b,{children:e.jsx("div",{className:"text-2xl font-bold",children:D})})]}),e.jsxs(f,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(v,{className:"text-sm font-medium",children:"Taxa de Conversão"}),e.jsx(H,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})]}),e.jsx(b,{children:e.jsxs("div",{className:"text-2xl font-bold",children:[n.length>0?(D/n.length*100).toFixed(1):0,"%"]})})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(te,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-600 dark:text-gray-400"}),e.jsx(g,{placeholder:"Buscar leads...",value:o,onChange:a=>M(a.target.value),className:"pl-9 border-gray-200 dark:border-gray-600 bg-white/80 dark:bg-gray-800 dark:text-white dark:placeholder:text-gray-500 backdrop-blur-sm"})]}),e.jsxs(F,{value:y,onValueChange:X,children:[e.jsx(O,{className:"w-48",children:e.jsx(U,{placeholder:"Filtrar por status"})}),e.jsxs(W,{children:[e.jsx(l,{value:"ALL",children:"Todos os Status"}),e.jsx(l,{value:"NEW",children:"Novos"}),e.jsx(l,{value:"CONTACTED",children:"Contatados"}),e.jsx(l,{value:"QUALIFIED",children:"Qualificados"}),e.jsx(l,{value:"CONVERTED",children:"Convertidos"})]})]})]}),e.jsxs(f,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(p,{children:e.jsx(v,{children:"Lista de Leads"})}),e.jsx(b,{children:P?e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{className:"h-12 w-full"}),e.jsx(V,{className:"h-12 w-full"})]}):L.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(B,{className:"h-12 w-12 text-muted-foreground dark:text-gray-500 mb-4 mx-auto"}),e.jsx("h3",{className:"text-lg font-semibold dark:text-white",children:"Nenhum lead encontrado"}),e.jsx("p",{className:"text-sm text-muted-foreground dark:text-gray-400 mb-4",children:"Comece adicionando o primeiro lead"}),e.jsxs(x,{onClick:()=>u(!0),children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Adicionar Primeiro Lead"]})]}):e.jsxs(le,{children:[e.jsx(ie,{children:e.jsxs(z,{children:[e.jsx(h,{children:"Nome"}),e.jsx(h,{children:"E-mail"}),e.jsx(h,{children:"Telefone"}),e.jsx(h,{children:"Origem"}),e.jsx(h,{children:"Status"}),e.jsx(h,{className:"text-right",children:"Ações"})]})}),e.jsx(ne,{children:L.map(a=>e.jsxs(z,{children:[e.jsx(m,{className:"font-medium",children:a.name}),e.jsx(m,{children:a.email}),e.jsx(m,{className:"text-sm text-muted-foreground dark:text-gray-400",children:a.phone||"-"}),e.jsx(m,{className:"text-sm text-muted-foreground dark:text-gray-400",children:a.source||"-"}),e.jsx(m,{children:$(a.status)}),e.jsx(m,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>_(a),children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx(x,{variant:"ghost",size:"icon",onClick:()=>Z(a.id),children:e.jsx(je,{className:"h-4 w-4"})})]})})]},a.id))})]})})]})]})};export{Ae as default};

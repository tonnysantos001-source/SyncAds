import{b as D,r as k,s as n,j as e,N as l,a8 as U,a9 as A,aa as S,ab as z,C as c,e as d,f as m,ac as L,g as p,h as x,B as h,ad as I,ae as V,n as M,af as q,ag as T,ah as B,ai as O,aj as J}from"./index-CVm5GJqW.js";import{S as E}from"./SuperAdminLayout-B0xL8IJo.js";const b=({title:r,value:s,subtitle:v,icon:N,gradient:u,trend:o,delay:g=0,onClick:j})=>e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:g,duration:.5},whileHover:{scale:1.02},className:"cursor-pointer",onClick:j,children:e.jsxs(c,{className:"relative overflow-hidden border-gray-700/50 bg-gray-900/50 backdrop-blur-xl hover:border-gray-600 transition-all duration-300 group",children:[e.jsx("div",{className:`absolute inset-0 opacity-10 group-hover:opacity-20 transition-opacity ${u}`}),e.jsx(d,{className:"relative z-10 pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`p-3 rounded-xl ${u} bg-opacity-20 backdrop-blur-sm`,children:e.jsx(N,{className:"w-6 h-6 text-white"})}),o&&e.jsxs(M,{variant:o.positive?"default":"destructive",className:"gap-1",children:[e.jsx(B,{className:`w-3 h-3 ${o.positive?"":"rotate-180"}`}),o.value]})]})}),e.jsx(x,{className:"relative z-10",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-400",children:r}),e.jsx("h3",{className:"text-3xl font-bold text-white",children:s}),e.jsx("p",{className:"text-xs text-gray-500",children:v})]})})]})});function W(){const r=D(),[s,v]=k.useState({totalUsers:0,activeUsers:0,totalRevenue:0,monthlyRevenue:0,totalAiConnections:0,totalMessages:0,totalTokens:0,gatewaysConfigured:0,plansDistribution:{free:0,starter:0,pro:0,enterprise:0}}),[N,u]=k.useState(!0);k.useEffect(()=>{o()},[]);const o=async()=>{try{const{count:a}=await n.from("User").select("*",{count:"exact",head:!0}),{count:f}=await n.from("User").select("*",{count:"exact",head:!0}).eq("isActive",!0),{count:H}=await n.from("GlobalAiConnection").select("*",{count:"exact",head:!0}),{count:P}=await n.from("ChatMessage").select("*",{count:"exact",head:!0}),{data:w}=await n.from("PlanDailyUsage").select("aiMessagesUsed, aiImagesUsed"),G=(w==null?void 0:w.reduce((i,F)=>i+(F.aiMessagesUsed||0),0))||0,{count:$}=await n.from("GatewayConfig").select("*",{count:"exact",head:!0}),{data:t}=await n.from("User").select("plan").eq("isActive",!0),y={free:(t==null?void 0:t.filter(i=>i.plan==="FREE"||!i.plan).length)||0,starter:(t==null?void 0:t.filter(i=>i.plan==="STARTER").length)||0,pro:(t==null?void 0:t.filter(i=>i.plan==="PRO").length)||0,enterprise:(t==null?void 0:t.filter(i=>i.plan==="ENTERPRISE").length)||0},C={free:0,starter:49.9,pro:199.9,enterprise:999.9},R=y.starter*C.starter+y.pro*C.pro+y.enterprise*C.enterprise;v({totalUsers:a||0,activeUsers:f||0,totalRevenue:R*3,monthlyRevenue:R,totalAiConnections:H||0,totalMessages:P||0,totalTokens:G,gatewaysConfigured:$||0,plansDistribution:y})}catch(a){console.error("Erro ao carregar estatísticas:",a)}finally{u(!1)}},g=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a),j=a=>new Intl.NumberFormat("pt-BR").format(a);return N?e.jsx(E,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-gray-400 animate-pulse",children:"Carregando estatísticas..."})]})})}):e.jsx(E,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs(l.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"space-y-2",children:[e.jsx("h1",{className:"text-3xl font-black text-white",children:"Dashboard Administrativo"}),e.jsx("p",{className:"text-gray-400",children:"Visão geral completa do sistema e métricas principais"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(b,{title:"Total de Usuários",value:j(s.totalUsers),subtitle:`${s.activeUsers} ativos`,icon:U,gradient:"bg-gradient-to-br from-blue-500 to-cyan-500",trend:{value:"+12%",positive:!0},delay:0,onClick:()=>r("/super-admin/clients")}),e.jsx(b,{title:"Receita Mensal (MRR)",value:g(s.monthlyRevenue),subtitle:"Receita recorrente",icon:A,gradient:"bg-gradient-to-br from-green-500 to-emerald-500",trend:{value:"+8%",positive:!0},delay:.1,onClick:()=>r("/super-admin/billing")}),e.jsx(b,{title:"Mensagens IA",value:j(s.totalMessages),subtitle:"Total de interações",icon:S,gradient:"bg-gradient-to-br from-purple-500 to-pink-500",trend:{value:"+24%",positive:!0},delay:.2,onClick:()=>r("/super-admin/usage")}),e.jsx(b,{title:"Gateways Ativos",value:s.gatewaysConfigured,subtitle:"Configurados e prontos",icon:z,gradient:"bg-gradient-to-br from-orange-500 to-red-500",delay:.3,onClick:()=>r("/super-admin/gateways")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},children:e.jsxs(c,{className:"border-gray-700/50 bg-gray-900/50 backdrop-blur-xl",children:[e.jsxs(d,{children:[e.jsxs(m,{className:"text-white flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-purple-400"}),"Conexões de IA"]}),e.jsx(p,{className:"text-gray-400",children:"IAs globais configuradas"})]}),e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-4xl font-bold text-white",children:s.totalAiConnections}),e.jsxs(h,{variant:"ghost",size:"sm",onClick:()=>r("/super-admin/ai-connections"),className:"text-purple-400 hover:text-purple-300 hover:bg-purple-500/10",children:["Ver todas",e.jsx(I,{className:"ml-2 w-4 h-4"})]})]})})]})}),e.jsx(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},children:e.jsxs(c,{className:"border-gray-700/50 bg-gray-900/50 backdrop-blur-xl",children:[e.jsxs(d,{children:[e.jsxs(m,{className:"text-white flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5 text-blue-400"}),"Taxa de Ativação"]}),e.jsx(p,{className:"text-gray-400",children:"Usuários ativos vs total"})]}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-4xl font-bold text-white",children:[Math.round(s.activeUsers/s.totalUsers*100),"%"]}),e.jsxs(M,{variant:"default",className:"bg-green-500/20 text-green-400 border-green-500/30",children:[e.jsx(q,{className:"mr-1 w-3 h-3"}),"Ótimo"]})]}),e.jsx("div",{className:"w-full bg-gray-800 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-cyan-500 h-2 rounded-full transition-all duration-500",style:{width:`${s.activeUsers/s.totalUsers*100}%`}})})]})})]})}),e.jsx(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6},children:e.jsxs(c,{className:"border-gray-700/50 bg-gray-900/50 backdrop-blur-xl",children:[e.jsxs(d,{children:[e.jsxs(m,{className:"text-white flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5 text-orange-400"}),"Crescimento Trimestral"]}),e.jsx(p,{className:"text-gray-400",children:"Receita estimada"})]}),e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-2xl font-bold text-white",children:g(s.totalRevenue)}),e.jsx(B,{className:"w-8 h-8 text-green-400"})]})})]})})]}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:e.jsxs(c,{className:"border-gray-700/50 bg-gray-900/50 backdrop-blur-xl",children:[e.jsx(d,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(m,{className:"text-white",children:"Distribuição de Planos"}),e.jsx(p,{className:"text-gray-400",children:"Usuários por plano de assinatura"})]}),e.jsxs(h,{onClick:()=>r("/super-admin/plans"),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:["Gerenciar Planos",e.jsx(I,{className:"ml-2 w-4 h-4"})]})]})}),e.jsx(x,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{name:"Gratuito",count:s.plansDistribution.free,color:"from-gray-500 to-gray-600",icon:U},{name:"Starter",count:s.plansDistribution.starter,color:"from-blue-500 to-cyan-500",icon:O},{name:"Pro",count:s.plansDistribution.pro,color:"from-purple-500 to-pink-500",icon:J},{name:"Enterprise",count:s.plansDistribution.enterprise,color:"from-orange-500 to-red-500",icon:T}].map((a,f)=>e.jsxs(l.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.8+f*.1},className:"relative p-4 rounded-xl bg-gray-800/50 border border-gray-700/50 hover:border-gray-600 transition-all group",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${a.color} opacity-5 group-hover:opacity-10 rounded-xl transition-opacity`}),e.jsxs("div",{className:"relative space-y-2",children:[e.jsx(a.icon,{className:"w-8 h-8 text-gray-400 group-hover:text-white transition-colors"}),e.jsx("p",{className:"text-sm text-gray-400",children:a.name}),e.jsx("p",{className:"text-2xl font-bold text-white",children:a.count})]})]},a.name))})})]})}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},children:e.jsxs(c,{className:"border-gray-700/50 bg-gray-900/50 backdrop-blur-xl",children:[e.jsxs(d,{children:[e.jsx(m,{className:"text-white",children:"Ações Rápidas"}),e.jsx(p,{className:"text-gray-400",children:"Acesso rápido às principais funcionalidades"})]}),e.jsx(x,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(h,{onClick:()=>r("/super-admin/chat"),variant:"outline",className:"justify-start h-auto py-4 border-gray-700 hover:border-purple-500 hover:bg-purple-500/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-500/20",children:e.jsx(S,{className:"w-5 h-5 text-purple-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-semibold text-white",children:"Chat Admin"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Conversar com IA como admin"})]})]})}),e.jsx(h,{onClick:()=>r("/super-admin/clients"),variant:"outline",className:"justify-start h-auto py-4 border-gray-700 hover:border-blue-500 hover:bg-blue-500/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:e.jsx(U,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-semibold text-white",children:"Gerenciar Clientes"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Ver e gerenciar usuários"})]})]})}),e.jsx(h,{onClick:()=>r("/super-admin/payment-split"),variant:"outline",className:"justify-start h-auto py-4 border-gray-700 hover:border-green-500 hover:bg-green-500/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-500/20",children:e.jsx(A,{className:"w-5 h-5 text-green-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-semibold text-white",children:"Split de Pagamento"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Configurar divisão de receita"})]})]})})]})})]})})]})})}export{W as default};

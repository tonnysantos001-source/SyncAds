import{b as ke,u as Re,r as f,s as E,j as e,B as Se,a6 as Te,d as x,h,l as D,e as u,f as g,g as C}from"./index-DQQnIaP8.js";import{P as Oe}from"./progress-Dv6pFXkU.js";import{S as Y}from"./skeleton-DbqfrvPs.js";import{S as Ie,a as $e,b as Fe,c as Ee,d as M}from"./select-DTfHC8lP.js";import{A as W}from"./activity-CQwzgL9E.js";import{D as Me}from"./dollar-sign-AzgGNwwM.js";import{S as Ve}from"./shopping-cart-D6mfeG_v.js";import{T as Be}from"./trending-up-DzELxFBZ.js";import{C as He}from"./credit-card-BX5pC02E.js";import{g as Le,B as k,X as V,Y as B,f as Ge,R as J,b as ze,C as Q,T as Z,c as Ke,L as Ue,A as qe,a as Xe}from"./AreaChart-BO5J4IOQ.js";import{C as _}from"./circle-check-BfXh272-.js";import{C as ee}from"./clock-DaFwjFyk.js";import{C as te}from"./circle-x-D4WqvTR2.js";import{C as Ye}from"./circle-alert-DS5OgHO7.js";import{S as We}from"./shopping-bag-CO4ZlHB9.js";import{P as Je}from"./package-BYAvMxIZ.js";import{U as Qe}from"./users-D4KoZKpJ.js";import"./index-CJzYhHGd.js";import"./chevron-up-Doj_Bfto.js";var Ze=Le({chartName:"BarChart",GraphicalChild:k,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:V},{axisType:"yAxis",AxisComp:B}],formatAxisMap:Ge});function jt(){const{toast:se}=ke(),m=Re(t=>t.user),[ae,H]=f.useState(!0),[L,G]=f.useState(!1),[j,re]=f.useState("7days"),[a,ne]=f.useState({totalRevenue:0,revenueChange:0,totalOrders:0,ordersChange:0,averageOrderValue:0,aovChange:0,checkoutViews:0,conversionRate:0,abandonedCarts:0,abandonmentRate:0,recoveredCarts:0,recoveryRate:0,pendingPayments:0,paidOrders:0,failedPayments:0,totalCustomers:0,newCustomers:0}),[z,ie]=f.useState([]),[oe,le]=f.useState([]),[K,de]=f.useState([]),[U,ce]=f.useState([]);f.useEffect(()=>{if(m!=null&&m.id){R();const t=setInterval(R,3e4);return()=>clearInterval(t)}},[m==null?void 0:m.id,j]);const R=async()=>{if(m!=null&&m.id)try{H(!0);const[t,r,s]=await Promise.all([me(),xe(),he()]);ge(t,r,s),pe(t),fe(t),ue(t)}catch(t){console.error("Error loading dashboard:",t)}finally{H(!1)}},me=async()=>{const{data:t,error:r}=await E.from("Order").select("*").eq("userId",m.id).order("createdAt",{ascending:!1}).limit(500);if(r)throw r;return t||[]},xe=async()=>{const{data:t,error:r}=await E.from("AbandonedCart").select("*").eq("userId",m.id);return r?[]:t||[]},he=async()=>{const{data:t,error:r}=await E.from("Customer").select("*").eq("userId",m.id);return r?[]:t||[]},ue=t=>{const r=t.filter(s=>s.items&&s.items.length>0).slice(0,5).map(s=>({id:s.id,orderNumber:s.orderNumber,customerName:s.customerName,amount:s.total,status:s.paymentStatus,items:s.items||[],createdAt:s.createdAt}));ce(r)},ge=(t,r,s)=>{const l=new Date;let n;switch(j){case"today":n=new Date(l.setHours(0,0,0,0));break;case"7days":n=new Date(l.getTime()-7*24*60*60*1e3);break;case"30days":n=new Date(l.getTime()-30*24*60*60*1e3);break;default:n=new Date(l.getTime()-7*24*60*60*1e3)}const i=t.filter(o=>new Date(o.createdAt)>=n),d=new Date(n.getTime()-(l.getTime()-n.getTime())),b=t.filter(o=>new Date(o.createdAt)>=d&&new Date(o.createdAt)<n),v=i.filter(o=>o.paymentStatus==="PAID"),N=b.filter(o=>o.paymentStatus==="PAID"),c=v.reduce((o,F)=>o+(parseFloat(F.total)||0),0),p=N.reduce((o,F)=>o+(parseFloat(F.total)||0),0),be=p>0?(c-p)/p*100:0,y=v.length,ve=N.length>0?(y-N.length)/N.length*100:0,q=y>0?c/y:0,T=N.length>0?p/N.length:0,Ne=T>0?(q-T)/T*100:0,P=r.filter(o=>new Date(o.abandonedAt)>=n),O=P.filter(o=>!o.recoveredAt).length,X=P.filter(o=>o.recoveredAt).length,I=i.length+O,we=I>0?O/I*100:0,ye=P.length>0?X/P.length*100:0,$=I,Ce=$>0?y/$*100:0,De=i.filter(o=>o.paymentStatus==="PENDING").length,Ae=i.filter(o=>o.paymentStatus==="FAILED").length,Pe=s.filter(o=>new Date(o.createdAt)>=n).length;ne({totalRevenue:c,revenueChange:be,totalOrders:y,ordersChange:ve,averageOrderValue:q,aovChange:Ne,checkoutViews:$,conversionRate:Ce,abandonedCarts:O,abandonmentRate:we,recoveredCarts:X,recoveryRate:ye,pendingPayments:De,paidOrders:y,failedPayments:Ae,totalCustomers:s.length,newCustomers:Pe})},pe=t=>{const r=new Date,s=j==="today"?24:j==="7days"?7:30,l=[];for(let n=s-1;n>=0;n--){const i=new Date(r);i.setDate(i.getDate()-n),j==="today"?i.setHours(r.getHours()-n,0,0,0):i.setHours(0,0,0,0);const d=new Date(i);j==="today"?d.setHours(i.getHours()+1):d.setDate(i.getDate()+1);const b=t.filter(c=>{const p=new Date(c.createdAt);return p>=i&&p<d}),v=b.filter(c=>c.paymentStatus==="PAID"),N=v.reduce((c,p)=>c+(parseFloat(p.total)||0),0);l.push({date:j==="today"?i.getHours()+"h":i.toLocaleDateString("pt-BR",{day:"2-digit",month:"short"}),receita:N,pedidos:v.length,pendentes:b.filter(c=>c.paymentStatus==="PENDING").length,falhos:b.filter(c=>c.paymentStatus==="FAILED").length})}ie(l),le(l)},fe=t=>{const r=[];t.slice(0,10).forEach(s=>{var i,d,b,v;const l=((d=(i=s.items)==null?void 0:i[0])==null?void 0:d.image)||null,n=((v=(b=s.items)==null?void 0:b[0])==null?void 0:v.name)||"Produto";s.paymentStatus==="PAID"?r.push({id:s.id,type:"payment",title:"Pagamento Confirmado",description:`${s.customerName||"Cliente"} - ${n}`,time:S(s.updatedAt||s.createdAt),status:"success",image:l}):s.paymentStatus==="PENDING"?r.push({id:s.id,type:"checkout",title:"Checkout Iniciado",description:`${n} - ${w(s.total)}`,time:S(s.createdAt),status:"info",image:l}):s.paymentStatus==="FAILED"&&r.push({id:s.id,type:"payment",title:"Pagamento Falhou",description:`${s.orderNumber} - ${n}`,time:S(s.updatedAt||s.createdAt),status:"error",image:l})}),de(r.slice(0,5))},je=async()=>{G(!0),await R(),G(!1),se({title:"Dashboard atualizado!",description:"Dados carregados com sucesso"})},w=t=>{const r=typeof t=="string"?parseFloat(t):t;return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(r||0)},S=t=>{const r=new Date,s=new Date(t),l=r.getTime()-s.getTime(),n=Math.floor(l/6e4),i=Math.floor(l/36e5),d=Math.floor(l/864e5);return n<1?"Agora":n<60?`${n}m atrás`:i<24?`${i}h atrás`:`${d}d atrás`},A=({title:t,value:r,change:s,icon:l,color:n,progressValue:i,progressColor:d})=>e.jsxs(x,{className:"relative overflow-hidden border-0 bg-white/80 backdrop-blur-xl shadow-lg hover:shadow-2xl transition-all duration-500",children:[e.jsxs(u,{className:"flex flex-row items-center justify-between space-y-0 pb-3",children:[e.jsx(g,{className:"text-sm font-medium text-gray-600",children:t}),e.jsx("div",{className:`rounded-xl p-2.5 ${n} shadow-sm`,children:e.jsx(l,{className:"h-5 w-5 text-white"})})]}),e.jsxs(h,{className:"space-y-3",children:[e.jsx("div",{className:"text-3xl font-bold tracking-tight",children:r}),s!==void 0&&e.jsxs("div",{className:"flex items-center text-sm",children:[s>=0?e.jsxs("div",{className:"flex items-center gap-1 text-green-600 font-medium",children:[e.jsx(qe,{className:"h-4 w-4"}),e.jsxs("span",{children:[Math.abs(s).toFixed(1),"%"]})]}):e.jsxs("div",{className:"flex items-center gap-1 text-red-600 font-medium",children:[e.jsx(Xe,{className:"h-4 w-4"}),e.jsxs("span",{children:[Math.abs(s).toFixed(1),"%"]})]}),e.jsx("span",{className:"text-gray-500 text-xs ml-2",children:"vs. período anterior"})]}),e.jsx("div",{className:"relative h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full transition-all duration-1000 ease-out ${d||"bg-gradient-to-r from-blue-500 to-blue-600"}`,style:{width:`${i||0}%`,animation:"shimmer 2s infinite"},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",style:{animation:"slide 2s infinite"}})})})]})]});return ae&&z.length===0?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx(Y,{className:"h-12 w-64"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(t=>e.jsx(Y,{className:"h-32"},t))})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-black bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Visão geral das suas métricas de vendas e conversão"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Ie,{value:j,onValueChange:t=>re(t),children:[e.jsx($e,{className:"w-[160px] border-gray-200 dark:border-gray-700 bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm dark:text-white dark:placeholder:text-gray-500",children:e.jsx(Fe,{})}),e.jsxs(Ee,{children:[e.jsx(M,{value:"today",children:"Hoje"}),e.jsx(M,{value:"7days",children:"7 dias"}),e.jsx(M,{value:"30days",children:"30 dias"})]})]}),e.jsx(Se,{onClick:je,disabled:L,variant:"outline",size:"icon",className:"bg-white/80 backdrop-blur-sm border-gray-200 hover:bg-gradient-to-r hover:from-blue-500 hover:to-purple-500 hover:text-white hover:border-transparent transition-all duration-300",children:e.jsx(Te,{className:`h-4 w-4 ${L?"animate-spin":""}`})})]})]}),e.jsx(x,{className:"relative overflow-hidden border-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 backdrop-blur-xl shadow-xl hover:shadow-2xl transition-all duration-500",children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"h-8 w-8 text-purple-500"}),e.jsxs("span",{className:"absolute -top-1 -right-1 flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Usuários Online Agora"}),e.jsx("p",{className:"text-3xl font-bold",children:a.pendingPayments>0?a.pendingPayments:"0"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs(D,{variant:"outline",className:"text-sm",children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-full bg-green-500 mr-2 animate-pulse"}),"Ao Vivo"]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[a.pendingPayments," no checkout"]})]})]})})}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(A,{title:"Receita Total",value:w(a.totalRevenue),change:a.revenueChange,icon:Me,color:"bg-gradient-to-br from-green-500 to-green-600",progressValue:Math.min(a.totalRevenue/1e4*100,100),progressColor:"bg-gradient-to-r from-green-400 via-green-500 to-green-600"}),e.jsx(A,{title:"Pedidos Pagos",value:a.paidOrders.toString(),change:a.ordersChange,icon:Ve,color:"bg-gradient-to-br from-blue-500 to-blue-600",progressValue:Math.min(a.paidOrders/50*100,100),progressColor:"bg-gradient-to-r from-blue-400 via-blue-500 to-blue-600"}),e.jsx(A,{title:"Taxa de Conversão",value:`${a.conversionRate.toFixed(1)}%`,icon:Be,color:"bg-gradient-to-br from-purple-500 to-purple-600",progressValue:a.conversionRate,progressColor:"bg-gradient-to-r from-purple-400 via-purple-500 to-purple-600"}),e.jsx(A,{title:"Ticket Médio",value:w(a.averageOrderValue),change:a.aovChange,icon:He,color:"bg-gradient-to-br from-orange-500 to-orange-600",progressValue:Math.min(a.averageOrderValue/500*100,100),progressColor:"bg-gradient-to-r from-orange-400 via-orange-500 to-orange-600"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(x,{className:"border-0 bg-white/80 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs(u,{children:[e.jsx(g,{children:"Receita ao Longo do Tempo"}),e.jsx(C,{children:"Análise de faturamento por período"})]}),e.jsx(h,{children:e.jsx(J,{width:"100%",height:300,children:e.jsxs(ze,{data:z,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorReceita",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]})}),e.jsx(Q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(V,{dataKey:"date",tick:{fill:"#888",fontSize:12}}),e.jsx(B,{tick:{fill:"#888",fontSize:12}}),e.jsx(Z,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},formatter:t=>w(t)}),e.jsx(Ke,{type:"monotone",dataKey:"receita",stroke:"#8b5cf6",strokeWidth:2,fillOpacity:1,fill:"url(#colorReceita)"})]})})})]}),e.jsxs(x,{className:"border-0 bg-white/80 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs(u,{children:[e.jsx(g,{children:"Status de Pedidos"}),e.jsx(C,{children:"Distribuição por status de pagamento"})]}),e.jsx(h,{children:e.jsx(J,{width:"100%",height:300,children:e.jsxs(Ze,{data:oe,children:[e.jsx(Q,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(V,{dataKey:"date",tick:{fill:"#888",fontSize:12}}),e.jsx(B,{tick:{fill:"#888",fontSize:12}}),e.jsx(Z,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"}}),e.jsx(Ue,{}),e.jsx(k,{dataKey:"pedidos",fill:"#22c55e",name:"Pagos",radius:[4,4,0,0]}),e.jsx(k,{dataKey:"pendentes",fill:"#eab308",name:"Pendentes",radius:[4,4,0,0]}),e.jsx(k,{dataKey:"falhos",fill:"#ef4444",name:"Falhos",radius:[4,4,0,0]})]})})})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs(x,{className:"border-0 bg-gradient-to-br from-green-50 via-emerald-50/50 to-white backdrop-blur-sm hover:shadow-xl transition-all duration-500",children:[e.jsx(u,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(g,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx("div",{className:"rounded-xl p-2 bg-gradient-to-br from-green-500 to-green-600 shadow-sm",children:e.jsx(_,{className:"h-4 w-4 text-white"})}),"Pedidos Pagos"]})})}),e.jsxs(h,{className:"space-y-4",children:[e.jsx("div",{className:"text-4xl font-bold text-green-600 tracking-tight",children:a.paidOrders}),e.jsx("div",{className:"relative h-2 bg-green-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute top-0 left-0 h-full rounded-full bg-gradient-to-r from-green-400 via-green-500 to-green-600 transition-all duration-1000 ease-out",style:{width:`${a.paidOrders/(a.paidOrders+a.pendingPayments+a.failedPayments||1)*100}%`,animation:"shimmer 2s infinite"},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",style:{animation:"slide 2s infinite"}})})}),e.jsxs("p",{className:"text-sm text-gray-600 font-medium",children:[w(a.totalRevenue)," em receita"]})]})]}),e.jsxs(x,{className:"border-0 bg-gradient-to-br from-yellow-50 via-amber-50/50 to-white backdrop-blur-sm hover:shadow-xl transition-all duration-500",children:[e.jsx(u,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(g,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx("div",{className:"rounded-xl p-2 bg-gradient-to-br from-yellow-500 to-yellow-600 shadow-sm",children:e.jsx(ee,{className:"h-4 w-4 text-white"})}),"Pagamentos Pendentes"]})})}),e.jsxs(h,{className:"space-y-4",children:[e.jsx("div",{className:"text-4xl font-bold text-yellow-600 tracking-tight",children:a.pendingPayments}),e.jsx("div",{className:"relative h-2 bg-yellow-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute top-0 left-0 h-full rounded-full bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 transition-all duration-1000 ease-out",style:{width:`${a.pendingPayments/(a.paidOrders+a.pendingPayments+a.failedPayments||1)*100}%`,animation:"shimmer 2s infinite"},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",style:{animation:"slide 2s infinite"}})})}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Aguardando confirmação"})]})]}),e.jsxs(x,{className:"border-0 bg-gradient-to-br from-red-50 via-rose-50/50 to-white backdrop-blur-sm hover:shadow-xl transition-all duration-500",children:[e.jsx(u,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(g,{className:"text-sm font-medium text-gray-600 flex items-center gap-2",children:[e.jsx("div",{className:"rounded-xl p-2 bg-gradient-to-br from-red-500 to-red-600 shadow-sm",children:e.jsx(te,{className:"h-4 w-4 text-white"})}),"Pagamentos Falhados"]})})}),e.jsxs(h,{className:"space-y-4",children:[e.jsx("div",{className:"text-4xl font-bold text-red-600 tracking-tight",children:a.failedPayments}),e.jsx("div",{className:"relative h-2 bg-red-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"absolute top-0 left-0 h-full rounded-full bg-gradient-to-r from-red-400 via-red-500 to-red-600 transition-all duration-1000 ease-out",style:{width:`${a.failedPayments/(a.paidOrders+a.pendingPayments+a.failedPayments||1)*100}%`,animation:"shimmer 2s infinite"},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",style:{animation:"slide 2s infinite"}})})}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Requer atenção"})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(x,{className:"border-0 bg-white/80 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs(u,{children:[e.jsx(g,{children:"Atividade em Tempo Real"}),e.jsx(C,{children:"Últimas ações no checkout"})]}),e.jsx(h,{children:K.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(W,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Nenhuma atividade recente"})]}):e.jsx("div",{className:"space-y-3",children:K.map(t=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-muted/50 transition-colors border",children:[t.image?e.jsx("img",{src:t.image,alt:t.title,className:"w-12 h-12 rounded object-cover"}):e.jsx("div",{className:`rounded-full p-2 ${t.status==="success"?"bg-green-500/10 text-green-500":t.status==="error"?"bg-red-500/10 text-red-500":t.status==="warning"?"bg-yellow-500/10 text-yellow-500":"bg-blue-500/10 text-blue-500"}`,children:t.status==="success"?e.jsx(_,{className:"h-5 w-5"}):t.status==="error"?e.jsx(te,{className:"h-5 w-5"}):t.status==="warning"?e.jsx(Ye,{className:"h-5 w-5"}):e.jsx(ee,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:t.description})]}),e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:t.time})]},t.id))})})]}),e.jsxs(x,{className:"border-0 bg-white/80 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs(u,{children:[e.jsx(g,{children:"Últimas Transações"}),e.jsx(C,{children:"Pedidos mais recentes"})]}),e.jsx(h,{children:U.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(We,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Nenhuma transação recente"})]}):e.jsx("div",{className:"space-y-3",children:U.map(t=>{var l,n,i,d;const r=(n=(l=t.items)==null?void 0:l[0])==null?void 0:n.image,s=((d=(i=t.items)==null?void 0:i[0])==null?void 0:d.name)||"Produto";return e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-muted/50 transition-colors border",children:[r?e.jsx("img",{src:r,alt:s,className:"w-12 h-12 rounded object-cover"}):e.jsx("div",{className:"w-12 h-12 rounded bg-muted flex items-center justify-center",children:e.jsx(Je,{className:"h-6 w-6 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:s}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.customerName||"Cliente"," •"," ",t.orderNumber]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-bold",children:w(t.amount)}),e.jsx(D,{variant:t.status==="PAID"?"default":t.status==="PENDING"?"secondary":"destructive",className:"text-xs",children:t.status==="PAID"?"Pago":t.status==="PENDING"?"Pendente":"Falhou"})]})]},t.id)})})})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(x,{className:"border-0 bg-white/80 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs(u,{children:[e.jsx(g,{children:"Carrinhos Abandonados"}),e.jsx(C,{children:"Oportunidades de recuperação"})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Abandonados"}),e.jsx("p",{className:"text-3xl font-bold",children:a.abandonedCarts})]}),e.jsxs(D,{variant:"destructive",className:"text-lg px-3 py-1",children:[a.abandonmentRate.toFixed(1),"%"]})]}),e.jsx(Oe,{value:a.abandonmentRate,className:"h-2"}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Recuperados"}),e.jsx("p",{className:"text-xl font-bold text-green-500",children:a.recoveredCarts})]}),e.jsxs(D,{variant:"outline",className:"text-green-500",children:[a.recoveryRate.toFixed(1),"% recuperação"]})]})]})]}),e.jsxs(x,{className:"border-0 bg-white/80 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs(u,{children:[e.jsx(g,{children:"Clientes"}),e.jsx(C,{children:"Base de clientes"})]}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"}),e.jsx("p",{className:"text-3xl font-bold",children:a.totalCustomers})]}),e.jsx(Qe,{className:"h-8 w-8 text-muted-foreground"})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Novos Clientes"}),e.jsx("p",{className:"text-xl font-bold text-blue-500",children:a.newCustomers})]}),e.jsx(D,{variant:"outline",className:"text-blue-500",children:"Este período"})]})]})]})]})]})}export{jt as default};

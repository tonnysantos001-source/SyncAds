import{d as Ne,r as g,s as m,j as e,N as j,B as u,aA as M,I as y,ae as S,ar as E,aC as ke,a9 as q,C as $,e as I,f as D,g as O,h as _,aH as Y,ap as R,n as T,aI as Ce,aJ as Se,am as Te,aK as Ae,aL as Ke,aM as Pe}from"./index-BpgP6qTW.js";import{L as o}from"./label-Bn_SoVD1.js";import{S as Ee}from"./switch-BpjxrvSC.js";import{D as qe,a as Re,b as $e,c as Ie,d as De,e as _e,f as Ge}from"./dialog-M5jkG9Rw.js";import{S as U,a as J,b as Q,c as W,d as A}from"./select-DY3DTva5.js";import{T as Ve,a as Fe,b as He,c as b,d as ze,e as f}from"./table-CUMwv-bd.js";import{A as Z,b as ee,a as ae}from"./alert-CL8e0jfa.js";import{S as te}from"./SuperAdminLayout-BpN5I4nD.js";import"./index-BIR7dJMf.js";const Xe={slug:"paguex",name:"Pague-X",type:"payment_processor",endpoints:{test:"https://api.inpagamentos.com/v1/transactions"},authType:"basic",requiredFields:["publicKey","secretKey"],async detect(t){const{publicKey:n,secretKey:r}=t;if(!n||!r)return{success:!1,message:"Pague-X: publicKey e secretKey são obrigatórios"};try{const c=btoa(`${n}:${r}`),h=await fetch(`${this.endpoints.test}?limit=1`,{method:"GET",headers:{Authorization:`Basic ${c}`,"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});return h.ok?{success:!0,gateway:{slug:this.slug,name:this.name,type:this.type},message:"Pague-X detectado e credenciais válidas",capabilities:{pix:!0,credit_card:!0,debit_card:!0,boleto:!0}}:{success:!1,message:`Pague-X: Erro ${h.status}`}}catch(c){return{success:!1,message:`Pague-X: ${c.message}`}}}},Be={slug:"mercadopago",name:"Mercado Pago",type:"payment_processor",endpoints:{test:"https://api.mercadopago.com/v1/account/settings"},authType:"bearer",requiredFields:["accessToken"],async detect(t){const{accessToken:n}=t;if(!n)return{success:!1,message:"Mercado Pago: accessToken é obrigatório"};try{const r=await fetch(this.endpoints.test,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});return r.ok?{success:!0,gateway:{slug:this.slug,name:this.name,type:this.type},message:"Mercado Pago detectado e credenciais válidas",capabilities:{pix:!0,credit_card:!0,debit_card:!1,boleto:!0}}:{success:!1,message:`Mercado Pago: Erro ${r.status}`}}catch(r){return{success:!1,message:`Mercado Pago: ${r.message}`}}}},Le={slug:"pagseguro",name:"PagSeguro",type:"payment_processor",endpoints:{test:"https://api.pagseguro.com/charges"},authType:"bearer",requiredFields:["apiKey"],async detect(t){const{apiKey:n}=t;if(!n)return{success:!1,message:"PagSeguro: apiKey é obrigatório"};try{const r=await fetch(this.endpoints.test,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});return r.ok||r.status===400?{success:!0,gateway:{slug:this.slug,name:this.name,type:this.type},message:"PagSeguro detectado e credenciais válidas",capabilities:{pix:!0,credit_card:!0,debit_card:!0,boleto:!0}}:{success:!1,message:`PagSeguro: Erro ${r.status}`}}catch(r){return{success:!1,message:`PagSeguro: ${r.message}`}}}},Me={slug:"stripe",name:"Stripe",type:"payment_processor",endpoints:{test:"https://api.stripe.com/v1/balance"},authType:"bearer",requiredFields:["secretKey"],async detect(t){const{secretKey:n}=t;if(!n)return{success:!1,message:"Stripe: secretKey é obrigatório"};try{const r=await fetch(this.endpoints.test,{method:"GET",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});return r.ok?{success:!0,gateway:{slug:this.slug,name:this.name,type:this.type},message:"Stripe detectado e credenciais válidas",capabilities:{pix:!1,credit_card:!0,debit_card:!0,boleto:!1}}:{success:!1,message:`Stripe: Erro ${r.status}`}}catch(r){return{success:!1,message:`Stripe: ${r.message}`}}}},Oe={slug:"asaas",name:"Asaas",type:"payment_processor",endpoints:{test:"https://api.asaas.com/v3/customers"},authType:"apikey",requiredFields:["apiKey"],async detect(t){const{apiKey:n}=t;if(!n)return{success:!1,message:"Asaas: apiKey é obrigatório"};try{const r=await fetch(`${this.endpoints.test}?limit=1`,{method:"GET",headers:{access_token:n,"Content-Type":"application/json"},signal:AbortSignal.timeout(5e3)});return r.ok?{success:!0,gateway:{slug:this.slug,name:this.name,type:this.type},message:"Asaas detectado e credenciais válidas",capabilities:{pix:!0,credit_card:!0,debit_card:!1,boleto:!0}}:{success:!1,message:`Asaas: Erro ${r.status}`}}catch(r){return{success:!1,message:`Asaas: ${r.message}`}}}},Ye=[Xe,Be,Le,Me,Oe];async function Ue(t){console.log("[Auto-Detect] Iniciando detecção de gateway...");const n={publicKey:t.publicKey||t.PUBLIC_KEY||t.public_key,secretKey:t.secretKey||t.SECRET_KEY||t.secret_key,apiKey:t.apiKey||t.API_KEY||t.api_key,apiSecret:t.apiSecret||t.API_SECRET||t.api_secret,accessToken:t.accessToken||t.ACCESS_TOKEN||t.access_token,clientId:t.clientId||t.CLIENT_ID||t.client_id,clientSecret:t.clientSecret||t.CLIENT_SECRET||t.client_secret};console.log("[Auto-Detect] Credenciais normalizadas:",Object.keys(n).filter(r=>n[r]));for(const r of Ye){console.log(`[Auto-Detect] Testando ${r.name}...`);try{const c=await r.detect(n);if(c.success)return console.log(`[Auto-Detect] ✅ ${r.name} detectado!`),c;console.log(`[Auto-Detect] ❌ ${r.name}: ${c.message}`)}catch(c){console.error(`[Auto-Detect] Erro ao testar ${r.name}:`,c.message)}}return{success:!1,message:"Nenhum gateway compatível detectado. Verifique suas credenciais."}}const K=({title:t,value:n,description:r,icon:c,gradient:h,delay:p=0})=>e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:p},whileHover:{scale:1.02},children:e.jsxs($,{className:"border-gray-700/50 bg-gray-900/50 backdrop-blur-xl hover:border-gray-600 transition-all group cursor-pointer relative overflow-hidden",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${h} opacity-10 group-hover:opacity-20 transition-opacity`}),e.jsxs(I,{className:"flex flex-row items-center justify-between space-y-0 pb-2 relative z-10",children:[e.jsx(D,{className:"text-sm font-medium text-gray-300",children:t}),e.jsx("div",{className:`p-2.5 rounded-xl bg-gradient-to-br ${h} shadow-lg`,children:e.jsx(c,{className:"h-4 w-4 text-white"})})]}),e.jsxs(_,{className:"relative z-10",children:[e.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:n}),e.jsx("p",{className:"text-xs text-gray-400",children:r})]})]})});function ia(){const{toast:t}=Ne(),[n,r]=g.useState(!0),[c,h]=g.useState([]),[p,se]=g.useState({totalTransactions:0,adminTransactions:0,clientTransactions:0,adminRevenue:0,splitPercentage:0}),[re,ie]=g.useState([]),[ne,w]=g.useState(!1),[C,G]=g.useState(null),[s,l]=g.useState({name:"",description:"",type:"frequency",frequencyEvery:10,frequencyTake:2,percentage:20,minValue:0,maxValue:0,adminGatewayId:"",isActive:!0,priority:0}),[d,P]=g.useState({publicKey:"",secretKey:""}),[V,F]=g.useState(!1),[H,z]=g.useState(!1),[v,X]=g.useState({configured:!1});g.useEffect(()=>{N(),B()},[]);const N=async()=>{r(!0);try{await Promise.all([ce(),oe(),le()])}catch(a){console.error("Error loading data:",a)}finally{r(!1)}},ce=async()=>{const{data:a,error:i}=await m.from("PaymentSplitRule").select("*").order("priority",{ascending:!1});!i&&a&&h(a)},oe=async()=>{const{data:a}=await m.from("PaymentSplitLog").select("decision, adminRevenue");if(a){const i=a.length,x=a.filter(k=>k.decision==="admin").length,fe=a.filter(k=>k.decision==="client").length,je=a.reduce((k,we)=>k+(we.adminRevenue||0),0),ve=i>0?x/i*100:0;se({totalTransactions:i,adminTransactions:x,clientTransactions:fe,adminRevenue:je,splitPercentage:ve})}},le=async()=>{const{data:a}=await m.from("Gateway").select("*").eq("isActive",!0).order("name");a&&ie(a)},B=async()=>{var i;const{data:a}=await m.from("GatewayConfig").select("credentials").eq("gatewayId","ebac558d-e799-4246-b7fe-2c7c68393460").eq("userId","admin").single();if(a!=null&&a.credentials){const x=a.credentials;X({configured:!0,publicKey:((i=x.publicKey)==null?void 0:i.substring(0,20))+"***"}),P({publicKey:x.publicKey||"",secretKey:x.secretKey||""})}},de=async()=>{if(!d.publicKey||!d.secretKey){t({title:"Erro",description:"Preencha Public Key e Secret Key",variant:"destructive"});return}F(!0);try{const{error:a}=await m.from("GatewayConfig").upsert({gatewayId:"ebac558d-e799-4246-b7fe-2c7c68393460",userId:"admin",credentials:{publicKey:d.publicKey,secretKey:d.secretKey},isActive:!0});if(a)throw a;t({title:"Sucesso!",description:"Credenciais salvas com sucesso"}),B()}catch(a){t({title:"Erro",description:a.message,variant:"destructive"})}finally{F(!1)}},ge=async()=>{var a;if(!d.publicKey&&!d.secretKey){t({title:"Erro",description:"Preencha pelo menos uma credencial antes de testar",variant:"destructive"});return}z(!0);try{const i=await Ue({publicKey:d.publicKey,secretKey:d.secretKey});i.success&&i.gateway?(t({title:`${i.gateway.name} Detectado!`,description:i.message}),X({configured:!0,publicKey:((a=d.publicKey)==null?void 0:a.substring(0,20))+"***",gatewayName:i.gateway.name,gatewaySlug:i.gateway.slug})):t({title:"Gateway Não Detectado",description:i.message,variant:"destructive"})}catch(i){t({title:"Erro de Conexão",description:i.message,variant:"destructive"})}finally{z(!1)}},me=async()=>{try{const a={name:s.name,description:s.description,type:s.type,frequencyEvery:s.type==="frequency"?s.frequencyEvery:null,frequencyTake:s.type==="frequency"?s.frequencyTake:null,percentage:s.type==="percentage"?s.percentage:null,minValue:s.type==="value"?s.minValue:null,maxValue:s.type==="value"?s.maxValue:null,adminGatewayId:s.adminGatewayId||null,isActive:s.isActive,priority:s.priority};C?(await m.from("PaymentSplitRule").update(a).eq("id",C.id),t({title:"Sucesso!",description:"Regra atualizada com sucesso"})):(await m.from("PaymentSplitRule").insert(a),t({title:"Sucesso!",description:"Regra criada com sucesso"})),w(!1),L(),N()}catch(a){t({title:"Erro",description:a.message,variant:"destructive"})}},ue=async(a,i)=>{await m.from("PaymentSplitRule").update({isActive:!i}).eq("id",a),t({title:"Sucesso!",description:`Regra ${i?"desativada":"ativada"}`}),N()},ye=async a=>{confirm("Tem certeza que deseja excluir esta regra?")&&(await m.from("PaymentSplitRule").delete().eq("id",a),t({title:"Sucesso!",description:"Regra excluída"}),N())},pe=async a=>{await m.from("PaymentSplitRule").update({transactionCounter:0}).eq("id",a),t({title:"Sucesso!",description:"Contador resetado"}),N()},xe=a=>{G(a),l({name:a.name,description:a.description||"",type:a.type,frequencyEvery:a.frequencyEvery||10,frequencyTake:a.frequencyTake||2,percentage:a.percentage||20,minValue:a.minValue||0,maxValue:a.maxValue||0,adminGatewayId:a.adminGatewayId||"",isActive:a.isActive,priority:a.priority}),w(!0)},L=()=>{l({name:"",description:"",type:"frequency",frequencyEvery:10,frequencyTake:2,percentage:20,minValue:0,maxValue:0,adminGatewayId:"",isActive:!0,priority:0}),G(null)},he=a=>{switch(a){case"frequency":return Pe;case"percentage":return Ke;case"value":return q;case"time":return Ae;default:return S}},be=a=>{switch(a.type){case"frequency":return`A cada ${a.frequencyEvery} transações, ${a.frequencyTake} vão para o admin`;case"percentage":return`${a.percentage}% das transações para o admin`;case"value":return`Transações entre R$ ${a.minValue||0} e R$ ${a.maxValue||"∞"}`;default:return a.description||""}};return n?e.jsx(te,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsx(j.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-cyan-500/30 border-t-cyan-500 rounded-full"})})}):e.jsx(te,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(j.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-400 to-blue-400 bg-clip-text text-transparent",children:"Split de Pagamento"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Controle a distribuição de transações entre seu gateway e o dos clientes"})]}),e.jsxs(qe,{open:ne,onOpenChange:w,children:[e.jsx(Re,{asChild:!0,children:e.jsxs(u,{onClick:L,className:"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(M,{className:"h-5 w-5 mr-2"}),"Nova Regra"]})}),e.jsxs($e,{className:"max-w-2xl bg-gray-900 border-gray-700",children:[e.jsxs(Ie,{children:[e.jsx(De,{className:"text-white",children:C?"Editar Regra":"Criar Nova Regra"}),e.jsx(_e,{className:"text-gray-400",children:"Configure como as transações serão distribuídas"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-gray-300",children:"Nome da Regra"}),e.jsx(y,{value:s.name,onChange:a=>l({...s,name:a.target.value}),placeholder:"Ex: Split 20% Admin",className:"bg-gray-800 border-gray-700 text-white"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-gray-300",children:"Descrição"}),e.jsx(y,{value:s.description,onChange:a=>l({...s,description:a.target.value}),className:"bg-gray-800 border-gray-700 text-white"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-gray-300",children:"Tipo de Regra"}),e.jsxs(U,{value:s.type,onValueChange:a=>l({...s,type:a}),children:[e.jsx(J,{className:"bg-gray-800 border-gray-700 text-white",children:e.jsx(Q,{})}),e.jsxs(W,{className:"bg-gray-800 border-gray-700",children:[e.jsx(A,{value:"frequency",children:"Frequência (A cada X transações)"}),e.jsx(A,{value:"percentage",children:"Percentual (X% das transações)"}),e.jsx(A,{value:"value",children:"Valor (Transações acima de X reais)"})]})]})]}),s.type==="frequency"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-gray-300",children:"A cada quantas transações?"}),e.jsx(y,{type:"number",value:s.frequencyEvery,onChange:a=>l({...s,frequencyEvery:parseInt(a.target.value)}),min:1,className:"bg-gray-800 border-gray-700 text-white"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-gray-300",children:"Quantas vão para o admin?"}),e.jsx(y,{type:"number",value:s.frequencyTake,onChange:a=>l({...s,frequencyTake:parseInt(a.target.value)}),min:1,className:"bg-gray-800 border-gray-700 text-white"})]})]}),s.type==="percentage"&&e.jsxs("div",{children:[e.jsx(o,{className:"text-gray-300",children:"Percentual para o admin (%)"}),e.jsx(y,{type:"number",value:s.percentage,onChange:a=>l({...s,percentage:parseFloat(a.target.value)}),min:0,max:100,step:.1,className:"bg-gray-800 border-gray-700 text-white"})]}),s.type==="value"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-gray-300",children:"Valor Mínimo (R$)"}),e.jsx(y,{type:"number",value:s.minValue,onChange:a=>l({...s,minValue:parseFloat(a.target.value)}),min:0,step:.01,className:"bg-gray-800 border-gray-700 text-white"})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-gray-300",children:"Valor Máximo (R$)"}),e.jsx(y,{type:"number",value:s.maxValue,onChange:a=>l({...s,maxValue:parseFloat(a.target.value)}),min:0,step:.01,className:"bg-gray-800 border-gray-700 text-white"})]})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-gray-300",children:"Gateway do Admin"}),e.jsxs(U,{value:s.adminGatewayId,onValueChange:a=>l({...s,adminGatewayId:a}),children:[e.jsx(J,{className:"bg-gray-800 border-gray-700 text-white",children:e.jsx(Q,{placeholder:"Selecione um gateway"})}),e.jsx(W,{className:"bg-gray-800 border-gray-700",children:re.map(a=>e.jsx(A,{value:a.id,children:a.name},a.id))})]})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-gray-300",children:"Prioridade (maior = maior prioridade)"}),e.jsx(y,{type:"number",value:s.priority,onChange:a=>l({...s,priority:parseInt(a.target.value)}),min:0,className:"bg-gray-800 border-gray-700 text-white"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800/50 rounded-lg border border-gray-700",children:[e.jsx(o,{className:"text-gray-300",children:"Regra Ativa"}),e.jsx(Ee,{checked:s.isActive,onCheckedChange:a=>l({...s,isActive:a})})]})]}),e.jsxs(Ge,{children:[e.jsx(u,{variant:"outline",onClick:()=>w(!1),className:"border-gray-700 text-gray-300 hover:bg-gray-800",children:"Cancelar"}),e.jsx(u,{onClick:me,className:"bg-gradient-to-r from-cyan-500 to-blue-500 hover:from-cyan-600 hover:to-blue-600 text-white border-0",children:C?"Atualizar":"Criar"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(K,{title:"Total",value:p.totalTransactions,description:"Transações processadas",icon:S,gradient:"from-cyan-500 to-blue-500",delay:.1}),e.jsx(K,{title:"Admin",value:p.adminTransactions,description:`${p.splitPercentage.toFixed(1)}% do total`,icon:E,gradient:"from-green-500 to-emerald-500",delay:.2}),e.jsx(K,{title:"Cliente",value:p.clientTransactions,description:`${(100-p.splitPercentage).toFixed(1)}% do total`,icon:ke,gradient:"from-blue-500 to-indigo-500",delay:.3}),e.jsx(K,{title:"Receita Admin",value:`R$ ${p.adminRevenue.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,description:"Via split",icon:q,gradient:"from-purple-500 to-pink-500",delay:.4})]}),e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsxs($,{className:"border-gray-700/50 bg-gray-900/50 backdrop-blur-xl",children:[e.jsxs(I,{children:[e.jsx(D,{className:"text-white",children:"Gateway do Admin (Seu Gateway)"}),e.jsx(O,{className:"text-gray-400",children:"Configure o gateway que receberá as transações quando o split direcionar para o admin. Use suas credenciais da Pague-X ou outro gateway compatível."})]}),e.jsx(_,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Z,{className:"border-gray-700/50 bg-gray-800/50",children:[e.jsx(Y,{className:"h-4 w-4 text-cyan-400"}),e.jsx(ee,{className:"text-white",children:"Sistema Multi-Gateway com Auto-Detecção"}),e.jsx(ae,{className:"text-gray-400",children:'O sistema detecta automaticamente qual gateway você está usando. Suporta: Pague-X, Mercado Pago, PagSeguro, Stripe, Asaas e outros. Insira suas credenciais e clique em "Testar Conexão".'})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx(o,{children:"Gateway"}),v.configured&&v.gatewayName?e.jsxs("div",{className:"flex items-center gap-2 p-3 border-0 rounded-lg bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20 ring-1 ring-green-200 dark:ring-green-800/50",children:[e.jsx(E,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:v.gatewayName})]}):e.jsx("div",{className:"p-3 border-0 rounded-lg bg-gray-100 dark:bg-gray-800 text-sm text-gray-600 dark:text-gray-400 ring-1 ring-gray-200 dark:ring-gray-700",children:"Auto-detectado após testar conexão"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Suportamos: Pague-X, Mercado Pago, PagSeguro, Stripe, Asaas"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Public Key"}),e.jsx(y,{type:"text",placeholder:"Sua Public Key da Pague-X",className:"font-mono text-sm bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600",value:d.publicKey,onChange:a=>P({...d,publicKey:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Secret Key"}),e.jsx(y,{type:"password",placeholder:"Sua Secret Key da Pague-X",className:"font-mono text-sm bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600",value:d.secretKey,onChange:a=>P({...d,secretKey:a.target.value})})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{onClick:de,disabled:V,children:V?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-4 w-4 mr-2 animate-spin"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Salvar Credenciais"]})}),e.jsx(u,{variant:"outline",onClick:ge,disabled:H,children:H?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-4 w-4 mr-2 animate-spin"}),"Testando..."]}):"Testar Conexão"})]}),v.configured&&e.jsx("div",{className:"p-5 bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-950/20 dark:to-cyan-950/20 backdrop-blur-sm rounded-xl border-0 ring-1 ring-blue-200/50 dark:ring-blue-700/50 shadow-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2.5 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-xl shadow-lg",children:e.jsx(q,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-1",children:"Gateway Configurado"}),e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[v.gatewayName||"Gateway"," • Configurado e ativo"]}),e.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 font-mono",children:["Public Key: ",v.publicKey]})]}),e.jsx(T,{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white border-0 shadow-md",children:"Ativo"})]})})]})})]})}),e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:e.jsxs(Z,{className:"border-0 bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-950/20 dark:to-orange-950/20 backdrop-blur-sm ring-1 ring-amber-200/50 dark:ring-amber-700/50 rounded-xl shadow-lg",children:[e.jsx(Y,{className:"h-5 w-5 text-amber-600"}),e.jsx(ee,{className:"text-gray-900 dark:text-white font-bold",children:"Como funciona?"}),e.jsx(ae,{className:"text-gray-700 dark:text-gray-300",children:"O sistema distribui automaticamente as transações entre seu gateway (configurado acima) e o gateway do cliente. Configure regras baseadas em frequência, percentual ou valor."})]})}),e.jsx(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:e.jsxs($,{className:"border-0 bg-white/95 dark:bg-gray-900/95 backdrop-blur-xl shadow-2xl ring-1 ring-gray-200/50 dark:ring-gray-700/50 rounded-xl",children:[e.jsxs(I,{children:[e.jsxs(D,{className:"text-2xl text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(S,{className:"h-6 w-6 text-cyan-600"}),"Regras Configuradas"]}),e.jsx(O,{className:"text-gray-600 dark:text-gray-400",children:"Gerenciar regras de split de pagamento"})]}),e.jsx(_,{children:c.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"p-4 rounded-xl bg-gray-100 dark:bg-gray-800 w-fit mx-auto mb-4",children:e.jsx(S,{className:"h-12 w-12 text-gray-400"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 text-lg font-medium",children:"Nenhuma regra configurada"}),e.jsxs(u,{onClick:()=>w(!0),className:"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(M,{className:"h-5 w-5 mr-2"}),"Criar Primeira Regra"]})]}):e.jsx("div",{className:"rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700",children:e.jsxs(Ve,{children:[e.jsx(Fe,{children:e.jsxs(He,{className:"bg-gray-50 dark:bg-gray-800/50",children:[e.jsx(b,{className:"font-semibold",children:"Nome"}),e.jsx(b,{className:"font-semibold",children:"Tipo"}),e.jsx(b,{className:"font-semibold",children:"Configuração"}),e.jsx(b,{className:"font-semibold",children:"Contador"}),e.jsx(b,{className:"font-semibold",children:"Stats"}),e.jsx(b,{className:"font-semibold",children:"Status"}),e.jsx(b,{className:"text-right font-semibold",children:"Ações"})]})}),e.jsx(ze,{children:c.map((a,i)=>{const x=he(a.type);return e.jsxs(j.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i*.05},className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[e.jsxs(f,{children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:a.name}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.description})]}),e.jsx(f,{children:e.jsxs(T,{className:"flex items-center gap-1 w-fit bg-gradient-to-r from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 text-purple-700 dark:text-purple-300 border-0",children:[e.jsx(x,{className:"h-3 w-3"}),a.type]})}),e.jsx(f,{className:"text-sm text-gray-700 dark:text-gray-300",children:be(a)}),e.jsx(f,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm font-semibold text-gray-900 dark:text-white",children:a.transactionCounter}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>pe(a.id),className:"hover:bg-blue-50 dark:hover:bg-blue-950/20",children:e.jsx(R,{className:"h-4 w-4"})})]})}),e.jsx(f,{children:e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:["Total: ",a.totalTransactions]}),e.jsxs("div",{className:"text-green-600 dark:text-green-400 font-medium",children:["Admin: ",a.adminTransactions]}),e.jsxs("div",{className:"text-blue-600 dark:text-blue-400 font-medium",children:["Cliente: ",a.clientTransactions]})]})}),e.jsx(f,{children:a.isActive?e.jsx(T,{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white border-0",children:"Ativa"}):e.jsx(T,{className:"bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-300 border-0",children:"Inativa"})}),e.jsx(f,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>ue(a.id,a.isActive),className:"hover:bg-gray-700 text-gray-300",children:e.jsx(Ce,{className:`h-4 w-4 ${a.isActive?"text-red-500":"text-green-500"}`})}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>xe(a),className:"hover:bg-blue-50 dark:hover:bg-blue-950/20 text-blue-600 dark:text-blue-400",children:e.jsx(Se,{className:"h-4 w-4"})}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>ye(a.id),className:"hover:bg-red-50 dark:hover:bg-red-950/20 text-red-600 dark:text-red-400",children:e.jsx(Te,{className:"h-4 w-4"})})]})})]},a.id)})})]})})})]})})]})})}export{ia as default};

import{s as p,r as S,f as ee,u as re,j as e,B as A,g as P,h as L,i as q,l as U,b as te,k as ae,ad as se,o as B,I as D,T as ne}from"./index-C0WBWr70.js";import{L as w}from"./label-6Y6LwFMu.js";import{T as ie,a as oe,b as G,c as E,d as ce,e as C}from"./table-J0OU4YnV.js";import{D as le,b as de,c as ge,d as ue,e as he,f as me}from"./dialog-D40C-coh.js";import{S as z,a as $,b as X,c as Y,d as I}from"./select-050JiH_z.js";import{S as H}from"./switch-TB6GKsmg.js";import{T as J}from"./textarea-BJqVX1fq.js";import{A as xe,a as ve}from"./alert-Cx0Dx0ye.js";import{S as M}from"./skeleton-BNyQ6Lye.js";import{P as K}from"./plus-Ucckso8s.js";import{T as pe}from"./target-BpbTjqBZ.js";import{M as je}from"./mouse-pointer-DXobIJox.js";import{T as fe}from"./trending-up-sRFZ3tT6.js";import{E as Q}from"./external-link-Ck8Oyu38.js";import{S as Re}from"./square-pen-BrrwZWqY.js";import{T as we}from"./trash-2-CZiv5C3D.js";import{C as O}from"./circle-alert-CWZ3HcNl.js";import"./index-Hh1D4wBN.js";import"./index-D2NACwmI.js";const u={async createRule(s){try{const{data:r,error:t}=await p.from("RedirectRule").insert({...s,currentRedirects:0,conversions:0}).select().single();if(t)throw t;return r}catch(r){throw console.error("Error creating redirect rule:",r),r}},async updateRule(s,r){try{const{data:t,error:i}=await p.from("RedirectRule").update({...r,updatedAt:new Date().toISOString()}).eq("id",s).select().single();if(i)throw i;return t}catch(t){throw console.error("Error updating redirect rule:",t),t}},async deleteRule(s){try{const{error:r}=await p.from("RedirectRule").delete().eq("id",s);if(r)throw r}catch(r){throw console.error("Error deleting redirect rule:",r),r}},async listRules(s,r){try{let t=p.from("RedirectRule").select("*").eq("userId",s).order("priority",{ascending:!1}).order("createdAt",{ascending:!1});r!=null&&r.status&&(t=t.eq("status",r.status)),r!=null&&r.trigger&&(t=t.eq("trigger",r.trigger)),(r==null?void 0:r.active)!==void 0&&(r.active?t=t.eq("status","ACTIVE"):t=t.neq("status","ACTIVE"));const{data:i,error:c}=await t;if(c)throw c;return i}catch(t){throw console.error("Error listing redirect rules:",t),t}},async getRuleById(s){try{const{data:r,error:t}=await p.from("RedirectRule").select("*").eq("id",s).single();if(t)throw t;return r}catch(r){throw console.error("Error getting redirect rule:",r),r}},async toggleRule(s,r){try{const t=r?"ACTIVE":"INACTIVE";return await u.updateRule(s,{status:t})}catch(t){throw console.error("Error toggling redirect rule:",t),t}},async updatePriority(s,r){try{return await u.updateRule(s,{priority:r})}catch(t){throw console.error("Error updating redirect priority:",t),t}},async getApplicableRules(s,r){try{const t=new Date().toISOString();let i=p.from("RedirectRule").select("*").eq("userId",s).eq("status","ACTIVE").or(`validFrom.is.null,validFrom.lte.${t}`).or(`validUntil.is.null,validUntil.gte.${t}`).order("priority",{ascending:!1});r.trigger&&(i=i.eq("trigger",r.trigger));const{data:c,error:d}=await i;if(d)throw d;let l=c;return r.page&&(l=l.filter(o=>o.applicablePages&&o.applicablePages.length>0?o.applicablePages.includes(r.page):o.excludedPages&&o.excludedPages.length>0?!o.excludedPages.includes(r.page):!0)),l=l.filter(o=>o.conditions?!(r.cartValue!==void 0&&(o.conditions.minCartValue&&r.cartValue<o.conditions.minCartValue||o.conditions.maxCartValue&&r.cartValue>o.conditions.maxCartValue)||o.conditions.productIds&&o.conditions.productIds.length>0&&r.productIds&&!r.productIds.some(N=>o.conditions.productIds.includes(N))||o.conditions.utmSource&&r.utmSource!==o.conditions.utmSource||o.conditions.deviceType&&r.deviceType!==o.conditions.deviceType||o.conditions.newVisitors!==void 0&&r.isNewVisitor!==void 0&&o.conditions.newVisitors&&!r.isNewVisitor||o.conditions.returningVisitors!==void 0&&r.isNewVisitor!==void 0&&o.conditions.returningVisitors&&r.isNewVisitor):!0),l=l.filter(o=>o.maxRedirects?o.currentRedirects<o.maxRedirects:!0),l}catch(t){throw console.error("Error getting applicable rules:",t),t}},async duplicateRule(s){try{const r=await u.getRuleById(s),{id:t,createdAt:i,updatedAt:c,...d}=r;return await u.createRule({...d,name:`${r.name} (Cópia)`,status:"INACTIVE",currentRedirects:0,conversions:0})}catch(r){throw console.error("Error duplicating redirect rule:",r),r}},async logRedirect(s){try{const{data:r,error:t}=await p.from("RedirectLog").insert(s).select().single();if(t)throw t;const i=await u.getRuleById(s.ruleId);return await u.updateRule(s.ruleId,{currentRedirects:i.currentRedirects+1}),r}catch(r){throw console.error("Error logging redirect:",r),r}},async markAsConverted(s,r,t){try{const i=await u.getLogById(s),{data:c,error:d}=await p.from("RedirectLog").update({converted:!0,convertedAt:new Date().toISOString(),orderId:r,conversionValue:t}).eq("id",s).select().single();if(d)throw d;const l=await u.getRuleById(i.ruleId);return await u.updateRule(i.ruleId,{conversions:l.conversions+1}),c}catch(i){throw console.error("Error marking redirect as converted:",i),i}},async getLogById(s){try{const{data:r,error:t}=await p.from("RedirectLog").select("*").eq("id",s).single();if(t)throw t;return r}catch(r){throw console.error("Error getting redirect log:",r),r}},async getLogsBySession(s){try{const{data:r,error:t}=await p.from("RedirectLog").select("*").eq("sessionId",s).order("createdAt",{ascending:!1});if(t)throw t;return r}catch(r){throw console.error("Error getting redirect logs by session:",r),r}},async getLogs(s,r){try{let t=p.from("RedirectLog").select("*").eq("userId",s).order("createdAt",{ascending:!1});r!=null&&r.ruleId&&(t=t.eq("ruleId",r.ruleId)),(r==null?void 0:r.converted)!==void 0&&(t=t.eq("converted",r.converted)),r!=null&&r.trigger&&(t=t.eq("trigger",r.trigger)),r!=null&&r.dateFrom&&(t=t.gte("createdAt",r.dateFrom)),r!=null&&r.dateTo&&(t=t.lte("createdAt",r.dateTo)),r!=null&&r.limit&&(t=t.limit(r.limit));const{data:i,error:c}=await t;if(c)throw c;return i}catch(t){throw console.error("Error getting redirect logs:",t),t}},async getAnalytics(s,r){try{const t=await u.listRules(s);let i=p.from("RedirectLog").select("*").eq("userId",s);r&&(i=i.gte("createdAt",r.from).lte("createdAt",r.to));const{data:c,error:d}=await i;if(d)throw d;const l=c,o=t.length,f=t.filter(g=>g.status==="ACTIVE").length,N=l.length,n=l.filter(g=>g.converted).length,x=N>0?n/N*100:0,R=l.filter(g=>g.converted&&g.conversionValue).reduce((g,m)=>g+(m.conversionValue||0),0),j=n>0?R/n:0,T=["POST_PURCHASE","ABANDONED_CART","EXIT_INTENT","TIME_DELAY","SCROLL_PERCENTAGE","IDLE","FIRST_VISIT","RETURNING_VISITOR"],_={};T.forEach(g=>{const m=l.filter(y=>y.trigger===g);if(m.length>0){const y=m.filter(h=>h.converted).length,b=m.filter(h=>h.converted&&h.conversionValue).reduce((h,V)=>h+(V.conversionValue||0),0);_[g]={redirects:m.length,conversions:y,conversionRate:y/m.length*100,revenue:b}}});const k=t.map(g=>{const m=l.filter(h=>h.ruleId===g.id),y=m.filter(h=>h.converted).length,b=m.filter(h=>h.converted&&h.conversionValue).reduce((h,V)=>h+(V.conversionValue||0),0);return{ruleId:g.id,ruleName:g.name,redirects:m.length,conversions:y,conversionRate:m.length>0?y/m.length*100:0,revenue:b}}).filter(g=>g.redirects>0).sort((g,m)=>m.revenue-g.revenue).slice(0,10);return{totalRules:o,activeRules:f,totalRedirects:N,totalConversions:n,conversionRate:x,totalRevenue:R,averageOrderValue:j,byTrigger:_,topRules:k}}catch(t){throw console.error("Error getting redirect analytics:",t),t}},async getConversionRate(s){try{const{data:r,error:t}=await p.from("RedirectLog").select("converted").eq("ruleId",s);if(t)throw t;const i=r,c=i.length,d=i.filter(l=>l.converted).length;return c>0?d/c*100:0}catch(r){throw console.error("Error getting conversion rate:",r),r}},async getRulePerformance(s){try{const r=await u.getRuleById(s),t=await u.getLogs(r.userId,{ruleId:s}),i=t.length,c=t.filter(f=>f.converted).length,d=i>0?c/i*100:0,l=t.filter(f=>f.converted&&f.conversionValue).reduce((f,N)=>f+(N.conversionValue||0),0),o=c>0?l/c:0;return{rule:r,redirects:i,conversions:c,conversionRate:d,revenue:l,averageOrderValue:o}}catch(r){throw console.error("Error getting rule performance:",r),r}},async resetRuleStats(s){try{return await u.updateRule(s,{currentRedirects:0,conversions:0})}catch(r){throw console.error("Error resetting rule stats:",r),r}},async processExpiredRules(s){try{const r=new Date().toISOString(),{data:t,error:i}=await p.from("RedirectRule").select("id").eq("userId",s).eq("status","ACTIVE").not("validUntil","is",null).lt("validUntil",r);if(i)throw i;const c=t,d=c.map(l=>u.updateRule(l.id,{status:"EXPIRED"}));return await Promise.all(d),c.length}catch(r){throw console.error("Error processing expired rules:",r),r}},async processScheduledRules(s){try{const r=new Date().toISOString(),{data:t,error:i}=await p.from("RedirectRule").select("id").eq("userId",s).eq("status","SCHEDULED").not("validFrom","is",null).lte("validFrom",r);if(i)throw i;const c=t,d=c.map(l=>u.updateRule(l.id,{status:"ACTIVE"}));return await Promise.all(d),c.length}catch(r){throw console.error("Error processing scheduled rules:",r),r}}},Be=()=>{const[s,r]=S.useState([]),[t,i]=S.useState(null),[c,d]=S.useState(!0),[l,o]=S.useState(!1),[f,N]=S.useState(null),[n,x]=S.useState({name:"",description:"",trigger:"POST_PURCHASE",destinationUrl:"",status:"ACTIVE",priority:1,openInNewTab:!0,showConfirmation:!1}),{toast:R}=ee(),j=re(a=>a.user);S.useEffect(()=>{j!=null&&j.id&&T()},[j==null?void 0:j.id]);const T=async()=>{try{d(!0);const[a,v]=await Promise.all([u.listRules(j.id),u.getAnalytics(j.id)]);r(a),i(v)}catch(a){console.error("Erro ao carregar dados:",a),R({title:"Erro ao carregar dados",description:a.message,variant:"destructive"})}finally{d(!1)}},_=async()=>{try{if(!(j!=null&&j.id))return;if(!n.name||!n.destinationUrl){R({title:"Campos obrigatórios",description:"Preencha nome e URL de destino",variant:"destructive"});return}const a={...n,userId:j.id};f?(await u.updateRule(f.id,n),R({title:"Regra atualizada com sucesso!"})):(await u.createRule(a),R({title:"Regra criada com sucesso!"})),o(!1),N(null),y(),T()}catch(a){console.error("Erro ao salvar:",a),R({title:"Erro ao salvar",description:a.message,variant:"destructive"})}},k=a=>{N(a),x(a),o(!0)},g=async a=>{if(confirm("Deseja realmente excluir esta regra?"))try{await u.deleteRule(a),R({title:"Regra excluída com sucesso!"}),T()}catch(v){console.error("Erro ao excluir:",v),R({title:"Erro ao excluir",description:v.message,variant:"destructive"})}},m=async(a,v)=>{try{await u.toggleRule(a,v),R({title:v?"Regra ativada!":"Regra desativada!"}),T()}catch(F){console.error("Erro ao alternar status:",F),R({title:"Erro ao alternar status",description:F.message,variant:"destructive"})}},y=()=>{x({name:"",description:"",trigger:"POST_PURCHASE",destinationUrl:"",status:"ACTIVE",priority:1,openInNewTab:!0,showConfirmation:!1})},b=a=>`${a.toFixed(1)}%`,h=a=>({POST_PURCHASE:"Pós-Compra",ABANDONED_CART:"Carrinho Abandonado",EXIT_INTENT:"Intenção de Saída",TIME_DELAY:"Tempo na Página",SCROLL_PERCENTAGE:"Rolagem de Página",IDLE:"Inatividade",FIRST_VISIT:"Primeira Visita",RETURNING_VISITOR:"Visitante Retornante"})[a],V=a=>{const v={ACTIVE:{label:"Ativo",variant:"default",icon:ne},INACTIVE:{label:"Inativo",variant:"secondary",icon:O},EXPIRED:{label:"Expirado",variant:"destructive",icon:O},SCHEDULED:{label:"Agendado",variant:"secondary",icon:O}};return v[a]||v.INACTIVE};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Redirecionamentos"}),e.jsx("p",{className:"text-muted-foreground",children:"Configure redirecionamentos inteligentes para maximizar conversões"})]}),e.jsxs(A,{onClick:()=>o(!0),children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Nova Regra"]})]}),t&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(P,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(q,{className:"text-sm font-medium",children:"Regras Ativas"}),e.jsx(pe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.activeRules}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["de ",t.totalRules," regras"]})]})]}),e.jsxs(P,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(q,{className:"text-sm font-medium",children:"Total Redirecionamentos"}),e.jsx(je,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t.totalRedirects}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cliques totais"})]})]}),e.jsxs(P,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(q,{className:"text-sm font-medium",children:"Conversões"}),e.jsx(fe,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.totalConversions}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Taxa: ",b(t.conversionRate)]})]})]}),e.jsxs(P,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(q,{className:"text-sm font-medium",children:"Receita Gerada"}),e.jsx(te,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(U,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["R$ ",t.totalRevenue.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ticket: R$ ",t.averageOrderValue.toFixed(2)]})]})]})]}),e.jsxs(P,{children:[e.jsxs(L,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(q,{children:"Regras de Redirecionamento"}),e.jsxs(ae,{children:[s.length," regra(s) cadastrada(s)"]})]}),e.jsxs(A,{variant:"outline",size:"sm",onClick:T,children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Atualizar"]})]}),e.jsx(U,{children:c?e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{className:"h-12 w-full"}),e.jsx(M,{className:"h-12 w-full"}),e.jsx(M,{className:"h-12 w-full"})]}):s.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(Q,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Nenhuma regra cadastrada"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Crie sua primeira regra de redirecionamento"}),e.jsxs(A,{onClick:()=>o(!0),children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Criar Regra"]})]}):e.jsxs(ie,{children:[e.jsx(oe,{children:e.jsxs(G,{children:[e.jsx(E,{children:"Nome"}),e.jsx(E,{children:"Trigger"}),e.jsx(E,{children:"URL Destino"}),e.jsx(E,{children:"Status"}),e.jsx(E,{className:"text-right",children:"Redirecionamentos"}),e.jsx(E,{className:"text-right",children:"Conversões"}),e.jsx(E,{className:"text-right",children:"Taxa"}),e.jsx(E,{className:"text-right",children:"Ações"})]})}),e.jsx(ce,{children:s.map(a=>{const v=V(a.status),F=v.icon,W=a.currentRedirects>0?a.conversions/a.currentRedirects*100:0;return e.jsxs(G,{children:[e.jsx(C,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.name}),a.description&&e.jsx("div",{className:"text-sm text-muted-foreground",children:a.description})]})}),e.jsx(C,{children:e.jsx(B,{variant:"outline",children:h(a.trigger)})}),e.jsx(C,{children:e.jsxs("a",{href:a.destinationUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline flex items-center gap-1",children:[a.destinationUrl.substring(0,40),"...",e.jsx(Q,{className:"h-3 w-3"})]})}),e.jsx(C,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(B,{variant:v.variant,className:"gap-1",children:[e.jsx(F,{className:"h-3 w-3"}),v.label]}),e.jsx(H,{checked:a.status==="ACTIVE",onCheckedChange:Z=>m(a.id,Z)})]})}),e.jsx(C,{className:"text-right",children:a.currentRedirects}),e.jsx(C,{className:"text-right",children:e.jsx("span",{className:"font-medium text-green-600",children:a.conversions})}),e.jsx(C,{className:"text-right",children:e.jsx(B,{variant:"outline",children:b(W)})}),e.jsx(C,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(A,{variant:"ghost",size:"sm",onClick:()=>k(a),children:e.jsx(Re,{className:"h-4 w-4"})}),e.jsx(A,{variant:"ghost",size:"sm",onClick:()=>g(a.id),children:e.jsx(we,{className:"h-4 w-4 text-red-600"})})]})})]},a.id)})})]})})]}),e.jsx(le,{open:l,onOpenChange:o,children:e.jsxs(de,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ge,{children:[e.jsx(ue,{children:f?"Editar Regra":"Nova Regra de Redirecionamento"}),e.jsx(he,{children:"Configure quando e para onde redirecionar seus usuários"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"name",children:"Nome da Regra *"}),e.jsx(D,{id:"name",value:n.name,onChange:a=>x({...n,name:a.target.value}),placeholder:"Ex: Upsell pós-compra"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"description",children:"Descrição"}),e.jsx(J,{id:"description",value:n.description||"",onChange:a=>x({...n,description:a.target.value}),placeholder:"Descrição opcional",rows:2})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"trigger",children:"Trigger *"}),e.jsxs(z,{value:n.trigger,onValueChange:a=>x({...n,trigger:a}),children:[e.jsx($,{children:e.jsx(X,{})}),e.jsxs(Y,{children:[e.jsx(I,{value:"POST_PURCHASE",children:"Pós-Compra"}),e.jsx(I,{value:"ABANDONED_CART",children:"Carrinho Abandonado"}),e.jsx(I,{value:"EXIT_INTENT",children:"Intenção de Saída"}),e.jsx(I,{value:"TIME_DELAY",children:"Tempo na Página"}),e.jsx(I,{value:"SCROLL_PERCENTAGE",children:"Rolagem de Página"}),e.jsx(I,{value:"IDLE",children:"Inatividade"}),e.jsx(I,{value:"FIRST_VISIT",children:"Primeira Visita"}),e.jsx(I,{value:"RETURNING_VISITOR",children:"Visitante Retornante"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"priority",children:"Prioridade"}),e.jsx(D,{id:"priority",type:"number",value:n.priority,onChange:a=>x({...n,priority:parseInt(a.target.value)}),placeholder:"1"})]})]}),n.trigger==="TIME_DELAY"&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"triggerDelay",children:"Delay (segundos)"}),e.jsx(D,{id:"triggerDelay",type:"number",value:n.triggerDelay||"",onChange:a=>x({...n,triggerDelay:parseInt(a.target.value)}),placeholder:"30"})]}),n.trigger==="SCROLL_PERCENTAGE"&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"triggerScrollPercentage",children:"Porcentagem de Rolagem (%)"}),e.jsx(D,{id:"triggerScrollPercentage",type:"number",min:"0",max:"100",value:n.triggerScrollPercentage||"",onChange:a=>x({...n,triggerScrollPercentage:parseInt(a.target.value)}),placeholder:"75"})]}),n.trigger==="IDLE"&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"triggerIdleTime",children:"Tempo de Inatividade (segundos)"}),e.jsx(D,{id:"triggerIdleTime",type:"number",value:n.triggerIdleTime||"",onChange:a=>x({...n,triggerIdleTime:parseInt(a.target.value)}),placeholder:"60"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"destinationUrl",children:"URL de Destino *"}),e.jsx(D,{id:"destinationUrl",type:"url",value:n.destinationUrl,onChange:a=>x({...n,destinationUrl:a.target.value}),placeholder:"https://example.com/oferta"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"status",children:"Status"}),e.jsxs(z,{value:n.status,onValueChange:a=>x({...n,status:a}),children:[e.jsx($,{children:e.jsx(X,{})}),e.jsxs(Y,{children:[e.jsx(I,{value:"ACTIVE",children:"Ativo"}),e.jsx(I,{value:"INACTIVE",children:"Inativo"}),e.jsx(I,{value:"SCHEDULED",children:"Agendado"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{id:"openInNewTab",checked:n.openInNewTab,onCheckedChange:a=>x({...n,openInNewTab:a})}),e.jsx(w,{htmlFor:"openInNewTab",className:"cursor-pointer",children:"Abrir em nova aba"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{id:"showConfirmation",checked:n.showConfirmation,onCheckedChange:a=>x({...n,showConfirmation:a})}),e.jsx(w,{htmlFor:"showConfirmation",className:"cursor-pointer",children:"Mostrar confirmação antes de redirecionar"})]})]}),n.showConfirmation&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(w,{htmlFor:"confirmationMessage",children:"Mensagem de Confirmação"}),e.jsx(J,{id:"confirmationMessage",value:n.confirmationMessage||"",onChange:a=>x({...n,confirmationMessage:a.target.value}),placeholder:"Deseja ser redirecionado para nossa oferta especial?",rows:2})]}),e.jsxs(xe,{children:[e.jsx(O,{className:"h-4 w-4"}),e.jsxs(ve,{children:["Esta regra será acionada quando o trigger"," ",e.jsx("strong",{children:h(n.trigger||"POST_PURCHASE")})," ","for detectado.",n.openInNewTab?" O redirecionamento abrirá em nova aba.":" O redirecionamento será na mesma janela."]})]})]}),e.jsxs(me,{children:[e.jsx(A,{variant:"outline",onClick:()=>{o(!1),N(null),y()},children:"Cancelar"}),e.jsx(A,{onClick:_,children:"Salvar"})]})]})})]})};export{Be as default};

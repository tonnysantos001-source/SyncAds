import{u as P,r as R,t as C,j as e,B as i,W as z,g as s,l as a,ag as g,h as m,i as o}from"./index-BKUbNaSZ.js";import{C as A}from"./calendar-CNh4jvGh.js";const M=()=>{const c=P(x=>x.user),[D,h]=R.useState({totalRevenue:0,totalOrders:0,approvedRevenue:0,refundedRevenue:0,netProfit:0,totalShipping:0,avgTicket:0,conversionRate:0,loading:!0});R.useEffect(()=>{c!=null&&c.organizationId&&w()},[c==null?void 0:c.organizationId]);const w=async()=>{try{h(t=>({...t,loading:!0}));const x=c==null?void 0:c.organizationId,[{data:l},{data:r}]=await Promise.all([C.from("Order").select("total, status, shippingCost").eq("organizationId",x),C.from("Transaction").select("amount, status, paymentMethod").eq("organizationId",x)]);console.log("üìä [Reports] Dados carregados:",{orders:l,transactions:r});const p=(l==null?void 0:l.filter(t=>t.status==="PAID").reduce((t,n)=>t+(n.total||0),0))||0,d=(l==null?void 0:l.length)||0,N=(l==null?void 0:l.filter(t=>t.status==="PAID").length)||0,f=(r==null?void 0:r.filter(t=>t.status==="PAID").reduce((t,n)=>t+(n.amount||0),0))||0,u=(r==null?void 0:r.filter(t=>t.status==="REFUNDED").reduce((t,n)=>t+(n.amount||0),0))||0,I=(l==null?void 0:l.filter(t=>t.status==="PAID").reduce((t,n)=>t+(n.shippingCost||0),0))||0,y=N>0?p/N:0,b=d>0?N/d*100:0,v=f-u;h({totalRevenue:p,totalOrders:d,approvedRevenue:f,refundedRevenue:u,netProfit:v,totalShipping:I,avgTicket:y,conversionRate:b,loading:!1}),console.log("‚úÖ [Reports] M√©tricas calculadas:",{totalRevenue:j(p),totalOrders:d,netProfit:j(v),avgTicket:j(y),conversionRate:b.toFixed(2)+"%"})}catch(x){console.error("‚ùå [Reports] Erro ao carregar dados:",x),h(l=>({...l,loading:!1}))}},j=x=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(x);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"VIS√ÉO GERAL"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Acompanhe o desempenho geral do seu e-commerce"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(i,{variant:"outline",size:"sm",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Atualizar"]}),e.jsx(i,{className:"bg-pink-600 hover:bg-pink-700 text-white",size:"sm",children:"Filtrar"}),e.jsx(i,{variant:"outline",size:"sm",children:"Colection"}),e.jsx(i,{variant:"outline",size:"sm",children:"Semana"}),e.jsx(i,{variant:"outline",size:"sm",children:"M√™s"}),e.jsx(i,{variant:"outline",size:"sm",children:e.jsx(A,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(s,{children:e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Receita l√≠quida"}),e.jsx("p",{className:"text-3xl font-bold",children:"0,00 (0)"}),e.jsx("div",{className:"flex items-center gap-2 text-sm",children:e.jsx("span",{className:"text-gray-500",children:"% 0%"})})]})})}),e.jsx(s,{className:"bg-gray-900 text-white",children:e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-300",children:"Lucro L√≠quido"}),e.jsx("p",{className:"text-3xl font-bold",children:"0,00"}),e.jsx("div",{className:"flex items-center gap-2 text-sm",children:e.jsx("span",{className:"text-gray-400",children:"% 0%"})})]})})}),e.jsx(s,{children:e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Investimento"}),e.jsx(g,{className:"w-4 h-4 text-gray-400"})]}),e.jsx("p",{className:"text-3xl font-bold",children:"0,00"}),e.jsx("div",{className:"flex items-center gap-2 text-sm",children:e.jsx("span",{className:"text-gray-500",children:"% 0%"})})]})})})]}),e.jsxs(s,{children:[e.jsx(m,{children:e.jsx(o,{className:"text-lg",children:"Resumo Financeiro"})}),e.jsx(a,{children:e.jsx("div",{className:"h-64 flex items-center justify-center bg-gray-50 rounded",children:e.jsx("p",{className:"text-gray-400",children:"Gr√°fico de linha - Receita por per√≠odo"})})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(s,{children:e.jsxs(a,{className:"p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Receita Aprovada"}),e.jsx("p",{className:"text-xl font-bold",children:"0,00 (0)"}),e.jsx("p",{className:"text-xs text-gray-500",children:"% 0%"})]})}),e.jsx(s,{children:e.jsxs(a,{className:"p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Receita Estornada"}),e.jsx("p",{className:"text-xl font-bold",children:"0,00 (0)"}),e.jsx("p",{className:"text-xs text-gray-500",children:"% 0%"})]})}),e.jsx(s,{children:e.jsxs(a,{className:"p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Compra / Dia"}),e.jsx("p",{className:"text-xl font-bold",children:"0,00"}),e.jsx("p",{className:"text-xs text-gray-500",children:"‚Äî 0%"})]})}),e.jsx(s,{children:e.jsxs(a,{className:"p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Pedidos"}),e.jsx("p",{className:"text-xl font-bold",children:"0,00 (0)"}),e.jsx("p",{className:"text-xs text-gray-500",children:"% 0%"})]})}),e.jsx(s,{children:e.jsxs(a,{className:"p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Frete"}),e.jsx("p",{className:"text-xl font-bold",children:"0,00"}),e.jsx("p",{className:"text-xs text-gray-500",children:"‚Äî 0%"})]})}),e.jsx(s,{children:e.jsxs(a,{className:"p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Custo p/o"}),e.jsx("p",{className:"text-xl font-bold",children:"0,00"}),e.jsx("p",{className:"text-xs text-gray-500",children:"‚Äî 0%"})]})}),e.jsx(s,{children:e.jsxs(a,{className:"p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Margem L√≠quida"}),e.jsx("p",{className:"text-xl font-bold",children:"0%"})]})}),e.jsx(s,{children:e.jsxs(a,{className:"p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Lucro Real"}),e.jsx("p",{className:"text-xl font-bold",children:"0,00"}),e.jsx("p",{className:"text-xs text-gray-500",children:"‚Äî 0%"})]})}),e.jsx(s,{children:e.jsxs(a,{className:"p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Ticket m√©dio"}),e.jsx("p",{className:"text-xl font-bold",children:"0,00"}),e.jsx("p",{className:"text-xs text-gray-500",children:"‚Äî 0%"})]})}),e.jsx(s,{children:e.jsxs(a,{className:"p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Lucratividade"}),e.jsx("p",{className:"text-xl font-bold",children:"0,00"}),e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(g,{className:"w-3 h-3"})," Mais de meta"]})]})}),e.jsx(s,{children:e.jsxs(a,{className:"p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Meta de ROAS"}),e.jsx("p",{className:"text-xl font-bold",children:"0%"})]})}),e.jsx(s,{children:e.jsxs(a,{className:"p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Novo de ROAS"}),e.jsx("p",{className:"text-xl font-bold flex items-center gap-1",children:e.jsx(g,{className:"w-3 h-3"})})]})}),e.jsx(s,{children:e.jsxs(a,{className:"p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Tax. de Convers√£o"}),e.jsx("p",{className:"text-xl font-bold",children:"0,00"}),e.jsx("p",{className:"text-xs text-gray-500",children:"‚Äî 0%"})]})}),e.jsx(s,{children:e.jsxs(a,{className:"p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Roas"}),e.jsx("p",{className:"text-xl font-bold",children:"0,00"}),e.jsx("p",{className:"text-xs text-gray-500",children:"‚Äî 0%"})]})}),e.jsx(s,{children:e.jsxs(a,{className:"p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Roi"}),e.jsx("p",{className:"text-xl font-bold",children:"0,00"})]})}),e.jsx(s,{children:e.jsxs(a,{className:"p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"CPA"}),e.jsx("p",{className:"text-xl font-bold",children:"0,00"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(s,{children:[e.jsx(m,{children:e.jsx(o,{className:"text-lg",children:"Funnel de Convers√£o"})}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm mb-2",children:"UTM's Utilizadas"}),e.jsx("p",{className:"text-2xl font-bold",children:"0% (0)"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm mb-2",children:"Entrega"}),e.jsx("p",{className:"text-2xl font-bold",children:"0% (0)"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm mb-2",children:"Pagamento"}),e.jsx("p",{className:"text-2xl font-bold",children:"0% (0)"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm mb-2",children:"Comprou"}),e.jsx("p",{className:"text-2xl font-bold",children:"0% (0)"})]})]})})]}),e.jsxs(s,{children:[e.jsx(m,{children:e.jsx(o,{className:"text-lg",children:"Taxas"})}),e.jsx(a,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Pix"}),e.jsx("span",{className:"font-medium",children:"0%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Boleto"}),e.jsx("span",{className:"font-medium",children:"0%"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Cart√£o cr√©dito"}),e.jsx("span",{className:"font-medium",children:"0%"})]})]})})]})]}),e.jsxs(s,{children:[e.jsx(m,{children:e.jsx(o,{className:"text-lg",children:"Parcelamento"})}),e.jsx(a,{children:e.jsx("p",{className:"text-gray-500 text-center py-8",children:"N√£o existem informa√ß√µes para os crit√©rios selecionados"})})]})]})};export{M as default};

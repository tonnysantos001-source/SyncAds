import{f as v,u as g,r as o,s as x,j as e,g as j,h as b,i as N,l as C,I as c,B as y}from"./index-CX6JXGXT.js";import{L as n}from"./label-yKPF2Vys.js";import{A as R,a as S}from"./alert-Br3pRzCj.js";import{C as k}from"./circle-alert-CPuloMBz.js";const I=()=>{const{toast:i}=v(),s=g(a=>a.user),[h,d]=o.useState(!0),[p,m]=o.useState(!1),[r,t]=o.useState({cartao:"",boleto:"",pix:""});o.useEffect(()=>{s!=null&&s.id&&u()},[s==null?void 0:s.id]);const u=async()=>{try{d(!0);const{data:a,error:l}=await x.from("CheckoutRedirect").select("*").eq("userId",s==null?void 0:s.id).single();if(l&&l.code!=="PGRST116")throw l;a&&t({cartao:a.creditCardUrl||"",boleto:a.bankSlipUrl||"",pix:a.pixUrl||""})}catch(a){console.error("Erro ao carregar redirecionamentos:",a),i({title:"Erro ao carregar",description:"Não foi possível carregar as configurações",variant:"destructive"})}finally{d(!1)}},f=async()=>{if(s!=null&&s.id)try{m(!0);const{error:a}=await x.from("CheckoutRedirect").upsert({userId:s.id,creditCardUrl:r.cartao,bankSlipUrl:r.boleto,pixUrl:r.pix,updatedAt:new Date().toISOString()}).select().single();if(a)throw a;i({title:"URLs salvas!",description:"Suas configurações foram salvas com sucesso"})}catch(a){console.error("Erro ao salvar URLs:",a),i({title:"Erro ao salvar",description:"Não foi possível salvar as URLs",variant:"destructive"})}finally{m(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"REDIRECIONAMENTO"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Redirecione seus compradores para uma página personalizada."})]}),e.jsxs(j,{children:[e.jsx(b,{children:e.jsx(N,{children:"URLs de Redirecionamento"})}),e.jsxs(C,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"cartao",className:"text-base font-medium",children:"Cartão"}),e.jsx(c,{id:"cartao",type:"url",placeholder:"https://",value:r.cartao,onChange:a=>t({...r,cartao:a.target.value}),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"boleto",className:"text-base font-medium",children:"Boleto"}),e.jsx(c,{id:"boleto",type:"url",placeholder:"https://",value:r.boleto,onChange:a=>t({...r,boleto:a.target.value}),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"pix",className:"text-base font-medium",children:"Pix"}),e.jsx(c,{id:"pix",type:"url",placeholder:"https://",value:r.pix,onChange:a=>t({...r,pix:a.target.value}),className:"mt-2"})]}),e.jsxs(R,{className:"border-pink-200 bg-pink-50",children:[e.jsx(k,{className:"h-4 w-4 text-pink-600"}),e.jsxs(S,{className:"text-pink-900",children:["Está com dúvidas?"," ",e.jsx("a",{href:"#",className:"font-medium underline hover:no-underline",children:"Aprenda com o nosso redirecionamento."})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(y,{onClick:f,className:"bg-pink-600 hover:bg-pink-700 text-white px-8",disabled:p||h,children:p?"Salvando...":"Salvar"})})]})]})]})};export{I as default};

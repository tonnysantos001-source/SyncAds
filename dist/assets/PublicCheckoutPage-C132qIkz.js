import{s as g,c as Q,r as f,j as e,M as x,m as H,k as ue,K as X,C as J,n as ve,a as we,b as Ne,_ as me,i as Be}from"./index-ipsMkJiW.js";import{C as ae}from"./circle-alert-ChkgO4Oy.js";import{F as ee}from"./file-text-BT7HqEkH.js";import{M as xe}from"./mail-CYl7cODb.js";import{P as pe}from"./phone-BhGBh7Bl.js";import{M as he}from"./map-pin-D0JGDw0q.js";import{S as re}from"./shield-kmmVkvEr.js";import{C as te}from"./credit-card-QL4vMNL9.js";import{S as ke}from"./smartphone-DN6-s0z7.js";import{T as Fe}from"./tag-DfXgjPr6.js";import{S as Ee}from"./sparkles-Rq6Ps2XI.js";import{P as Pe}from"./plus-B30iixu1.js";import{L as ie}from"./lock-B6-Dr3uE.js";import{S as Se}from"./shield-check-DXtfLxrZ.js";import{P as ce}from"./package-BGv2eKrV.js";const Te={async saveCustomization(r){try{const{data:a,error:s}=await g.from("CheckoutCustomization").upsert({...r,updatedAt:new Date().toISOString()}).select().single();if(s)throw s;return a}catch(a){throw console.error("Error saving checkout customization:",a),a}},async loadCustomization(r){try{const{data:a,error:s}=await g.from("CheckoutCustomization").select("*").eq("userId",r).eq("isActive",!0).single();if(s&&s.code!=="PGRST116")throw s;return a}catch(a){throw console.error("Error loading checkout customization:",a),a}},async listCustomizations(r){try{const{data:a,error:s}=await g.from("CheckoutCustomization").select("*").eq("userId",r).order("createdAt",{ascending:!1});if(s)throw s;return a}catch(a){throw console.error("Error listing checkout customizations:",a),a}},async activateCustomization(r){try{const a=await g.from("CheckoutCustomization").select("userId").eq("id",r).single();a.data&&await g.from("CheckoutCustomization").update({isActive:!1}).eq("userId",a.data.userId);const{data:s,error:n}=await g.from("CheckoutCustomization").update({isActive:!0,updatedAt:new Date().toISOString()}).eq("id",r).select().single();if(n)throw n;return s}catch(a){throw console.error("Error activating checkout customization:",a),a}},async deleteCustomization(r){try{const{error:a}=await g.from("CheckoutCustomization").delete().eq("id",r);if(a)throw a}catch(a){throw console.error("Error deleting checkout customization:",a),a}},async duplicateCustomization(r,a){try{const{data:s,error:n}=await g.from("CheckoutCustomization").select("*").eq("id",r).single();if(n)throw n;const{data:m,error:p}=await g.from("CheckoutCustomization").insert({userId:s.userId,name:a,theme:s.theme,isActive:!1}).select().single();if(p)throw p;return m}catch(s){throw console.error("Error duplicating checkout customization:",s),s}},async generatePreviewUrl(r){try{const{data:a,error:s}=await g.from("CheckoutCustomization").insert({userId:r.userId,name:`Preview-${Date.now()}`,theme:r.theme||{},isActive:!1}).select().single();if(s)throw s;return`/checkout/preview/${a.id}`}catch(a){throw console.error("Error generating preview URL:",a),a}},async exportCustomization(r){try{const{data:a,error:s}=await g.from("CheckoutCustomization").select("*").eq("id",r).single();if(s)throw s;return{name:a.name,theme:a.theme,exportedAt:new Date().toISOString(),version:"1.0"}}catch(a){throw console.error("Error exporting checkout customization:",a),a}},async importCustomization(r,a){try{const{data:s,error:n}=await g.from("CheckoutCustomization").insert({userId:r,name:`${a.name} (Importado)`,theme:a.theme,isActive:!1}).select().single();if(n)throw n;return s}catch(s){throw console.error("Error importing checkout customization:",s),s}}};/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=Q("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=Q("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=Q("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=Q("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),oe={logoUrl:"",faviconUrl:"",logoAlignment:"left",showLogoAtTop:!0,logoWidth:180,logoHeight:50,backgroundColor:"#F9FAFB",backgroundGradient:"linear-gradient(180deg, #F9FAFB 0%, #F3F4F6 100%)",useGradient:!1,textColor:"#1F2937",headingColor:"#111827",noticeBarEnabled:!0,noticeBarMessage:"ðŸŽ‰ FRETE GRÃTIS para todo o Brasil em compras acima de R$ 199!",noticeBarBackgroundColor:"#1F2937",noticeBarTextColor:"#FFFFFF",noticeBarAnimation:!0,bannerEnabled:!1,bannerUrl:"",bannerHeight:200,cartDisplay:"drawer",cartBorderColor:"#E5E7EB",cartBackgroundColor:"#FFFFFF",quantityCircleColor:"#8B5CF6",quantityTextColor:"#FFFFFF",showCartIcon:!0,showCartReminder:!0,allowCouponEdit:!0,navigationSteps:3,nextStepStyle:"rounded",showProgressBar:!0,progressBarColor:"#8B5CF6",stepActiveColor:"#8B5CF6",stepInactiveColor:"#D1D5DB",stepCompletedColor:"#10B981",primaryButtonBackgroundColor:"#8B5CF6",primaryButtonTextColor:"#FFFFFF",primaryButtonBorderRadius:12,primaryButtonHover:!0,primaryButtonHoverColor:"#7C3AED",primaryButtonFlow:!0,primaryButtonShadow:!0,checkoutButtonBackgroundColor:"#10B981",checkoutButtonTextColor:"#FFFFFF",checkoutButtonBorderRadius:14,checkoutButtonHover:!0,checkoutButtonHoverColor:"#059669",checkoutButtonFlow:!0,checkoutButtonShadow:!0,checkoutButtonPulse:!0,highlightedBorderColor:"#8B5CF6",highlightedBorderTextColor:"#FFFFFF",highlightedBorderWidth:2,footerBackgroundColor:"#F3F4F6",footerTextColor:"#6B7280",showStoreName:!0,showPaymentMethods:!0,showCnpjCpf:!0,showContactEmail:!0,showAddress:!0,showPhone:!0,showPrivacyPolicy:!0,showTermsConditions:!0,showReturns:!0,footerLinkColor:"#8B5CF6",discountTagTextColor:"#FFFFFF",discountTagBackgroundColor:"#EF4444",discountTagBorderRadius:6,discountTagFontWeight:"700",useVisible:!0,expirationTime:60,forceRemovalTime:90,showCountdownTimer:!0,urgencyMessageColor:"#DC2626",urgencyBackgroundColor:"#FEE2E2",orderBumpEnabled:!0,orderBumpTextColor:"#374151",orderBumpBackgroundColor:"#FFFBEB",orderBumpPriceColor:"#DC2626",orderBumpBorderColor:"#FCD34D",orderBumpBorderWidth:2,orderBumpBorderRadius:12,orderBumpButtonTextColor:"#FFFFFF",orderBumpButtonBackgroundColor:"#EF4444",orderBumpShadow:!0,fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif",fontSize:{xs:"0.75rem",sm:"0.875rem",base:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem"},fontWeight:{normal:"400",medium:"500",semibold:"600",bold:"700"},spacing:{xs:"0.25rem",sm:"0.5rem",md:"1rem",lg:"1.5rem",xl:"2rem","2xl":"3rem"},borderRadius:{sm:"0.375rem",md:"0.5rem",lg:"0.75rem",xl:"1rem",full:"9999px"},boxShadow:{sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},inputBorderColor:"#D1D5DB",inputFocusBorderColor:"#8B5CF6",inputBackgroundColor:"#FFFFFF",inputHeight:48,inputBorderRadius:10,labelColor:"#374151",labelFontWeight:"600",placeholderColor:"#9CA3AF",cardBackgroundColor:"#FFFFFF",cardBorderColor:"#E5E7EB",cardBorderRadius:16,cardShadow:!0,cardPadding:"1.5rem",showTrustBadges:!0,trustBadgeColor:"#10B981",sslBadgeEnabled:!0,securityIconsEnabled:!0,language:"pt",currency:"BRL",presellPage:"cart-in-cart",requestCpfOnlyAtPayment:!1,requestBirthDate:!1,requestGender:!1,disableCarrot:!1,mobileBreakpoint:640,tabletBreakpoint:1024,desktopBreakpoint:1280,enableAnimations:!0,animationDuration:"300ms",animationTiming:"cubic-bezier(0.4, 0, 0.2, 1)",highContrast:!1,focusIndicatorColor:"#8B5CF6",reducedMotion:!1},Ae=r=>r.replace(/\D/g,""),Me=r=>Ae(r),de=({children:r,onClick:a,disabled:s=!1,loading:n=!1,type:m="button",variant:p="primary",theme:u,className:v="",fullWidth:w=!1,size:F="md",icon:N,iconPosition:c="left"})=>{const[E,P]=f.useState(!1),t=(()=>{switch(p){case"checkout":return{backgroundColor:u.checkoutButtonBackgroundColor||"#10b981",textColor:u.checkoutButtonTextColor||"#ffffff",borderRadius:u.checkoutButtonBorderRadius||8,hover:u.checkoutButtonHover!==!1,hoverColor:u.checkoutButtonHoverColor||"#059669",flow:u.checkoutButtonFlow||!1,shadow:u.checkoutButtonShadow!==!1,pulse:u.checkoutButtonPulse||!1};case"secondary":return{backgroundColor:u.secondaryButtonBackgroundColor||"#6b7280",textColor:u.secondaryButtonTextColor||"#ffffff",borderRadius:u.primaryButtonBorderRadius||8,hover:!0,hoverColor:"#4b5563",flow:!1,shadow:!1,pulse:!1};case"primary":default:return{backgroundColor:u.primaryButtonBackgroundColor||"#8b5cf6",textColor:u.primaryButtonTextColor||"#ffffff",borderRadius:u.primaryButtonBorderRadius||8,hover:u.primaryButtonHover!==!1,hoverColor:u.primaryButtonHoverColor||"#7c3aed",flow:u.primaryButtonFlow||!1,shadow:u.primaryButtonShadow!==!1,pulse:!1}}})(),$=()=>{switch(F){case"sm":return"px-4 py-2 text-sm";case"lg":return"px-8 py-4 text-lg";case"md":default:return"px-6 py-3 text-base"}},y={backgroundColor:s||n?"#d1d5db":E&&t.hover&&t.hoverColor?t.hoverColor:t.backgroundColor,color:s||n?"#9ca3af":t.textColor,borderRadius:`${t.borderRadius}px`,transition:"all 0.3s ease",boxShadow:t.shadow?E?"0 10px 25px -5px rgba(0, 0, 0, 0.2), 0 8px 10px -6px rgba(0, 0, 0, 0.15)":"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1)":"none",transform:E&&!s&&!n?"translateY(-2px)":"translateY(0)"},D=()=>{const M=[];return t.pulse&&!s&&!n&&M.push("animate-pulse"),t.flow&&!s&&!n&&M.push("animate-gradient-x bg-gradient-to-r from-purple-600 via-pink-600 to-blue-600 bg-[length:200%_auto]"),M.join(" ")};return e.jsxs(x.button,{type:m,onClick:s||n?void 0:a,disabled:s||n,onMouseEnter:()=>P(!0),onMouseLeave:()=>P(!1),className:H("relative font-semibold inline-flex items-center justify-center gap-2","focus:outline-none focus:ring-2 focus:ring-offset-2","transition-all duration-300 ease-in-out","disabled:cursor-not-allowed disabled:opacity-50",$(),D(),w&&"w-full",v),style:y,whileHover:!s&&!n?{scale:1.02}:{},whileTap:!s&&!n?{scale:.98}:{},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[n&&e.jsx(ue,{className:H("animate-spin",F==="sm"?"w-4 h-4":F==="lg"?"w-6 h-6":"w-5 h-5")}),N&&c==="left"&&!n&&e.jsx("span",{className:"flex-shrink-0",children:N}),e.jsx("span",{className:"flex-1 text-center",children:r}),N&&c==="right"&&!n&&e.jsx("span",{className:"flex-shrink-0",children:N}),!s&&!n&&e.jsx("span",{className:"absolute inset-0 overflow-hidden rounded-[inherit]",children:e.jsx("span",{className:"absolute inset-0 rounded-[inherit] bg-white opacity-0 group-active:opacity-20 transition-opacity duration-200"})})]})},j=f.forwardRef(({label:r,error:a,success:s=!1,theme:n,icon:m,iconPosition:p="left",mask:u="none",showValidation:v=!0,helperText:w,required:F=!1,fullWidth:N=!0,className:c="",value:E,onChange:P,onFocus:A,onBlur:t,...$},y)=>{const[D,M]=f.useState(!1),[Y,L]=f.useState(!!E),K=d=>{if(!d)return"";switch(u){case"cpf":return d.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1");case"phone":return d.replace(/\D/g,"").replace(/(\d{2})(\d)/,"($1) $2").replace(/(\d{5})(\d)/,"$1-$2").replace(/(-\d{4})\d+?$/,"$1");case"cep":return d.replace(/\D/g,"").replace(/(\d{5})(\d)/,"$1-$2").replace(/(-\d{3})\d+?$/,"$1");case"card":return d.replace(/\D/g,"").replace(/(\d{4})(\d)/,"$1 $2").replace(/(\d{4})(\d)/,"$1 $2").replace(/(\d{4})(\d)/,"$1 $2").replace(/(\d{4})\d+?$/,"$1");case"date":return d.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1/$2").replace(/(\d{2})(\d)/,"$1/$2").replace(/(\/\d{4})\d+?$/,"$1");default:return d}},G=d=>{const O=K(d.target.value);L(!!O);const B={...d,target:{...d.target,value:O}};P==null||P(B)},V=d=>{M(!0),A==null||A(d)},C=d=>{M(!1),t==null||t(d)},z=()=>a?"#ef4444":s&&v?"#10b981":D?n.inputFocusBorderColor||"#8b5cf6":n.inputBorderColor||"#d1d5db",h={backgroundColor:n.inputBackgroundColor||"#ffffff",borderColor:z(),borderRadius:`${n.inputBorderRadius||8}px`,height:`${n.inputHeight||48}px`,color:n.textColor||"#111827",borderWidth:"1px",borderStyle:"solid",transition:"all 0.3s ease"},I={color:a?"#ef4444":D||Y?n.labelColor||"#111827":n.labelColor||"#6b7280",fontWeight:n.labelFontWeight||"500",fontSize:"14px",transition:"all 0.3s ease"};return e.jsxs("div",{className:H("relative",N&&"w-full"),children:[r&&e.jsxs(x.label,{className:"block mb-2",style:I,initial:{opacity:0,y:-5},animate:{opacity:1,y:0},transition:{duration:.2},children:[r,F&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[m&&p==="left"&&e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",style:{color:D?z():void 0},children:m}),e.jsx("input",{ref:y,value:E,onChange:G,onFocus:V,onBlur:C,className:H("w-full px-4 outline-none transition-all duration-300","focus:ring-2 focus:ring-opacity-20",m&&p==="left"&&"pl-11",m&&p==="right"&&"pr-11",(a||s&&v)&&"pr-11",c),style:{...h,...D&&{boxShadow:`0 0 0 3px ${n.inputFocusBorderColor||"#8b5cf6"}20`}},"aria-invalid":!!a,"aria-describedby":a?`${$.id}-error`:w?`${$.id}-helper`:void 0,...$}),e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[v&&!m&&e.jsxs(X,{mode:"wait",children:[a&&e.jsx(x.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{duration:.3},children:e.jsx(ae,{className:"w-5 h-5 text-red-500"})},"error"),s&&!a&&Y&&e.jsx(x.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{duration:.3},children:e.jsx(J,{className:"w-5 h-5 text-green-500"})},"success")]}),m&&p==="right"&&e.jsx("div",{className:"text-gray-400",style:{color:D?z():void 0},children:m})]})]}),e.jsx(X,{children:a&&e.jsxs(x.p,{id:`${$.id}-error`,className:"mt-2 text-sm text-red-500 flex items-center gap-1",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[e.jsx(ae,{className:"w-4 h-4"}),a]})}),w&&!a&&e.jsx("p",{id:`${$.id}-helper`,className:"mt-2 text-sm",style:{color:n.textColor||"#6b7280",opacity:.7},children:w}),D&&e.jsx(x.div,{className:"absolute inset-0 rounded-[inherit] pointer-events-none",style:{border:`2px solid ${n.inputFocusBorderColor||"#8b5cf6"}`,opacity:.2},initial:{scale:.95},animate:{scale:1},exit:{scale:.95},transition:{duration:.2}})]})});j.displayName="CheckoutInput";const ze=({theme:r,storeData:a={},className:s=""})=>{if(!(r.showStoreName||r.showCnpjCpf||r.showContactEmail||r.showAddress||r.showPhone||r.showPaymentMethods||r.showPrivacyPolicy||r.showTermsConditions||r.showReturns))return null;const{name:m="Minha Loja",cnpj:p,cpf:u,email:v="contato@loja.com",phone:w="(11) 99999-9999",address:F="Rua Exemplo, 123 - SÃ£o Paulo, SP"}=a,N={backgroundColor:r.footerBackgroundColor||"#ffffff",color:r.footerTextColor||"#6b7280",borderTopColor:r.footerTextColor?`${r.footerTextColor}20`:"#e5e7eb"},c={color:r.footerLinkColor||r.footerTextColor||"#8b5cf6"},E=[{name:"CartÃ£o de CrÃ©dito",icon:te},{name:"PIX",icon:ke},{name:"Boleto",icon:De}];return e.jsx(x.footer,{className:H("border-t mt-12",s),style:N,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[(r.showStoreName||r.showCnpjCpf)&&e.jsxs("div",{className:"space-y-3",children:[r.showStoreName&&e.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:r.footerTextColor||"#111827"},children:m}),r.showCnpjCpf&&(p||u)&&e.jsxs("div",{className:"space-y-2 text-sm",children:[p&&e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx(ee,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsxs("span",{children:[e.jsx("strong",{children:"CNPJ:"})," ",p]})]}),u&&!p&&e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx(ee,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsxs("span",{children:[e.jsx("strong",{children:"CPF:"})," ",u]})]})]})]}),(r.showContactEmail||r.showPhone)&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-base font-semibold mb-4",style:{color:r.footerTextColor||"#111827"},children:"Contato"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[r.showContactEmail&&v&&e.jsxs("a",{href:`mailto:${v}`,className:"flex items-center gap-2 hover:underline transition-all",style:c,children:[e.jsx(xe,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:v})]}),r.showPhone&&w&&e.jsxs("a",{href:`tel:${w.replace(/\D/g,"")}`,className:"flex items-center gap-2 hover:underline transition-all",style:c,children:[e.jsx(pe,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:w})]}),r.showAddress&&F&&e.jsxs("p",{className:"flex items-start gap-2 text-sm",children:[e.jsx(he,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:F})]})]})]}),(r.showPrivacyPolicy||r.showTermsConditions||r.showReturns)&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-base font-semibold mb-4",style:{color:r.footerTextColor||"#111827"},children:"InformaÃ§Ãµes"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[r.showPrivacyPolicy&&e.jsxs("a",{href:"/politica-de-privacidade",className:"flex items-center gap-2 hover:underline transition-all",style:c,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(re,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"PolÃ­tica de Privacidade"})]}),r.showTermsConditions&&e.jsxs("a",{href:"/termos-e-condicoes",className:"flex items-center gap-2 hover:underline transition-all",style:c,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(ee,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"Termos e CondiÃ§Ãµes"})]}),r.showReturns&&e.jsxs("a",{href:"/trocas-e-devolucoes",className:"flex items-center gap-2 hover:underline transition-all",style:c,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(Re,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:"Trocas e DevoluÃ§Ãµes"})]})]})]}),r.showPaymentMethods&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-base font-semibold mb-4",style:{color:r.footerTextColor||"#111827"},children:"Formas de Pagamento"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:E.map((P,A)=>e.jsxs(x.div,{className:"flex items-center gap-2 px-3 py-2 rounded-lg border transition-all hover:shadow-md",style:{borderColor:r.footerTextColor?`${r.footerTextColor}20`:"#e5e7eb",backgroundColor:r.footerTextColor?`${r.footerTextColor}05`:"#f9fafb"},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1*A},whileHover:{scale:1.05},children:[e.jsx(P.icon,{className:"w-5 h-5",style:{color:r.footerTextColor||"#6b7280"}}),e.jsx("span",{className:"text-xs font-medium",children:P.name})]},P.name))}),e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(re,{className:"w-4 h-4",style:{color:"#10b981"}}),e.jsx("span",{children:"Compra 100% Segura"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(re,{className:"w-4 h-4",style:{color:"#10b981"}}),e.jsx("span",{children:"Certificado SSL"})]})]})]})]}),e.jsx("div",{className:"my-6 h-px",style:{backgroundColor:r.footerTextColor?`${r.footerTextColor}20`:"#e5e7eb"}}),e.jsxs("div",{className:"text-center text-sm",children:[e.jsxs("p",{children:["Â© ",new Date().getFullYear()," ",r.showStoreName?m:"Todos os direitos reservados"]}),e.jsxs("p",{className:"mt-1 text-xs opacity-70",children:["Powered by"," ",e.jsx("a",{href:"https://syncads.com.br",target:"_blank",rel:"noopener noreferrer",className:"hover:underline font-medium",style:c,children:"SyncAds"})]})]})]})})},qe=({orderBump:r,theme:a,selected:s=!1,onToggle:n,className:m=""})=>{const[p,u]=f.useState(!1);if(!a.orderBumpEnabled)return null;const v=r.originalPrice?Math.round((r.originalPrice-r.price)/r.originalPrice*100):0,w={backgroundColor:a.orderBumpBackgroundColor||"#ffffff",borderColor:s?a.primaryButtonBackgroundColor||"#8b5cf6":a.orderBumpBorderColor||"#e5e7eb",borderWidth:`${a.orderBumpBorderWidth||2}px`,borderRadius:`${a.orderBumpBorderRadius||12}px`,boxShadow:a.orderBumpShadow?s?`0 8px 30px ${a.primaryButtonBackgroundColor||"#8b5cf6"}30`:"0 4px 6px rgba(0, 0, 0, 0.1)":"none",transition:"all 0.3s ease"},F={backgroundColor:a.orderBumpButtonBackgroundColor||"#8b5cf6",color:a.orderBumpButtonTextColor||"#ffffff",borderRadius:`${(a.orderBumpBorderRadius||12)-4}px`},N=()=>{n(r.id)};return e.jsxs(x.div,{className:H("relative border cursor-pointer overflow-hidden",m),style:w,onClick:N,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.3},children:[(v>0||r.badge)&&e.jsx("div",{className:"absolute top-3 right-3 z-10",children:e.jsxs(x.div,{className:"px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1 shadow-lg",style:{backgroundColor:a.discountTagBackgroundColor||"#ef4444",color:a.discountTagTextColor||"#ffffff"},initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{duration:.5,delay:.2},children:[e.jsx(Fe,{className:"w-3 h-3"}),e.jsx("span",{children:r.badge||`-${v}%`})]})}),e.jsx("div",{className:"absolute top-3 left-3 z-10",children:e.jsx(x.div,{className:H("w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all",s?"bg-green-500 border-green-500":"bg-white border-gray-300"),whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(X,{children:s&&e.jsx(x.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:180},transition:{duration:.3},children:e.jsx(J,{className:"w-4 h-4 text-white"})})})})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex gap-4 mb-4",children:[r.image&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden bg-gray-100",children:e.jsx("img",{src:r.image,alt:r.title,className:"w-full h-full object-cover"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold mb-2",style:{color:a.orderBumpTextColor||"#111827"},children:r.title}),e.jsx("p",{className:"text-sm mb-3",style:{color:a.orderBumpTextColor?`${a.orderBumpTextColor}80`:"#6b7280"},children:r.description})]})]}),r.bullets&&r.bullets.length>0&&e.jsx("div",{className:"mb-4 space-y-2",children:r.bullets.slice(0,3).map((c,E)=>e.jsxs(x.div,{className:"flex items-start gap-2 text-sm",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1*E},children:[e.jsx(Ee,{className:"w-4 h-4 flex-shrink-0 mt-0.5",style:{color:a.orderBumpPriceColor||"#8b5cf6"}}),e.jsx("span",{style:{color:a.orderBumpTextColor||"#374151"},children:c})]},E))}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-4",children:[r.originalPrice&&e.jsxs("span",{className:"text-sm line-through opacity-60",style:{color:a.orderBumpTextColor||"#6b7280"},children:["R$ ",r.originalPrice.toFixed(2)]}),e.jsxs("span",{className:"text-2xl font-bold",style:{color:a.orderBumpPriceColor||"#10b981"},children:["R$ ",r.price.toFixed(2)]}),e.jsx("span",{className:"text-sm",style:{color:a.orderBumpTextColor?`${a.orderBumpTextColor}60`:"#9ca3af"},children:"Ã  vista"})]}),e.jsx(x.button,{className:"w-full py-3 px-4 rounded-lg font-semibold flex items-center justify-center gap-2 transition-all",style:F,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:c=>{c.stopPropagation(),N()},children:s?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-5 h-5"}),e.jsx("span",{children:"Adicionado ao Pedido"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-5 h-5"}),e.jsx("span",{children:"Adicionar ao Pedido"})]})}),s&&e.jsx(x.p,{className:"text-center text-xs mt-3 font-medium",style:{color:a.orderBumpPriceColor||"#10b981"},initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:"âœ“ Oferta adicionada com sucesso!"})]}),s&&e.jsx(x.div,{className:"absolute inset-0 pointer-events-none",style:{background:`linear-gradient(135deg, ${a.primaryButtonBackgroundColor||"#8b5cf6"}10, transparent)`},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),e.jsx(X,{children:p&&!s&&e.jsx(x.div,{className:"absolute inset-0 pointer-events-none",style:{background:`linear-gradient(135deg, ${a.orderBumpBorderColor||"#e5e7eb"}20, transparent)`},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}})})]})},Oe=({currentStep:r,theme:a})=>{const s=[{number:1,label:"Dados",icon:me},{number:2,label:"Entrega",icon:he},{number:3,label:"Pagamento",icon:te}];return e.jsx("div",{className:"w-full py-6 px-4",children:e.jsx("div",{className:"max-w-3xl mx-auto flex items-center justify-between",children:s.map((n,m)=>e.jsxs(Be.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(x.div,{className:"w-12 h-12 rounded-full flex items-center justify-center font-bold shadow-lg",style:{backgroundColor:r>=n.number?a.primaryButtonBackgroundColor||"#8b5cf6":"#e5e7eb",color:r>=n.number?"#ffffff":"#9ca3af"},whileHover:{scale:1.05},children:r>n.number?e.jsx(J,{className:"w-6 h-6"}):e.jsx(n.icon,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-xs mt-2 font-medium",style:{color:r>=n.number?"#111827":"#9ca3af"},children:n.label})]}),m<s.length-1&&e.jsx("div",{className:"flex-1 mx-2",children:e.jsx("div",{className:"h-1 rounded-full",style:{backgroundColor:r>n.number?a.primaryButtonBackgroundColor||"#8b5cf6":"#e5e7eb"}})})]},n.number))})})},Ue=({injectedOrderId:r,injectedTheme:a,previewMode:s=!1})=>{var le;const{orderId:n}=ve(),m=r||n,p=we(),{toast:u}=Ne(),[v,w]=f.useState(!0),[F,N]=f.useState(!1),[c,E]=f.useState(null),[P,A]=f.useState(null),[t,$]=f.useState(oe),[y,D]=f.useState(1),[M,Y]=f.useState(null),[L,K]=f.useState([]),[G,V]=f.useState([]),[C,z]=f.useState({name:"",email:"",phone:"",document:""}),[h,I]=f.useState({zipCode:"",street:"",number:"",complement:"",neighborhood:"",city:"",state:""}),[d,O]=f.useState("PIX"),[B,_]=f.useState({number:"",holderName:"",expiryMonth:"",expiryYear:"",cvv:""}),k=t.navigationSteps||3;f.useEffect(()=>{m&&fe()},[m]);const fe=async()=>{var o;try{w(!0),console.log("ðŸ” [DEBUG] loadCheckoutData iniciado"),console.log("ðŸ” [DEBUG] orderId:",m),console.log("ðŸ” [DEBUG] injectedOrderId:",r),console.log("ðŸ” [DEBUG] previewMode:",s);const{data:i,error:T}=await g.from("Order").select("*").eq("id",m).single();if(console.log("ðŸ” [DEBUG] Query result:",{order:i,error:T}),T||!i)throw console.error("âŒ [DEBUG] Erro ao buscar pedido:",T),new Error("Pedido nÃ£o encontrado");console.log("âœ… [DEBUG] Pedido encontrado:",{id:i.id,orderNumber:i.orderNumber,items:i.items,metadata:i.metadata});const q=Array.isArray(i.items)?i.items:[],W=Array.isArray((o=i.metadata)==null?void 0:o.originalProducts)?i.metadata.originalProducts:[];console.log("ðŸ” [DEBUG] Items processados:",{itemsCount:q.length,originalProductsCount:W.length,firstItem:q[0],firstOriginal:W[0]});const R={orderId:i.id,products:q.map((l,S)=>{console.log(`ðŸ” [DEBUG] Processando item ${S}:`,l);const b=W.find(Z=>String(Z==null?void 0:Z.id)===String(l==null?void 0:l.productId));console.log(`ðŸ” [DEBUG] Original encontrado para item ${S}:`,b);const ne={id:(l==null?void 0:l.productId)||(l==null?void 0:l.id)||`temp-${S}`,name:(l==null?void 0:l.name)||(b==null?void 0:b.name)||(b==null?void 0:b.title)||"Produto",price:Number(l==null?void 0:l.price)||Number(l==null?void 0:l.total)||0,quantity:Number(l==null?void 0:l.quantity)||1,image:(l==null?void 0:l.image)||(b==null?void 0:b.image)||Array.isArray(b==null?void 0:b.images)&&b.images[0]||""};return console.log(`âœ… [DEBUG] Produto final ${S}:`,ne),ne}),total:Number(i.total)||0,subtotal:Number(i.subtotal)||0,shipping:Number(i.shipping)||0,discount:Number(i.discount)||0};console.log("âœ… [DEBUG] CheckoutInfo criado:",R),console.log("ðŸ“ [DEBUG] Setando checkoutData e orderData"),E(R),A(i),console.log("ðŸ” [DEBUG] Verificando paymentMethod:",i.paymentMethod);const U=i.paymentMethod;if(U&&(U==="PIX"||U==="CREDIT_CARD"||U==="BOLETO")&&O(U),a)$({...oe,...a});else if(i.userId)try{const l=await Te.loadCustomization(i.userId);l!=null&&l.theme&&$({...oe,...l.theme})}catch{console.log("Usando tema padrÃ£o")}if(i.userId){try{const{data:l,error:S}=await g.from("User").select("name, email, phone, cnpj, cpf, address").eq("id",i.userId).single();!S&&l&&Y({name:l.name||"Minha Loja",email:l.email||"contato@loja.com",phone:l.phone||"(11) 99999-9999",cnpj:l.cnpj,cpf:l.cpf,address:l.address||"SÃ£o Paulo, SP - Brasil"})}catch(l){console.log("Erro ao carregar dados da loja:",l)}try{const{data:l,error:S}=await g.from("OrderBump").select("*").eq("userId",i.userId).eq("isActive",!0).order("order",{ascending:!0});!S&&l&&K(l)}catch(l){console.log("Erro ao carregar order bumps:",l)}}}catch(i){console.error("âŒ [DEBUG] Erro ao carregar checkout:",i),console.error("âŒ [DEBUG] Stack trace:",i.stack),u({title:"Erro ao carregar checkout",description:i.message||"NÃ£o foi possÃ­vel carregar os dados do pedido",variant:"destructive"})}finally{console.log("ðŸ [DEBUG] loadCheckoutData finalizado"),w(!1)}},ge=o=>{V(i=>i.includes(o)?i.filter(T=>T!==o):[...i,o])},ye=()=>L.filter(o=>G.includes(o.id)).reduce((o,i)=>o+Number(i.price||0),0),be=((c==null?void 0:c.total)||0)+ye(),Ce=()=>{k===1?se():y<3?(D(y+1),window.scrollTo({top:0,behavior:"smooth"})):se()},je=()=>{y>1&&(D(y-1),window.scrollTo({top:0,behavior:"smooth"}))},se=async()=>{if(!(!m||!c)){N(!0);try{const{error:o}=await g.from("Order").update({customerName:C.name,customerEmail:C.email,customerPhone:C.phone,customerCpf:Me(C.document),shippingAddress:h,paymentMethod:d,updatedAt:new Date().toISOString()}).eq("id",m);if(o)throw o;const{data:i}=await g.from("GatewayConfig").select(`
          *,
          gateway:Gateway(*)
        `).eq("userId",P.userId).eq("isActive",!0);if(!i||i.length===0)throw new Error("Nenhum gateway de pagamento configurado");let T=null;for(const l of i){const S=l.gateway;if(!S)continue;const b=l.isDefault||!1;if(d==="PIX"&&S.supportsPix){if(T=l,b)break}else if(d==="CREDIT_CARD"&&S.supportsCreditCard){if(T=l,b)break}else if(d==="BOLETO"&&S.supportsBoleto&&(T=l,b))break}if(!T)throw new Error(`Gateway de ${d} nÃ£o configurado`);const{data:q,error:W}=await g.from("Transaction").insert({orderId:m,gatewayId:T.gatewayId,userId:P.userId,amount:c.total,status:"PENDING",paymentMethod:d,metadata:{customerData:C,addressData:h,cardData:d==="CREDIT_CARD"?B:null}}).select().single();if(W||!q)throw new Error("Erro ao criar transaÃ§Ã£o");const{data:R,error:U}=await g.functions.invoke("process-payment",{body:{transactionId:q.id,gatewaySlug:T.gateway.slug,paymentMethod:d,amount:c.total,customerData:C,addressData:h,cardData:d==="CREDIT_CARD"?B:null}});if(U||!(R!=null&&R.success))throw new Error((R==null?void 0:R.error)||"Erro ao processar pagamento");p(d==="PIX"?`/pix/${m}/${q.id}`:`/checkout/success/${q.id}`)}catch(o){console.error("Erro ao processar pagamento:",o),u({title:"Erro no pagamento",description:o.message||"Tente novamente",variant:"destructive"})}finally{N(!1)}}};return v?e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#f9fafb"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(ue,{className:"w-12 h-12 animate-spin text-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Carregando checkout..."})]})}):!c||!c.products||!Array.isArray(c.products)?(console.error("âŒ [DEBUG] checkoutData invÃ¡lido:",c),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx(ae,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Pedido nÃ£o encontrado"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"NÃ£o foi possÃ­vel carregar os dados do pedido."}),e.jsx("button",{onClick:()=>window.history.back(),className:"px-6 py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700",children:"Voltar"})]})})):e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:t.backgroundColor||"#f9fafb"},children:[t.noticeBarEnabled&&t.noticeBarMessage&&e.jsx("div",{className:"py-3 px-4 text-center text-sm font-medium",style:{backgroundColor:t.noticeBarBackgroundColor||"#8b5cf6",color:t.noticeBarTextColor||"#ffffff"},children:t.noticeBarMessage}),t.showLogoAtTop&&t.logoUrl&&e.jsx("div",{className:"bg-white shadow-sm py-4",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 flex justify-center",children:e.jsx("img",{src:t.logoUrl,alt:"Logo",className:"h-10 object-contain"})})}),t.bannerEnabled&&t.bannerUrl&&e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("img",{src:t.bannerUrl,alt:"Banner",className:"w-full object-cover",style:{maxHeight:t.bannerHeight||"200px"}})}),k===3&&e.jsx(Oe,{currentStep:y,theme:t}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(x.div,{className:"bg-white rounded-2xl shadow-lg p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-1",style:{color:t.headingColor||"#111827"},children:k===1?"Finalizar Pedido":y===1?"Seus Dados":y===2?"EndereÃ§o":"Pagamento"}),e.jsx("p",{className:"text-sm",style:{color:t.textColor||"#6b7280"},children:"Preencha as informaÃ§Ãµes para continuar"})]}),e.jsxs(X,{mode:"wait",children:[(k===1||y===1)&&e.jsxs(x.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[e.jsx(j,{label:"Nome Completo",type:"text",value:C.name,onChange:o=>z({...C,name:o.target.value}),theme:t,icon:e.jsx(me,{className:"w-5 h-5"}),placeholder:"Seu nome completo",required:!0}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(j,{label:"E-mail",type:"email",value:C.email,onChange:o=>z({...C,email:o.target.value}),theme:t,icon:e.jsx(xe,{className:"w-5 h-5"}),placeholder:"seu@email.com",required:!0}),e.jsx(j,{label:"Telefone",type:"tel",value:C.phone,onChange:o=>z({...C,phone:o.target.value}),theme:t,icon:e.jsx(pe,{className:"w-5 h-5"}),placeholder:"(11) 99999-9999",mask:"phone",required:!0})]}),e.jsx(j,{label:"CPF",type:"text",value:C.document,onChange:o=>z({...C,document:o.target.value}),theme:t,icon:e.jsx(Ie,{className:"w-5 h-5"}),placeholder:"000.000.000-00",mask:"cpf",required:!0})]},"step1"),(k===1||y===2)&&e.jsxs(x.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:k===1?"mt-6 space-y-4":"space-y-4",children:[k===1&&e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"EndereÃ§o de Entrega"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(j,{label:"CEP",type:"text",value:h.zipCode,onChange:o=>I({...h,zipCode:o.target.value}),theme:t,placeholder:"00000-000",mask:"cep",required:!0}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(j,{label:"Rua",type:"text",value:h.street,onChange:o=>I({...h,street:o.target.value}),theme:t,placeholder:"Nome da rua",required:!0})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(j,{label:"NÃºmero",type:"text",value:h.number,onChange:o=>I({...h,number:o.target.value}),theme:t,placeholder:"123",required:!0}),e.jsx("div",{className:"col-span-1 md:col-span-3",children:e.jsx(j,{label:"Complemento",type:"text",value:h.complement,onChange:o=>I({...h,complement:o.target.value}),theme:t,placeholder:"Apto, bloco..."})})]}),e.jsx(j,{label:"Bairro",type:"text",value:h.neighborhood,onChange:o=>I({...h,neighborhood:o.target.value}),theme:t,placeholder:"Seu bairro",required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(j,{label:"Cidade",type:"text",value:h.city,onChange:o=>I({...h,city:o.target.value}),theme:t,placeholder:"Cidade",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:t.labelColor||"#111827"},children:"Estado *"}),e.jsxs("select",{value:h.state,onChange:o=>I({...h,state:o.target.value}),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 outline-none transition-all",style:{backgroundColor:t.inputBackgroundColor||"#ffffff",borderColor:t.inputBorderColor||"#d1d5db",borderRadius:`${t.inputBorderRadius||8}px`,height:`${t.inputHeight||48}px`,color:t.textColor||"#111827"},children:[e.jsx("option",{value:"",children:"Selecione"}),e.jsx("option",{value:"SP",children:"SP"}),e.jsx("option",{value:"RJ",children:"RJ"}),e.jsx("option",{value:"MG",children:"MG"}),e.jsx("option",{value:"RS",children:"RS"}),e.jsx("option",{value:"SC",children:"SC"}),e.jsx("option",{value:"PR",children:"PR"})]})]})]})]},"step2"),(k===1||y===3)&&e.jsxs(x.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:k===1?"mt-6 space-y-4":"space-y-4",children:[k===1&&e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Forma de Pagamento"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx("button",{onClick:()=>O("PIX"),className:`p-4 rounded-lg border-2 font-semibold transition ${d==="PIX"?"border-purple-600 bg-purple-50":"border-gray-200"}`,children:"PIX"}),e.jsx("button",{onClick:()=>O("CREDIT_CARD"),className:`p-4 rounded-lg border-2 font-semibold transition ${d==="CREDIT_CARD"?"border-purple-600 bg-purple-50":"border-gray-200"}`,children:"CartÃ£o"}),e.jsx("button",{onClick:()=>O("BOLETO"),className:`p-4 rounded-lg border-2 font-semibold transition ${d==="BOLETO"?"border-purple-600 bg-purple-50":"border-gray-200"}`,children:"Boleto"})]}),d==="CREDIT_CARD"&&e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsx(j,{label:"NÃºmero do CartÃ£o",type:"text",value:B.number,onChange:o=>_({...B,number:o.target.value}),theme:t,icon:e.jsx(te,{className:"w-5 h-5"}),placeholder:"0000 0000 0000 0000",mask:"card",required:!0}),e.jsx(j,{label:"Nome no CartÃ£o",type:"text",value:B.holderName,onChange:o=>_({...B,holderName:o.target.value}),theme:t,placeholder:"Nome como estÃ¡ no cartÃ£o",required:!0}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(j,{label:"MÃªs",type:"text",value:B.expiryMonth,onChange:o=>_({...B,expiryMonth:o.target.value}),theme:t,placeholder:"MM",maxLength:2,required:!0}),e.jsx(j,{label:"Ano",type:"text",value:B.expiryYear,onChange:o=>_({...B,expiryYear:o.target.value}),theme:t,placeholder:"AA",maxLength:2,required:!0}),e.jsx(j,{label:"CVV",type:"text",value:B.cvv,onChange:o=>_({...B,cvv:o.target.value}),theme:t,placeholder:"123",maxLength:4,required:!0})]})]}),d==="PIX"&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mt-4",children:e.jsx("p",{className:"text-sm text-green-800",children:"âœ… ApÃ³s clicar em finalizar, vocÃª receberÃ¡ o QR Code do PIX"})}),d==="BOLETO"&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4",children:e.jsx("p",{className:"text-sm text-blue-800",children:"â„¹ï¸ O boleto serÃ¡ gerado apÃ³s a finalizaÃ§Ã£o"})})]},"step3")]}),t.orderBumpEnabled&&L.length>0&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:t.headingColor||"#111827"},children:"ðŸŽ Aproveite essa oferta especial!"}),L.map(o=>e.jsx(qe,{orderBump:{id:o.id,title:o.title,description:o.description,originalPrice:o.originalPrice,price:o.price,image:o.image,badge:o.badge,bullets:o.bullets||[]},theme:t,selected:G.includes(o.id),onToggle:ge},o.id))]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[k===3&&y>1&&e.jsx(de,{onClick:je,variant:"secondary",theme:t,icon:e.jsx($e,{className:"w-5 h-5"}),iconPosition:"left",fullWidth:!0,children:"Voltar"}),e.jsx(de,{onClick:Ce,disabled:F,loading:F,variant:k===1||y===3?"checkout":"primary",theme:t,icon:k===1||y===3?e.jsx(ie,{className:"w-5 h-5"}):void 0,iconPosition:"left",fullWidth:!0,size:"lg",children:k===1||y===3?"Finalizar Compra":"Continuar"})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t flex items-center justify-center gap-6 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{children:"Compra Segura"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{children:"SSL Certificado"})]})]})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(x.div,{className:"bg-white rounded-2xl shadow-lg p-6 sticky top-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",style:{color:t.headingColor||"#111827"},children:[e.jsx(ce,{className:"w-5 h-5"}),"Resumo do Pedido"]}),e.jsx("div",{className:"space-y-3 mb-4",children:(le=c==null?void 0:c.products)==null?void 0:le.filter(o=>o&&o.name).map((o,i)=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg bg-gray-100 flex-shrink-0 overflow-hidden",children:o!=null&&o.image?e.jsx("img",{src:o.image,alt:(o==null?void 0:o.name)||"Produto",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ce,{className:"w-8 h-8 text-gray-400"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm truncate",children:(o==null?void 0:o.name)||"Produto"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Qtd: ",(o==null?void 0:o.quantity)||1]}),e.jsxs("p",{className:"text-sm font-bold text-gray-900 mt-1",children:["R$"," ",(((o==null?void 0:o.price)||0)*((o==null?void 0:o.quantity)||1)).toFixed(2)]})]})]},(o==null?void 0:o.id)||i))}),e.jsx("div",{className:"border-t my-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["R$ ",c.subtotal.toFixed(2)]})]}),c.shipping>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Frete"}),e.jsxs("span",{className:"font-medium",children:["R$ ",c.shipping.toFixed(2)]})]}),c.discount&&c.discount>0&&e.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[e.jsx("span",{children:"Desconto"}),e.jsxs("span",{className:"font-medium",children:["- R$ ",c.discount.toFixed(2)]})]})]}),e.jsx("div",{className:"border-t mt-4 pt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold",style:{color:t.headingColor||"#111827"},children:"Total"}),e.jsxs("span",{className:"text-3xl font-bold",style:{color:t.primaryButtonBackgroundColor||"#8b5cf6"},children:["R$ ",be.toFixed(2)]})]})}),G.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("h4",{className:"text-sm font-semibold mb-3",style:{color:t.headingColor||"#111827"},children:"Itens Adicionais"}),L.filter(o=>G.includes(o.id)).map(o=>e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-600",children:o.title}),e.jsxs("span",{className:"font-medium text-gray-900",children:["R$ ",Number(o.price||0).toFixed(2)]})]},o.id))]})]})})]})}),e.jsx(ze,{theme:t,storeData:M})]})},ar=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:"Module"}));export{oe as D,Ue as P,ar as a,Te as c};

import{j as e}from"./vendor-ui-D3JNL6pE.js";import{f as a,r}from"./vendor-react-X41Bjl18.js";import{f as s,s as t}from"./index-CSfOwV7D.js";import{L as i,av as d,C as o,F as l}from"./vendor-icons-DiMyZvwG.js";import"./vendor-supabase-HUq0BeMy.js";import"./vendor-utils-Dl0_yMKq.js";import"./vendor-animation-DtB50Lbk.js";import"./vendor-query-DqG_mm-v.js";function n(){const n=s(e=>e.user),x=s(e=>e.isAuthenticated),m=s(e=>e.isInitialized),g=a(),[u,h]=r.useState(!0),[b,p]=r.useState(null),[j,f]=r.useState(null);r.useEffect(()=>{y()},[]);const y=async()=>{try{const{data:{session:e},error:a}=await t.auth.getSession();if(a)return f(`Erro de sess√£o: ${a.message}`),void h(!1);if(!e)return f("Sess√£o n√£o encontrada. Redirecionando para login..."),setTimeout(()=>g("/login"),2e3),void h(!1);if(p({userId:e.user.id,email:e.user.email,expiresAt:new Date(1e3*e.expires_at).toISOString()}),n?.id){const{data:e,error:a}=await t.from("User").select("*").eq("id",n.id).single()}h(!1)}catch(e){f(`Exce√ß√£o: ${e.message}`),h(!1)}};return u?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center gap-4 p-6",children:[e.jsx(i,{className:"h-12 w-12 animate-spin text-blue-500"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200",children:"Carregando..."}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Verificando autentica√ß√£o"})]}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"üîç Diagn√≥stico de Onboarding"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Vers√£o simplificada para debug"})]}),j&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(d,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-red-900 dark:text-red-200",children:"Erro detectado"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:j})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Estado do AuthStore"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{label:"Autenticado",value:x,icon:x?o:l}),e.jsx(c,{label:"Inicializado",value:m,icon:m?o:l}),e.jsx(c,{label:"Usu√°rio Presente",value:!!n,icon:n?o:l})]}),n&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Dados do Usu√°rio:"}),e.jsx("pre",{className:"text-xs bg-gray-100 dark:bg-gray-900 p-3 rounded overflow-auto",children:JSON.stringify({id:n.id,email:n.email,name:n.name,isSuperAdmin:n.isSuperAdmin},null,2)})]})]}),b&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Informa√ß√µes da Sess√£o"}),e.jsx("pre",{className:"text-xs bg-gray-100 dark:bg-gray-900 p-3 rounded overflow-auto",children:JSON.stringify(b,null,2)})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 space-y-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"A√ß√µes"}),e.jsx("button",{onClick:()=>{const e={timestamp:(new Date).toISOString(),authStore:{isAuthenticated:x,isInitialized:m,user:n},session:b,error:j,localStorage:localStorage.getItem("auth-storage")};navigator.clipboard.writeText(JSON.stringify(e,null,2)),alert("Debug info copiado para clipboard!")},className:"w-full px-4 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors font-medium",children:"üìã Copiar Informa√ß√µes de Debug"}),e.jsx("button",{onClick:()=>g("/login"),className:"w-full px-4 py-3 bg-gray-500 hover:bg-gray-600 text-white rounded-lg transition-colors font-medium",children:"‚Üê Voltar para Login"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-3 bg-purple-500 hover:bg-purple-600 text-white rounded-lg transition-colors font-medium",children:"üîÑ Recarregar P√°gina"}),e.jsx("button",{onClick:()=>{localStorage.clear(),window.location.href="/login"},className:"w-full px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors font-medium",children:"üóëÔ∏è Limpar Cache e Fazer Logout"})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["üí° ",e.jsx("strong",{children:"Dica:"})," Abra o Console do navegador (F12) para ver logs detalhados da autentica√ß√£o"]})})]})})}function c({label:a,value:r,icon:s}){return e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:a}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{className:"h-5 w-5 "+(r?"text-green-500":"text-red-500")}),e.jsx("span",{className:"text-sm font-medium "+(r?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:r?"Sim":"N√£o"})]})]})}export{n as default};

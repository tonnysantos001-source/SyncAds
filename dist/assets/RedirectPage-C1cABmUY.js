import{f as g,u as v,r as o,s as x,j as a,g as j,h as b,i as N,l as C,I as n,B as y}from"./index-DMxb--CC.js";import{L as c}from"./label-CPOcKXR1.js";import{A as R,a as S}from"./alert-rS5DbP0Q.js";import{C as I}from"./circle-alert-COG_dWuh.js";const A=()=>{const{toast:i}=g(),r=v(e=>e.user),[h,d]=o.useState(!0),[p,m]=o.useState(!1),[t,s]=o.useState({cartao:"",boleto:"",pix:""});o.useEffect(()=>{r!=null&&r.organizationId&&u()},[r==null?void 0:r.organizationId]);const u=async()=>{try{d(!0);const{data:e,error:l}=await x.from("CheckoutRedirect").select("*").eq("organizationId",r==null?void 0:r.organizationId).single();if(l&&l.code!=="PGRST116")throw l;e&&s({cartao:e.creditCardUrl||"",boleto:e.bankSlipUrl||"",pix:e.pixUrl||""})}catch(e){console.error("Erro ao carregar redirecionamentos:",e),i({title:"Erro ao carregar",description:"Não foi possível carregar as configurações",variant:"destructive"})}finally{d(!1)}},f=async()=>{if(r!=null&&r.organizationId){m(!0);try{const{error:e}=await x.from("CheckoutRedirect").upsert({organizationId:r.organizationId,creditCardUrl:t.cartao,bankSlipUrl:t.boleto,pixUrl:t.pix,updatedAt:new Date().toISOString()});if(e)throw e;i({title:"URLs salvas!",description:"Suas configurações foram salvas com sucesso"})}catch(e){console.error("Erro ao salvar URLs:",e),i({title:"Erro ao salvar",description:"Não foi possível salvar as URLs",variant:"destructive"})}finally{m(!1)}}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"REDIRECIONAMENTO"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Redirecione seus compradores para uma página personalizada."})]}),a.jsxs(j,{children:[a.jsx(b,{children:a.jsx(N,{children:"URLs de Redirecionamento"})}),a.jsxs(C,{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(c,{htmlFor:"cartao",className:"text-base font-medium",children:"Cartão"}),a.jsx(n,{id:"cartao",type:"url",placeholder:"https://",value:t.cartao,onChange:e=>s({...t,cartao:e.target.value}),className:"mt-2"})]}),a.jsxs("div",{children:[a.jsx(c,{htmlFor:"boleto",className:"text-base font-medium",children:"Boleto"}),a.jsx(n,{id:"boleto",type:"url",placeholder:"https://",value:t.boleto,onChange:e=>s({...t,boleto:e.target.value}),className:"mt-2"})]}),a.jsxs("div",{children:[a.jsx(c,{htmlFor:"pix",className:"text-base font-medium",children:"Pix"}),a.jsx(n,{id:"pix",type:"url",placeholder:"https://",value:t.pix,onChange:e=>s({...t,pix:e.target.value}),className:"mt-2"})]}),a.jsxs(R,{className:"border-pink-200 bg-pink-50",children:[a.jsx(I,{className:"h-4 w-4 text-pink-600"}),a.jsxs(S,{className:"text-pink-900",children:["Está com dúvidas?"," ",a.jsx("a",{href:"#",className:"font-medium underline hover:no-underline",children:"Aprenda com o nosso redirecionamento."})]})]}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsx(y,{onClick:f,className:"bg-pink-600 hover:bg-pink-700 text-white px-8",disabled:p||h,children:p?"Salvando...":"Salvar"})})]})]})]})};export{A as default};

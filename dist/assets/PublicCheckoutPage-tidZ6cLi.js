import{c as Y,s as g,m as ge,e as pe,f as Ce,r as C,j as e,N as W,M as F,a5 as be,C as $,R as X,d as K,g as T,l as D,Y as I,I as b,O as fe,B as R,au as ye,X as je}from"./index-BXl307GV.js";import{L as x}from"./label-BnOLfE9V.js";import{S as v}from"./separator-DDGGdFBv.js";import{A as ve,a as Ne}from"./alert-DGMXFyGh.js";import{C as we}from"./circle-alert-D0yikJ8q.js";import{T as Be}from"./truck-CUx6P4go.js";import{F as ke}from"./file-text-CrpcaRVz.js";import{L}from"./lock-DxS7BbUV.js";import{S as O}from"./shield-check-BQrry_nd.js";/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=Y("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=Y("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Se={async saveCustomization(l){try{const{data:t,error:s}=await g.from("CheckoutCustomization").upsert({...l,updatedAt:new Date().toISOString()}).select().single();if(s)throw s;return t}catch(t){throw console.error("Error saving checkout customization:",t),t}},async loadCustomization(l){try{const{data:t,error:s}=await g.from("CheckoutCustomization").select("*").eq("userId",l).eq("isActive",!0).single();if(s&&s.code!=="PGRST116")throw s;return t}catch(t){throw console.error("Error loading checkout customization:",t),t}},async listCustomizations(l){try{const{data:t,error:s}=await g.from("CheckoutCustomization").select("*").eq("userId",l).order("createdAt",{ascending:!1});if(s)throw s;return t}catch(t){throw console.error("Error listing checkout customizations:",t),t}},async activateCustomization(l){try{const t=await g.from("CheckoutCustomization").select("userId").eq("id",l).single();t.data&&await g.from("CheckoutCustomization").update({isActive:!1}).eq("userId",t.data.userId);const{data:s,error:d}=await g.from("CheckoutCustomization").update({isActive:!0,updatedAt:new Date().toISOString()}).eq("id",l).select().single();if(d)throw d;return s}catch(t){throw console.error("Error activating checkout customization:",t),t}},async deleteCustomization(l){try{const{error:t}=await g.from("CheckoutCustomization").delete().eq("id",l);if(t)throw t}catch(t){throw console.error("Error deleting checkout customization:",t),t}},async duplicateCustomization(l,t){try{const{data:s,error:d}=await g.from("CheckoutCustomization").select("*").eq("id",l).single();if(d)throw d;const{data:N,error:S}=await g.from("CheckoutCustomization").insert({userId:s.userId,name:t,theme:s.theme,isActive:!1}).select().single();if(S)throw S;return N}catch(s){throw console.error("Error duplicating checkout customization:",s),s}},async generatePreviewUrl(l){try{const{data:t,error:s}=await g.from("CheckoutCustomization").insert({userId:l.userId,name:`Preview-${Date.now()}`,theme:l.theme||{},isActive:!1}).select().single();if(s)throw s;return`/checkout/preview/${t.id}`}catch(t){throw console.error("Error generating preview URL:",t),t}},async exportCustomization(l){try{const{data:t,error:s}=await g.from("CheckoutCustomization").select("*").eq("id",l).single();if(s)throw s;return{name:t.name,theme:t.theme,exportedAt:new Date().toISOString(),version:"1.0"}}catch(t){throw console.error("Error exporting checkout customization:",t),t}},async importCustomization(l,t){try{const{data:s,error:d}=await g.from("CheckoutCustomization").insert({userId:l,name:`${t.name} (Importado)`,theme:t.theme,isActive:!1}).select().single();if(d)throw d;return s}catch(s){throw console.error("Error importing checkout customization:",s),s}}},J=l=>{const t=l.replace(/\D/g,"");return t.length<=5?t:`${t.slice(0,5)}-${t.slice(5,8)}`},Z=l=>l.replace(/\D/g,""),Ee=l=>Z(l).length===8,Pe=async l=>{const t=Z(l);if(!Ee(t))throw new Error("CEP inv√°lido. Deve conter 8 d√≠gitos.");try{const s=await fetch(`https://viacep.com.br/ws/${t}/json/`);if(!s.ok)throw new Error("Erro ao buscar CEP");const d=await s.json();return d.erro?null:{street:d.logradouro||"",neighborhood:d.bairro||"",city:d.localidade||"",state:d.uf||"",zipCode:J(t)}}catch(s){throw console.error("Erro ao buscar CEP:",s),s}},ee={logoUrl:"",faviconUrl:"",logoAlignment:"left",showLogoAtTop:!0,logoWidth:180,logoHeight:50,backgroundColor:"#F9FAFB",backgroundGradient:"linear-gradient(180deg, #F9FAFB 0%, #F3F4F6 100%)",useGradient:!1,textColor:"#1F2937",headingColor:"#111827",noticeBarEnabled:!0,noticeBarMessage:"üéâ FRETE GR√ÅTIS para todo o Brasil em compras acima de R$ 199!",noticeBarBackgroundColor:"#1F2937",noticeBarTextColor:"#FFFFFF",noticeBarAnimation:!0,bannerEnabled:!1,bannerUrl:"",bannerHeight:200,cartDisplay:"drawer",cartBorderColor:"#E5E7EB",cartBackgroundColor:"#FFFFFF",quantityCircleColor:"#8B5CF6",quantityTextColor:"#FFFFFF",showCartIcon:!0,showCartReminder:!0,allowCouponEdit:!0,navigationSteps:3,nextStepStyle:"rounded",showProgressBar:!0,progressBarColor:"#8B5CF6",stepActiveColor:"#8B5CF6",stepInactiveColor:"#D1D5DB",stepCompletedColor:"#10B981",primaryButtonBackgroundColor:"#8B5CF6",primaryButtonTextColor:"#FFFFFF",primaryButtonBorderRadius:12,primaryButtonHover:!0,primaryButtonHoverColor:"#7C3AED",primaryButtonFlow:!0,primaryButtonShadow:!0,checkoutButtonBackgroundColor:"#10B981",checkoutButtonTextColor:"#FFFFFF",checkoutButtonBorderRadius:14,checkoutButtonHover:!0,checkoutButtonHoverColor:"#059669",checkoutButtonFlow:!0,checkoutButtonShadow:!0,checkoutButtonPulse:!0,highlightedBorderColor:"#8B5CF6",highlightedBorderTextColor:"#FFFFFF",highlightedBorderWidth:2,footerBackgroundColor:"#F3F4F6",footerTextColor:"#6B7280",showStoreName:!0,showPaymentMethods:!0,showCnpjCpf:!0,showContactEmail:!0,showAddress:!0,showPhone:!0,showPrivacyPolicy:!0,showTermsConditions:!0,showReturns:!0,footerLinkColor:"#8B5CF6",discountTagTextColor:"#FFFFFF",discountTagBackgroundColor:"#EF4444",discountTagBorderRadius:6,discountTagFontWeight:"700",useVisible:!0,expirationTime:60,forceRemovalTime:90,showCountdownTimer:!0,urgencyMessageColor:"#DC2626",urgencyBackgroundColor:"#FEE2E2",orderBumpEnabled:!0,orderBumpTextColor:"#374151",orderBumpBackgroundColor:"#FFFBEB",orderBumpPriceColor:"#DC2626",orderBumpBorderColor:"#FCD34D",orderBumpBorderWidth:2,orderBumpBorderRadius:12,orderBumpButtonTextColor:"#FFFFFF",orderBumpButtonBackgroundColor:"#EF4444",orderBumpShadow:!0,fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif",fontSize:{xs:"0.75rem",sm:"0.875rem",base:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem"},fontWeight:{normal:"400",medium:"500",semibold:"600",bold:"700"},spacing:{xs:"0.25rem",sm:"0.5rem",md:"1rem",lg:"1.5rem",xl:"2rem","2xl":"3rem"},borderRadius:{sm:"0.375rem",md:"0.5rem",lg:"0.75rem",xl:"1rem",full:"9999px"},boxShadow:{sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},inputBorderColor:"#D1D5DB",inputFocusBorderColor:"#8B5CF6",inputBackgroundColor:"#FFFFFF",inputHeight:48,inputBorderRadius:10,labelColor:"#374151",labelFontWeight:"600",placeholderColor:"#9CA3AF",cardBackgroundColor:"#FFFFFF",cardBorderColor:"#E5E7EB",cardBorderRadius:16,cardShadow:!0,cardPadding:"1.5rem",showTrustBadges:!0,trustBadgeColor:"#10B981",sslBadgeEnabled:!0,securityIconsEnabled:!0,language:"pt",currency:"BRL",presellPage:"cart-in-cart",requestCpfOnlyAtPayment:!1,requestBirthDate:!1,requestGender:!1,disableCarrot:!1,mobileBreakpoint:640,tabletBreakpoint:1024,desktopBreakpoint:1280,enableAnimations:!0,animationDuration:"300ms",animationTiming:"cubic-bezier(0.4, 0, 0.2, 1)",highContrast:!1,focusIndicatorColor:"#8B5CF6",reducedMotion:!1};function Q(l){return{...ee,...l}}const Te=({injectedOrderId:l,injectedTheme:t,previewMode:s=!1})=>{const{orderId:d}=ge(),N=l||d||null,S=pe(),{toast:w}=Ce(),[n,oe]=C.useState(null),[E,re]=C.useState(null),[te,U]=C.useState(!0),[A,_]=C.useState(!1),[i,M]=C.useState(1),[se,H]=C.useState(!1),[z,k]=C.useState(!1),[m,B]=C.useState({name:"",email:"",phone:"",document:""}),[c,j]=C.useState({street:"",number:"",complement:"",neighborhood:"",city:"",state:"",zipCode:""}),[f,ae]=C.useState("PIX"),[G,le]=C.useState(1),o=t?Q(t):E!=null&&E.theme?Q(E.theme):ee;C.useEffect(()=>{N&&ne()},[N]);const ne=async()=>{var r;try{U(!0);const{data:a,error:y}=await g.from("Order").select("*").eq("id",N).single();if(y||!a)throw new Error("Pedido n√£o encontrado");const q=Array.isArray(a.items)?a.items:[],he=Array.isArray((r=a.metadata)==null?void 0:r.originalProducts)?a.metadata.originalProducts:[],xe={orderId:a.id,products:q.map(h=>{const u=he.find(p=>(p==null?void 0:p.variantId)&&String(p.variantId)===String(h.variantId)||(p==null?void 0:p.productId)&&String(p.productId)===String(h.productId)||(p==null?void 0:p.id)&&(String(p.id)===String(h.productId)||String(p.id)===String(h.id)));return{id:h.productId||h.id,name:h.name||(u==null?void 0:u.name)||(u==null?void 0:u.title)||"Produto",price:Number(h.price)||0,quantity:Number(h.quantity)||1,image:h.image||(u==null?void 0:u.image)||(Array.isArray(u==null?void 0:u.images)?u.images[0]:"")||"",sku:h.sku||(u==null?void 0:u.sku)||""}}),total:Number(a.total)||0,subtotal:Number(a.subtotal)||0,tax:Number(a.tax)||0,shipping:Number(a.shipping)||0,discount:Number(a.discount)||0};if(oe(xe),!s&&a.userId)try{const h=await Se.loadCustomization(a.userId);h&&re(h)}catch{console.log("Usando tema padr√£o")}}catch(a){console.error("Erro ao carregar checkout:",a),w({title:"Erro ao carregar checkout",description:a.message||"Tente novamente mais tarde",variant:"destructive"})}finally{U(!1)}},ie=async r=>{const a=r.replace(/\D/g,"");if(a.length===8){H(!0);try{const y=await Pe(a);y&&j(q=>({...q,street:y.logradouro||"",neighborhood:y.bairro||"",city:y.localidade||"",state:y.uf||""}))}catch(y){console.error("Erro ao buscar CEP:",y)}finally{H(!1)}}},V=r=>{if(r===1){if(!m.name||!m.email||!m.phone)return w({title:"Dados incompletos",description:"Preencha todos os campos obrigat√≥rios",variant:"destructive"}),!1;if(o.requestCpfOnlyAtPayment===!1&&!m.document)return w({title:"CPF obrigat√≥rio",description:"Por favor, informe seu CPF",variant:"destructive"}),!1}return r===2&&(!c.zipCode||!c.street||!c.number||!c.neighborhood||!c.city||!c.state)?(w({title:"Endere√ßo incompleto",description:"Preencha todos os campos obrigat√≥rios",variant:"destructive"}),!1):!0},ce=()=>{V(i)&&(M(i+1),window.scrollTo({top:0,behavior:"smooth"}))},de=()=>{M(i-1),window.scrollTo({top:0,behavior:"smooth"})},me=async()=>{if(V(i))try{_(!0);const{data:r,error:a}=await g.functions.invoke("process-payment",{body:{orderId:N,paymentMethod:f,customerData:m,addressData:c,installments:f==="CREDIT_CARD"?G:1}});if(a)throw a;if(r!=null&&r.success)w({title:"Pedido confirmado!",description:"Redirecionando para confirma√ß√£o..."}),setTimeout(()=>{S(`/checkout/success/${r.transactionId}`)},1500);else throw new Error((r==null?void 0:r.error)||"Erro ao processar pagamento")}catch(r){console.error("Erro ao processar checkout:",r),w({title:"Erro ao processar pagamento",description:r.message||"Tente novamente mais tarde",variant:"destructive"})}finally{_(!1)}};if(te)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:o.backgroundColor},children:e.jsxs("div",{className:"text-center",children:[e.jsx(W,{className:"h-12 w-12 animate-spin mx-auto mb-4",style:{color:o.primaryButtonBackgroundColor}}),e.jsx("p",{style:{color:o.textColor},children:"Carregando checkout..."})]})});if(!n)return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{backgroundColor:o.backgroundColor},children:e.jsxs(ve,{variant:"destructive",className:"max-w-md",children:[e.jsx(we,{className:"h-4 w-4"}),e.jsx(Ne,{children:"Pedido n√£o encontrado. Verifique o link e tente novamente."})]})});const ue=3,P=[{number:1,label:"Dados",icon:be},{number:2,label:"Endere√ßo",icon:Be},{number:3,label:"Pagamento",icon:$}];return e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:o.backgroundColor,color:o.textColor,fontFamily:o.fontFamily},children:[o.noticeBarEnabled&&o.noticeBarMessage&&e.jsx("div",{className:"py-3 px-4 text-center text-sm md:text-base font-medium",style:{backgroundColor:o.noticeBarBackgroundColor,color:o.noticeBarTextColor},children:o.noticeBarMessage}),e.jsx("header",{className:"border-b sticky top-0 z-30 backdrop-blur-lg",style:{backgroundColor:o.useGradient?`linear-gradient(135deg, ${o.backgroundColor}, ${o.backgroundGradient})`:`${o.backgroundColor}F5`,borderColor:o.cardBorderColor},children:e.jsx("div",{className:"container mx-auto px-4 py-4 md:py-6 max-w-6xl",children:e.jsx("div",{className:F("flex items-center",o.logoAlignment==="center"&&"justify-center",o.logoAlignment==="right"&&"justify-end",o.logoAlignment==="left"&&"justify-start"),children:o.logoUrl?e.jsx("img",{src:o.logoUrl,alt:"Logo",className:"h-8 md:h-10 object-contain",style:{width:o.logoWidth||"auto",height:o.logoHeight||40}}):e.jsx("h1",{className:"text-xl md:text-2xl font-bold",style:{color:o.headingColor},children:"Checkout"})})})}),o.bannerEnabled&&o.bannerUrl&&e.jsx("div",{className:"w-full",children:e.jsx("img",{src:o.bannerUrl,alt:"Banner",className:"w-full object-cover",style:{height:o.bannerHeight||90}})}),e.jsxs("main",{className:"container mx-auto px-4 py-6 md:py-8 max-w-6xl pb-32 lg:pb-8",children:[o.showProgressBar&&e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsx("div",{className:"lg:hidden flex items-center justify-between mb-4",children:P.map((r,a)=>e.jsxs(X.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center gap-1.5 flex-1",children:[e.jsx("div",{className:F("w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all",i===r.number&&"ring-2 ring-offset-2"),style:{backgroundColor:i>r.number?o.stepCompletedColor:i===r.number?o.stepActiveColor:o.stepInactiveColor,color:i>=r.number?o.primaryButtonTextColor:o.textColor},children:i>r.number?e.jsx(K,{className:"h-5 w-5"}):e.jsx(r.icon,{className:"h-5 w-5"})}),e.jsx("span",{className:"text-xs font-medium text-center",style:{color:i>=r.number?o.headingColor:o.textColor,opacity:i>=r.number?1:.5},children:r.label})]}),a<P.length-1&&e.jsx("div",{className:"w-8 h-0.5 mx-1 rounded-full transition-all mt-[-20px]",style:{backgroundColor:i>r.number?o.stepCompletedColor:o.stepInactiveColor}})]},r.number))}),e.jsx("div",{className:"hidden lg:flex items-center justify-between mb-4",children:P.map((r,a)=>e.jsxs(X.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:F("w-12 h-12 rounded-full flex items-center justify-center font-semibold transition-all",i>r.number&&"scale-110"),style:{backgroundColor:i>r.number?o.stepCompletedColor:i===r.number?o.stepActiveColor:o.stepInactiveColor,color:i>=r.number?o.primaryButtonTextColor:o.textColor},children:i>r.number?e.jsx(K,{className:"h-6 w-6"}):e.jsx(r.icon,{className:"h-6 w-6"})}),e.jsx("span",{className:"text-xs font-medium",style:{color:i>=r.number?o.headingColor:o.textColor,opacity:i>=r.number?1:.5},children:r.label})]}),a<P.length-1&&e.jsx("div",{className:"flex-1 h-1 mx-2 rounded-full transition-all",style:{backgroundColor:i>r.number?o.stepCompletedColor:o.stepInactiveColor}})]},r.number))})]}),e.jsx("div",{className:"lg:hidden mb-6",children:e.jsx(T,{style:{backgroundColor:o.cardBackgroundColor,borderColor:o.cardBorderColor,borderRadius:o.cardBorderRadius},children:e.jsxs(D,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-bold text-base",style:{color:o.headingColor},children:"Seu Pedido"}),e.jsx("button",{onClick:()=>k(!0),className:"text-sm underline",style:{color:o.primaryButtonBackgroundColor},children:"Ver detalhes"})]}),e.jsx("div",{className:"space-y-3 mb-4",children:n.products.map((r,a)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative flex-shrink-0 rounded-lg overflow-hidden",style:{width:50,height:50,backgroundColor:o.inputBackgroundColor},children:[r.image?e.jsx("img",{src:r.image,alt:r.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(I,{className:"h-5 w-5 opacity-30"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold",style:{backgroundColor:o.quantityCircleColor,color:o.quantityTextColor},children:r.quantity})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-sm truncate",children:r.name}),e.jsxs("p",{className:"text-xs opacity-75",children:[r.quantity,"x R$ ",r.price.toFixed(2)]})]}),e.jsx("div",{className:"text-right flex-shrink-0",children:e.jsxs("p",{className:"font-bold text-sm",style:{color:o.headingColor},children:["R$ ",(r.price*r.quantity).toFixed(2)]})})]},a))}),e.jsx(v,{className:"my-3"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-base font-semibold",style:{color:o.headingColor},children:"Total"}),e.jsxs("span",{className:"text-xl font-bold",style:{color:o.primaryButtonBackgroundColor},children:["R$ ",n.total.toFixed(2)]})]})]})})}),e.jsxs("div",{className:"grid lg:grid-cols-[1fr_420px] gap-8",children:[e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[i===1&&e.jsx(T,{style:{backgroundColor:o.cardBackgroundColor,borderColor:o.cardBorderColor,borderRadius:o.cardBorderRadius,boxShadow:o.cardShadow},children:e.jsxs(D,{className:"p-5 md:p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-1",style:{color:o.headingColor},children:"Dados Pessoais"}),e.jsx("p",{className:"text-sm opacity-75",children:"Preencha suas informa√ß√µes"})]}),e.jsxs("div",{className:"space-y-4 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"name",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"Nome Completo *"}),e.jsx(b,{id:"name",placeholder:"Seu nome completo",value:m.name,onChange:r=>B({...m,name:r.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"email",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"E-mail *"}),e.jsx(b,{id:"email",type:"email",placeholder:"seu@email.com",value:m.email,onChange:r=>B({...m,email:r.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"phone",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"Telefone *"}),e.jsx(b,{id:"phone",type:"tel",placeholder:"(11) 99999-9999",value:m.phone,onChange:r=>B({...m,phone:r.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]})]}),o.requestCpfOnlyAtPayment===!1&&e.jsxs("div",{children:[e.jsx(x,{htmlFor:"document",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"CPF *"}),e.jsx(b,{id:"document",placeholder:"000.000.000-00",value:m.document,onChange:r=>B({...m,document:r.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]}),o.requestBirthDate&&e.jsxs("div",{children:[e.jsx(x,{htmlFor:"birthDate",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"Data de Nascimento"}),e.jsx(b,{id:"birthDate",type:"date",value:m.birthDate,onChange:r=>B({...m,birthDate:r.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]}),o.requestGender&&e.jsxs("div",{children:[e.jsx(x,{htmlFor:"gender",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"G√™nero"}),e.jsxs("select",{id:"gender",value:m.gender,onChange:r=>B({...m,gender:r.target.value}),className:"w-full mt-1.5 px-4 rounded-lg text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,borderWidth:1,borderStyle:"solid",color:o.textColor},children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"masculino",children:"Masculino"}),e.jsx("option",{value:"feminino",children:"Feminino"}),e.jsx("option",{value:"outro",children:"Outro"}),e.jsx("option",{value:"prefiro_nao_dizer",children:"Prefiro n√£o dizer"})]})]})]})]})}),i===2&&e.jsx(T,{style:{backgroundColor:o.cardBackgroundColor,borderColor:o.cardBorderColor,borderRadius:o.cardBorderRadius,boxShadow:o.cardShadow},children:e.jsxs(D,{className:"p-5 md:p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-1",style:{color:o.headingColor},children:"Endere√ßo de Entrega"}),e.jsx("p",{className:"text-sm opacity-75",children:"Informe onde deseja receber"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"zipCode",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"CEP *"}),e.jsxs("div",{className:"relative",children:[e.jsx(b,{id:"zipCode",placeholder:"00000-000",value:c.zipCode,onChange:r=>{const a=J(r.target.value);j({...c,zipCode:a}),a.replace(/\D/g,"").length===8&&ie(a)},className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}}),se&&e.jsx(W,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 animate-spin"})]})]}),e.jsxs("div",{className:"grid grid-cols-[1fr_120px] gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"street",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"Rua *"}),e.jsx(b,{id:"street",placeholder:"Nome da rua",value:c.street,onChange:r=>j({...c,street:r.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"number",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"N√∫mero *"}),e.jsx(b,{id:"number",placeholder:"123",value:c.number,onChange:r=>j({...c,number:r.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"complement",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"Complemento"}),e.jsx(b,{id:"complement",placeholder:"Apto 101",value:c.complement,onChange:r=>j({...c,complement:r.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"neighborhood",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"Bairro *"}),e.jsx(b,{id:"neighborhood",placeholder:"Nome do bairro",value:c.neighborhood,onChange:r=>j({...c,neighborhood:r.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]})]}),e.jsxs("div",{className:"grid grid-cols-[1fr_100px] gap-4",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"city",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"Cidade *"}),e.jsx(b,{id:"city",placeholder:"Cidade",value:c.city,onChange:r=>j({...c,city:r.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"state",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"UF *"}),e.jsx(b,{id:"state",placeholder:"SP",maxLength:2,value:c.state,onChange:r=>j({...c,state:r.target.value.toUpperCase()}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]})]})]})]})}),i===3&&e.jsx(T,{style:{backgroundColor:o.cardBackgroundColor,borderColor:o.cardBorderColor,borderRadius:o.cardBorderRadius,boxShadow:o.cardShadow},children:e.jsxs(D,{className:"p-5 md:p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-1",style:{color:o.headingColor},children:"Forma de Pagamento"}),e.jsx("p",{className:"text-sm opacity-75",children:"Escolha como deseja pagar"})]}),e.jsx("div",{className:"grid gap-3",children:["PIX","CREDIT_CARD","BOLETO"].map(r=>e.jsxs("button",{onClick:()=>ae(r),className:F("p-4 md:p-4 rounded-xl border-2 transition-all text-left flex items-center gap-3 md:gap-4",f===r&&"shadow-lg"),style:{borderColor:f===r?o.primaryButtonBackgroundColor:o.inputBorderColor,backgroundColor:f===r?`${o.primaryButtonBackgroundColor}15`:o.inputBackgroundColor},children:[r==="PIX"&&e.jsx(Re,{className:"h-7 w-7 md:h-6 md:w-6",style:{color:f===r?o.primaryButtonBackgroundColor:o.textColor}}),r==="CREDIT_CARD"&&e.jsx($,{className:"h-7 w-7 md:h-6 md:w-6",style:{color:f===r?o.primaryButtonBackgroundColor:o.textColor}}),r==="BOLETO"&&e.jsx(ke,{className:"h-7 w-7 md:h-6 md:w-6",style:{color:f===r?o.primaryButtonBackgroundColor:o.textColor}}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-base md:text-base mb-0.5",style:{color:f===r?o.primaryButtonBackgroundColor:o.headingColor},children:[r==="PIX"&&"PIX",r==="CREDIT_CARD"&&"Cart√£o de Cr√©dito",r==="BOLETO"&&"Boleto Banc√°rio"]}),e.jsxs("div",{className:"text-xs md:text-sm opacity-75",children:[r==="PIX"&&"Aprova√ß√£o instant√¢nea",r==="CREDIT_CARD"&&"Parcele em at√© 12x",r==="BOLETO"&&"Vencimento em 3 dias"]})]}),f===r&&e.jsx(fe,{className:"h-6 w-6 md:h-6 md:w-6",style:{color:o.stepCompletedColor}})]},r))}),f==="CREDIT_CARD"&&n&&e.jsxs("div",{children:[e.jsx(x,{htmlFor:"installments",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"N√∫mero de Parcelas"}),e.jsx("select",{id:"installments",value:G,onChange:r=>le(Number(r.target.value)),className:"w-full mt-1.5 px-4 rounded-lg text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,borderWidth:1,borderStyle:"solid",color:o.textColor},children:[1,2,3,4,5,6,7,8,9,10,11,12].map(r=>{const a=n.total/r;return e.jsxs("option",{value:r,children:[r,"x de R$ ",a.toFixed(2),r===1?" √† vista":""]},r)})})]})]})}),e.jsxs("div",{className:"flex items-center justify-between gap-3 pt-4",children:[i>1&&e.jsxs(R,{variant:"outline",onClick:de,className:"flex items-center gap-2 px-6 md:px-8",style:{borderColor:o.inputBorderColor,color:o.textColor,height:52,borderWidth:2},children:[e.jsx(Fe,{className:"h-5 w-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Voltar"})]}),e.jsx("div",{className:F("flex-1",i===1&&"ml-auto"),children:i<ue?e.jsxs(R,{onClick:ce,className:"w-full flex items-center justify-center gap-2 font-semibold text-base shadow-lg",style:{backgroundColor:o.primaryButtonBackgroundColor,color:o.primaryButtonTextColor,height:52,borderRadius:o.primaryButtonBorderRadius},children:["Continuar",e.jsx(ye,{className:"h-5 w-5"})]}):e.jsx(R,{onClick:me,disabled:A||s,className:"w-full font-bold text-base md:text-lg shadow-lg",style:{backgroundColor:o.checkoutButtonBackgroundColor,color:o.checkoutButtonTextColor,height:56,borderRadius:o.checkoutButtonBorderRadius,opacity:A||s?.6:1},children:A?e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"h-5 w-5 animate-spin mr-2"}),"Processando..."]}):s?"Modo Pr√©-visualiza√ß√£o":e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"h-5 w-5 mr-2"}),e.jsxs("span",{className:"hidden sm:inline",children:["Finalizar Compra -"," "]}),e.jsx("span",{className:"sm:hidden",children:"Finalizar - "}),"R$ ",n==null?void 0:n.total.toFixed(2)]})})})]})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsxs("div",{className:"sticky top-8 rounded-xl border p-6 space-y-5",style:{backgroundColor:o.cardBackgroundColor,borderColor:o.cardBorderColor,borderRadius:o.cardBorderRadius,boxShadow:o.cardShadow},children:[e.jsx("div",{children:e.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:o.headingColor},children:"Resumo do Pedido"})}),e.jsx("div",{className:"space-y-4",children:n.products.map((r,a)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"relative flex-shrink-0 rounded-lg overflow-hidden",style:{width:70,height:70,backgroundColor:o.inputBackgroundColor},children:[r.image?e.jsx("img",{src:r.image,alt:r.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(I,{className:"h-8 w-8",style:{opacity:.3}})}),o.showCartIcon&&e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shadow-md",style:{backgroundColor:o.quantityCircleColor,color:o.quantityTextColor},children:r.quantity})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm mb-1",style:{color:o.headingColor},children:r.name}),r.sku&&e.jsxs("p",{className:"text-xs opacity-60",children:["SKU: ",r.sku]}),e.jsxs("p",{className:"text-xs opacity-75 mt-1",children:["Quantidade: ",r.quantity]})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsxs("p",{className:"font-bold",style:{color:o.headingColor},children:["R$ ",(r.price*r.quantity).toFixed(2)]}),r.quantity>1&&e.jsxs("p",{className:"text-xs opacity-60",children:["R$ ",r.price.toFixed(2)," un."]})]})]},a))}),e.jsx(v,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["R$ ",n.subtotal.toFixed(2)]})]}),n.shipping>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Frete"}),e.jsxs("span",{className:"font-medium",children:["R$ ",n.shipping.toFixed(2)]})]}),n.tax>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Taxa"}),e.jsxs("span",{className:"font-medium",children:["R$ ",n.tax.toFixed(2)]})]}),n.discount&&n.discount>0&&e.jsxs("div",{className:"flex justify-between text-sm font-medium",style:{color:o.stepCompletedColor},children:[e.jsx("span",{children:"Desconto"}),e.jsxs("span",{children:["-R$ ",n.discount.toFixed(2)]})]}),e.jsx(v,{}),e.jsxs("div",{className:"flex justify-between text-xl font-bold pt-2",children:[e.jsx("span",{style:{color:o.headingColor},children:"Total"}),e.jsxs("span",{style:{color:o.headingColor},children:["R$ ",n.total.toFixed(2)]})]})]}),o.showTrustBadges&&e.jsxs(e.Fragment,{children:[e.jsx(v,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(O,{className:"h-5 w-5",style:{color:o.trustBadgeColor}}),e.jsx("span",{className:"opacity-75",children:"Compra 100% Segura"})]}),o.sslBadgeEnabled&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(L,{className:"h-5 w-5",style:{color:o.trustBadgeColor}}),e.jsx("span",{className:"opacity-75",children:"Certificado SSL"})]})]})]})]})})]}),e.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 p-4 border-t backdrop-blur-xl z-40 safe-area-bottom",style:{backgroundColor:`${o.cardBackgroundColor}F8`,borderColor:o.cardBorderColor,boxShadow:"0 -4px 16px rgba(0,0,0,0.08)"},children:e.jsxs(R,{onClick:()=>k(!z),className:"w-full flex items-center justify-between shadow-lg font-semibold rounded-xl",style:{backgroundColor:o.primaryButtonBackgroundColor,color:o.primaryButtonTextColor,height:56},children:[e.jsxs("span",{className:"flex items-center gap-2.5",children:[e.jsx(I,{className:"h-5 w-5"}),e.jsx("span",{className:"text-base",children:z?"Ocultar Resumo":"Ver Resumo"})]}),e.jsxs("span",{className:"font-bold text-lg",children:["R$ ",n.total.toFixed(2)]})]})}),z&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/60 z-50 backdrop-blur-sm animate-in fade-in duration-200",onClick:()=>k(!1),children:e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 rounded-t-3xl p-6 max-h-[85vh] overflow-y-auto animate-in slide-in-from-bottom duration-300",style:{backgroundColor:o.cardBackgroundColor,color:o.textColor,boxShadow:"0 -8px 32px rgba(0,0,0,0.12)"},onClick:r=>r.stopPropagation(),children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-12 h-1.5 rounded-full opacity-30",style:{backgroundColor:o.textColor}})}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold",style:{color:o.headingColor},children:"Resumo do Pedido"}),e.jsx("button",{onClick:()=>k(!1),className:"p-2 rounded-full hover:bg-gray-100/10 transition-colors active:scale-95",children:e.jsx(je,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"space-y-4 mb-6",children:n.products.map((r,a)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"relative flex-shrink-0 rounded-lg overflow-hidden",style:{width:70,height:70,backgroundColor:o.inputBackgroundColor},children:[r.image?e.jsx("img",{src:r.image,alt:r.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(I,{className:"h-8 w-8 opacity-30"})}),e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",style:{backgroundColor:o.quantityCircleColor,color:o.quantityTextColor},children:r.quantity})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm mb-1",children:r.name}),e.jsxs("p",{className:"text-xs opacity-75",children:["Qtd: ",r.quantity]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-bold",children:["R$ ",(r.price*r.quantity).toFixed(2)]})})]},a))}),e.jsx(v,{className:"mb-4"}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["R$ ",n.subtotal.toFixed(2)]})]}),n.shipping>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Frete"}),e.jsxs("span",{className:"font-medium",children:["R$ ",n.shipping.toFixed(2)]})]}),n.tax>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Taxa"}),e.jsxs("span",{className:"font-medium",children:["R$ ",n.tax.toFixed(2)]})]}),n.discount&&n.discount>0&&e.jsxs("div",{className:"flex justify-between text-sm font-medium",style:{color:o.stepCompletedColor},children:[e.jsx("span",{children:"Desconto"}),e.jsxs("span",{children:["-R$ ",n.discount.toFixed(2)]})]}),e.jsx(v,{}),e.jsxs("div",{className:"flex justify-between text-xl font-bold pt-2",children:[e.jsx("span",{style:{color:o.headingColor},children:"Total"}),e.jsxs("span",{style:{color:o.headingColor},children:["R$ ",n.total.toFixed(2)]})]})]}),e.jsx(R,{onClick:()=>k(!1),className:"w-full font-semibold text-base shadow-lg rounded-xl",style:{backgroundColor:o.primaryButtonBackgroundColor,color:o.primaryButtonTextColor,height:52},children:"Fechar"})]})})]}),e.jsx("footer",{className:"border-t py-8 md:py-10 mt-12 md:mt-16",style:{backgroundColor:o.footerBackgroundColor,borderColor:o.cardBorderColor,color:o.footerTextColor},children:e.jsx("div",{className:"container mx-auto px-4 max-w-6xl",children:e.jsxs("div",{className:"text-center space-y-5 md:space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2.5 md:gap-3",children:[e.jsx(L,{className:"h-5 w-5 md:h-6 md:w-6 text-green-600"}),e.jsx("span",{className:"font-bold text-lg md:text-xl",children:"Checkout Seguro"})]}),o.showTrustBadges&&e.jsxs("div",{className:"flex items-center justify-center gap-4 md:gap-8 flex-wrap text-xs md:text-sm",children:[o.sslBadgeEnabled&&e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsx(O,{className:"h-4 w-4 md:h-5 md:w-5 text-green-600"}),e.jsx("span",{className:"whitespace-nowrap",children:"Certificado SSL"})]}),o.showPaymentMethods&&e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsx($,{className:"h-4 w-4 md:h-5 md:w-5"}),e.jsx("span",{className:"whitespace-nowrap",children:"Pagamento Seguro"})]}),o.securityIconsEnabled&&e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsx(O,{className:"h-4 w-4 md:h-5 md:w-5"}),e.jsx("span",{className:"whitespace-nowrap",children:"Dados Protegidos"})]})]}),(o.showCnpjCpf||o.showContactEmail||o.showPhone||o.showAddress)&&e.jsxs("div",{className:"text-xs md:text-sm space-y-1 opacity-80 max-w-md mx-auto",children:[o.showStoreName&&e.jsx("p",{className:"font-semibold text-sm md:text-base",children:"Minha Loja"}),o.showCnpjCpf&&e.jsx("p",{children:"CNPJ: 00.000.000/0001-00"}),o.showAddress&&e.jsx("p",{className:"text-balance",children:"Endere√ßo: Rua Exemplo, 123 - S√£o Paulo/SP"}),o.showContactEmail&&e.jsx("p",{children:"E-mail: contato@loja.com.br"}),o.showPhone&&e.jsx("p",{children:"Telefone: (11) 99999-9999"})]}),(o.showPrivacyPolicy||o.showTermsConditions||o.showReturns)&&e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"my-3 md:my-4"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 md:gap-6 text-xs md:text-sm flex-wrap px-4",children:[o.showPrivacyPolicy&&e.jsx("a",{href:"#",style:{color:o.footerLinkColor},className:"hover:underline transition-all whitespace-nowrap",children:"Pol√≠tica de Privacidade"}),o.showTermsConditions&&e.jsx("a",{href:"#",style:{color:o.footerLinkColor},className:"hover:underline transition-all whitespace-nowrap",children:"Termos e Condi√ß√µes"}),o.showReturns&&e.jsx("a",{href:"#",style:{color:o.footerLinkColor},className:"hover:underline transition-all whitespace-nowrap",children:"Trocas e Devolu√ß√µes"})]})]}),e.jsx(v,{className:"my-3 md:my-4"}),e.jsxs("p",{className:"text-xs md:text-xs opacity-60 pb-2",children:["¬© ",new Date().getFullYear()," - Todos os direitos reservados"]})]})})})]})},Ue=Object.freeze(Object.defineProperty({__proto__:null,default:Te},Symbol.toStringTag,{value:"Module"}));export{ee as D,Te as P,Re as S,Ue as a,Se as c};

import{c as Ee,s as D,r as g,n as qe,e as Me,f as Oe,j as e,m as ce,K as S,a3 as Le,C as le,R as ke,d as de,P as ie,aw as Ue,X as Ve,I as V,g as K,l as Z,aa as We,B as ee,N as Ge,o as no}from"./index-BOyCtk5k.js";import{L as q}from"./label-CMike-tD.js";import{S as oe}from"./separator-CUucBWIc.js";import{A as io,a as co}from"./alert-BTAS1aS3.js";import{T as _e}from"./truck-CyJDJ3o2.js";import{S as fe,b as mo,Q as we}from"./browser-BIhQfU2m.js";import{F as Be}from"./file-text-0-XuYIZL.js";import{L as se}from"./lock-DzNSPewc.js";import{S as be}from"./shield-check-BwOCohn9.js";import{C as ae}from"./circle-alert-DgqTLUiG.js";import{C as uo}from"./clock-21LO_DNv.js";import{C as Fe}from"./copy-Crg3qT4b.js";import{C as xo}from"./calendar-D99gXFRb.js";import{D as ho}from"./download-CneCbWkX.js";import{E as go}from"./external-link-DdbJBplg.js";import{T as po}from"./tag-DSnvSisU.js";/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=Ee("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=Ee("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=Ee("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),He={async saveCustomization(a){try{const{data:t,error:n}=await D.from("CheckoutCustomization").upsert({...a,updatedAt:new Date().toISOString()}).select().single();if(n)throw n;return t}catch(t){throw console.error("Error saving checkout customization:",t),t}},async loadCustomization(a){try{const{data:t,error:n}=await D.from("CheckoutCustomization").select("*").eq("userId",a).eq("isActive",!0).single();if(n&&n.code!=="PGRST116")throw n;return t}catch(t){throw console.error("Error loading checkout customization:",t),t}},async listCustomizations(a){try{const{data:t,error:n}=await D.from("CheckoutCustomization").select("*").eq("userId",a).order("createdAt",{ascending:!1});if(n)throw n;return t}catch(t){throw console.error("Error listing checkout customizations:",t),t}},async activateCustomization(a){try{const t=await D.from("CheckoutCustomization").select("userId").eq("id",a).single();t.data&&await D.from("CheckoutCustomization").update({isActive:!1}).eq("userId",t.data.userId);const{data:n,error:u}=await D.from("CheckoutCustomization").update({isActive:!0,updatedAt:new Date().toISOString()}).eq("id",a).select().single();if(u)throw u;return n}catch(t){throw console.error("Error activating checkout customization:",t),t}},async deleteCustomization(a){try{const{error:t}=await D.from("CheckoutCustomization").delete().eq("id",a);if(t)throw t}catch(t){throw console.error("Error deleting checkout customization:",t),t}},async duplicateCustomization(a,t){try{const{data:n,error:u}=await D.from("CheckoutCustomization").select("*").eq("id",a).single();if(u)throw u;const{data:C,error:N}=await D.from("CheckoutCustomization").insert({userId:n.userId,name:t,theme:n.theme,isActive:!1}).select().single();if(N)throw N;return C}catch(n){throw console.error("Error duplicating checkout customization:",n),n}},async generatePreviewUrl(a){try{const{data:t,error:n}=await D.from("CheckoutCustomization").insert({userId:a.userId,name:`Preview-${Date.now()}`,theme:a.theme||{},isActive:!1}).select().single();if(n)throw n;return`/checkout/preview/${t.id}`}catch(t){throw console.error("Error generating preview URL:",t),t}},async exportCustomization(a){try{const{data:t,error:n}=await D.from("CheckoutCustomization").select("*").eq("id",a).single();if(n)throw n;return{name:t.name,theme:t.theme,exportedAt:new Date().toISOString(),version:"1.0"}}catch(t){throw console.error("Error exporting checkout customization:",t),t}},async importCustomization(a,t){try{const{data:n,error:u}=await D.from("CheckoutCustomization").insert({userId:a,name:`${t.name} (Importado)`,theme:t.theme,isActive:!1}).select().single();if(u)throw u;return n}catch(n){throw console.error("Error importing checkout customization:",n),n}}},fo=({userId:a,paymentMethod:t,purchaseAmount:n})=>{const[u,C]=g.useState(!0),[N,h]=g.useState([]),[d,X]=g.useState(null),[P,W]=g.useState({hasDiscount:!1,discountAmount:0,discountPercentage:0,originalTotal:n,finalTotal:n,discountDescription:"",meetsMinimum:!1,cappedAtMaximum:!1});g.useEffect(()=>{a?B():C(!1)},[a]),g.useEffect(()=>{M()},[t,n,N]);const B=async()=>{if(a)try{C(!0);const{data:c,error:w}=await D.from("PaymentMethodDiscount").select("*").eq("userId",a).eq("isActive",!0);if(w)throw w;h(c||[])}catch(c){console.error("Erro ao carregar descontos:",c),h([])}finally{C(!1)}},M=()=>{const c=N.find(x=>x.paymentMethod===t&&x.isActive);if(!c){X(null),W({hasDiscount:!1,discountAmount:0,discountPercentage:0,originalTotal:n,finalTotal:n,discountDescription:"",meetsMinimum:!1,cappedAtMaximum:!1});return}if(X(c),!(n>=c.minPurchaseAmount)){W({hasDiscount:!1,discountAmount:0,discountPercentage:0,originalTotal:n,finalTotal:n,discountDescription:c.description||"",meetsMinimum:!1,cappedAtMaximum:!1});return}let F=0,f=0;c.discountType==="PERCENTAGE"?(f=c.discountValue,F=n*c.discountValue/100):(F=c.discountValue,f=c.discountValue/n*100);let v=!1;c.maxDiscountAmount&&F>c.maxDiscountAmount&&(F=c.maxDiscountAmount,f=c.maxDiscountAmount/n*100,v=!0),F>n&&(F=n);const A=Math.max(0,n-F);W({hasDiscount:!0,discountAmount:F,discountPercentage:f,originalTotal:n,finalTotal:A,discountDescription:c.description||"",meetsMinimum:!0,cappedAtMaximum:v})};return{loading:u,discounts:N,activeDiscount:d,calculation:P,getDiscountLabel:()=>d?d.discountType==="PERCENTAGE"?`${d.discountValue.toFixed(0)}% de desconto`:`R$ ${d.discountValue.toFixed(2)} de desconto`:"",hasDiscountForMethod:c=>N.some(w=>w.paymentMethod===c&&w.isActive),getDiscountInfoForMethod:c=>{const w=N.find(f=>f.paymentMethod===c&&f.isActive);if(!w)return null;let F="";return w.discountType==="PERCENTAGE"?F=`${w.discountValue.toFixed(0)}% OFF`:F=`-R$ ${w.discountValue.toFixed(2)}`,{...w,label:F,formattedValue:w.discountType==="PERCENTAGE"?`${w.discountValue}%`:`R$ ${w.discountValue.toFixed(2)}`}},getEstimatedDiscountForMethod:(c,w=n)=>{const F=N.find(v=>v.paymentMethod===c&&v.isActive);if(!F)return 0;let f=0;return F.discountType==="PERCENTAGE"?f=w*F.discountValue/100:f=F.discountValue,F.maxDiscountAmount&&f>F.maxDiscountAmount&&(f=F.maxDiscountAmount),f>w&&(f=w),f},reload:B}},Pe=a=>{const t=a.replace(/\D/g,"");return t.length<=5?t:`${t.slice(0,5)}-${t.slice(5,8)}`},Ye=a=>a.replace(/\D/g,""),Co=a=>Ye(a).length===8,Qe=async a=>{const t=Ye(a);if(!Co(t))throw new Error("CEP inv√°lido. Deve conter 8 d√≠gitos.");try{const n=await fetch(`https://viacep.com.br/ws/${t}/json/`);if(!n.ok)throw new Error("Erro ao buscar CEP");const u=await n.json();return u.erro?null:{street:u.logradouro||"",neighborhood:u.bairro||"",city:u.localidade||"",state:u.uf||"",zipCode:Pe(t)}}catch(n){throw console.error("Erro ao buscar CEP:",n),n}},Se=a=>{const t=a.replace(/\D/g,"");return t.length===0?"":t.length<=3?t:t.length<=6?`${t.slice(0,3)}.${t.slice(3)}`:t.length<=9?`${t.slice(0,3)}.${t.slice(3,6)}.${t.slice(6)}`:`${t.slice(0,3)}.${t.slice(3,6)}.${t.slice(6,9)}-${t.slice(9,11)}`},Je=a=>a.replace(/\D/g,""),yo=a=>{const t=Je(a);if(t.length!==11||/^(\d)\1{10}$/.test(t))return!1;let n=0;for(let h=0;h<9;h++)n+=parseInt(t.charAt(h))*(10-h);let u=11-n%11;if((u>=10?0:u)!==parseInt(t.charAt(9)))return!1;n=0;for(let h=0;h<10;h++)n+=parseInt(t.charAt(h))*(11-h);return u=11-n%11,(u>=10?0:u)===parseInt(t.charAt(10))},Ke=a=>{const t=Je(a);return t?t.length!==11?{valid:!1,message:"CPF deve conter 11 d√≠gitos"}:/^(\d)\1{10}$/.test(t)?{valid:!1,message:"CPF inv√°lido"}:yo(t)?{valid:!0,formatted:Se(t),message:"CPF v√°lido"}:{valid:!1,message:"CPF inv√°lido. Verifique os n√∫meros digitados."}:{valid:!1,message:"CPF n√£o pode estar vazio"}},jo=[11,12,13,14,15,16,17,18,19,21,22,24,27,28,31,32,33,34,35,37,38,41,42,43,44,45,46,47,48,49,51,53,54,55,61,62,64,63,65,66,67,68,69,71,73,74,75,77,79,81,87,82,83,84,85,88,86,89,91,93,94,92,97,95,96,98,99],Re=a=>{const t=a.replace(/\D/g,"");return t.length===0?"":t.length<=2?`(${t}`:t.length<=6?`(${t.slice(0,2)}) ${t.slice(2)}`:t.length<=10?`(${t.slice(0,2)}) ${t.slice(2,6)}-${t.slice(6,10)}`:`(${t.slice(0,2)}) ${t.slice(2,7)}-${t.slice(7,11)}`},Ze=a=>a.replace(/\D/g,""),vo=a=>jo.includes(a),No=a=>{const t=Ze(a);if(t.length===11)return parseInt(t.charAt(2))===9?"mobile":null;if(t.length===10){const n=parseInt(t.charAt(2));return n>=2&&n<=5?"landline":null}return null},eo=a=>{const t=Ze(a);if(!t)return{valid:!1,message:"Telefone n√£o pode estar vazio"};if(t.length<10)return{valid:!1,message:`Digite mais ${10-t.length} d√≠gitos`};if(t.length>11)return{valid:!1,message:"Telefone deve ter no m√°ximo 11 d√≠gitos"};const n=parseInt(t.slice(0,2));if(!vo(n))return{valid:!1,message:"DDD inv√°lido"};const u=No(a);return u?/^(\d)\1+$/.test(t)?{valid:!1,message:"Telefone inv√°lido"}:{valid:!0,formatted:Re(t),type:u,message:u==="mobile"?"Celular v√°lido":"Telefone fixo v√°lido"}:t.length===11?{valid:!1,message:"Celular deve come√ßar com 9 ap√≥s o DDD"}:{valid:!1,message:"Formato de telefone inv√°lido"}},Ie={logoUrl:"",faviconUrl:"",logoAlignment:"left",showLogoAtTop:!0,logoWidth:180,logoHeight:50,backgroundColor:"#F9FAFB",backgroundGradient:"linear-gradient(180deg, #F9FAFB 0%, #F3F4F6 100%)",useGradient:!1,textColor:"#1F2937",headingColor:"#111827",noticeBarEnabled:!0,noticeBarMessage:"üéâ FRETE GR√ÅTIS para todo o Brasil em compras acima de R$ 199!",noticeBarBackgroundColor:"#1F2937",noticeBarTextColor:"#FFFFFF",noticeBarAnimation:!0,bannerEnabled:!1,bannerUrl:"",bannerHeight:200,cartDisplay:"drawer",cartBorderColor:"#E5E7EB",cartBackgroundColor:"#FFFFFF",quantityCircleColor:"#8B5CF6",quantityTextColor:"#FFFFFF",showCartIcon:!0,showCartReminder:!0,allowCouponEdit:!0,navigationSteps:3,nextStepStyle:"rounded",showProgressBar:!0,progressBarColor:"#8B5CF6",stepActiveColor:"#8B5CF6",stepInactiveColor:"#D1D5DB",stepCompletedColor:"#10B981",primaryButtonBackgroundColor:"#8B5CF6",primaryButtonTextColor:"#FFFFFF",primaryButtonBorderRadius:12,primaryButtonHover:!0,primaryButtonHoverColor:"#7C3AED",primaryButtonFlow:!0,primaryButtonShadow:!0,checkoutButtonBackgroundColor:"#10B981",checkoutButtonTextColor:"#FFFFFF",checkoutButtonBorderRadius:14,checkoutButtonHover:!0,checkoutButtonHoverColor:"#059669",checkoutButtonFlow:!0,checkoutButtonShadow:!0,checkoutButtonPulse:!0,highlightedBorderColor:"#8B5CF6",highlightedBorderTextColor:"#FFFFFF",highlightedBorderWidth:2,footerBackgroundColor:"#F3F4F6",footerTextColor:"#6B7280",showStoreName:!0,showPaymentMethods:!0,showCnpjCpf:!0,showContactEmail:!0,showAddress:!0,showPhone:!0,showPrivacyPolicy:!0,showTermsConditions:!0,showReturns:!0,footerLinkColor:"#8B5CF6",discountTagTextColor:"#FFFFFF",discountTagBackgroundColor:"#EF4444",discountTagBorderRadius:6,discountTagFontWeight:"700",useVisible:!0,expirationTime:60,forceRemovalTime:90,showCountdownTimer:!0,urgencyMessageColor:"#DC2626",urgencyBackgroundColor:"#FEE2E2",orderBumpEnabled:!0,orderBumpTextColor:"#374151",orderBumpBackgroundColor:"#FFFBEB",orderBumpPriceColor:"#DC2626",orderBumpBorderColor:"#FCD34D",orderBumpBorderWidth:2,orderBumpBorderRadius:12,orderBumpButtonTextColor:"#FFFFFF",orderBumpButtonBackgroundColor:"#EF4444",orderBumpShadow:!0,fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif",fontSize:{xs:"0.75rem",sm:"0.875rem",base:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem"},fontWeight:{normal:"400",medium:"500",semibold:"600",bold:"700"},spacing:{xs:"0.25rem",sm:"0.5rem",md:"1rem",lg:"1.5rem",xl:"2rem","2xl":"3rem"},borderRadius:{sm:"0.375rem",md:"0.5rem",lg:"0.75rem",xl:"1rem",full:"9999px"},boxShadow:{sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},inputBorderColor:"#D1D5DB",inputFocusBorderColor:"#8B5CF6",inputBackgroundColor:"#FFFFFF",inputHeight:48,inputBorderRadius:10,labelColor:"#374151",labelFontWeight:"600",placeholderColor:"#9CA3AF",cardBackgroundColor:"#FFFFFF",cardBorderColor:"#E5E7EB",cardBorderRadius:16,cardShadow:!0,cardPadding:"1.5rem",showTrustBadges:!0,trustBadgeColor:"#10B981",sslBadgeEnabled:!0,securityIconsEnabled:!0,language:"pt",currency:"BRL",presellPage:"cart-in-cart",requestCpfOnlyAtPayment:!1,requestBirthDate:!1,requestGender:!1,disableCarrot:!1,mobileBreakpoint:640,tabletBreakpoint:1024,desktopBreakpoint:1280,enableAnimations:!0,animationDuration:"300ms",animationTiming:"cubic-bezier(0.4, 0, 0.2, 1)",highContrast:!1,focusIndicatorColor:"#8B5CF6",reducedMotion:!1};function Ce(a){return{...Ie,...a}}const wo=({injectedOrderId:a,injectedTheme:t,previewMode:n=!1})=>{const{orderId:u}=qe(),C=a||u||null,N=Me(),{toast:h}=Oe(),[d,X]=g.useState(null),[P,W]=g.useState(null),[B,M]=g.useState(null),[E,L]=g.useState(!0),[R,k]=g.useState(!1),[c,w]=g.useState(1),[F,f]=g.useState(!1),[v,A]=g.useState(!1),[x,O]=g.useState({name:"",email:"",phone:"",document:""}),[i,$]=g.useState({street:"",number:"",complement:"",neighborhood:"",city:"",state:"",zipCode:""}),[y,ge]=g.useState("PIX"),[me,ye]=g.useState(1),r=t?Ce(t):B!=null&&B.theme?Ce(B.theme):Ie;g.useEffect(()=>{C&&je()},[C]);const je=async()=>{var l;try{L(!0);const{data:p,error:j}=await D.from("Order").select("*").eq("id",C).single();if(j||!p)throw new Error("Pedido n√£o encontrado");const Y=Array.isArray(p.items)?p.items:[],Q=Array.isArray((l=p.metadata)==null?void 0:l.originalProducts)?p.metadata.originalProducts:[],ne={orderId:p.id,products:Y.map(T=>{const z=Q.find(G=>(G==null?void 0:G.variantId)&&String(G.variantId)===String(T.variantId)||(G==null?void 0:G.productId)&&String(G.productId)===String(T.productId)||(G==null?void 0:G.id)&&(String(G.id)===String(T.productId)||String(G.id)===String(T.id)));return{id:T.productId||T.id,name:T.name||(z==null?void 0:z.name)||(z==null?void 0:z.title)||"Produto",price:Number(T.price)||0,quantity:Number(T.quantity)||1,image:T.image||(z==null?void 0:z.image)||(Array.isArray(z==null?void 0:z.images)?z.images[0]:"")||"",sku:T.sku||(z==null?void 0:z.sku)||""}}),total:Number(p.total)||0,subtotal:Number(p.subtotal)||0,tax:Number(p.tax)||0,shipping:Number(p.shipping)||0,discount:Number(p.discount)||0};if(X(ne),W(p),!n&&p.userId)try{const T=await He.loadCustomization(p.userId);T&&M(T)}catch{console.log("Usando tema padr√£o")}}catch(p){console.error("Erro ao carregar checkout:",p),h({title:"Erro ao carregar checkout",description:p.message||"Tente novamente mais tarde",variant:"destructive"})}finally{L(!1)}},re=async l=>{const p=l.replace(/\D/g,"");if(p.length===8){f(!0);try{const j=await Qe(p);j?($(Y=>({...Y,street:j.street||"",neighborhood:j.neighborhood||"",city:j.city||"",state:j.state||""})),h({title:"CEP encontrado!",description:`${j.city} - ${j.state}`})):h({title:"CEP n√£o encontrado",description:"Verifique o CEP digitado e tente novamente",variant:"destructive"})}catch(j){console.error("Erro ao buscar CEP:",j),h({title:"Erro ao buscar CEP",description:"Tente novamente mais tarde",variant:"destructive"})}finally{f(!1)}}},ue=l=>{if(l===1){if(!x.name||!x.email||!x.phone)return h({title:"Preencha todos os campos",description:"Nome, e-mail e telefone s√£o obrigat√≥rios",variant:"destructive"}),!1;if(r.requestCpfOnlyAtPayment===!1&&!x.document)return h({title:"CPF obrigat√≥rio",description:"Por favor, informe seu CPF",variant:"destructive"}),!1}return l===2&&(!i.zipCode||!i.street||!i.number||!i.neighborhood||!i.city||!i.state)?(h({title:"Endere√ßo incompleto",description:"Preencha todos os campos obrigat√≥rios",variant:"destructive"}),!1):!0},te=()=>{ue(c)&&(w(c+1),window.scrollTo({top:0,behavior:"smooth"}))},xe=()=>{w(c-1),window.scrollTo({top:0,behavior:"smooth"})},ve=async()=>{var l;if(ue(c))try{k(!0),console.log("üìù [UPDATE] Atualizando pedido com dados do cadastro...");const{error:p}=await D.from("Order").update({customerName:x.name,customerEmail:x.email,customerPhone:x.phone,customerCpf:((l=x.document)==null?void 0:l.replace(/\D/g,""))||"",shippingAddress:{street:i.street,number:i.number,complement:i.complement||"",neighborhood:i.neighborhood,city:i.city,state:i.state,zipCode:i.zipCode,country:"BR"},billingAddress:{street:i.street,number:i.number,complement:i.complement||"",neighborhood:i.neighborhood,city:i.city,state:i.state,zipCode:i.zipCode,country:"BR"},paymentMethod:y,updatedAt:new Date().toISOString()}).eq("id",C);if(p){console.error("‚ùå [UPDATE] Erro ao atualizar pedido:",p),h({title:"Erro ao salvar dados",description:"N√£o foi poss√≠vel salvar os dados do pedido",variant:"destructive"}),k(!1);return}console.log("‚úÖ [UPDATE] Pedido atualizado com sucesso!",{orderId:C,customerName:x.name,customerEmail:x.email});const{data:j,error:Y}=await D.functions.invoke("process-payment",{body:{userId:P==null?void 0:P.userId,orderId:C,amount:(d==null?void 0:d.total)||0,currency:"BRL",paymentMethod:y.toLowerCase().replace("_","_"),customer:{name:x.name,email:x.email,document:x.document,phone:x.phone},billingAddress:{street:i.street,number:i.number,complement:i.complement,neighborhood:i.neighborhood,city:i.city,state:i.state,zipCode:i.zipCode},installments:y==="CREDIT_CARD"?me:1}});if(console.log("üîç [DEBUG] Resposta process-payment:",{data:j,error:Y}),!(j!=null&&j.success)){if(j!=null&&j.requiresSetup||(j==null?void 0:j.error)==="NO_GATEWAY_CONFIGURED"){h({title:"Gateway n√£o configurado",description:(j==null?void 0:j.hint)||"Configure um gateway de pagamento primeiro",variant:"destructive",duration:1e4}),k(!1);return}throw new Error((j==null?void 0:j.message)||(j==null?void 0:j.error)||"Erro ao processar pagamento")}if(Y)throw Y;try{console.log("üîÑ [SHOPIFY] Sincronizando pedido com Shopify...",{orderId:u});const{data:Q,error:ne}=await D.functions.invoke("sync-order-to-shopify",{body:{orderId:u,userId:P==null?void 0:P.userId}});Q!=null&&Q.success?console.log("‚úÖ [SHOPIFY] Pedido sincronizado com sucesso!",{shopifyOrderId:Q.shopifyOrderId,shopifyOrderNumber:Q.shopifyOrderNumber,adminUrl:Q.shopifyAdminUrl}):ne&&console.warn("‚ö†Ô∏è [SHOPIFY] Erro ao sincronizar (n√£o-cr√≠tico):",ne)}catch(Q){console.warn("‚ö†Ô∏è [SHOPIFY] Erro ao tentar sincronizar com Shopify:",Q)}j.success&&(h({title:"Pedido confirmado!",description:"Redirecionando..."}),setTimeout(()=>{N(`/checkout/success/${j.transactionId}`)},1500))}catch(p){console.error("Erro ao processar checkout:",p),h({title:"Erro ao processar pagamento",description:p.message||"Tente novamente",variant:"destructive"})}finally{k(!1)}};if(E)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:r.backgroundColor},children:e.jsxs("div",{className:"text-center",children:[e.jsx(ce,{className:"h-10 w-10 animate-spin mx-auto mb-3",style:{color:r.primaryButtonBackgroundColor}}),e.jsx("p",{style:{color:r.textColor},className:"text-sm",children:"Carregando..."})]})});if(!d)return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{backgroundColor:r.backgroundColor},children:e.jsx("div",{className:"text-center",children:e.jsx("p",{style:{color:r.textColor},children:"Pedido n√£o encontrado"})})});const Ne=[{number:1,label:"Dados",icon:Le},{number:2,label:"Entrega",icon:_e},{number:3,label:"Pagamento",icon:le}];return e.jsxs("div",{className:"min-h-screen pb-32",style:{backgroundColor:r.backgroundColor,color:r.textColor,fontFamily:r.fontFamily},children:[r.noticeBarEnabled&&r.noticeBarMessage&&e.jsx("div",{className:"py-3 px-4 text-center text-sm font-medium",style:{backgroundColor:r.noticeBarBackgroundColor,color:r.noticeBarTextColor},children:r.noticeBarMessage}),e.jsx("header",{className:"sticky top-0 z-30 backdrop-blur-lg border-b",style:{backgroundColor:`${r.backgroundColor}F8`,borderColor:r.cardBorderColor},children:e.jsx("div",{className:"px-4 py-4",children:r.logoUrl&&e.jsx("div",{className:S("flex",r.logoAlignment==="center"&&"justify-center"),children:e.jsx("img",{src:r.logoUrl,alt:"Logo",className:"h-8 object-contain",style:{maxWidth:r.logoWidth||150}})})})}),r.bannerEnabled&&r.bannerImage&&e.jsx("img",{src:r.bannerImage,alt:"Banner",className:"w-full object-cover",style:{height:r.bannerHeight||80}}),e.jsxs("main",{className:"px-4 py-6",children:[r.showProgressBar&&e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex items-center justify-between mb-3",children:Ne.map((l,p)=>e.jsxs(ke.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[e.jsx("div",{className:S("w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm transition-all",c===l.number&&"ring-2 ring-offset-2"),style:{backgroundColor:c>l.number?r.stepCompletedColor:c===l.number?r.stepActiveColor:r.stepInactiveColor,color:c>=l.number?r.primaryButtonTextColor:r.textColor,ringColor:r.stepActiveColor,opacity:c>=l.number?1:.6},children:c>l.number?e.jsx(de,{className:"h-5 w-5"}):e.jsx(l.icon,{className:"h-5 w-5"})}),e.jsx("span",{className:"text-xs font-medium",style:{color:c>=l.number?r.headingColor:r.textColor,opacity:c>=l.number?1:.5},children:l.label})]}),p<Ne.length-1&&e.jsx("div",{className:"flex-1 h-1 mx-2 rounded-full transition-all",style:{backgroundColor:c>l.number?r.stepCompletedColor:r.stepInactiveColor,maxWidth:"60px"}})]},l.number))})}),e.jsxs("div",{className:"rounded-xl p-4 mb-6",style:{backgroundColor:r.cardBackgroundColor,borderColor:r.cardBorderColor,border:"1px solid"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-semibold text-sm",style:{color:r.headingColor},children:"Seu Pedido"}),e.jsx("button",{onClick:()=>A(!0),className:"text-xs underline",style:{color:r.primaryButtonBackgroundColor},children:"Ver detalhes"})]}),e.jsx("div",{className:"space-y-2.5",children:d.products.map((l,p)=>e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsxs("div",{className:"relative flex-shrink-0 rounded-lg overflow-hidden",style:{width:48,height:48,backgroundColor:r.inputBackgroundColor},children:[l.image?e.jsx("img",{src:l.image,alt:l.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ie,{className:"h-5 w-5 opacity-30"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold",style:{backgroundColor:r.quantityCircleColor,color:r.quantityTextColor},children:l.quantity})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-xs truncate",children:l.name}),e.jsxs("p",{className:"text-xs opacity-75",children:[l.quantity,"x R$ ",l.price.toFixed(2)]})]}),e.jsx("div",{className:"text-right flex-shrink-0",children:e.jsxs("p",{className:"font-bold text-sm",style:{color:r.headingColor},children:["R$ ",(l.price*l.quantity).toFixed(2)]})})]},p))}),e.jsx("div",{className:"h-px my-3",style:{backgroundColor:r.cardBorderColor}}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold",style:{color:r.headingColor},children:"Total"}),e.jsxs("span",{className:"text-lg font-bold",style:{color:r.primaryButtonBackgroundColor},children:["R$ ",d.total.toFixed(2)]})]})]}),c===1&&e.jsxs("div",{className:"rounded-xl p-5 space-y-4",style:{backgroundColor:r.cardBackgroundColor,borderColor:r.cardBorderColor,border:"1px solid"},children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold mb-1",style:{color:r.headingColor},children:"Seus Dados"}),e.jsx("p",{className:"text-xs opacity-75",children:"Preencha suas informa√ß√µes"})]}),e.jsxs("div",{className:"space-y-3.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"Nome Completo *"}),e.jsx("input",{type:"text",placeholder:"Seu nome completo",value:x.name,onChange:l=>O({...x,name:l.target.value}),className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"E-mail *"}),e.jsx("input",{type:"email",placeholder:"seu@email.com",value:x.email,onChange:l=>O({...x,email:l.target.value}),className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"Telefone *"}),e.jsx("input",{type:"tel",placeholder:"(11) 99999-9999",value:x.phone,onChange:l=>{const p=Re(l.target.value);O({...x,phone:p})},onBlur:l=>{const p=eo(l.target.value);l.target.value&&!p.valid&&h({title:"Telefone inv√°lido",description:p.message,variant:"destructive"})},maxLength:15,className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}})]}),r.requestCpfOnlyAtPayment===!1&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"CPF *"}),e.jsx("input",{type:"text",placeholder:"000.000.000-00",maxLength:14,value:x.document,onChange:l=>{const p=Se(l.target.value);O({...x,document:p})},onBlur:l=>{const p=Ke(l.target.value);l.target.value&&!p.valid&&h({title:"CPF inv√°lido",description:p.message,variant:"destructive"})},className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}})]}),r.requestBirthDate&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"Data de Nascimento"}),e.jsx("input",{type:"date",value:x.birthDate,onChange:l=>O({...x,birthDate:l.target.value}),className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}})]}),r.requestGender&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"G√™nero"}),e.jsxs("select",{value:x.gender,onChange:l=>O({...x,gender:l.target.value}),className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48},children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"masculino",children:"Masculino"}),e.jsx("option",{value:"feminino",children:"Feminino"}),e.jsx("option",{value:"outro",children:"Outro"})]})]})]})]}),c===2&&e.jsxs("div",{className:"rounded-xl p-5 space-y-4",style:{backgroundColor:r.cardBackgroundColor,borderColor:r.cardBorderColor,border:"1px solid"},children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold mb-1",style:{color:r.headingColor},children:"Endere√ßo de Entrega"}),e.jsx("p",{className:"text-xs opacity-75",children:"Onde voc√™ quer receber"})]}),e.jsxs("div",{className:"space-y-3.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"CEP *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"00000-000",value:i.zipCode,onChange:l=>{const p=Pe(l.target.value);$({...i,zipCode:p}),p.replace(/\D/g,"").length===8&&re(p)},className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}}),F&&e.jsx(ce,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 animate-spin"})]})]}),e.jsxs("div",{className:"grid grid-cols-[1fr_100px] gap-2.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"Rua *"}),e.jsx("input",{type:"text",placeholder:"Nome da rua",value:i.street,onChange:l=>$({...i,street:l.target.value}),className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"N¬∫ *"}),e.jsx("input",{type:"text",placeholder:"123",value:i.number,onChange:l=>$({...i,number:l.target.value}),className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"Complemento"}),e.jsx("input",{type:"text",placeholder:"Apto, bloco, etc",value:i.complement,onChange:l=>$({...i,complement:l.target.value}),className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"Bairro *"}),e.jsx("input",{type:"text",placeholder:"Nome do bairro",value:i.neighborhood,onChange:l=>$({...i,neighborhood:l.target.value}),className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}})]}),e.jsxs("div",{className:"grid grid-cols-[1fr_80px] gap-2.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"Cidade *"}),e.jsx("input",{type:"text",placeholder:"Cidade",value:i.city,onChange:l=>$({...i,city:l.target.value}),className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"UF *"}),e.jsx("input",{type:"text",placeholder:"SP",maxLength:2,value:i.state,onChange:l=>$({...i,state:l.target.value.toUpperCase()}),className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48}})]})]})]})]}),c===3&&e.jsxs("div",{className:"rounded-xl p-5 space-y-4",style:{backgroundColor:r.cardBackgroundColor,borderColor:r.cardBorderColor,border:"1px solid"},children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold mb-1",style:{color:r.headingColor},children:"Forma de Pagamento"}),e.jsx("p",{className:"text-xs opacity-75",children:"Como deseja pagar"})]}),e.jsx("div",{className:"space-y-3",children:["PIX","CREDIT_CARD","BOLETO"].map(l=>e.jsxs("button",{onClick:()=>ge(l),className:S("w-full p-4 rounded-xl border-2 transition-all flex items-center gap-3",y===l&&"shadow-lg"),style:{borderColor:y===l?r.primaryButtonBackgroundColor:r.inputBorderColor,backgroundColor:y===l?`${r.primaryButtonBackgroundColor}15`:r.inputBackgroundColor},children:[l==="PIX"&&e.jsx(fe,{className:"h-6 w-6",style:{color:y===l?r.primaryButtonBackgroundColor:r.textColor}}),l==="CREDIT_CARD"&&e.jsx(le,{className:"h-6 w-6",style:{color:y===l?r.primaryButtonBackgroundColor:r.textColor}}),l==="BOLETO"&&e.jsx(Be,{className:"h-6 w-6",style:{color:y===l?r.primaryButtonBackgroundColor:r.textColor}}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsxs("div",{className:"font-semibold text-sm mb-0.5",style:{color:y===l?r.primaryButtonBackgroundColor:r.headingColor},children:[l==="PIX"&&"PIX",l==="CREDIT_CARD"&&"Cart√£o de Cr√©dito",l==="BOLETO"&&"Boleto"]}),e.jsxs("div",{className:"text-xs opacity-75",children:[l==="PIX"&&"Aprova√ß√£o instant√¢nea",l==="CREDIT_CARD"&&"Parcele em at√© 12x",l==="BOLETO"&&"Vencimento em 3 dias"]})]}),y===l&&e.jsx(de,{className:"h-5 w-5",style:{color:r.stepCompletedColor}})]},l))}),y==="CREDIT_CARD"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium block mb-1.5",style:{color:r.labelColor},children:"Parcelas"}),e.jsx("select",{value:me,onChange:l=>ye(Number(l.target.value)),className:"w-full px-4 rounded-lg text-base border",style:{backgroundColor:r.inputBackgroundColor,borderColor:r.inputBorderColor,color:r.textColor,height:48},children:[1,2,3,4,5,6,7,8,9,10,11,12].map(l=>{const p=d.total/l;return e.jsxs("option",{value:l,children:[l,"x R$ ",p.toFixed(2)]},l)})})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[c>1&&e.jsx("button",{onClick:xe,className:"flex items-center justify-center gap-2 px-6 py-3 rounded-xl border-2 transition-all active:scale-95",style:{borderColor:r.inputBorderColor,color:r.textColor,backgroundColor:r.inputBackgroundColor},children:e.jsx(Xe,{className:"h-5 w-5"})}),e.jsx("div",{className:"flex-1",children:c<3?e.jsxs("button",{onClick:te,className:"w-full py-3 rounded-xl font-semibold text-base shadow-lg transition-all active:scale-98 flex items-center justify-center gap-2",style:{backgroundColor:r.primaryButtonBackgroundColor,color:r.primaryButtonTextColor},children:["Continuar",e.jsx(Ue,{className:"h-5 w-5"})]}):e.jsx("button",{onClick:ve,disabled:R||n,className:"w-full py-3.5 rounded-xl font-bold text-base shadow-lg transition-all active:scale-98 flex items-center justify-center gap-2",style:{backgroundColor:r.checkoutButtonBackgroundColor,color:r.checkoutButtonTextColor,opacity:R||n?.6:1},children:R?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"h-5 w-5 animate-spin"}),"Processando..."]}):n?"Modo Preview":e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"h-5 w-5"}),"Finalizar - R$ ",d.total.toFixed(2)]})})})]})]}),v&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 backdrop-blur-sm animate-in fade-in",onClick:()=>A(!1),children:e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 rounded-t-3xl p-6 max-h-[85vh] overflow-y-auto animate-in slide-in-from-bottom",style:{backgroundColor:r.cardBackgroundColor,color:r.textColor,boxShadow:"0 -8px 32px rgba(0,0,0,0.12)"},onClick:l=>l.stopPropagation(),children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-12 h-1.5 rounded-full opacity-30",style:{backgroundColor:r.textColor}})}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-bold",style:{color:r.headingColor},children:"Resumo do Pedido"}),e.jsx("button",{onClick:()=>A(!1),className:"p-2 rounded-full hover:bg-gray-100/10 transition-colors active:scale-95",children:e.jsx(Ve,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"space-y-3.5 mb-5",children:d.products.map((l,p)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"relative flex-shrink-0 rounded-lg overflow-hidden",style:{width:64,height:64,backgroundColor:r.inputBackgroundColor},children:[l.image?e.jsx("img",{src:l.image,alt:l.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ie,{className:"h-7 w-7 opacity-30"})}),e.jsx("div",{className:"absolute -top-1.5 -right-1.5 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shadow-md",style:{backgroundColor:r.quantityCircleColor,color:r.quantityTextColor},children:l.quantity})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm mb-1",children:l.name}),l.sku&&e.jsxs("p",{className:"text-xs opacity-60 mb-1",children:["SKU: ",l.sku]}),e.jsxs("p",{className:"text-xs opacity-75",children:[l.quantity,"x R$ ",l.price.toFixed(2)]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-bold text-sm",style:{color:r.headingColor},children:["R$ ",(l.price*l.quantity).toFixed(2)]})})]},p))}),e.jsx("div",{className:"h-px mb-4",style:{backgroundColor:r.cardBorderColor}}),e.jsxs("div",{className:"space-y-2.5 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["R$ ",d.subtotal.toFixed(2)]})]}),d.shipping>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Frete"}),e.jsxs("span",{className:"font-medium",children:["R$ ",d.shipping.toFixed(2)]})]}),d.tax>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Taxa"}),e.jsxs("span",{className:"font-medium",children:["R$ ",d.tax.toFixed(2)]})]}),d.discount&&d.discount>0&&e.jsxs("div",{className:"flex justify-between text-sm font-medium",style:{color:r.stepCompletedColor},children:[e.jsx("span",{children:"Desconto"}),e.jsxs("span",{children:["-R$ ",d.discount.toFixed(2)]})]}),e.jsx("div",{className:"h-px",style:{backgroundColor:r.cardBorderColor}}),e.jsxs("div",{className:"flex justify-between text-lg font-bold pt-2",children:[e.jsx("span",{style:{color:r.headingColor},children:"Total"}),e.jsxs("span",{style:{color:r.headingColor},children:["R$ ",d.total.toFixed(2)]})]})]}),e.jsx("button",{onClick:()=>A(!1),className:"w-full py-3 rounded-xl font-semibold text-base shadow-lg transition-all active:scale-98",style:{backgroundColor:r.primaryButtonBackgroundColor,color:r.primaryButtonTextColor},children:"Fechar"})]})}),e.jsx("footer",{className:"border-t py-8 mt-12",style:{backgroundColor:r.footerBackgroundColor,borderColor:r.cardBorderColor,color:r.footerTextColor},children:e.jsx("div",{className:"px-4",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(se,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"font-bold text-base",children:"Checkout Seguro"})]}),r.showTrustBadges&&e.jsxs("div",{className:"flex items-center justify-center gap-4 flex-wrap text-xs",children:[r.sslBadgeEnabled&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(be,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"SSL Seguro"})]}),r.showPaymentMethods&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{children:"Pagamento Seguro"})]})]}),(r.showCnpjCpf||r.showContactEmail||r.showPhone)&&e.jsxs("div",{className:"text-xs space-y-1 opacity-80",children:[r.showStoreName&&e.jsx("p",{className:"font-semibold text-sm",children:"Minha Loja"}),r.showCnpjCpf&&e.jsx("p",{children:"CNPJ: 00.000.000/0001-00"}),r.showContactEmail&&e.jsx("p",{children:"contato@loja.com.br"}),r.showPhone&&e.jsx("p",{children:"(11) 99999-9999"})]}),(r.showPrivacyPolicy||r.showTermsConditions||r.showReturns)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-px mx-auto w-24",style:{backgroundColor:r.cardBorderColor}}),e.jsxs("div",{className:"flex items-center justify-center gap-3 text-xs flex-wrap",children:[r.showPrivacyPolicy&&e.jsx("a",{href:"#",style:{color:r.footerLinkColor},className:"underline",children:"Privacidade"}),r.showTermsConditions&&e.jsx("a",{href:"#",style:{color:r.footerLinkColor},className:"underline",children:"Termos"}),r.showReturns&&e.jsx("a",{href:"#",style:{color:r.footerLinkColor},className:"underline",children:"Trocas"})]})]}),e.jsxs("p",{className:"text-xs opacity-60 pt-2",children:["¬© ",new Date().getFullYear()," - Todos os direitos reservados"]})]})})})]})},$e=[{name:"Visa",pattern:/^4/,color:"from-blue-600 to-blue-800",logo:"üí≥"},{name:"Mastercard",pattern:/^5[1-5]/,color:"from-red-600 to-orange-600",logo:"üí≥"},{name:"Amex",pattern:/^3[47]/,color:"from-blue-500 to-blue-700",logo:"üí≥"},{name:"Elo",pattern:/^(4011|4312|4389|4514|4576|5041|5066|5067|6277|6362|6363|6504|6505|6516)/,color:"from-yellow-500 to-yellow-700",logo:"üí≥"}],ko=({onCardDataChange:a,theme:t={},errors:n={}})=>{const[u,C]=g.useState({number:"",holderName:"",expiryMonth:"",expiryYear:"",cvv:""}),[N,h]=g.useState(null),[d,X]=g.useState(null),[P,W]=g.useState(!1);g.useEffect(()=>{const f=u.number.replace(/\s/g,""),v=$e.find(A=>A.pattern.test(f));X((v==null?void 0:v.name)||null),a({...u,brand:v==null?void 0:v.name})},[u]);const B=f=>{var O;const A=f.replace(/\s/g,"").replace(/\D/g,"").slice(0,16);return((O=A.match(/.{1,4}/g))==null?void 0:O.join(" "))||A},M=f=>{const v=f.replace(/\D/g,"");return v.length>=2?v.slice(0,2)+"/"+v.slice(2,4):v},E=f=>f.replace(/\D/g,"").slice(0,4),L=f=>f.replace(/[^a-zA-Z√Ä-√ø\s]/g,"").toUpperCase().slice(0,50),R=f=>{const v=B(f.target.value);C({...u,number:v})},k=f=>{const v=M(f.target.value),[A,x]=v.split("/");C({...u,expiryMonth:A||"",expiryYear:x||""})},c=f=>{const v=L(f.target.value);C({...u,holderName:v})},w=f=>{const v=E(f.target.value);C({...u,cvv:v})},F=()=>{const f=$e.find(v=>v.name===d);return(f==null?void 0:f.color)||"from-slate-700 to-slate-900"};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"relative h-56 mb-8",style:{perspective:"1000px"},children:e.jsxs("div",{className:S("absolute w-full h-full transition-transform duration-700 ease-in-out",P&&"[transform:rotateY(180deg)]"),style:{transformStyle:"preserve-3d"},children:[e.jsxs("div",{className:S("absolute w-full h-full rounded-2xl shadow-2xl p-6 text-white","bg-gradient-to-br",F(),"backdrop-blur-xl"),style:{backfaceVisibility:"hidden",boxShadow:"0 20px 60px -15px rgba(0, 0, 0, 0.3), 0 10px 20px -10px rgba(0, 0, 0, 0.2)"},children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsx("div",{className:"w-12 h-10 bg-gradient-to-br from-yellow-200 to-yellow-400 rounded-md opacity-80"}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs opacity-70 mb-1",children:d||"BANDEIRA"}),e.jsx(le,{className:"h-8 w-8 opacity-70"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:S("text-2xl font-mono tracking-wider transition-all duration-300",N==="number"&&"scale-105"),children:u.number||"‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢"})}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs opacity-70 mb-1",children:"Nome do Titular"}),e.jsx("div",{className:S("text-sm font-semibold transition-all duration-300 truncate",N==="name"&&"scale-105"),children:u.holderName||"SEU NOME AQUI"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs opacity-70 mb-1 text-right",children:"Validade"}),e.jsx("div",{className:S("text-sm font-mono transition-all duration-300",N==="expiry"&&"scale-105"),children:u.expiryMonth&&u.expiryYear?`${u.expiryMonth}/${u.expiryYear}`:"MM/AA"})]})]})]}),e.jsxs("div",{className:S("absolute w-full h-full rounded-2xl shadow-2xl bg-gradient-to-br",F(),"backdrop-blur-xl"),style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)",boxShadow:"0 20px 60px -15px rgba(0, 0, 0, 0.3), 0 10px 20px -10px rgba(0, 0, 0, 0.2)"},children:[e.jsx("div",{className:"w-full h-12 bg-black/40 mt-6"}),e.jsxs("div",{className:"px-6 mt-6",children:[e.jsxs("div",{className:"bg-white rounded p-3 flex justify-end items-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mr-2",children:"CVV"}),e.jsx("div",{className:"text-lg font-mono tracking-wider text-gray-800",children:u.cvv||"‚Ä¢‚Ä¢‚Ä¢"})]}),e.jsx("div",{className:"text-xs text-white/70 mt-2 text-right",children:"C√≥digo de seguran√ßa"})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(q,{htmlFor:"cardNumber",style:{color:t.labelColor},className:"flex items-center gap-2 mb-2",children:[e.jsx(le,{className:"h-4 w-4"}),"N√∫mero do Cart√£o",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(V,{id:"cardNumber",type:"text",placeholder:"1234 5678 9012 3456",value:u.number,onChange:R,onFocus:()=>h("number"),onBlur:()=>h(null),maxLength:19,className:"text-lg font-mono",style:{backgroundColor:t.inputBackgroundColor,borderColor:N==="number"?t.primaryButtonBackgroundColor:t.inputBorderColor,borderRadius:t.inputBorderRadius,color:t.textColor,borderWidth:N==="number"?"2px":"1px",transition:"all 0.3s ease"}}),n.cardNumber&&e.jsxs("div",{className:"flex items-center gap-1 text-red-500 text-sm mt-1",children:[e.jsx(ae,{className:"h-3 w-3"}),n.cardNumber]})]}),e.jsxs("div",{children:[e.jsxs(q,{htmlFor:"cardName",style:{color:t.labelColor},className:"mb-2 block",children:["Nome do Titular (como est√° no cart√£o)",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(V,{id:"cardName",type:"text",placeholder:"NOME COMPLETO",value:u.holderName,onChange:c,onFocus:()=>h("name"),onBlur:()=>h(null),className:"uppercase",style:{backgroundColor:t.inputBackgroundColor,borderColor:N==="name"?t.primaryButtonBackgroundColor:t.inputBorderColor,borderRadius:t.inputBorderRadius,color:t.textColor,borderWidth:N==="name"?"2px":"1px",transition:"all 0.3s ease"}}),n.cardName&&e.jsxs("div",{className:"flex items-center gap-1 text-red-500 text-sm mt-1",children:[e.jsx(ae,{className:"h-3 w-3"}),n.cardName]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(q,{htmlFor:"cardExpiry",style:{color:t.labelColor},className:"mb-2 block",children:["Validade",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx(V,{id:"cardExpiry",type:"text",placeholder:"MM/AA",value:u.expiryMonth&&u.expiryYear?`${u.expiryMonth}/${u.expiryYear}`:"",onChange:k,onFocus:()=>h("expiry"),onBlur:()=>h(null),maxLength:5,className:"font-mono",style:{backgroundColor:t.inputBackgroundColor,borderColor:N==="expiry"?t.primaryButtonBackgroundColor:t.inputBorderColor,borderRadius:t.inputBorderRadius,color:t.textColor,borderWidth:N==="expiry"?"2px":"1px",transition:"all 0.3s ease"}}),n.cardExpiry&&e.jsxs("div",{className:"flex items-center gap-1 text-red-500 text-sm mt-1",children:[e.jsx(ae,{className:"h-3 w-3"}),n.cardExpiry]})]}),e.jsxs("div",{children:[e.jsxs(q,{htmlFor:"cardCvv",style:{color:t.labelColor},className:"flex items-center gap-2 mb-2",children:[e.jsx(se,{className:"h-4 w-4"}),"CVV",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(V,{id:"cardCvv",type:"text",placeholder:"123",value:u.cvv,onChange:w,onFocus:()=>{h("cvv"),W(!0)},onBlur:()=>{h(null),W(!1)},maxLength:4,className:"font-mono",style:{backgroundColor:t.inputBackgroundColor,borderColor:N==="cvv"?t.primaryButtonBackgroundColor:t.inputBorderColor,borderRadius:t.inputBorderRadius,color:t.textColor,borderWidth:N==="cvv"?"2px":"1px",transition:"all 0.3s ease"}}),n.cardCvv&&e.jsxs("div",{className:"flex items-center gap-1 text-red-500 text-sm mt-1",children:[e.jsx(ae,{className:"h-3 w-3"}),n.cardCvv]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800",children:[e.jsx(se,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),e.jsx("p",{className:"text-xs text-green-700 dark:text-green-300",children:"Seus dados s√£o criptografados e protegidos"})]})]})]})},Bo=({pixData:a,onPaymentConfirmed:t,theme:n={}})=>{const[u,C]=g.useState(!1),[N,h]=g.useState(""),[d,X]=g.useState(0),[P,W]=g.useState(!1),[B,M]=g.useState(!0);g.useEffect(()=>{a!=null&&a.qrCode?mo.toDataURL(a.qrCode,{width:400,margin:1,color:{dark:"#000000",light:"#FFFFFF"},errorCorrectionLevel:"H"}).then(k=>{h(k)}).catch(k=>{console.error("Erro ao gerar QR Code:",k)}):a!=null&&a.qrCodeBase64&&h(a.qrCodeBase64)},[a]),g.useEffect(()=>{if(!(a!=null&&a.expiresAt))return;const k=()=>{const w=new Date().getTime(),f=new Date(a.expiresAt).getTime()-w;if(f<=0){X(0);return}X(Math.floor(f/1e3))};k();const c=setInterval(k,1e3);return()=>clearInterval(c)},[a==null?void 0:a.expiresAt]),g.useEffect(()=>{if(!a)return;const c=setInterval(async()=>{W(!0),setTimeout(()=>{W(!1)},1e3)},5e3);return()=>clearInterval(c)},[a]);const E=k=>{const c=Math.floor(k/60),w=k%60;return`${c.toString().padStart(2,"0")}:${w.toString().padStart(2,"0")}`},L=async()=>{if(a!=null&&a.qrCode)try{await navigator.clipboard.writeText(a.qrCode),C(!0),setTimeout(()=>C(!1),3e3)}catch(k){console.error("Erro ao copiar c√≥digo:",k)}};if(!a)return e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-green-400 to-green-600 mb-4 animate-pulse",children:e.jsx(we,{className:"h-10 w-10 text-white"})}),e.jsx("h3",{className:"text-xl md:text-2xl font-bold mb-2",style:{color:n.headingColor},children:"Gerando c√≥digo PIX..."}),e.jsx("p",{className:"text-sm md:text-base opacity-70",style:{color:n.textColor},children:"Aguarde enquanto preparamos seu pagamento"})]});const R=d<=0&&a.expiresAt;return e.jsxs("div",{className:"space-y-4 md:space-y-6 max-w-2xl mx-auto px-2 md:px-0",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 md:w-20 md:h-20 rounded-full bg-gradient-to-br from-green-400 to-green-600 shadow-lg mb-3",children:e.jsx(we,{className:"h-8 w-8 md:h-10 md:w-10 text-white"})}),e.jsx("h2",{className:"text-2xl md:text-3xl font-bold",style:{color:n.headingColor},children:"Pague com PIX"}),e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsxs("span",{className:"text-3xl md:text-4xl font-bold text-green-600 dark:text-green-400",children:["R$ ",a.amount.toFixed(2)]})})]}),a.expiresAt&&e.jsxs("div",{className:S("flex items-center justify-center gap-3 p-4 md:p-5 rounded-2xl border-2 transition-all shadow-sm",R?"bg-red-50 border-red-300 dark:bg-red-950/30 dark:border-red-800":d<60?"bg-yellow-50 border-yellow-300 dark:bg-yellow-950/30 dark:border-yellow-800 animate-pulse":"bg-blue-50 border-blue-300 dark:bg-blue-950/30 dark:border-blue-800"),children:[e.jsx(uo,{className:S("h-6 w-6 md:h-7 md:w-7",R?"text-red-600 dark:text-red-400":d<60?"text-yellow-600 dark:text-yellow-400":"text-blue-600 dark:text-blue-400")}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:gap-2",children:[e.jsx("span",{className:S("font-mono text-xl md:text-2xl font-bold",R?"text-red-700 dark:text-red-300":d<60?"text-yellow-700 dark:text-yellow-300":"text-blue-700 dark:text-blue-300"),children:R?"Expirado":E(d)}),!R&&e.jsx("span",{className:S("text-sm md:text-base",d<60?"text-yellow-600 dark:text-yellow-400":"text-blue-600 dark:text-blue-400"),children:"restantes"})]})]}),e.jsxs("div",{className:"flex gap-2 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl",children:[e.jsxs("button",{onClick:()=>M(!0),className:S("flex-1 py-3 px-4 rounded-lg font-semibold text-sm md:text-base transition-all",B?"bg-white dark:bg-gray-900 shadow-md":"hover:bg-gray-200 dark:hover:bg-gray-700"),style:B?{color:n.primaryButtonBackgroundColor}:{color:n.textColor},children:[e.jsx(we,{className:"h-4 w-4 md:h-5 md:w-5 inline mr-2"}),"QR Code"]}),e.jsxs("button",{onClick:()=>M(!1),className:S("flex-1 py-3 px-4 rounded-lg font-semibold text-sm md:text-base transition-all",B?"hover:bg-gray-200 dark:hover:bg-gray-700":"bg-white dark:bg-gray-900 shadow-md"),style:B?{color:n.textColor}:{color:n.primaryButtonBackgroundColor},children:[e.jsx(Fe,{className:"h-4 w-4 md:h-5 md:w-5 inline mr-2"}),"Copia e Cola"]})]}),B&&e.jsx(K,{className:"overflow-hidden border-2 shadow-lg",children:e.jsx(Z,{className:"p-6 md:p-8",children:e.jsxs("div",{className:"text-center space-y-4",children:[N?e.jsx("div",{className:"inline-block p-4 md:p-6 bg-white rounded-2xl shadow-xl",children:e.jsx("img",{src:N,alt:"QR Code PIX",className:"w-64 h-64 md:w-80 md:h-80 mx-auto"})}):e.jsx("div",{className:"w-64 h-64 md:w-80 md:h-80 mx-auto bg-gray-100 dark:bg-gray-800 rounded-2xl flex items-center justify-center",children:e.jsx(We,{className:"h-12 w-12 text-gray-400 animate-spin"})}),P&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-blue-600 dark:text-blue-400",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-pulse"}),"Verificando pagamento..."]}),e.jsx("p",{className:"text-sm md:text-base font-medium",style:{color:n.textColor},children:"Abra o app do seu banco e escaneie o QR Code"})]})})}),!B&&e.jsx(K,{className:"overflow-hidden border-2 shadow-lg",children:e.jsxs(Z,{className:"p-6 md:p-8 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm md:text-base font-semibold block mb-3",style:{color:n.textColor},children:"C√≥digo PIX Copia e Cola:"}),e.jsx("div",{className:"p-4 md:p-5 bg-gray-50 dark:bg-gray-900 rounded-xl border-2 border-dashed border-gray-300 dark:border-gray-700 overflow-hidden",style:{color:n.textColor},children:e.jsx("code",{className:"text-xs md:text-sm font-mono break-all block",children:a.qrCode})})]}),e.jsx(ee,{onClick:L,className:"w-full gap-2 h-12 md:h-14 text-base md:text-lg font-bold shadow-lg hover:shadow-xl transition-all",style:{backgroundColor:u?"#10b981":n.primaryButtonBackgroundColor,color:n.primaryButtonTextColor},children:u?e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"h-5 w-5 md:h-6 md:w-6"}),"C√≥digo Copiado!"]}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"h-5 w-5 md:h-6 md:w-6"}),"Copiar C√≥digo PIX"]})})]})}),e.jsx(K,{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20 border-2 border-blue-200 dark:border-blue-800 shadow-md",children:e.jsx(Z,{className:"p-5 md:p-6",children:e.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[e.jsx("div",{className:"shrink-0 mt-1",children:e.jsx(fe,{className:"h-7 w-7 md:h-8 md:w-8 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsx("h4",{className:"font-bold text-base md:text-lg",style:{color:n.headingColor},children:"Como pagar:"}),e.jsxs("ol",{className:"space-y-2 md:space-y-3 text-sm md:text-base",style:{color:n.textColor},children:[e.jsxs("li",{className:"flex gap-2 md:gap-3",children:[e.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-6 h-6 md:w-7 md:h-7 rounded-full bg-blue-600 text-white text-xs md:text-sm font-bold",children:"1"}),e.jsx("span",{className:"pt-0.5",children:"Abra o app do seu banco ou carteira digital"})]}),e.jsxs("li",{className:"flex gap-2 md:gap-3",children:[e.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-6 h-6 md:w-7 md:h-7 rounded-full bg-blue-600 text-white text-xs md:text-sm font-bold",children:"2"}),e.jsxs("span",{className:"pt-0.5",children:["Escolha ",e.jsx("strong",{children:"Pix Copia e Cola"})," ou"," ",e.jsx("strong",{children:"Ler QR Code"})]})]}),e.jsxs("li",{className:"flex gap-2 md:gap-3",children:[e.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-6 h-6 md:w-7 md:h-7 rounded-full bg-blue-600 text-white text-xs md:text-sm font-bold",children:"3"}),e.jsx("span",{className:"pt-0.5",children:"Cole o c√≥digo ou escaneie o QR Code acima"})]}),e.jsxs("li",{className:"flex gap-2 md:gap-3",children:[e.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-6 h-6 md:w-7 md:h-7 rounded-full bg-blue-600 text-white text-xs md:text-sm font-bold",children:"4"}),e.jsx("span",{className:"pt-0.5",children:"Confirme o pagamento e pronto! ‚úÖ Aprova√ß√£o autom√°tica"})]})]})]})]})})}),e.jsxs("div",{className:"flex items-center gap-3 p-4 md:p-5 bg-green-50 dark:bg-green-950/20 rounded-xl border border-green-200 dark:border-green-800",children:[e.jsx(Ge,{className:"h-5 w-5 md:h-6 md:w-6 text-green-600 dark:text-green-400 flex-shrink-0"}),e.jsx("p",{className:"text-xs md:text-sm text-green-700 dark:text-green-300 font-medium",children:"Pagamento 100% seguro e aprova√ß√£o instant√¢nea"})]}),R&&e.jsx(K,{className:"bg-red-50 dark:bg-red-950/20 border-2 border-red-200 dark:border-red-800",children:e.jsx(Z,{className:"p-5 md:p-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ae,{className:"h-6 w-6 text-red-600 dark:text-red-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-700 dark:text-red-300 font-bold mb-2 text-sm md:text-base",children:"C√≥digo PIX Expirado"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:'Este c√≥digo expirou. Clique em "Gerar Novo Pagamento" abaixo para criar um novo c√≥digo PIX.'})]})]})})})]})},Fo=({boletoData:a,theme:t={}})=>{const[n,u]=g.useState(!1),[C,N]=g.useState(0);g.useEffect(()=>{if(!(a!=null&&a.dueDate))return;(()=>{const L=new Date;L.setHours(0,0,0,0);const R=new Date(a.dueDate);R.setHours(0,0,0,0);const k=R.getTime()-L.getTime(),c=Math.ceil(k/(1e3*60*60*24));N(c)})()},[a==null?void 0:a.dueDate]);const h=async()=>{if(a!=null&&a.digitableLine)try{await navigator.clipboard.writeText(a.digitableLine),u(!0),setTimeout(()=>u(!1),3e3)}catch(E){console.error("Erro ao copiar c√≥digo:",E)}},d=()=>{if(a!=null&&a.boletoUrl)window.open(a.boletoUrl,"_blank");else if(a!=null&&a.pdf){const E=document.createElement("a");E.href=a.pdf,E.download=`boleto-${Date.now()}.pdf`,document.body.appendChild(E),E.click(),document.body.removeChild(E)}},X=()=>{if(a!=null&&a.boletoUrl){const E=window.open(a.boletoUrl,"_blank");E==null||E.print()}},P=E=>new Date(E).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}),W=E=>E.replace(/^(\d{5})(\d{5})(\d{5})(\d{6})(\d{5})(\d{6})(\d)(\d{14})$/,"$1.$2 $3.$4 $5.$6 $7 $8");if(!a)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-orange-100 dark:bg-orange-900/20 mb-4",children:e.jsx(Ae,{className:"h-8 w-8 text-orange-600 dark:text-orange-400 animate-pulse"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:t.headingColor},children:"Gerando boleto..."}),e.jsx("p",{className:"text-sm opacity-70",style:{color:t.textColor},children:"Aguarde enquanto preparamos seu boleto banc√°rio"})]});const B=C<0,M=C<=3&&C>=0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:S("flex items-center justify-between p-4 rounded-xl border-2 transition-all",B?"bg-red-50 border-red-200 dark:bg-red-950/20 dark:border-red-800":M?"bg-yellow-50 border-yellow-200 dark:bg-yellow-950/20 dark:border-yellow-800":"bg-blue-50 border-blue-200 dark:bg-blue-950/20 dark:border-blue-800"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xo,{className:S("h-6 w-6",B?"text-red-600 dark:text-red-400":M?"text-yellow-600 dark:text-yellow-400":"text-blue-600 dark:text-blue-400")}),e.jsxs("div",{children:[e.jsx("p",{className:S("text-sm font-medium",B?"text-red-700 dark:text-red-300":M?"text-yellow-700 dark:text-yellow-300":"text-blue-700 dark:text-blue-300"),children:B?"Vencido":M?"Vence em breve":"Vencimento"}),e.jsx("p",{className:S("text-lg font-bold",B?"text-red-800 dark:text-red-200":M?"text-yellow-800 dark:text-yellow-200":"text-blue-800 dark:text-blue-200"),children:P(a.dueDate)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm opacity-70",style:{color:t.textColor},children:"Valor"}),e.jsxs("p",{className:"text-xl font-bold",style:{color:t.headingColor},children:["R$ ",a.amount.toFixed(2)]})]})]}),e.jsx(K,{className:"overflow-hidden border-2",children:e.jsx(Z,{className:"p-8",children:e.jsxs("div",{className:"text-center space-y-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-orange-400 to-orange-600 mb-2",children:e.jsx(Ae,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold mb-2",style:{color:t.headingColor},children:"Boleto Banc√°rio"}),e.jsx("p",{className:"text-sm opacity-70",style:{color:t.textColor},children:"Pague em qualquer banco, lot√©rica ou internet banking"})]}),e.jsxs("div",{className:"py-6 px-4 bg-white dark:bg-gray-900 rounded-xl border-2 border-dashed border-gray-300 dark:border-gray-700",children:[e.jsx("div",{className:"flex justify-center items-end gap-[2px] h-20",children:a.barcode.split("").map((E,L)=>{const R=[60,80,70,90,75,85,65,95,70,80],k=R[parseInt(E)%R.length];return e.jsx("div",{className:"w-1 bg-black dark:bg-white",style:{height:`${k}%`}},L)})}),e.jsx("p",{className:"text-xs font-mono mt-3 text-gray-500 dark:text-gray-400",children:a.barcode})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs(ee,{onClick:d,variant:"outline",className:"gap-2 h-12 font-semibold",disabled:!a.boletoUrl&&!a.pdf,children:[e.jsx(ho,{className:"h-4 w-4"}),"Baixar Boleto"]}),e.jsxs(ee,{onClick:X,variant:"outline",className:"gap-2 h-12 font-semibold",disabled:!a.boletoUrl,children:[e.jsx(bo,{className:"h-4 w-4"}),"Imprimir"]})]})]})})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium block",style:{color:t.textColor},children:"Linha digit√°vel (para pagar no internet banking):"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"px-4 py-4 bg-gray-50 dark:bg-gray-900 rounded-lg border",style:{color:t.textColor},children:e.jsx("code",{className:"text-sm font-mono block text-center",children:W(a.digitableLine)})}),e.jsx(ee,{onClick:h,className:"w-full gap-2 h-12 font-semibold",style:{backgroundColor:t.primaryButtonBackgroundColor,color:t.primaryButtonTextColor},children:n?e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"h-4 w-4"}),"C√≥digo Copiado!"]}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"h-4 w-4"}),"Copiar C√≥digo"]})})]})]}),e.jsx(K,{className:"bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-950/20 dark:to-amber-950/20 border-orange-200 dark:border-orange-800",children:e.jsx(Z,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-lg flex items-center gap-2",style:{color:t.headingColor},children:[e.jsx(go,{className:"h-5 w-5"}),"Como pagar o boleto:"]}),e.jsxs("ol",{className:"space-y-3 text-sm",style:{color:t.textColor},children:[e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-6 h-6 rounded-full bg-orange-600 text-white text-xs font-bold",children:"1"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Baixe ou imprima"})," o boleto usando os bot√µes acima"]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-6 h-6 rounded-full bg-orange-600 text-white text-xs font-bold",children:"2"}),e.jsxs("span",{children:["Pague no ",e.jsx("strong",{children:"banco"}),", ",e.jsx("strong",{children:"lot√©rica"})," ou"," ",e.jsx("strong",{children:"internet banking"})," at√© a data de vencimento"]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-6 h-6 rounded-full bg-orange-600 text-white text-xs font-bold",children:"3"}),e.jsxs("span",{children:["No internet banking, use a"," ",e.jsx("strong",{children:"linha digit√°vel"})," acima"]})]}),e.jsxs("li",{className:"flex gap-3",children:[e.jsx("span",{className:"flex-shrink-0 flex items-center justify-center w-6 h-6 rounded-full bg-orange-600 text-white text-xs font-bold",children:"4"}),e.jsxs("span",{children:["A confirma√ß√£o do pagamento pode levar at√©"," ",e.jsx("strong",{children:"2 dias √∫teis"})]})]})]})]})})}),B&&e.jsx(K,{className:"bg-red-50 dark:bg-red-950/20 border-red-200 dark:border-red-800",children:e.jsx(Z,{className:"p-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ae,{className:"h-5 w-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-700 dark:text-red-300 font-medium mb-1",children:"Boleto Vencido"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:"Este boleto est√° vencido. Para pag√°-lo, voc√™ precisar√° gerar uma segunda via ou entrar em contato com o suporte."})]})]})})}),M&&!B&&e.jsx(K,{className:"bg-yellow-50 dark:bg-yellow-950/20 border-yellow-200 dark:border-yellow-800",children:e.jsx(Z,{className:"p-6",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ae,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-700 dark:text-yellow-300 font-medium mb-1",children:"Vencimento Pr√≥ximo"}),e.jsxs("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:["Seu boleto vence em ",C," ",C===1?"dia":"dias",". N√£o se esque√ßa de pag√°-lo para evitar juros."]})]})]})})})]})},Eo=a=>a.replace(/\D/g,""),ze=a=>Eo(a),Po=({injectedOrderId:a,injectedTheme:t,previewMode:n=!1})=>{var De;const{orderId:u}=qe(),C=a||u||null,N=Me(),{toast:h}=Oe(),[d,X]=g.useState(null),[P,W]=g.useState(null),[B,M]=g.useState(null),[E,L]=g.useState(!0),[R,k]=g.useState(!1),[c,w]=g.useState(1),[F,f]=g.useState(!1),[v,A]=g.useState(!1),[x,O]=g.useState({name:"",email:"",phone:"",document:""}),[i,$]=g.useState({street:"",number:"",complement:"",neighborhood:"",city:"",state:"",zipCode:""}),[y,ge]=g.useState("PIX"),[me,ye]=g.useState(1),[r,je]=g.useState(null),[re,ue]=g.useState(null),[te,xe]=g.useState(null),[ve,Ne]=g.useState({}),[l,p]=g.useState(!1),{calculation:j,activeDiscount:Y,getDiscountLabel:Q,getDiscountInfoForMethod:ne}=fo({userId:(P==null?void 0:P.userId)||null,paymentMethod:y,purchaseAmount:(d==null?void 0:d.subtotal)||0}),T=j.hasDiscount?j.finalTotal+((d==null?void 0:d.shipping)||0)+((d==null?void 0:d.tax)||0):(d==null?void 0:d.total)||0;g.useEffect(()=>{const s=localStorage.getItem(`checkout-${u}`);if(s)try{const m=JSON.parse(s);m.currentStep&&w(m.currentStep),m.customerData&&O(m.customerData),m.addressData&&$(m.addressData),m.paymentMethod&&ge(m.paymentMethod),m.pixData&&ue(m.pixData),m.boletoData&&xe(m.boletoData)}catch(m){console.error("Erro ao recuperar estado:",m)}},[u]),g.useEffect(()=>{if(u){const s={currentStep:c,customerData:x,addressData:i,paymentMethod:y,pixData:re,boletoData:te,savedAt:new Date().toISOString()};localStorage.setItem(`checkout-${u}`,JSON.stringify(s))}},[c,x,i,y,re,te,u]);const[z,G]=g.useState(!1);g.useEffect(()=>{const s=()=>{G(window.innerWidth<1024)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const o=t?Ce(t):B!=null&&B.theme?Ce(B.theme):Ie;g.useEffect(()=>{C&&oo()},[C]);const oo=async()=>{var s;try{L(!0);const{data:m,error:_}=await D.from("Order").select("*").eq("id",C).single();if(_||!m)throw new Error("Pedido n√£o encontrado");const b=Array.isArray(m.items)?m.items:[],he=Array.isArray((s=m.metadata)==null?void 0:s.originalProducts)?m.metadata.originalProducts:[],J={orderId:m.id,products:b.map(I=>{const U=he.find(H=>(H==null?void 0:H.variantId)&&String(H.variantId)===String(I.variantId)||(H==null?void 0:H.productId)&&String(H.productId)===String(I.productId)||(H==null?void 0:H.id)&&(String(H.id)===String(I.productId)||String(H.id)===String(I.id)));return{id:I.productId||I.id,name:I.name||(U==null?void 0:U.name)||(U==null?void 0:U.title)||"Produto",price:Number(I.price)||0,quantity:Number(I.quantity)||1,image:I.image||(U==null?void 0:U.image)||(Array.isArray(U==null?void 0:U.images)?U.images[0]:"")||"",sku:I.sku||(U==null?void 0:U.sku)||""}}),total:Number(m.total)||0,subtotal:Number(m.subtotal)||0,tax:Number(m.tax)||0,shipping:Number(m.shipping)||0,discount:Number(m.discount)||0};if(X(J),W(m),!n&&m.userId)try{const I=await He.loadCustomization(m.userId);I&&M(I)}catch{console.log("Usando tema padr√£o")}}catch(m){console.error("Erro ao carregar checkout:",m),h({title:"Erro ao carregar checkout",description:m.message||"Tente novamente mais tarde",variant:"destructive"})}finally{L(!1)}},ro=async s=>{const m=s.replace(/\D/g,"");if(m.length===8){f(!0);try{const _=await Qe(m);_?($(b=>({...b,street:_.street||"",neighborhood:_.neighborhood||"",city:_.city||"",state:_.state||""})),h({title:"CEP encontrado!",description:`${_.city} - ${_.state}`})):h({title:"CEP n√£o encontrado",description:"Verifique o CEP digitado e tente novamente",variant:"destructive"})}catch(_){console.error("Erro ao buscar CEP:",_),h({title:"Erro ao buscar CEP",description:"Tente novamente mais tarde",variant:"destructive"})}finally{f(!1)}}},Te=s=>{if(s===1){if(!x.name||!x.email||!x.phone)return h({title:"Dados incompletos",description:"Preencha todos os campos obrigat√≥rios",variant:"destructive"}),!1;if(o.requestCpfOnlyAtPayment===!1&&!x.document)return h({title:"CPF obrigat√≥rio",description:"Por favor, informe seu CPF",variant:"destructive"}),!1}return s===2&&(!i.zipCode||!i.street||!i.number||!i.neighborhood||!i.city||!i.state)?(h({title:"Endere√ßo incompleto",description:"Preencha todos os campos obrigat√≥rios",variant:"destructive"}),!1):!0},to=()=>{Te(c)&&(w(c+1),window.scrollTo({top:0,behavior:"smooth"}))},so=()=>{w(c-1),window.scrollTo({top:0,behavior:"smooth"})},ao=async()=>{if(Te(c))try{k(!0);const s=y.toLowerCase();if(console.log("üîç [DEBUG] Payment method original:",y),console.log("üîç [DEBUG] Payment method normalized:",s),y==="CREDIT_CARD"&&(!r||!r.number||!r.holderName||!r.cvv)){h({title:"Dados do cart√£o incompletos",description:"Por favor, preencha todos os dados do cart√£o.",variant:"destructive"}),k(!1);return}const m=y==="CREDIT_CARD"&&r?{number:r.number.replace(/\s/g,""),holderName:r.holderName,expiryMonth:r.expiryMonth,expiryYear:r.expiryYear,cvv:r.cvv}:void 0;console.log("üìù [UPDATE] Atualizando pedido com dados do cadastro...");const{error:_}=await D.from("Order").update({customerName:x.name,customerEmail:x.email,customerPhone:x.phone,customerCpf:ze(x.document),shippingAddress:{street:i.street,number:i.number,complement:i.complement||"",neighborhood:i.neighborhood,city:i.city,state:i.state,zipCode:i.zipCode,country:"BR"},billingAddress:{street:i.street,number:i.number,complement:i.complement||"",neighborhood:i.neighborhood,city:i.city,state:i.state,zipCode:i.zipCode,country:"BR"},paymentMethod:y,updatedAt:new Date().toISOString()}).eq("id",C);if(_){console.error("‚ùå [UPDATE] Erro ao atualizar pedido:",_),h({title:"Erro ao salvar dados",description:"N√£o foi poss√≠vel salvar os dados do pedido",variant:"destructive"}),k(!1);return}console.log("‚úÖ [UPDATE] Pedido atualizado com sucesso!",{orderId:C,customerName:x.name,customerEmail:x.email});const{data:b,error:he}=await D.functions.invoke("process-payment",{body:{userId:P==null?void 0:P.userId,orderId:C,amount:(d==null?void 0:d.total)||0,currency:"BRL",paymentMethod:s,customer:{name:x.name,email:x.email,document:ze(x.document),phone:x.phone},billingAddress:{street:i.street,number:i.number,complement:i.complement,neighborhood:i.neighborhood,city:i.city,state:i.state,zipCode:i.zipCode},card:m,installments:y==="CREDIT_CARD"?me:1}});if(console.log("üîç [DEBUG] Resposta process-payment:",{data:b,error:he}),console.log("üîç [DEBUG] data.success:",b==null?void 0:b.success),console.log("üîç [DEBUG] paymentMethod:",y),console.log("üîç [DEBUG] data.pixData:",b==null?void 0:b.pixData),console.log("üîç [DEBUG] data.transactionId:",b==null?void 0:b.transactionId),console.log("üîç [DEBUG] effectiveOrderId:",C),!(b!=null&&b.success)){if(b!=null&&b.requiresSetup||(b==null?void 0:b.error)==="NO_GATEWAY_CONFIGURED"){h({title:"Gateway n√£o configurado",description:(b==null?void 0:b.hint)||"Configure um gateway de pagamento primeiro",variant:"destructive",duration:1e4}),k(!1);return}throw new Error((b==null?void 0:b.message)||(b==null?void 0:b.error)||"Erro ao processar pagamento")}if(he)throw he;try{console.log("üîÑ [SHOPIFY] Sincronizando pedido com Shopify...",{orderId:C});const{data:J,error:I}=await D.functions.invoke("sync-order-to-shopify",{body:{orderId:C,userId:P==null?void 0:P.userId}});J!=null&&J.success?console.log("‚úÖ [SHOPIFY] Pedido sincronizado com sucesso!",{shopifyOrderId:J.shopifyOrderId,shopifyOrderNumber:J.shopifyOrderNumber,adminUrl:J.shopifyAdminUrl}):I&&console.warn("‚ö†Ô∏è [SHOPIFY] Erro ao sincronizar (n√£o-cr√≠tico):",I)}catch(J){console.warn("‚ö†Ô∏è [SHOPIFY] Erro ao tentar sincronizar com Shopify:",J)}if(b.success)if(y==="CREDIT_CARD")h({title:"Pagamento processado!",description:"Redirecionando para confirma√ß√£o..."}),setTimeout(()=>{N(`/checkout/success/${b.transactionId||C}`)},1500);else if(y==="PIX"&&b.pixData){console.log("‚úÖ [DEBUG] Entrando no bloco de PIX"),console.log("‚úÖ [DEBUG] Vai redirecionar para:",`/pix/${C}/${b.transactionId}`),console.log("‚úÖ [DEBUG] pixData recebido:",b.pixData);const J={qrCode:b.pixData.qrCode||"",qrCodeBase64:b.pixData.qrCodeBase64||"",expiresAt:b.pixData.expiresAt||"",amount:(d==null?void 0:d.total)||0,transactionId:b.transactionId||""};try{const I=JSON.stringify(J);localStorage.setItem(`pix-${C}`,I),console.log("‚úÖ [DEBUG] Dados salvos no localStorage")}catch(I){console.error("‚ùå [DEBUG] Erro ao salvar no localStorage:",I)}h({title:"PIX gerado com sucesso!",description:"Redirecionando para pagamento..."}),console.log("üöÄ [DEBUG] Iniciando redirecionamento..."),setTimeout(()=>{console.log("üöÄ [DEBUG] Executando navigate..."),N(`/pix/${C}/${b.transactionId}`)},1e3)}else y==="BOLETO"&&b.boletoData?(xe(b.boletoData),localStorage.setItem(`boleto-${C}`,JSON.stringify(b.boletoData)),h({title:"Boleto gerado!",description:"Baixe o boleto para completar o pagamento."})):(console.log("‚ùå [DEBUG] N√ÉO entrou em nenhum bloco de pagamento"),console.log("‚ùå [DEBUG] Motivo:"),console.log("   - paymentMethod:",y),console.log("   - paymentMethod === 'CREDIT_CARD'?",y==="CREDIT_CARD"),console.log("   - paymentMethod === 'PIX'?",y==="PIX"),console.log("   - data.pixData existe?",!!b.pixData),console.log("   - paymentMethod === 'BOLETO'?",y==="BOLETO"),console.log("   - data.boletoData existe?",!!b.boletoData))}catch(s){console.error("Erro ao processar checkout:",s),h({title:"Erro ao processar pagamento",description:s.message||"Tente novamente mais tarde",variant:"destructive"})}finally{k(!1)}};if(E)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:o.backgroundColor},children:e.jsxs("div",{className:"text-center",children:[e.jsx(ce,{className:"h-12 w-12 animate-spin mx-auto mb-4",style:{color:o.primaryButtonBackgroundColor}}),e.jsx("p",{style:{color:o.textColor},children:"Carregando checkout..."})]})});if(!d)return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{backgroundColor:o.backgroundColor},children:e.jsxs(io,{variant:"destructive",className:"max-w-md",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx(co,{children:"Pedido n√£o encontrado. Verifique o link e tente novamente."})]})});const lo=3,pe=[{number:1,label:"Dados",icon:Le},{number:2,label:"Endere√ßo",icon:_e},{number:3,label:"Pagamento",icon:le}];return z?e.jsx(wo,{injectedOrderId:a,injectedTheme:t,previewMode:n}):e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:o.backgroundColor,color:o.textColor,fontFamily:o.fontFamily},children:[o.noticeBarEnabled&&o.noticeBarMessage&&e.jsx("div",{className:"py-3 px-4 text-center text-sm md:text-base font-medium",style:{backgroundColor:o.noticeBarBackgroundColor,color:o.noticeBarTextColor},children:o.noticeBarMessage}),e.jsx("header",{className:"border-b sticky top-0 z-30 backdrop-blur-lg",style:{backgroundColor:o.useGradient?`linear-gradient(135deg, ${o.backgroundColor}, ${o.backgroundGradient})`:`${o.backgroundColor}F5`,borderColor:o.cardBorderColor},children:e.jsx("div",{className:"container mx-auto px-4 py-4 md:py-6 max-w-6xl",children:e.jsx("div",{className:S("flex items-center",o.logoAlignment==="center"&&"justify-center",o.logoAlignment==="right"&&"justify-end",o.logoAlignment==="left"&&"justify-start"),children:o.logoUrl&&e.jsx("img",{src:o.logoUrl,alt:"Logo",className:"h-8 md:h-10 object-contain",style:{width:o.logoWidth||"auto",height:o.logoHeight||40}})})})}),o.bannerEnabled&&o.bannerUrl&&e.jsx("div",{className:"w-full",children:e.jsx("img",{src:o.bannerUrl,alt:"Banner",className:"w-full object-cover",style:{height:o.bannerHeight||90}})}),e.jsxs("main",{className:"container mx-auto px-4 py-6 md:py-8 max-w-6xl pb-32 lg:pb-8",children:[o.showProgressBar&&e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsx("div",{className:"lg:hidden flex items-center justify-between mb-4",children:pe.map((s,m)=>e.jsxs(ke.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center gap-1.5 flex-1",children:[e.jsx("div",{className:S("w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all",c===s.number&&"ring-2 ring-offset-2"),style:{backgroundColor:c>s.number?o.stepCompletedColor:c===s.number?o.stepActiveColor:o.stepInactiveColor,color:c>=s.number?o.primaryButtonTextColor:o.textColor},children:c>s.number?e.jsx(de,{className:"h-5 w-5"}):e.jsx(s.icon,{className:"h-5 w-5"})}),e.jsx("span",{className:"text-xs font-medium text-center",style:{color:c>=s.number?o.headingColor:o.textColor,opacity:c>=s.number?1:.5},children:s.label})]}),m<pe.length-1&&e.jsx("div",{className:"w-8 h-0.5 mx-1 rounded-full transition-all mt-[-20px]",style:{backgroundColor:c>s.number?o.stepCompletedColor:o.stepInactiveColor}})]},s.number))}),e.jsx("div",{className:"hidden lg:flex items-center justify-between mb-4",children:pe.map((s,m)=>e.jsxs(ke.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:S("w-12 h-12 rounded-full flex items-center justify-center font-semibold transition-all",c>s.number&&"scale-110"),style:{backgroundColor:c>s.number?o.stepCompletedColor:c===s.number?o.stepActiveColor:o.stepInactiveColor,color:c>=s.number?o.primaryButtonTextColor:o.textColor},children:c>s.number?e.jsx(de,{className:"h-6 w-6"}):e.jsx(s.icon,{className:"h-6 w-6"})}),e.jsx("span",{className:"text-xs font-medium",style:{color:c>=s.number?o.headingColor:o.textColor,opacity:c>=s.number?1:.5},children:s.label})]}),m<pe.length-1&&e.jsx("div",{className:"flex-1 h-1 mx-2 rounded-full transition-all",style:{backgroundColor:c>s.number?o.stepCompletedColor:o.stepInactiveColor}})]},s.number))})]}),e.jsx("div",{className:"lg:hidden mb-6",children:e.jsx(K,{style:{backgroundColor:o.cardBackgroundColor,borderColor:o.cardBorderColor,borderRadius:o.cardBorderRadius},children:e.jsxs(Z,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-bold text-base",style:{color:o.headingColor},children:"Seu Pedido"}),e.jsx("button",{onClick:()=>A(!0),className:"text-sm underline",style:{color:o.primaryButtonBackgroundColor},children:"Ver detalhes"})]}),e.jsx("div",{className:"space-y-3 mb-4",children:d.products.map((s,m)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative flex-shrink-0 rounded-lg overflow-hidden",style:{width:50,height:50,backgroundColor:o.inputBackgroundColor},children:[s.image?e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ie,{className:"h-5 w-5 opacity-30"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold",style:{backgroundColor:o.quantityCircleColor,color:o.quantityTextColor},children:s.quantity})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-sm truncate",children:s.name}),e.jsxs("p",{className:"text-xs opacity-75",children:[s.quantity,"x R$ ",s.price.toFixed(2)]})]}),e.jsx("div",{className:"text-right flex-shrink-0",children:e.jsxs("p",{className:"font-bold text-sm",style:{color:o.headingColor},children:["R$ ",(s.price*s.quantity).toFixed(2)]})})]},m))}),e.jsx(oe,{className:"my-3"}),e.jsx(oe,{}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsx("span",{className:"text-lg font-bold",style:{color:o.headingColor},children:"Total"}),e.jsxs("span",{className:"text-xl font-bold",style:{color:o.primaryButtonBackgroundColor},children:["R$ ",T.toFixed(2)]})]})]})})}),e.jsxs("div",{className:"grid lg:grid-cols-[1fr_420px] gap-8",children:[e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[c===1&&e.jsx(K,{style:{backgroundColor:o.cardBackgroundColor,borderColor:o.cardBorderColor,borderRadius:o.cardBorderRadius,boxShadow:o.cardShadow},children:e.jsxs(Z,{className:"p-5 md:p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-1",style:{color:o.headingColor},children:"Dados Pessoais"}),e.jsx("p",{className:"text-sm opacity-75",children:"Preencha suas informa√ß√µes"})]}),e.jsxs("div",{className:"space-y-4 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"name",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"Nome Completo *"}),e.jsx(V,{id:"name",placeholder:"Seu nome completo",value:x.name,onChange:s=>O({...x,name:s.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"email",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"E-mail *"}),e.jsx(V,{id:"email",type:"email",placeholder:"seu@email.com",value:x.email,onChange:s=>O({...x,email:s.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"phone",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"Telefone *"}),e.jsx(V,{id:"phone",type:"tel",placeholder:"(11) 99999-9999",value:x.phone,onChange:s=>{const m=Re(s.target.value);O({...x,phone:m})},onBlur:s=>{const m=eo(s.target.value);s.target.value&&!m.valid&&h({title:"Telefone inv√°lido",description:m.message,variant:"destructive"})},maxLength:15,className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]})]}),o.requestCpfOnlyAtPayment===!1&&e.jsxs("div",{children:[e.jsx(q,{htmlFor:"document",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"CPF *"}),e.jsx(V,{id:"document",placeholder:"000.000.000-00",maxLength:14,value:x.document,onChange:s=>{const m=Se(s.target.value);O({...x,document:m})},onBlur:s=>{const m=Ke(s.target.value);s.target.value&&!m.valid&&h({title:"CPF inv√°lido",description:m.message,variant:"destructive"})},className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]}),o.requestBirthDate&&e.jsxs("div",{children:[e.jsx(q,{htmlFor:"birthDate",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"Data de Nascimento"}),e.jsx(V,{id:"birthDate",type:"date",value:x.birthDate,onChange:s=>O({...x,birthDate:s.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]}),o.requestGender&&e.jsxs("div",{children:[e.jsx(q,{htmlFor:"gender",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"G√™nero"}),e.jsxs("select",{id:"gender",value:x.gender,onChange:s=>O({...x,gender:s.target.value}),className:"w-full mt-1.5 px-4 rounded-lg text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,borderWidth:1,borderStyle:"solid",color:o.textColor},children:[e.jsx("option",{value:"",children:"Selecione..."}),e.jsx("option",{value:"masculino",children:"Masculino"}),e.jsx("option",{value:"feminino",children:"Feminino"}),e.jsx("option",{value:"outro",children:"Outro"}),e.jsx("option",{value:"prefiro_nao_dizer",children:"Prefiro n√£o dizer"})]})]})]})]})}),c===2&&e.jsx(K,{style:{backgroundColor:o.cardBackgroundColor,borderColor:o.cardBorderColor,borderRadius:o.cardBorderRadius,boxShadow:o.cardShadow},children:e.jsxs(Z,{className:"p-5 md:p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-1",style:{color:o.headingColor},children:"Endere√ßo de Entrega"}),e.jsx("p",{className:"text-sm opacity-75",children:"Informe onde deseja receber"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"zipCode",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"CEP *"}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{id:"zipCode",placeholder:"00000-000",value:i.zipCode,onChange:s=>{const m=Pe(s.target.value);$({...i,zipCode:m}),m.replace(/\D/g,"").length===8&&ro(m)},className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}}),F&&e.jsx(ce,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 animate-spin"})]})]}),e.jsxs("div",{className:"grid grid-cols-[1fr_120px] gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"street",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"Rua *"}),e.jsx(V,{id:"street",placeholder:"Nome da rua",value:i.street,onChange:s=>$({...i,street:s.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"number",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"N√∫mero *"}),e.jsx(V,{id:"number",placeholder:"123",value:i.number,onChange:s=>$({...i,number:s.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"complement",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"Complemento"}),e.jsx(V,{id:"complement",placeholder:"Apto 101",value:i.complement,onChange:s=>$({...i,complement:s.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"neighborhood",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"Bairro *"}),e.jsx(V,{id:"neighborhood",placeholder:"Nome do bairro",value:i.neighborhood,onChange:s=>$({...i,neighborhood:s.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]})]}),e.jsxs("div",{className:"grid grid-cols-[1fr_100px] gap-4",children:[e.jsxs("div",{children:[e.jsx(q,{htmlFor:"city",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"Cidade *"}),e.jsx(V,{id:"city",placeholder:"Cidade",value:i.city,onChange:s=>$({...i,city:s.target.value}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]}),e.jsxs("div",{children:[e.jsx(q,{htmlFor:"state",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"UF *"}),e.jsx(V,{id:"state",placeholder:"SP",maxLength:2,value:i.state,onChange:s=>$({...i,state:s.target.value.toUpperCase()}),className:"mt-1.5 text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,color:o.textColor}})]})]})]})]})}),c===3&&e.jsx(K,{style:{backgroundColor:o.cardBackgroundColor,borderColor:o.cardBorderColor,borderRadius:o.cardBorderRadius,boxShadow:o.cardShadow},children:e.jsxs(Z,{className:"p-5 md:p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold mb-1",style:{color:o.headingColor},children:"Forma de Pagamento"}),e.jsx("p",{className:"text-sm opacity-75",children:"Escolha como deseja pagar"})]}),e.jsx("div",{className:"grid gap-3",children:["PIX","CREDIT_CARD","BOLETO"].map(s=>{const m=ne(s);return e.jsxs("button",{type:"button",onClick:()=>ge(s),className:S("p-4 md:p-4 rounded-xl border-2 transition-all text-left flex items-center gap-3 md:gap-4 relative",y===s&&"shadow-lg"),style:{borderColor:y===s?o.primaryButtonBackgroundColor:o.inputBorderColor,backgroundColor:y===s?`${o.primaryButtonBackgroundColor}15`:o.inputBackgroundColor},children:[m&&e.jsx(no,{className:"absolute -top-2 -right-2 bg-green-500 hover:bg-green-600 text-white text-xs px-2 py-0.5",children:m.label}),s==="PIX"&&e.jsx(fe,{className:"h-7 w-7 md:h-6 md:w-6",style:{color:y===s?o.primaryButtonBackgroundColor:o.textColor}}),s==="CREDIT_CARD"&&e.jsx(le,{className:"h-7 w-7 md:h-6 md:w-6",style:{color:y===s?o.primaryButtonBackgroundColor:o.textColor}}),s==="BOLETO"&&e.jsx(Be,{className:"h-7 w-7 md:h-6 md:w-6",style:{color:y===s?o.primaryButtonBackgroundColor:o.textColor}}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-base md:text-base mb-0.5",style:{color:y===s?o.primaryButtonBackgroundColor:o.headingColor},children:[s==="PIX"&&"PIX",s==="CREDIT_CARD"&&"Cart√£o de Cr√©dito",s==="BOLETO"&&"Boleto Banc√°rio"]}),e.jsxs("div",{className:"text-xs md:text-sm opacity-75",children:[s==="PIX"&&(m?`Aprova√ß√£o instant√¢nea + ${m.label}`:"Aprova√ß√£o instant√¢nea"),s==="CREDIT_CARD"&&(m?`Parcele em at√© 12x + ${m.label}`:"Parcele em at√© 12x"),s==="BOLETO"&&(m?`Vencimento em 3 dias + ${m.label}`:"Vencimento em 3 dias")]})]}),y===s&&e.jsx(Ge,{className:"h-6 w-6 md:h-6 md:w-6",style:{color:o.stepCompletedColor}})]},s)})}),y==="CREDIT_CARD"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(ko,{onCardDataChange:je,theme:o,errors:ve}),d&&e.jsxs("div",{children:[e.jsx(q,{htmlFor:"installments",style:{color:o.labelColor,fontWeight:o.labelFontWeight},children:"N√∫mero de Parcelas"}),e.jsx("select",{id:"installments",value:me,onChange:s=>ye(Number(s.target.value)),className:"w-full mt-1.5 px-4 rounded-lg text-base",style:{backgroundColor:o.inputBackgroundColor,borderColor:o.inputBorderColor,height:48,borderRadius:o.inputBorderRadius,borderWidth:1,borderStyle:"solid",color:o.textColor},children:[1,2,3,4,5,6,7,8,9,10,11,12].map(s=>{const m=T/s;return e.jsxs("option",{value:s,children:[s,"x de R$ ",m.toFixed(2),s===1?" √† vista":""]},s)})})]})]}),y==="PIX"&&e.jsx("div",{children:re?e.jsx(Bo,{pixData:re,theme:o}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-blue-100 dark:bg-blue-900/20 mb-4",children:e.jsx(fe,{className:"h-8 w-8 text-blue-600 dark:text-blue-400 animate-pulse"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:o.headingColor},children:'Clique em "Finalizar Compra" para gerar o PIX'}),e.jsx("p",{className:"text-sm opacity-70",style:{color:o.textColor},children:"Voc√™ receber√° o QR Code para pagamento instant√¢neo"})]})}),y==="BOLETO"&&e.jsx("div",{children:te?e.jsx(Fo,{boletoData:te,theme:o}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-orange-100 dark:bg-orange-900/20 mb-4",children:e.jsx(Be,{className:"h-8 w-8 text-orange-600 dark:text-orange-400 animate-pulse"})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:o.headingColor},children:'Clique em "Finalizar Compra" para gerar o Boleto'}),e.jsx("p",{className:"text-sm opacity-70",style:{color:o.textColor},children:"Voc√™ poder√° baixar e imprimir o boleto banc√°rio"})]})})]})}),e.jsxs("div",{className:"flex items-center justify-between gap-3 pt-4",children:[c>1&&e.jsxs(ee,{variant:"outline",onClick:so,className:"flex items-center gap-2 px-6 md:px-8",style:{borderColor:o.inputBorderColor,color:o.textColor,height:52,borderWidth:2},children:[e.jsx(Xe,{className:"h-5 w-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Voltar"})]}),e.jsx("div",{className:S("flex-1",c===1&&"ml-auto"),children:c<lo?e.jsxs(ee,{onClick:to,className:"w-full flex items-center justify-center gap-2 font-semibold text-base shadow-lg",style:{backgroundColor:o.primaryButtonBackgroundColor,color:o.primaryButtonTextColor,height:52,borderRadius:o.primaryButtonBorderRadius},children:["Continuar",e.jsx(Ue,{className:"h-5 w-5"})]}):e.jsxs(e.Fragment,{children:[!re&&!te&&e.jsx(ee,{onClick:ao,disabled:R||n,className:"w-full font-bold text-base md:text-lg shadow-lg",style:{backgroundColor:o.checkoutButtonBackgroundColor,color:o.checkoutButtonTextColor,height:56,borderRadius:o.checkoutButtonBorderRadius},children:R?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"h-5 w-5 animate-spin mr-2"}),"Processando..."]}):n?e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"h-5 w-5 mr-2"}),"Checkout Desabilitado (Preview)"]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"h-5 w-5 mr-2"}),"Finalizar Compra - R$"," ",((De=d==null?void 0:d.total)==null?void 0:De.toFixed(2))||"0.00"]})}),(re||te)&&e.jsxs(ee,{onClick:()=>{ue(null),xe(null),u&&localStorage.removeItem(`checkout-${u}`),h({title:"Pronto para novo pagamento",description:"Clique em Finalizar Compra novamente"})},variant:"outline",className:"w-full gap-2 h-12 font-semibold",style:{borderColor:o.primaryButtonBackgroundColor,color:o.primaryButtonBackgroundColor},children:[e.jsx(We,{className:"h-5 w-5"}),"Gerar Novo Pagamento"]})]})})]})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsxs("div",{className:"sticky top-8 rounded-xl border p-6 space-y-5",style:{backgroundColor:o.cardBackgroundColor,borderColor:o.cardBorderColor,borderRadius:o.cardBorderRadius,boxShadow:o.cardShadow},children:[e.jsx("div",{children:e.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:o.headingColor},children:"Resumo do Pedido"})}),e.jsx("div",{className:"space-y-4",children:d.products.map((s,m)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"relative flex-shrink-0 rounded-lg overflow-hidden",style:{width:70,height:70,backgroundColor:o.inputBackgroundColor},children:[s.image?e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ie,{className:"h-8 w-8",style:{opacity:.3}})}),o.showCartIcon&&e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shadow-md",style:{backgroundColor:o.quantityCircleColor,color:o.quantityTextColor},children:s.quantity})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm mb-1",style:{color:o.headingColor},children:s.name}),s.sku&&e.jsxs("p",{className:"text-xs opacity-60",children:["SKU: ",s.sku]}),e.jsxs("p",{className:"text-xs opacity-75 mt-1",children:["Quantidade: ",s.quantity]})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsxs("p",{className:"font-bold",style:{color:o.headingColor},children:["R$ ",(s.price*s.quantity).toFixed(2)]}),s.quantity>1&&e.jsxs("p",{className:"text-xs opacity-60",children:["R$ ",s.price.toFixed(2)," un."]})]})]},m))}),e.jsx(oe,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["R$ ",d.subtotal.toFixed(2)]})]}),d.shipping>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Frete"}),e.jsxs("span",{className:"font-medium",children:["R$ ",d.shipping.toFixed(2)]})]}),d.tax>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Taxa"}),e.jsxs("span",{className:"font-medium",children:["R$ ",d.tax.toFixed(2)]})]}),d.discount&&d.discount>0&&e.jsxs("div",{className:"flex justify-between text-sm font-medium",style:{color:o.stepCompletedColor},children:[e.jsx("span",{children:"Desconto"}),e.jsxs("span",{children:["-R$ ",d.discount.toFixed(2)]})]}),j.hasDiscount&&e.jsxs("div",{className:"space-y-1 py-2 px-3 rounded-lg bg-green-50 dark:bg-green-900/10 border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex justify-between text-sm font-semibold",style:{color:o.stepCompletedColor},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(po,{className:"h-4 w-4"}),e.jsxs("span",{children:["Desconto ",Q()]})]}),e.jsxs("span",{children:["-R$ ",j.discountAmount.toFixed(2)]})]}),(Y==null?void 0:Y.description)&&e.jsx("p",{className:"text-xs opacity-75 pl-6",children:Y.description}),j.cappedAtMaximum&&e.jsx("p",{className:"text-xs opacity-75 pl-6 text-orange-600 dark:text-orange-400",children:"Desconto m√°ximo aplicado"})]}),e.jsx(oe,{}),e.jsxs("div",{className:"flex justify-between text-xl font-bold pt-2",children:[e.jsx("span",{style:{color:o.headingColor},children:"Total"}),e.jsxs("span",{style:{color:o.headingColor},children:["R$ ",T.toFixed(2)]})]})]}),o.showTrustBadges&&e.jsxs(e.Fragment,{children:[e.jsx(oe,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(be,{className:"h-5 w-5",style:{color:o.trustBadgeColor}}),e.jsx("span",{className:"opacity-75",children:"Compra 100% Segura"})]}),o.sslBadgeEnabled&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(se,{className:"h-5 w-5",style:{color:o.trustBadgeColor}}),e.jsx("span",{className:"opacity-75",children:"Certificado SSL"})]})]})]})]})})]}),e.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 p-4 border-t backdrop-blur-xl z-40 safe-area-bottom",style:{backgroundColor:`${o.cardBackgroundColor}F8`,borderColor:o.cardBorderColor,boxShadow:"0 -4px 16px rgba(0,0,0,0.08)"},children:e.jsxs(ee,{onClick:()=>A(!v),className:"w-full flex items-center justify-between shadow-lg font-semibold rounded-xl",style:{backgroundColor:o.primaryButtonBackgroundColor,color:o.primaryButtonTextColor,height:56},children:[e.jsxs("span",{className:"flex items-center gap-2.5",children:[e.jsx(ie,{className:"h-5 w-5"}),e.jsx("span",{className:"text-base",children:v?"Ocultar Resumo":"Ver Resumo"})]}),e.jsxs("span",{className:"font-bold text-lg",children:["R$ ",T.toFixed(2)]})]})}),v&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/60 z-50 backdrop-blur-sm animate-in fade-in duration-200",onClick:()=>A(!1),children:e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 rounded-t-3xl p-6 max-h-[85vh] overflow-y-auto animate-in slide-in-from-bottom duration-300",style:{backgroundColor:o.cardBackgroundColor,color:o.textColor,boxShadow:"0 -8px 32px rgba(0,0,0,0.12)"},onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-12 h-1.5 rounded-full opacity-30",style:{backgroundColor:o.textColor}})}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-2xl font-bold",style:{color:o.headingColor},children:"Resumo do Pedido"}),e.jsx("button",{onClick:()=>A(!1),className:"p-2 rounded-full hover:bg-gray-100/10 transition-colors active:scale-95",children:e.jsx(Ve,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"space-y-4 mb-6",children:d.products.map((s,m)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"relative flex-shrink-0 rounded-lg overflow-hidden",style:{width:70,height:70,backgroundColor:o.inputBackgroundColor},children:[s.image?e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(ie,{className:"h-8 w-8 opacity-30"})}),e.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",style:{backgroundColor:o.quantityCircleColor,color:o.quantityTextColor},children:s.quantity})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm mb-1",children:s.name}),e.jsxs("p",{className:"text-xs opacity-75",children:["Qtd: ",s.quantity]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-bold",children:["R$ ",(s.price*s.quantity).toFixed(2)]})})]},m))}),e.jsx(oe,{className:"mb-4"}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["R$ ",d.subtotal.toFixed(2)]})]}),d.shipping>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Frete"}),e.jsxs("span",{className:"font-medium",children:["R$ ",d.shipping.toFixed(2)]})]}),d.tax>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Taxa"}),e.jsxs("span",{className:"font-medium",children:["R$ ",d.tax.toFixed(2)]})]}),d.discount&&d.discount>0&&e.jsxs("div",{className:"flex justify-between text-sm font-medium",style:{color:o.stepCompletedColor},children:[e.jsx("span",{children:"Desconto"}),e.jsxs("span",{children:["-R$ ",d.discount.toFixed(2)]})]}),e.jsx(oe,{}),e.jsxs("div",{className:"flex justify-between text-xl font-bold pt-2",children:[e.jsx("span",{style:{color:o.headingColor},children:"Total"}),e.jsxs("span",{style:{color:o.headingColor},children:["R$ ",T.toFixed(2)]})]})]}),e.jsx(ee,{onClick:()=>A(!1),className:"w-full font-semibold text-base shadow-lg rounded-xl",style:{backgroundColor:o.primaryButtonBackgroundColor,color:o.primaryButtonTextColor,height:52},children:"Fechar"})]})})]}),e.jsx("footer",{className:"border-t py-8 md:py-10 mt-12 md:mt-16",style:{backgroundColor:o.footerBackgroundColor,borderColor:o.cardBorderColor,color:o.footerTextColor},children:e.jsx("div",{className:"container mx-auto px-4 max-w-6xl",children:e.jsxs("div",{className:"text-center space-y-5 md:space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2.5 md:gap-3",children:[e.jsx(se,{className:"h-5 w-5 md:h-6 md:w-6 text-green-600"}),e.jsx("span",{className:"font-bold text-lg md:text-xl",children:"Checkout Seguro"})]}),o.showTrustBadges&&e.jsxs("div",{className:"flex items-center justify-center gap-4 md:gap-8 flex-wrap text-xs md:text-sm",children:[o.sslBadgeEnabled&&e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsx(be,{className:"h-4 w-4 md:h-5 md:w-5 text-green-600"}),e.jsx("span",{className:"whitespace-nowrap",children:"Certificado SSL"})]}),o.showPaymentMethods&&e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsx(le,{className:"h-4 w-4 md:h-5 md:w-5"}),e.jsx("span",{className:"whitespace-nowrap",children:"Pagamento Seguro"})]}),o.securityIconsEnabled&&e.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[e.jsx(be,{className:"h-4 w-4 md:h-5 md:w-5"}),e.jsx("span",{className:"whitespace-nowrap",children:"Dados Protegidos"})]})]}),(o.showCnpjCpf||o.showContactEmail||o.showPhone||o.showAddress)&&e.jsxs("div",{className:"text-xs md:text-sm space-y-1 opacity-80 max-w-md mx-auto",children:[o.showStoreName&&e.jsx("p",{className:"font-semibold text-sm md:text-base",children:"Minha Loja"}),o.showCnpjCpf&&e.jsx("p",{children:"CNPJ: 00.000.000/0001-00"}),o.showAddress&&e.jsx("p",{className:"text-balance",children:"Endere√ßo: Rua Exemplo, 123 - S√£o Paulo/SP"}),o.showContactEmail&&e.jsx("p",{children:"E-mail: contato@loja.com.br"}),o.showPhone&&e.jsx("p",{children:"Telefone: (11) 99999-9999"})]}),(o.showPrivacyPolicy||o.showTermsConditions||o.showReturns)&&e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"my-3 md:my-4"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 md:gap-6 text-xs md:text-sm flex-wrap px-4",children:[o.showPrivacyPolicy&&e.jsx("a",{href:"#",style:{color:o.footerLinkColor},className:"hover:underline transition-all whitespace-nowrap",children:"Pol√≠tica de Privacidade"}),o.showTermsConditions&&e.jsx("a",{href:"#",style:{color:o.footerLinkColor},className:"hover:underline transition-all whitespace-nowrap",children:"Termos e Condi√ß√µes"}),o.showReturns&&e.jsx("a",{href:"#",style:{color:o.footerLinkColor},className:"hover:underline transition-all whitespace-nowrap",children:"Trocas e Devolu√ß√µes"})]})]}),e.jsx(oe,{className:"my-3 md:my-4"}),e.jsxs("p",{className:"text-xs md:text-xs opacity-60 pb-2",children:["¬© ",new Date().getFullYear()," - Todos os direitos reservados"]})]})})})]})},_o=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"}));export{Ie as D,wo as M,Po as P,_o as a,He as c};

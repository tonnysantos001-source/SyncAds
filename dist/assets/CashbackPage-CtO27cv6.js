import{c as ce,s as v,r as k,f as ne,u as oe,j as e,B as I,g as D,h as S,i as P,l as V,U as ie,k as M,aa as le,o as H,N as z,I as q}from"./index-CQReMJg2.js";import{L as T}from"./label--QE-Krp5.js";import{T as X,a as $,b as U,c as y,d as W,e as N}from"./table-BwtdwbLH.js";import{D as de,b as ue,c as he,d as me,e as xe,f as ge}from"./dialog-DEh8RoSm.js";import{S as K,a as _,b as J,c as Q,d as O}from"./select-BeofSArF.js";import{S as Y}from"./switch-BRzwQNuD.js";import{T as pe,a as je,b as Z,c as ee}from"./tabs-si40gOhv.js";import{A as fe,a as ve}from"./alert-BsdCDpoy.js";import{S as F}from"./skeleton-DiypLdjw.js";import{P as ae}from"./plus-Dd-Mm_Zm.js";import{T as Ce}from"./trending-up-BVamQ0DJ.js";import{D as be}from"./dollar-sign-CQlnv8ij.js";import{S as Ee}from"./square-pen-CwBvTD1-.js";import{T as we}from"./trash-2-CqfB0G-8.js";import{C as B}from"./circle-alert-DydyH-Bo.js";import{f as ye,p as Ne}from"./pt-BR-BQ5kKd2v.js";import"./index-CTcTxgHL.js";import"./index-CnPV0EMo.js";import"./constructFrom-rJN6zrQ_.js";/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=ce("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),h={async createRule(r){try{const{data:a,error:s}=await v.from("Cashback").insert(r).select().single();if(s)throw s;return a}catch(a){throw console.error("Error creating cashback rule:",a),a}},async updateRule(r,a){try{const{data:s,error:c}=await v.from("Cashback").update({...a,updatedAt:new Date().toISOString()}).eq("id",r).select().single();if(c)throw c;return s}catch(s){throw console.error("Error updating cashback rule:",s),s}},async deleteRule(r){try{const{error:a}=await v.from("Cashback").delete().eq("id",r);if(a)throw a}catch(a){throw console.error("Error deleting cashback rule:",a),a}},async listRules(r,a){try{let s=v.from("Cashback").select("*").eq("userId",r).order("createdAt",{ascending:!1});a!=null&&a.status&&(s=s.eq("status",a.status)),(a==null?void 0:a.active)!==void 0&&(a.active?s=s.eq("status","ACTIVE"):s=s.neq("status","ACTIVE"));const{data:c,error:l}=await s;if(l)throw l;return c}catch(s){throw console.error("Error listing cashback rules:",s),s}},async getRuleById(r){try{const{data:a,error:s}=await v.from("Cashback").select("*").eq("id",r).single();if(s)throw s;return a}catch(a){throw console.error("Error getting cashback rule:",a),a}},async toggleRule(r,a){try{const s=a?"ACTIVE":"INACTIVE";return await h.updateRule(r,{status:s})}catch(s){throw console.error("Error toggling cashback rule:",s),s}},async createTransaction(r){try{const{data:a,error:s}=await v.from("CashbackTransaction").insert(r).select().single();if(s)throw s;return a}catch(a){throw console.error("Error creating cashback transaction:",a),a}},async updateTransaction(r,a){try{const{data:s,error:c}=await v.from("CashbackTransaction").update({...a,updatedAt:new Date().toISOString()}).eq("id",r).select().single();if(c)throw c;return s}catch(s){throw console.error("Error updating cashback transaction:",s),s}},async getTransactions(r,a){try{let s=v.from("CashbackTransaction").select("*").eq("userId",r).order("createdAt",{ascending:!1});a!=null&&a.customerId&&(s=s.eq("customerId",a.customerId)),a!=null&&a.status&&(s=s.eq("status",a.status)),a!=null&&a.orderId&&(s=s.eq("orderId",a.orderId)),a!=null&&a.dateFrom&&(s=s.gte("createdAt",a.dateFrom)),a!=null&&a.dateTo&&(s=s.lte("createdAt",a.dateTo)),a!=null&&a.limit&&(s=s.limit(a.limit));const{data:c,error:l}=await s;if(l)throw l;return c}catch(s){throw console.error("Error getting cashback transactions:",s),s}},async getTransactionById(r){try{const{data:a,error:s}=await v.from("CashbackTransaction").select("*").eq("id",r).single();if(s)throw s;return a}catch(a){throw console.error("Error getting cashback transaction:",a),a}},async getAvailableCashback(r){try{const{data:a,error:s}=await v.from("CashbackTransaction").select("amount").eq("customerId",r).eq("status","AVAILABLE");if(s)throw s;return a.reduce((l,m)=>l+m.amount,0)}catch(a){throw console.error("Error getting available cashback:",a),a}},async getCustomerCashback(r){try{const{data:a,error:s}=await v.from("CashbackTransaction").select("*").eq("customerId",r).order("createdAt",{ascending:!1});if(s)throw s;const c=a,l=c.filter(i=>i.status!=="CANCELLED").reduce((i,o)=>i+o.amount,0),m=c.filter(i=>i.status==="USED").reduce((i,o)=>i+o.amount,0),n=c.filter(i=>i.status==="AVAILABLE").reduce((i,o)=>i+o.amount,0),x=c.filter(i=>i.status==="EXPIRED").reduce((i,o)=>i+o.amount,0);return{customerId:r,totalEarned:l,totalUsed:m,available:n,expired:x,transactions:c}}catch(a){throw console.error("Error getting customer cashback:",a),a}},async useCashback(r,a,s){try{const c=await h.getTransactionById(r);if(c.status!=="AVAILABLE")throw new Error("Cashback não está disponível para uso");const l=s||c.amount;if(l>c.amount)throw new Error("Valor a usar maior que o disponível");if(l===c.amount)return await h.updateTransaction(r,{status:"USED",usedAt:new Date().toISOString(),usedInOrderId:a});const m=c.amount-l;return await h.updateTransaction(r,{amount:m}),await h.createTransaction({userId:c.userId,customerId:c.customerId,cashbackId:c.cashbackId,orderId:c.orderId,amount:l,status:"USED",earnedAt:c.earnedAt,usedAt:new Date().toISOString(),usedInOrderId:a})}catch(c){throw console.error("Error using cashback:",c),c}},async expireCashback(r){try{return await h.updateTransaction(r,{status:"EXPIRED"})}catch(a){throw console.error("Error expiring cashback:",a),a}},async cancelCashback(r,a){try{return await h.updateTransaction(r,{status:"CANCELLED",cancelledAt:new Date().toISOString(),cancellationReason:a})}catch(s){throw console.error("Error cancelling cashback:",s),s}},async processExpiredCashbacks(r){try{const a=new Date().toISOString(),{data:s,error:c}=await v.from("CashbackTransaction").select("id").eq("userId",r).eq("status","AVAILABLE").lt("expiresAt",a);if(c)throw c;const l=s,m=l.map(n=>h.expireCashback(n.id));return await Promise.all(m),l.length}catch(a){throw console.error("Error processing expired cashbacks:",a),a}},async getStats(r,a){try{const s=await h.listRules(r),c=s.length,l=s.filter(u=>u.status==="ACTIVE").length;let m=v.from("CashbackTransaction").select("*").eq("userId",r);a&&(m=m.gte("createdAt",a.from).lte("createdAt",a.to));const{data:n,error:x}=await m;if(x)throw x;const i=n,o=i.filter(u=>u.status!=="CANCELLED").reduce((u,b)=>u+b.amount,0),p=i.filter(u=>u.status==="USED").reduce((u,b)=>u+b.amount,0),L=i.filter(u=>u.status==="AVAILABLE").reduce((u,b)=>u+b.amount,0),d=i.filter(u=>u.status==="EXPIRED").reduce((u,b)=>u+b.amount,0),C=[...new Set(i.map(u=>u.customerId))].length,g=C>0?o/C:0,A={};for(const u of s){const b=i.filter(E=>E.cashbackId===u.id),G=[...new Set(b.map(E=>E.customerId))];A[u.id]={ruleId:u.id,ruleName:u.name,totalEarned:b.filter(E=>E.status!=="CANCELLED").reduce((E,j)=>E+j.amount,0),totalUsed:b.filter(E=>E.status==="USED").reduce((E,j)=>E+j.amount,0),totalCustomers:G.length}}return{totalRules:c,activeRules:l,totalEarned:o,totalUsed:p,totalAvailable:L,totalExpired:d,customersWithCashback:C,averageCashbackPerCustomer:g,byRule:A}}catch(s){throw console.error("Error getting cashback stats:",s),s}},async getTopCustomers(r,a=10,s="available"){try{const{data:c,error:l}=await v.from("CashbackTransaction").select("customerId, amount, status").eq("userId",r);if(l)throw l;const m=c,n=new Map;m.forEach(o=>{n.has(o.customerId)||n.set(o.customerId,{customerId:o.customerId,totalEarned:0,available:0,used:0});const p=n.get(o.customerId);o.status!=="CANCELLED"&&(p.totalEarned+=o.amount),o.status==="AVAILABLE"&&(p.available+=o.amount),o.status==="USED"&&(p.used+=o.amount)});const x=Array.from(n.values()),i=s==="earned"?"totalEarned":"available";return x.sort((o,p)=>p[i]-o[i]).slice(0,a)}catch(c){throw console.error("Error getting top customers:",c),c}},async calculateCashback(r,a,s,c){try{const m=(await h.listRules(r,{active:!0})).sort((n,x)=>{const i=n.type==="PERCENTAGE"?a*n.value/100:n.value;return(x.type==="PERCENTAGE"?a*x.value/100:x.value)-i});for(const n of m){if(n.minOrderValue&&a<n.minOrderValue||n.validFrom&&new Date(n.validFrom)>new Date||n.validUntil&&new Date(n.validUntil)<new Date||n.applicableToProducts&&n.applicableToProducts.length>0&&c&&!c.some(o=>n.applicableToProducts.includes(o))||n.excludedProducts&&n.excludedProducts.length>0&&c&&c.some(o=>n.excludedProducts.includes(o))||n.maxUsesPerCustomer&&(await h.getTransactions(r,{customerId:s})).filter(p=>p.cashbackId===n.id&&p.status!=="CANCELLED").length>=n.maxUsesPerCustomer||n.firstPurchaseOnly&&(await h.getTransactions(r,{customerId:s})).length>0)continue;let x=n.type==="PERCENTAGE"?a*n.value/100:n.value;return n.maxCashbackAmount&&x>n.maxCashbackAmount&&(x=n.maxCashbackAmount),{applicable:!0,amount:x,rule:n}}return{applicable:!1,amount:0,reason:"Nenhuma regra de cashback aplicável"}}catch(l){throw console.error("Error calculating cashback:",l),l}}},Xe=()=>{const[r,a]=k.useState([]),[s,c]=k.useState(null),[l,m]=k.useState([]),[n,x]=k.useState(!0),[i,o]=k.useState(!1),[p,L]=k.useState(null),[d,w]=k.useState({name:"",description:"",type:"PERCENTAGE",value:0,status:"ACTIVE",firstPurchaseOnly:!1}),{toast:C}=ne(),g=oe(t=>t.user);k.useEffect(()=>{g!=null&&g.id&&A()},[g==null?void 0:g.id]);const A=async()=>{try{x(!0);const[t,f,R]=await Promise.all([h.listRules(g.id),h.getStats(g.id),h.getTopCustomers(g.id,10,"available")]);a(t),c(f),m(R)}catch(t){console.error("Erro ao carregar dados:",t),C({title:"Erro ao carregar dados",description:t.message,variant:"destructive"})}finally{x(!1)}},u=async()=>{try{if(!(g!=null&&g.id))return;if(!d.name||!d.value){C({title:"Campos obrigatórios",description:"Preencha nome e valor do cashback",variant:"destructive"});return}const t={...d,userId:g.id};p?(await h.updateRule(p.id,d),C({title:"Regra atualizada com sucesso!"})):(await h.createRule(t),C({title:"Regra criada com sucesso!"})),o(!1),L(null),w({name:"",description:"",type:"PERCENTAGE",value:0,status:"ACTIVE",firstPurchaseOnly:!1}),A()}catch(t){console.error("Erro ao salvar:",t),C({title:"Erro ao salvar",description:t.message,variant:"destructive"})}},b=t=>{L(t),w(t),o(!0)},G=async t=>{if(confirm("Deseja realmente excluir esta regra?"))try{await h.deleteRule(t),C({title:"Regra excluída com sucesso!"}),A()}catch(f){console.error("Erro ao excluir:",f),C({title:"Erro ao excluir",description:f.message,variant:"destructive"})}},E=async(t,f)=>{try{await h.toggleRule(t,f),C({title:f?"Regra ativada!":"Regra desativada!"}),A()}catch(R){console.error("Erro ao alternar status:",R),C({title:"Erro ao alternar status",description:R.message,variant:"destructive"})}},j=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t),te=t=>{const f={ACTIVE:{label:"Ativo",variant:"default",icon:z},INACTIVE:{label:"Inativo",variant:"secondary",icon:B},EXPIRED:{label:"Expirado",variant:"destructive",icon:B},SCHEDULED:{label:"Agendado",variant:"secondary",icon:B}};return f[t]||f.INACTIVE};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Cashback"}),e.jsx("p",{className:"text-muted-foreground",children:"Crie regras de cashback e fidelize seus clientes"})]}),e.jsxs(I,{onClick:()=>o(!0),children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Nova Regra"]})]}),s&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(D,{children:[e.jsxs(S,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(P,{className:"text-sm font-medium",children:"Regras Ativas"}),e.jsx(se,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.activeRules}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["de ",s.totalRules," regras"]})]})]}),e.jsxs(D,{children:[e.jsxs(S,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(P,{className:"text-sm font-medium",children:"Total Distribuído"}),e.jsx(Ce,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:j(s.totalEarned)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cashback total gerado"})]})]}),e.jsxs(D,{children:[e.jsxs(S,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(P,{className:"text-sm font-medium",children:"Disponível"}),e.jsx(be,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold",children:j(s.totalAvailable)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Aguardando uso"})]})]}),e.jsxs(D,{children:[e.jsxs(S,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(P,{className:"text-sm font-medium",children:"Clientes Ativos"}),e.jsx(ie,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(V,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.customersWithCashback}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Média: ",j(s.averageCashbackPerCustomer)]})]})]})]}),e.jsxs(pe,{defaultValue:"rules",className:"space-y-4",children:[e.jsxs(je,{children:[e.jsx(Z,{value:"rules",children:"Regras"}),e.jsx(Z,{value:"customers",children:"Top Clientes"})]}),e.jsx(ee,{value:"rules",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs(S,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(P,{children:"Regras de Cashback"}),e.jsxs(M,{children:[r.length," regra(s) cadastrada(s)"]})]}),e.jsxs(I,{variant:"outline",size:"sm",onClick:A,children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Atualizar"]})]}),e.jsx(V,{children:n?e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{className:"h-12 w-full"}),e.jsx(F,{className:"h-12 w-full"}),e.jsx(F,{className:"h-12 w-full"})]}):r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(se,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Nenhuma regra cadastrada"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Crie sua primeira regra de cashback"}),e.jsxs(I,{onClick:()=>o(!0),children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Criar Regra"]})]}):e.jsxs(X,{children:[e.jsx($,{children:e.jsxs(U,{children:[e.jsx(y,{children:"Nome"}),e.jsx(y,{children:"Tipo"}),e.jsx(y,{children:"Valor"}),e.jsx(y,{children:"Status"}),e.jsx(y,{children:"Primeira Compra"}),e.jsx(y,{children:"Criado em"}),e.jsx(y,{className:"text-right",children:"Ações"})]})}),e.jsx(W,{children:r.map(t=>{const f=te(t.status),R=f.icon;return e.jsxs(U,{children:[e.jsx(N,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.name}),t.description&&e.jsx("div",{className:"text-sm text-muted-foreground",children:t.description})]})}),e.jsx(N,{children:e.jsx(H,{variant:"outline",children:t.type==="PERCENTAGE"?"Percentual":"Valor Fixo"})}),e.jsxs(N,{children:[e.jsx("div",{className:"font-medium",children:t.type==="PERCENTAGE"?`${t.value}%`:j(t.value)}),t.minOrderValue&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Min: ",j(t.minOrderValue)]})]}),e.jsx(N,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(H,{variant:f.variant,className:"gap-1",children:[e.jsx(R,{className:"h-3 w-3"}),f.label]}),e.jsx(Y,{checked:t.status==="ACTIVE",onCheckedChange:re=>E(t.id,re)})]})}),e.jsx(N,{children:t.firstPurchaseOnly?e.jsx(z,{className:"h-4 w-4 text-green-600"}):e.jsx("span",{className:"text-muted-foreground",children:"-"})}),e.jsx(N,{children:ye(new Date(t.createdAt),"dd/MM/yyyy",{locale:Ne})}),e.jsx(N,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(I,{variant:"ghost",size:"sm",onClick:()=>b(t),children:e.jsx(Ee,{className:"h-4 w-4"})}),e.jsx(I,{variant:"ghost",size:"sm",onClick:()=>G(t.id),children:e.jsx(we,{className:"h-4 w-4 text-red-600"})})]})})]},t.id)})})]})})]})}),e.jsx(ee,{value:"customers",className:"space-y-4",children:e.jsxs(D,{children:[e.jsxs(S,{children:[e.jsx(P,{children:"Clientes com Mais Cashback"}),e.jsx(M,{children:"Top 10 clientes com cashback disponível"})]}),e.jsx(V,{children:n?e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{className:"h-12 w-full"}),e.jsx(F,{className:"h-12 w-full"})]}):l.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhum cliente com cashback ainda"}):e.jsxs(X,{children:[e.jsx($,{children:e.jsxs(U,{children:[e.jsx(y,{children:"Cliente"}),e.jsx(y,{children:"Total Ganho"}),e.jsx(y,{children:"Disponível"}),e.jsx(y,{children:"Usado"})]})}),e.jsx(W,{children:l.map(t=>e.jsxs(U,{children:[e.jsx(N,{children:e.jsxs("div",{className:"font-mono text-sm",children:[t.customerId.substring(0,8),"..."]})}),e.jsx(N,{children:e.jsx("div",{className:"font-medium",children:j(t.totalEarned)})}),e.jsx(N,{children:e.jsx("div",{className:"font-medium text-green-600",children:j(t.available)})}),e.jsx(N,{children:e.jsx("div",{className:"text-muted-foreground",children:j(t.used)})})]},t.customerId))})]})})]})})]}),e.jsx(de,{open:i,onOpenChange:o,children:e.jsxs(ue,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(he,{children:[e.jsx(me,{children:p?"Editar Regra":"Nova Regra de Cashback"}),e.jsx(xe,{children:"Configure os parâmetros da regra de cashback"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(T,{htmlFor:"name",children:"Nome da Regra *"}),e.jsx(q,{id:"name",value:d.name,onChange:t=>w({...d,name:t.target.value}),placeholder:"Ex: Cashback 5% em todas as compras"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(T,{htmlFor:"description",children:"Descrição"}),e.jsx(q,{id:"description",value:d.description||"",onChange:t=>w({...d,description:t.target.value}),placeholder:"Descrição opcional"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(T,{htmlFor:"type",children:"Tipo *"}),e.jsxs(K,{value:d.type,onValueChange:t=>w({...d,type:t}),children:[e.jsx(_,{children:e.jsx(J,{})}),e.jsxs(Q,{children:[e.jsx(O,{value:"PERCENTAGE",children:"Percentual"}),e.jsx(O,{value:"FIXED_AMOUNT",children:"Valor Fixo"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs(T,{htmlFor:"value",children:["Valor * ",d.type==="PERCENTAGE"&&"(%)"]}),e.jsx(q,{id:"value",type:"number",step:"0.01",value:d.value,onChange:t=>w({...d,value:parseFloat(t.target.value)}),placeholder:d.type==="PERCENTAGE"?"5":"10.00"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(T,{htmlFor:"minOrderValue",children:"Valor Mínimo do Pedido"}),e.jsx(q,{id:"minOrderValue",type:"number",step:"0.01",value:d.minOrderValue||"",onChange:t=>w({...d,minOrderValue:parseFloat(t.target.value)}),placeholder:"0.00"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(T,{htmlFor:"maxCashbackAmount",children:"Cashback Máximo"}),e.jsx(q,{id:"maxCashbackAmount",type:"number",step:"0.01",value:d.maxCashbackAmount||"",onChange:t=>w({...d,maxCashbackAmount:parseFloat(t.target.value)}),placeholder:"0.00"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(T,{htmlFor:"status",children:"Status"}),e.jsxs(K,{value:d.status,onValueChange:t=>w({...d,status:t}),children:[e.jsx(_,{children:e.jsx(J,{})}),e.jsxs(Q,{children:[e.jsx(O,{value:"ACTIVE",children:"Ativo"}),e.jsx(O,{value:"INACTIVE",children:"Inativo"}),e.jsx(O,{value:"SCHEDULED",children:"Agendado"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{id:"firstPurchaseOnly",checked:d.firstPurchaseOnly,onCheckedChange:t=>w({...d,firstPurchaseOnly:t})}),e.jsx(T,{htmlFor:"firstPurchaseOnly",className:"cursor-pointer",children:"Apenas primeira compra do cliente"})]}),d.type==="PERCENTAGE"&&d.value>0&&e.jsxs(fe,{children:[e.jsx(B,{className:"h-4 w-4"}),e.jsxs(ve,{children:["Exemplo: Em uma compra de R$ 100,00, o cliente receberá"," ",j(100*(d.value/100))," de cashback",d.maxCashbackAmount&&` (limitado a ${j(d.maxCashbackAmount)})`]})]})]}),e.jsxs(ge,{children:[e.jsx(I,{variant:"outline",onClick:()=>{o(!1),L(null),w({name:"",description:"",type:"PERCENTAGE",value:0,status:"ACTIVE",firstPurchaseOnly:!1})},children:"Cancelar"}),e.jsx(I,{onClick:u,children:"Salvar"})]})]})})]})};export{Xe as default};

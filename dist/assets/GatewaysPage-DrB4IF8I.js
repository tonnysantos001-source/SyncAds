import{f as T,r as n,j as e,B as i,I as j,g as o,h as x,i as u,C as v,l as d,d as f,a5 as y,k as E,n as I,X as _}from"./index-CprDA-zF.js";import{L as h}from"./label-BifQXDSz.js";import{D as F,f as O,a as z,b as R,c as B,d as L,e as V}from"./dialog-DjdiRIoT.js";import{S as H,a as M,b as $,c as W,d as X}from"./select-CZKJVpcC.js";import{S as b}from"./SuperAdminLayout-Cyqe5MyZ.js";import{P as N}from"./plus-Fu6IZR8L.js";import"./index-BOGP9AWE.js";import"./Logo-CFGPlz53.js";import"./message-square-Dm9HUJif.js";import"./dollar-sign-C4skc1wo.js";const w=[{value:"stripe",label:"Stripe",icon:"💳"},{value:"mercadopago",label:"Mercado Pago",icon:"🇧🇷"},{value:"pagseguro",label:"PagSeguro",icon:"🔒"},{value:"paypal",label:"PayPal",icon:"🅿️"},{value:"asaas",label:"Asaas",icon:"💰"}];function ie(){const{toast:r}=T(),[l,C]=n.useState([]),[S,m]=n.useState(!1),[A,K]=n.useState(!0),[a,c]=n.useState({name:"",provider:"",publicKey:"",secretKey:""});n.useEffect(()=>{p()},[]);const p=async()=>{try{const s=[{id:"1",name:"Stripe Principal",provider:"stripe",publicKey:"pk_test_***************",isActive:!0,createdAt:new Date().toISOString(),transactionsCount:45},{id:"2",name:"Mercado Pago BR",provider:"mercadopago",publicKey:"TEST-***************",isActive:!0,createdAt:new Date().toISOString(),transactionsCount:23}];C(s)}catch(s){r({title:"Erro ao carregar gateways",description:s.message,variant:"destructive"})}finally{K(!1)}},G=async()=>{try{if(!a.name||!a.provider||!a.publicKey||!a.secretKey){r({title:"Campos obrigatórios",description:"Preencha todos os campos",variant:"destructive"});return}r({title:"✅ Gateway adicionado!",description:`${a.name} foi configurado com sucesso.`}),m(!1),c({name:"",provider:"",publicKey:"",secretKey:""}),p()}catch(s){r({title:"Erro ao adicionar gateway",description:s.message,variant:"destructive"})}},P=async(s,t)=>{try{r({title:t?"Gateway ativado":"Gateway desativado",description:"Status atualizado com sucesso"}),p()}catch(D){r({title:"Erro ao atualizar status",description:D.message,variant:"destructive"})}},k=s=>w.find(t=>t.value===s)||{label:s,icon:"💳"},g={total:l.length,active:l.filter(s=>s.isActive).length,totalTransactions:l.reduce((s,t)=>s+(t.transactionsCount||0),0)};return A?e.jsx(b,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):e.jsx(b,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Gateways de Pagamento"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Gerencie os meios de recebimento dos clientes"})]}),e.jsxs(F,{open:S,onOpenChange:m,children:[e.jsx(O,{asChild:!0,children:e.jsxs(i,{className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Adicionar Gateway"]})}),e.jsxs(z,{className:"sm:max-w-[500px]",children:[e.jsxs(R,{children:[e.jsx(B,{children:"Adicionar Gateway de Pagamento"}),e.jsx(L,{children:"Configure um novo meio de recebimento"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"name",children:"Nome do Gateway"}),e.jsx(j,{id:"name",placeholder:"Ex: Stripe Principal",value:a.name,onChange:s=>c({...a,name:s.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"provider",children:"Provider"}),e.jsxs(H,{value:a.provider,onValueChange:s=>c({...a,provider:s}),children:[e.jsx(M,{children:e.jsx($,{placeholder:"Selecione um provider"})}),e.jsx(W,{children:w.map(s=>e.jsx(X,{value:s.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.icon}),e.jsx("span",{children:s.label})]})},s.value))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"publicKey",children:"Public Key"}),e.jsx(j,{id:"publicKey",placeholder:"pk_test_...",value:a.publicKey,onChange:s=>c({...a,publicKey:s.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"secretKey",children:"Secret Key"}),e.jsx(j,{id:"secretKey",type:"password",placeholder:"sk_test_...",value:a.secretKey,onChange:s=>c({...a,secretKey:s.target.value})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Esta chave será armazenada de forma segura e criptografada"})]})]}),e.jsxs(V,{children:[e.jsx(i,{variant:"outline",onClick:()=>m(!1),children:"Cancelar"}),e.jsx(i,{className:"bg-gradient-to-r from-blue-500 to-purple-500",onClick:G,children:"Adicionar Gateway"})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(o,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"Gateways Configurados"}),e.jsx(v,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold",children:g.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total de meios de pagamento"})]})]}),e.jsxs(o,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"Gateways Ativos"}),e.jsx(f,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold",children:g.active}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Recebendo pagamentos"})]})]}),e.jsxs(o,{children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(u,{className:"text-sm font-medium",children:"Transações"}),e.jsx(y,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold",children:g.totalTransactions}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total processadas"})]})]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:l.length===0?e.jsx(o,{className:"col-span-full",children:e.jsxs(d,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(v,{className:"h-12 w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Nenhum gateway configurado"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Adicione seu primeiro gateway de pagamento"}),e.jsxs(i,{className:"bg-gradient-to-r from-blue-500 to-purple-500",onClick:()=>m(!0),children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Adicionar Gateway"]})]})}):l.map(s=>{const t=k(s.provider);return e.jsxs(o,{className:"relative overflow-hidden",children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 transform translate-x-16 -translate-y-16 rounded-full ${s.isActive?"bg-green-500/10":"bg-gray-500/10"}`}),e.jsx(x,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:t.icon}),e.jsxs("div",{children:[e.jsx(u,{className:"text-lg",children:s.name}),e.jsx(E,{children:t.label})]})]}),e.jsx(I,{variant:s.isActive?"default":"outline",children:s.isActive?"Ativo":"Inativo"})]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Public Key"}),e.jsx("code",{className:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded block overflow-hidden text-ellipsis",children:s.publicKey})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Transações"}),e.jsx("span",{className:"font-medium",children:s.transactionsCount||0})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{variant:"outline",className:"flex-1",size:"sm",onClick:()=>{},children:[e.jsx(y,{className:"h-4 w-4 mr-1"}),"Configurar"]}),e.jsx(i,{variant:s.isActive?"destructive":"default",size:"sm",onClick:()=>P(s.id,!s.isActive),children:s.isActive?e.jsx(_,{className:"h-4 w-4"}):e.jsx(f,{className:"h-4 w-4"})})]})]})]},s.id)})})]})})}export{ie as default};

import{J as n,D as ye,F as be,g as h,j as e,H as O,k as R,C as j,l as Z,o as W,t as K,q as N,B as p,x as Q,I as E}from"./index-DzM7EAHs.js";import{L as I}from"./label-CWlwf_hj.js";import{D as X,b as ee,c as ae,d as re,e as se,f as te}from"./dialog-DWpI86GA.js";import{T as Ne,a as we,b as ie,c as D,d as Ce,e as M}from"./table-fwopZ18_.js";import{T as Pe,a as Ae,b as B,c as L}from"./tabs-Bfjqu9RX.js";import{S as z}from"./sparkles-LKXg6GWQ.js";import{Z as Se}from"./zap-Bxj4AUty.js";import{C as Ee}from"./crown-BkeRZodp.js";import{B as Ie}from"./building-2-C_2EtJX-.js";import{C as ne}from"./check--0SjoGnM.js";import{A as oe}from"./arrow-right-BHBsmvxc.js";import{P as ce}from"./plus-CsvyqSPI.js";import{C as $}from"./credit-card-BngQH7Gm.js";import{S as De}from"./shield-BSqmlVjl.js";import{T as Me}from"./trash-2-CEU-q8cY.js";import{C as ke}from"./calendar-DVUAq7vH.js";import{D as Te}from"./download-DJ5ZTCva.js";import{L as Ue}from"./lock-BElgMpkz.js";import{C as Fe}from"./circle-alert-DCmyIeIj.js";const q=1,Ve=7,k={free:0,starter:49.9,pro:149.9,enterprise:499.9};async function Oe(){const{data:s,error:r}=await n.from("GatewayConfig").select("*").is("userId",null).eq("isDefault",!0).eq("isActive",!0).single();if(r||!s)throw new Error("Gateway administrativo não configurado");return s}async function Re(s){var r;try{const{data:{user:t}}=await n.auth.getUser();if(!t)return{success:!1,error:"Usuário não autenticado"};const c=await Oe(),l=await(await fetch(`${n.supabaseUrl}/functions/v1/process-payment`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(r=(await n.auth.getSession()).data.session)==null?void 0:r.access_token}`},body:JSON.stringify({orderId:`verification-${Date.now()}`,userId:t.id,amount:q,paymentMethod:"credit_card",card:{number:s.cardNumber,holderName:s.cardholderName,expirationMonth:s.expiryMonth,expirationYear:s.expiryYear,cvv:s.cvv},customer:{name:s.cardholderName,document:s.cpf,email:t.email},metadata:{type:"card_verification",description:"Verificação de cartão - Será estornado automaticamente"}})})).json();if(!l.success)return{success:!1,error:l.message||"Falha na verificação do cartão"};const u=Ye(s.cardNumber),f=s.cardNumber.slice(-4),{data:g,error:w}=await n.from("PaymentMethod").insert({userId:t.id,type:"credit_card",cardBrand:u,lastFourDigits:f,expiryMonth:s.expiryMonth,expiryYear:s.expiryYear,cardholderName:s.cardholderName,isDefault:!1,isVerified:!0,gatewayToken:l.transactionId,gatewayCustomerId:l.gatewayTransactionId}).select().single();return w?{success:!1,error:"Erro ao salvar método de pagamento"}:(await n.from("PaymentSplitLog").insert({transactionId:l.transactionId,orderId:`verification-${Date.now()}`,userId:t.id,ruleId:null,decision:"admin",gatewayId:c.id,gatewayName:c.name,amount:q,adminRevenue:q,clientRevenue:0,ruleType:"admin_billing",ruleName:"Verificação de Cartão SyncAds",reason:"Cobrança de verificação de método de pagamento",metadata:{type:"card_verification",willBeRefunded:!0}}),{success:!0,paymentMethod:g})}catch(t){return console.error("Erro ao adicionar método de pagamento:",t),{success:!1,error:t instanceof Error?t.message:"Erro desconhecido"}}}async function Be(){const{data:{user:s}}=await n.auth.getUser();if(!s)return[];const{data:r,error:t}=await n.from("PaymentMethod").select("*").eq("userId",s.id).order("isDefault",{ascending:!1}).order("createdAt",{ascending:!1});return t?(console.error("Erro ao listar métodos de pagamento:",t),[]):r||[]}async function Le(s){try{const{data:{user:r}}=await n.auth.getUser();if(!r)return{success:!1,error:"Usuário não autenticado"};const{data:t}=await n.from("Subscription").select("*").eq("userId",r.id).eq("paymentMethodId",s).in("status",["trialing","active"]).single();if(t)return{success:!1,error:"Não é possível remover o método de pagamento de uma assinatura ativa"};const{error:c}=await n.from("PaymentMethod").delete().eq("id",s).eq("userId",r.id);return c?{success:!1,error:"Erro ao remover método de pagamento"}:{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Erro desconhecido"}}}async function $e(s){try{const{data:{user:r}}=await n.auth.getUser();if(!r)return{success:!1,error:"Usuário não autenticado"};await n.from("PaymentMethod").update({isDefault:!1}).eq("userId",r.id);const{error:t}=await n.from("PaymentMethod").update({isDefault:!0}).eq("id",s).eq("userId",r.id);return t?{success:!1,error:"Erro ao definir método de pagamento padrão"}:{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Erro desconhecido"}}}async function qe(s,r){try{const{data:{user:t}}=await n.auth.getUser();if(!t)return{success:!1,error:"Usuário não autenticado"};const{data:c}=await n.from("PaymentMethod").select("*").eq("id",r).eq("userId",t.id).single();if(!c||!c.isVerified)return{success:!1,error:"Método de pagamento inválido ou não verificado"};const{data:i}=await n.from("Subscription").select("*").eq("userId",t.id).in("status",["trialing","active"]);if(i&&i.length>0)for(const F of i)await n.from("Subscription").update({status:"canceled",cancelAtPeriodEnd:!0,updatedAt:new Date().toISOString()}).eq("id",F.id);const l=new Date,u=new Date(l);u.setDate(u.getDate()+Ve);const f=new Date(u);f.setMonth(f.getMonth()+1);const{data:g,error:w}=await n.from("Subscription").insert({userId:t.id,plan:s,status:"trialing",currentPeriodStart:l.toISOString(),currentPeriodEnd:f.toISOString(),trialEnd:u.toISOString(),cancelAtPeriodEnd:!1,paymentMethodId:r,nextPaymentDate:u.toISOString(),amount:k[s]}).select().single();return w?{success:!1,error:"Erro ao criar assinatura"}:(await n.from("Invoice").insert({userId:t.id,subscriptionId:g.id,amount:k[s],status:"draft",description:`Assinatura ${s.toUpperCase()} - Primeiro pagamento`,dueDate:u.toISOString(),paymentMethodId:r,metadata:{plan:s,period:"monthly",isFirstPayment:!0}}),{success:!0,subscription:g})}catch(t){return console.error("Erro ao criar assinatura:",t),{success:!1,error:t instanceof Error?t.message:"Erro desconhecido"}}}async function _e(){const{data:{user:s}}=await n.auth.getUser();if(!s)return null;const{data:r,error:t}=await n.from("Subscription").select("*").eq("userId",s.id).in("status",["trialing","active","past_due"]).order("createdAt",{ascending:!1}).limit(1).single();return t?(console.error("Erro ao buscar assinatura:",t),null):r}async function ze(s,r=!1){try{const{data:{user:t}}=await n.auth.getUser();if(!t)return{success:!1,error:"Usuário não autenticado"};const c={cancelAtPeriodEnd:!r,updatedAt:new Date().toISOString()};r&&(c.status="canceled");const{error:i}=await n.from("Subscription").update(c).eq("id",s).eq("userId",t.id);return i?{success:!1,error:"Erro ao cancelar assinatura"}:{success:!0}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Erro desconhecido"}}}async function Ge(s){try{const{data:{user:r}}=await n.auth.getUser();if(!r)return{success:!1,error:"Usuário não autenticado"};const{error:t}=await n.from("Subscription").update({cancelAtPeriodEnd:!1,updatedAt:new Date().toISOString()}).eq("id",s).eq("userId",r.id);return t?{success:!1,error:"Erro ao reativar assinatura"}:{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Erro desconhecido"}}}async function He(){const{data:{user:s}}=await n.auth.getUser();if(!s)return[];const{data:r,error:t}=await n.from("Invoice").select("*").eq("userId",s.id).order("createdAt",{ascending:!1});return t?(console.error("Erro ao listar faturas:",t),[]):r||[]}function Ye(s){const r=s.replace(/\s/g,"");return/^4/.test(r)?"Visa":/^5[1-5]/.test(r)?"Mastercard":/^3[47]/.test(r)?"Amex":/^6(?:011|5)/.test(r)?"Discover":/^35/.test(r)?"JCB":/^(?:2131|1800|36)/.test(r)?"Diners":/^606282/.test(r)?"Hipercard":/^(?:6062|6016|6504|6509|6505)/.test(r)?"Elo":"Desconhecida"}function Je(s){const r=s.replace(/\s/g,"");if(!/^\d+$/.test(r))return!1;let t=0,c=!1;for(let i=r.length-1;i>=0;i--){let l=parseInt(r[i]);c&&(l*=2,l>9&&(l-=9)),t+=l,c=!c}return t%10===0}function Ze(s){var t;const r=s.replace(/\s/g,"");return((t=r.match(/.{1,4}/g))==null?void 0:t.join(" "))||r}function We(s){const r=s.replace(/\D/g,"");return r.length>=2?`${r.slice(0,2)}/${r.slice(2,4)}`:r}function Ke(s,r){return/^\d+$/.test(s)&&s.length===3}const _=[{id:"free",name:"Free",price:0,description:"Perfeito para começar",icon:z,color:"from-gray-500 to-gray-600",features:["5 mensagens IA por dia","2 imagens IA por dia","1 página de checkout","100 produtos","Taxa de transação: 2.5%","Suporte por email"],limits:{dailyAiMessages:5,dailyAiImages:2,checkoutPages:1,products:100}},{id:"starter",name:"Starter",price:k.starter,description:"Para pequenos negócios",icon:Se,color:"from-blue-500 to-blue-600",badge:"7 dias grátis",features:["50 mensagens IA por dia","20 imagens IA por dia","5 páginas de checkout","1.000 produtos","Taxa de transação: 1.5%","Suporte prioritário","Analytics básico"],limits:{dailyAiMessages:50,dailyAiImages:20,checkoutPages:5,products:1e3}},{id:"pro",name:"Pro",price:k.pro,description:"Para negócios em crescimento",icon:Ee,color:"from-purple-500 to-purple-600",badge:"7 dias grátis",popular:!0,features:["200 mensagens IA por dia","100 imagens IA por dia","20 páginas de checkout","10.000 produtos","Taxa de transação: 1%","Suporte prioritário 24/7","Analytics avançado","Domínio customizado","API de integração"],limits:{dailyAiMessages:200,dailyAiImages:100,checkoutPages:20,products:1e4}},{id:"enterprise",name:"Enterprise",price:k.enterprise,description:"Para grandes operações",icon:Ie,color:"from-orange-500 to-orange-600",badge:"7 dias grátis",features:["Mensagens IA ilimitadas","Imagens IA ilimitadas","Páginas de checkout ilimitadas","Produtos ilimitados","Taxa de transação: 0.5%","Suporte dedicado 24/7","Analytics avançado + BI","White label completo","API completa","Gerente de conta"],limits:{dailyAiMessages:-1,dailyAiImages:-1,checkoutPages:-1,products:-1}}],ga=()=>{const s=ye(a=>a.user),{toast:r}=be(),[t,c]=h.useState(!0),[i,l]=h.useState(null),[u,f]=h.useState([]),[g,w]=h.useState([]),[F,v]=h.useState(!1),[de,C]=h.useState(!1),[m,le]=h.useState(null),[y,T]=h.useState(!1),[d,b]=h.useState({cardNumber:"",cardholderName:"",expiryDate:"",cvv:"",cpf:""});h.useEffect(()=>{G()},[s==null?void 0:s.id]);const G=async()=>{try{c(!0),await Promise.all([V(),U(),ue()])}catch(a){console.error("Error loading billing data:",a),r({title:"Erro ao carregar dados",description:"Não foi possível carregar as informações de faturamento.",variant:"destructive"})}finally{c(!1)}},V=async()=>{const a=await _e();l(a)},U=async()=>{const a=await Be();f(a)},ue=async()=>{const a=await He();w(a)},me=async()=>{try{if(T(!0),!Je(d.cardNumber)){r({title:"Cartão inválido",description:"Número de cartão inválido.",variant:"destructive"});return}if(!Ke(d.cvv)){r({title:"CVV inválido",description:"CVV deve ter 3 ou 4 dígitos.",variant:"destructive"});return}const[a,o]=d.expiryDate.split("/");if(!a||!o||a.length!==2||o.length!==2){r({title:"Data inválida",description:"Use o formato MM/AA.",variant:"destructive"});return}const x=await Re({cardNumber:d.cardNumber.replace(/\s/g,""),cardholderName:d.cardholderName,expiryMonth:a,expiryYear:`20${o}`,cvv:d.cvv,cpf:d.cpf.replace(/\D/g,"")});if(!x.success){r({title:"Erro ao adicionar cartão",description:x.error,variant:"destructive"});return}r({title:"Cartão adicionado com sucesso!",description:"Cobramos R$ 1,00 para verificação. Será estornado em até 24h."}),v(!1),b({cardNumber:"",cardholderName:"",expiryDate:"",cvv:"",cpf:""}),await U()}catch(a){console.error("Error adding card:",a),r({title:"Erro",description:"Ocorreu um erro ao adicionar o cartão.",variant:"destructive"})}finally{T(!1)}},pe=async a=>{try{const o=await Le(a);if(!o.success){r({title:"Erro ao remover cartão",description:o.error,variant:"destructive"});return}r({title:"Cartão removido",description:"O método de pagamento foi removido com sucesso."}),await U()}catch(o){console.error("Error removing card:",o)}},he=async a=>{try{const o=await $e(a);if(!o.success){r({title:"Erro",description:o.error,variant:"destructive"});return}r({title:"Cartão definido como padrão",description:"Este cartão será usado nas próximas cobranças."}),await U()}catch(o){console.error("Error setting default card:",o)}},xe=async()=>{if(!(!m||m.id==="free"))try{if(T(!0),u.length===0){r({title:"Adicione um cartão",description:"Você precisa adicionar um método de pagamento primeiro.",variant:"destructive"}),C(!1),v(!0);return}const a=u.find(x=>x.isDefault)||u[0],o=await qe(m.id,a.id);if(!o.success){r({title:"Erro ao criar assinatura",description:o.error,variant:"destructive"});return}r({title:"Assinatura criada com sucesso!",description:`Você tem 7 dias grátis para testar o plano ${m.name}.`}),C(!1),await G()}catch(a){console.error("Error upgrading:",a),r({title:"Erro",description:"Ocorreu um erro ao criar a assinatura.",variant:"destructive"})}finally{T(!1)}},fe=async()=>{if(i)try{const a=await ze(i.id);if(!a.success){r({title:"Erro ao cancelar",description:a.error,variant:"destructive"});return}r({title:"Assinatura cancelada",description:"Sua assinatura será cancelada no final do período."}),await V()}catch(a){console.error("Error canceling subscription:",a)}},ge=async()=>{if(i)try{const a=await Ge(i.id);if(!a.success){r({title:"Erro ao reativar",description:a.error,variant:"destructive"});return}r({title:"Assinatura reativada",description:"Sua assinatura continuará ativa."}),await V()}catch(a){console.error("Error reactivating subscription:",a)}},H=()=>(i==null?void 0:i.plan)||"free",P=a=>new Date(a).toLocaleDateString("pt-BR"),A=a=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a),Y=a=>{const x={trialing:{label:"Em Trial",variant:"default"},active:{label:"Ativo",variant:"default"},past_due:{label:"Pagamento Pendente",variant:"destructive"},canceled:{label:"Cancelado",variant:"secondary"},paused:{label:"Pausado",variant:"secondary"},pending:{label:"Pendente",variant:"outline"},paid:{label:"Pago",variant:"default"},failed:{label:"Falhou",variant:"destructive"}}[a]||{label:a,variant:"outline"};return e.jsx(Q,{variant:x.variant,children:x.label})};return t?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(O,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[e.jsxs(R.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Faturamento"}),e.jsx("p",{className:"text-muted-foreground",children:"Gerencie sua assinatura, métodos de pagamento e faturas"})]}),e.jsxs(Pe,{defaultValue:"plans",className:"space-y-6",children:[e.jsxs(Ae,{children:[e.jsx(B,{value:"plans",children:"Planos"}),e.jsx(B,{value:"payment-methods",children:"Métodos de Pagamento"}),e.jsx(B,{value:"invoices",children:"Faturas"})]}),e.jsxs(L,{value:"plans",className:"space-y-6",children:[i&&e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs(j,{children:[e.jsxs(Z,{children:[e.jsx(W,{children:"Assinatura Atual"}),e.jsx(K,{children:"Detalhes da sua assinatura ativa"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-lg",children:["Plano ",i.plan.toUpperCase()]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[A(i.amount),"/mês"]})]}),Y(i.status)]}),i.status==="trialing"&&i.trialEnd&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(z,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Período de Trial"}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Seu trial termina em"," ",P(i.trialEnd),". Primeira cobrança nesta data."]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Período Atual"}),e.jsxs("p",{className:"font-medium",children:[P(i.currentPeriodStart)," -"," ",P(i.currentPeriodEnd)]})]}),i.nextPaymentDate&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Próximo Pagamento"}),e.jsx("p",{className:"font-medium",children:P(i.nextPaymentDate)})]})]}),e.jsx("div",{className:"flex gap-2",children:i.cancelAtPeriodEnd?e.jsx(p,{variant:"default",onClick:ge,children:"Reativar Assinatura"}):e.jsx(p,{variant:"outline",onClick:fe,children:"Cancelar Assinatura"})})]})]})}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:_.map((a,o)=>{const x=a.icon,J=H()===a.id,je=_.findIndex(S=>S.id===H())<_.findIndex(S=>S.id===a.id);return e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.1},children:e.jsxs(j,{className:`relative overflow-hidden ${a.popular?"border-primary shadow-lg":""} ${J?"ring-2 ring-primary":""}`,children:[a.popular&&e.jsx("div",{className:"absolute top-0 right-0 bg-primary text-primary-foreground px-3 py-1 text-xs font-semibold rounded-bl-lg",children:"POPULAR"}),a.badge&&!a.popular&&e.jsx("div",{className:"absolute top-0 right-0 bg-blue-500 text-white px-3 py-1 text-xs font-semibold rounded-bl-lg",children:a.badge}),e.jsxs(Z,{children:[e.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${a.color} flex items-center justify-center mb-4`,children:e.jsx(x,{className:"h-6 w-6 text-white"})}),e.jsx(W,{children:a.name}),e.jsx(K,{children:a.description}),e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"text-4xl font-bold",children:a.price===0?"Grátis":A(a.price)}),a.price>0&&e.jsx("span",{className:"text-muted-foreground",children:"/mês"})]})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsx("ul",{className:"space-y-2",children:a.features.map((S,ve)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx(ne,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:S})]},ve))}),J?e.jsxs(p,{className:"w-full",disabled:!0,children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"Plano Atual"]}):je&&a.id!=="free"?e.jsxs(p,{className:"w-full",onClick:()=>{le(a),C(!0)},children:["Fazer Upgrade",e.jsx(oe,{className:"ml-2 h-4 w-4"})]}):null]})]})},a.id)})})]}),e.jsxs(L,{value:"payment-methods",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Métodos de Pagamento"}),e.jsx("p",{className:"text-muted-foreground",children:"Gerencie seus cartões de crédito"})]}),e.jsxs(p,{onClick:()=>v(!0),children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),"Adicionar Cartão"]})]}),u.length===0?e.jsx(j,{children:e.jsxs(N,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx($,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Nenhum método de pagamento"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Adicione um cartão para fazer upgrade de plano"}),e.jsxs(p,{onClick:()=>v(!0),children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),"Adicionar Cartão"]})]})}):e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:u.map(a=>e.jsx(j,{children:e.jsxs(N,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-500 rounded-lg flex items-center justify-center",children:e.jsx($,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("p",{className:"font-semibold",children:[a.cardBrand," •••• ",a.lastFourDigits]}),a.isDefault&&e.jsx(Q,{variant:"default",children:"Padrão"}),a.isVerified&&e.jsx(De,{className:"h-4 w-4 text-green-500"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.cardholderName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Expira em ",a.expiryMonth,"/",a.expiryYear]})]})]}),e.jsx(p,{variant:"ghost",size:"sm",onClick:()=>pe(a.id),children:e.jsx(Me,{className:"h-4 w-4"})})]}),!a.isDefault&&e.jsx(p,{variant:"outline",size:"sm",className:"w-full mt-4",onClick:()=>he(a.id),children:"Definir como Padrão"})]})},a.id))})]}),e.jsxs(L,{value:"invoices",className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Histórico de Faturas"}),e.jsx("p",{className:"text-muted-foreground",children:"Visualize e baixe suas faturas"})]}),g.length===0?e.jsx(j,{children:e.jsxs(N,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(ke,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Nenhuma fatura ainda"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Suas faturas aparecerão aqui"})]})}):e.jsx(j,{children:e.jsxs(Ne,{children:[e.jsx(we,{children:e.jsxs(ie,{children:[e.jsx(D,{children:"Data"}),e.jsx(D,{children:"Descrição"}),e.jsx(D,{children:"Valor"}),e.jsx(D,{children:"Status"}),e.jsx(D,{className:"text-right",children:"Ações"})]})}),e.jsx(Ce,{children:g.map(a=>e.jsxs(ie,{children:[e.jsx(M,{children:P(a.createdAt)}),e.jsx(M,{children:a.description}),e.jsx(M,{children:A(a.amount)}),e.jsx(M,{children:Y(a.status)}),e.jsx(M,{className:"text-right",children:a.status==="paid"&&e.jsxs(p,{variant:"ghost",size:"sm",children:[e.jsx(Te,{className:"h-4 w-4 mr-2"}),"Baixar PDF"]})})]},a.id))})]})})]})]}),e.jsx(X,{open:F,onOpenChange:v,children:e.jsxs(ee,{children:[e.jsxs(ae,{children:[e.jsx(re,{children:"Adicionar Cartão de Crédito"}),e.jsx(se,{children:"Será cobrado R$ 1,00 para verificação do cartão. Este valor será estornado automaticamente em até 24 horas."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"cardNumber",children:"Número do Cartão"}),e.jsx(E,{id:"cardNumber",placeholder:"1234 5678 9012 3456",maxLength:19,value:d.cardNumber,onChange:a=>b({...d,cardNumber:Ze(a.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"cardholderName",children:"Nome no Cartão"}),e.jsx(E,{id:"cardholderName",placeholder:"NOME COMO NO CARTÃO",value:d.cardholderName,onChange:a=>b({...d,cardholderName:a.target.value.toUpperCase()})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"expiryDate",children:"Validade"}),e.jsx(E,{id:"expiryDate",placeholder:"MM/AA",maxLength:5,value:d.expiryDate,onChange:a=>b({...d,expiryDate:We(a.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"cvv",children:"CVV"}),e.jsx(E,{id:"cvv",placeholder:"123",type:"password",maxLength:4,value:d.cvv,onChange:a=>b({...d,cvv:a.target.value.replace(/\D/g,"")})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"cpf",children:"CPF"}),e.jsx(E,{id:"cpf",placeholder:"000.000.000-00",maxLength:14,value:d.cpf,onChange:a=>b({...d,cpf:a.target.value})})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ue,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100 text-sm",children:"Pagamento Seguro"}),e.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:"Seus dados são criptografados e protegidos"})]})]})})]}),e.jsxs(te,{children:[e.jsx(p,{variant:"outline",onClick:()=>v(!1),disabled:y,children:"Cancelar"}),e.jsx(p,{onClick:me,disabled:y,children:y?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"mr-2 h-4 w-4 animate-spin"}),"Processando..."]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"Adicionar Cartão"]})})]})]})}),e.jsx(X,{open:de,onOpenChange:C,children:e.jsxs(ee,{children:[e.jsxs(ae,{children:[e.jsx(re,{children:"Confirmar Upgrade de Plano"}),e.jsxs(se,{children:["Você está prestes a fazer upgrade para o plano"," ",m==null?void 0:m.name]})]}),m&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(j,{children:e.jsxs(N,{className:"pt-6 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Plano"}),e.jsx("span",{className:"font-semibold",children:m.name})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Valor"}),e.jsxs("span",{className:"font-semibold",children:[A(m.price),"/mês"]})]}),m.badge&&e.jsx("div",{className:"pt-3 border-t",children:e.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400",children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium text-sm",children:m.badge})]})})]})}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-950 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Fe,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-900 dark:text-yellow-100 text-sm",children:"Período de Trial"}),e.jsxs("p",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:["Você não será cobrado nos próximos 7 dias. Após o trial, a cobrança será de ",A(m.price)," por mês."]})]})]})})]}),e.jsxs(te,{children:[e.jsx(p,{variant:"outline",onClick:()=>C(!1),disabled:y,children:"Cancelar"}),e.jsx(p,{onClick:xe,disabled:y,children:y?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"mr-2 h-4 w-4 animate-spin"}),"Processando..."]}):e.jsxs(e.Fragment,{children:["Confirmar Upgrade",e.jsx(oe,{className:"ml-2 h-4 w-4"})]})})]})]})})]})};export{ga as default};

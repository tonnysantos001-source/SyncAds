import{j as e}from"./vendor-ui-DAyDU-p2.js";import{r as a}from"./vendor-react-BDwqAlkB.js";import{g as r,f as t,B as s,I as i,C as o,a as l,b as d,c as n,e as c}from"./index-D8-xWu09.js";import{T as m,a as x,b as h,c as g,d as j,e as p}from"./table-Be22pmWM.js";import{D as u,e as v,a as y,b,c as f,f as k}from"./dialog-ChfOx3kH.js";import{L as N}from"./label-CjIYouN4.js";import{T as w}from"./textarea-Cy75CZdm.js";import{p as C}from"./productsApi-XfGzEUWP.js";import{S as A}from"./skeleton-CvCG5fnx.js";import{m as K}from"./vendor-animation-x8f1c1kX.js";import{a8 as S,a_ as z,S as I,$ as D,a2 as E}from"./vendor-icons-D-zwSoGL.js";import"./vendor-supabase-rKXMzPQL.js";import"./vendor-utils-Dl0_yMKq.js";import"./vendor-query-D3VdSFIC.js";const P=()=>{const[P,q]=a.useState([]),[L,T]=a.useState([]),[B,F]=a.useState(!0),[$,O]=a.useState(""),[R,_]=a.useState(!1),[G,H]=a.useState(null),{toast:J}=r(),M=t(e=>e.user),[Q,U]=a.useState({name:"",description:"",price:0,isActive:!0});a.useEffect(()=>{V()},[]);const V=async()=>{try{if(!M?.organizationId)return;const[e,a]=await Promise.all([C.kits.list(M.organizationId),C.list()]);q(e),T(a)}catch(e){J({title:"Erro ao carregar",description:e.message,variant:"destructive"})}finally{F(!1)}},W=P.filter(e=>e.name.toLowerCase().includes($.toLowerCase()));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(K.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-black bg-gradient-to-r from-teal-600 via-emerald-600 to-lime-600 bg-clip-text text-transparent",children:"Kits de Produtos"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:"Crie kits com múltiplos produtos"})]}),e.jsxs(u,{open:R,onOpenChange:_,children:[e.jsx(v,{asChild:!0,children:e.jsxs(s,{onClick:()=>{H(null),U({name:"",description:"",price:0,isActive:!0})},className:"bg-gradient-to-r from-teal-500 to-emerald-500 text-white border-0 hover:from-teal-600 hover:to-emerald-600 transition-all duration-300 shadow-lg hover:shadow-xl",children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Criar Kit"]})}),e.jsxs(y,{children:[e.jsx(b,{children:e.jsx(f,{children:G?"Editar Kit":"Novo Kit"})}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault();try{if(!M?.organizationId)return;G?(await C.kits.update(G.id,Q),J({title:"Kit atualizado!"})):(await C.kits.create({...Q,organizationId:M.organizationId}),J({title:"Kit criado!"})),_(!1),H(null),V()}catch(a){J({title:"Erro",description:a.message,variant:"destructive"})}},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(N,{children:"Nome do Kit"}),e.jsx(i,{value:Q.name,onChange:e=>U({...Q,name:e.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(N,{children:"Descrição"}),e.jsx(w,{value:Q.description,onChange:e=>U({...Q,description:e.target.value})})]}),e.jsxs("div",{children:[e.jsx(N,{children:"Preço"}),e.jsx(i,{type:"number",step:"0.01",value:Q.price,onChange:e=>U({...Q,price:parseFloat(e.target.value)}),required:!0})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:Q.isActive,onChange:e=>U({...Q,isActive:e.target.checked})}),e.jsx(N,{children:"Ativo"})]})]}),e.jsxs(k,{className:"mt-4",children:[e.jsx(s,{type:"button",variant:"outline",onClick:()=>_(!1),children:"Cancelar"}),e.jsx(s,{type:"submit",children:G?"Atualizar":"Criar"})]})]})]})]})]}),e.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:e.jsxs(o,{className:"relative overflow-hidden border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-teal-500 opacity-10 rounded-full blur-3xl"}),e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(d,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total de Kits"}),e.jsx("div",{className:"p-2 rounded-lg bg-teal-500 bg-opacity-10",children:e.jsx(z,{className:"h-4 w-4 text-teal-500"})})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-3xl font-bold bg-gradient-to-br from-teal-600 to-emerald-500 bg-clip-text text-transparent",children:P.length}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Kits cadastrados"})]})]})}),e.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(i,{placeholder:"Buscar kits...",value:$,onChange:e=>O(e.target.value),className:"pl-9 border-gray-200 dark:border-gray-700 bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm dark:text-white dark:placeholder:text-gray-500"})]}),e.jsx(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:e.jsxs(o,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg",children:[e.jsx(l,{children:e.jsx(d,{className:"text-xl font-bold bg-gradient-to-r from-teal-600 to-emerald-600 bg-clip-text text-transparent",children:"Lista de Kits"})}),e.jsx(n,{children:B?e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{className:"h-12 w-full"}),e.jsx(A,{className:"h-12 w-full"})]}):0===W.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(z,{className:"h-12 w-12 text-muted-foreground mb-4 mx-auto"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Nenhum kit encontrado"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Comece criando o primeiro kit"}),e.jsxs(s,{onClick:()=>_(!0),children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Criar Primeiro Kit"]})]}):e.jsx("div",{className:"rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700",children:e.jsxs(m,{children:[e.jsx(x,{children:e.jsxs(h,{className:"bg-gradient-to-r from-teal-50 to-emerald-50 dark:from-gray-800 dark:to-gray-800 hover:from-teal-100 hover:to-emerald-100 dark:hover:from-gray-700 dark:hover:to-gray-700",children:[e.jsx(g,{className:"font-semibold dark:text-gray-300",children:"Nome"}),e.jsx(g,{className:"font-semibold dark:text-gray-300",children:"Descrição"}),e.jsx(g,{className:"font-semibold dark:text-gray-300",children:"Preço"}),e.jsx(g,{className:"font-semibold dark:text-gray-300",children:"Status"}),e.jsx(g,{className:"text-right font-semibold dark:text-gray-300",children:"Ações"})]})}),e.jsx(j,{children:W.map((a,r)=>e.jsxs(K.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.05*r},className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gradient-to-r hover:from-teal-50/50 hover:to-emerald-50/50 dark:hover:from-gray-800/50 dark:hover:to-gray-800/50 transition-all duration-200",children:[e.jsx(p,{className:"font-medium",children:a.name}),e.jsxs(p,{children:["R$ ",a.price.toFixed(2)]}),e.jsx(p,{children:e.jsx(c,{variant:a.isActive?"default":"secondary",className:a.isActive?"bg-gradient-to-r from-emerald-100 to-lime-100 dark:from-emerald-900/30 dark:to-lime-900/30 text-emerald-700 dark:text-emerald-300 border-emerald-300 dark:border-emerald-700":"",children:a.isActive?"Ativo":"Inativo"})}),e.jsx(p,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(s,{variant:"ghost",size:"sm",onClick:()=>{H(a),U({name:a.name,description:a.description,price:a.price,isActive:a.isActive}),_(!0)},className:"hover:bg-gradient-to-r hover:from-teal-50 hover:to-emerald-50 dark:hover:from-gray-800 dark:hover:to-gray-800",children:e.jsx(D,{className:"h-4 w-4"})}),e.jsx(s,{variant:"ghost",size:"sm",onClick:()=>(async e=>{if(confirm("Deletar kit?"))try{await C.kits.delete(e),J({title:"Kit deletado"}),V()}catch(a){J({title:"Erro",description:a.message,variant:"destructive"})}})(a.id),className:"hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-600 dark:hover:text-red-400",children:e.jsx(E,{className:"h-4 w-4"})})]})})]},a.id))})]})})})]})})]})};export{P as default};

import{c as G,r as m,b as F,s as f,u as K,j as e,M as A,B as g,I as _,d as T,e as P,f as R,h as k,S as Y,o as ee}from"./index-Dl-TXdSt.js";import{T as ae,a as se,b as te,c as N,d as re,e as E}from"./table-6JrUrzVD.js";import{D as ie,a as oe,b as le,c as ne,d as ce,f as de}from"./dialog-CITl0H2a.js";import{L as w}from"./label-B0UhF2uK.js";import{T as me}from"./textarea-mSkDaZO8.js";import{S as z}from"./skeleton-DQACbCSe.js";import{A as ue,a as xe}from"./alert-DGkmaTAW.js";import{P as H}from"./plus-BX1UIq4M.js";import{S as q}from"./sparkles-t7_QWAxd.js";import{Z as pe}from"./zap-DoSMLseE.js";import{T as he}from"./target-B-_Fo7qk.js";import{M as I}from"./message-square-jp5x3UUV.js";import{T as L}from"./trending-up-Hj0M6Eka.js";import{S as ge}from"./square-pen-CzO_RTuY.js";import{T as fe}from"./trash-2-DZddkJ5f.js";import{U as ye}from"./users-D97vFHma.js";import"./x-D1reU6LV.js";/**
 * @license lucide-react v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=G("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),b=[{type:"RECENT_PURCHASE",message:"ðŸŽ‰ Maria de SÃ£o Paulo acabou de comprar hÃ¡ 3 minutos!",displayDuration:5,isActive:!0},{type:"RECENT_PURCHASE",message:"âœ¨ JoÃ£o do Rio de Janeiro finalizou uma compra agora!",displayDuration:5,isActive:!0},{type:"RECENT_PURCHASE",message:"ðŸ”¥ Ana de Belo Horizonte acabou de comprar este produto!",displayDuration:6,isActive:!0},{type:"VISITOR_COUNT",message:"ðŸ‘€ 38 pessoas estÃ£o visualizando este produto agora",displayDuration:7,isActive:!0},{type:"VISITOR_COUNT",message:"ðŸ”¥ +120 pessoas compraram nas Ãºltimas 24 horas",displayDuration:6,isActive:!0},{type:"VISITOR_COUNT",message:"âš¡ Mais de 50 pessoas adicionaram ao carrinho hoje",displayDuration:6,isActive:!0},{type:"REVIEW",message:'â­â­â­â­â­ "Produto excelente! Recomendo muito" - Carlos',displayDuration:8,isActive:!0},{type:"REVIEW",message:'â­â­â­â­â­ "Superou minhas expectativas!" - Juliana',displayDuration:7,isActive:!0},{type:"REVIEW",message:'â­â­â­â­â­ "Melhor compra que jÃ¡ fiz!" - Pedro',displayDuration:7,isActive:!0},{type:"RECENT_PURCHASE",message:"ðŸ’š AlguÃ©m de Curitiba acabou de fazer um pedido",displayDuration:5,isActive:!0},{type:"VISITOR_COUNT",message:"ðŸš¨ Apenas 3 unidades restantes em estoque!",displayDuration:8,isActive:!0},{type:"RECENT_PURCHASE",message:"ðŸŽŠ Patricia de Porto Alegre comprou hÃ¡ 7 minutos",displayDuration:5,isActive:!0}];function be(){const[l,p]=m.useState(!1),{toast:n}=F(),u=()=>b,h=r=>b.filter(c=>c.type===r),y=()=>{const r=Math.floor(Math.random()*b.length);return b[r]},x=r=>[...b].sort(()=>Math.random()-.5).slice(0,Math.min(r,b.length));return{loading:l,getExamples:u,getExamplesByType:h,getRandomExample:y,getRandomExamples:x,createExamplesForUser:async(r,c=5)=>{if(!r)return n({title:"Erro",description:"ID do usuÃ¡rio nÃ£o fornecido",variant:"destructive"}),!1;p(!0);try{const{data:i,error:s}=await f.from("SocialProof").select("id").eq("userId",r).limit(1);if(s)throw s;if(i&&i.length>0)return n({title:"JÃ¡ existem provas sociais",description:"VocÃª jÃ¡ possui provas sociais configuradas."}),!1;const C=x(c).map(d=>({userId:r,type:d.type,message:d.message,displayDuration:d.displayDuration,isActive:d.isActive})),{error:o}=await f.from("SocialProof").insert(C);if(o)throw o;return n({title:"Exemplos criados!",description:`${c} provas sociais de exemplo foram adicionadas. VocÃª pode editÃ¡-las ou criar novas.`}),!0}catch(i){return console.error("Erro ao criar exemplos:",i),n({title:"Erro ao criar exemplos",description:i.message||"Tente novamente mais tarde",variant:"destructive"}),!1}finally{p(!1)}},createSingleExample:async(r,c)=>{if(!r)return!1;p(!0);try{const i=h(c);if(i.length===0)return!1;const s=i[Math.floor(Math.random()*i.length)],{error:j}=await f.from("SocialProof").insert({userId:r,type:s.type,message:s.message,displayDuration:s.displayDuration,isActive:s.isActive});if(j)throw j;return n({title:"Exemplo criado!",description:"Prova social adicionada com sucesso."}),!0}catch(i){return console.error("Erro ao criar exemplo:",i),n({title:"Erro ao criar exemplo",description:i.message,variant:"destructive"}),!1}finally{p(!1)}},getMessageSuggestions:r=>({RECENT_PURCHASE:["ðŸŽ‰ [Nome] de [Cidade] acabou de comprar hÃ¡ [tempo] minutos!","âœ¨ [Nome] finalizou uma compra agora!","ðŸ”¥ AlguÃ©m de [Cidade] acabou de comprar este produto!","ðŸ’š [Nome] acabou de fazer um pedido","ðŸŽŠ [Nome] de [Cidade] comprou hÃ¡ [tempo] minutos"],VISITOR_COUNT:["ðŸ‘€ [nÃºmero] pessoas estÃ£o visualizando este produto agora","ðŸ”¥ +[nÃºmero] pessoas compraram nas Ãºltimas 24 horas","âš¡ Mais de [nÃºmero] pessoas adicionaram ao carrinho hoje","ðŸš¨ Apenas [nÃºmero] unidades restantes em estoque!","ðŸ“ˆ Este produto estÃ¡ sendo muito procurado!"],REVIEW:['â­â­â­â­â­ "Produto excelente! Recomendo muito" - [Nome]','â­â­â­â­â­ "Superou minhas expectativas!" - [Nome]','â­â­â­â­â­ "Melhor compra que jÃ¡ fiz!" - [Nome]','â­â­â­â­â­ "Qualidade excepcional!" - [Nome]','â­â­â­â­â­ "Vale cada centavo!" - [Nome]']})[r]||[]}}const U=({title:l,value:p,icon:n,color:u,delay:h=0,subtitle:y})=>e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:h},children:e.jsxs(T,{className:"relative overflow-hidden border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 ${u} opacity-10 rounded-full blur-3xl`}),e.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(R,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:l}),e.jsx("div",{className:`p-2 rounded-lg ${u} bg-opacity-10`,children:e.jsx(n,{className:`h-5 w-5 ${u.replace("bg-","text-")}`})})]}),e.jsxs(k,{children:[e.jsx("div",{className:"text-3xl font-bold bg-gradient-to-br from-gray-900 to-gray-600 dark:from-white dark:to-gray-300 bg-clip-text text-transparent",children:p}),y&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:y})]})]})}),_e=()=>{const[l,p]=m.useState([]),[n,u]=m.useState([]),[h,y]=m.useState(!0),[x,O]=m.useState(""),[M,v]=m.useState(!1),[r,c]=m.useState(null),{toast:i}=F(),s=K(a=>a.user),{createExamplesForUser:j,loading:C}=be(),[o,d]=m.useState({type:"RECENT_PURCHASE",message:"",displayDuration:5,isActive:!0});m.useEffect(()=>{S()},[]);const W=async()=>{if(!(s!=null&&s.id))return;await j(s.id,8)&&S()};m.useEffect(()=>{B()},[x,l]);const S=async()=>{try{if(!(s!=null&&s.id))return;const{data:a,error:t}=await f.from("SocialProof").select("*").eq("userId",s.id).order("createdAt",{ascending:!1});if(t)throw t;p(a||[]),u(a||[])}catch(a){i({title:"Erro ao carregar",description:a.message,variant:"destructive"})}finally{y(!1)}},B=()=>{if(!x){u(l);return}const a=l.filter(t=>t.message.toLowerCase().includes(x.toLowerCase()));u(a)},J=async a=>{a.preventDefault();try{if(!(s!=null&&s.id))return;if(r){const{error:t}=await f.from("SocialProof").update({...o,updatedAt:new Date().toISOString()}).eq("id",r.id);if(t)throw t;i({title:"Prova social atualizada!"})}else{const{error:t}=await f.from("SocialProof").insert({...o,userId:s.id});if(t)throw t;i({title:"Prova social criada!",description:"A notificaÃ§Ã£o estÃ¡ pronta para exibiÃ§Ã£o."})}v(!1),D(),S()}catch(t){i({title:"Erro",description:t.message,variant:"destructive"})}},$=async a=>{if(confirm("Tem certeza que deseja deletar esta prova social?"))try{const{error:t}=await f.from("SocialProof").delete().eq("id",a);if(t)throw t;i({title:"Prova social deletada"}),S()}catch(t){i({title:"Erro ao deletar",description:t.message,variant:"destructive"})}},Z=a=>{c(a),d({type:a.type,message:a.message,displayDuration:a.displayDuration,isActive:a.isActive}),v(!0)},D=()=>{c(null),d({type:"RECENT_PURCHASE",message:"",displayDuration:5,isActive:!0})},V=l.filter(a=>a.isActive).length,Q=a=>({RECENT_PURCHASE:"Compra Recente",VISITOR_COUNT:"Contador de Visitantes",REVIEW:"AvaliaÃ§Ã£o"})[a]||a,X=a=>{switch(a){case"RECENT_PURCHASE":return e.jsx(L,{className:"h-4 w-4"});case"VISITOR_COUNT":return e.jsx(ye,{className:"h-4 w-4"});case"REVIEW":return e.jsx(I,{className:"h-4 w-4"});default:return null}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(A.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-black bg-gradient-to-r from-orange-600 via-red-600 to-pink-600 bg-clip-text text-transparent",children:"Prova Social"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium mt-2",children:"NotificaÃ§Ãµes em tempo real para aumentar confianÃ§a e conversÃµes"})]}),e.jsxs(ie,{open:M,onOpenChange:v,children:[e.jsx(oe,{asChild:!0,children:e.jsxs(g,{onClick:D,size:"lg",className:"shadow-lg hover:shadow-xl transition-all",children:[e.jsx(H,{className:"mr-2 h-5 w-5"}),"Criar Prova Social"]})}),e.jsxs(le,{className:"max-w-lg",children:[e.jsx(ne,{children:e.jsx(ce,{children:r?"Editar Prova Social":"Nova Prova Social"})}),e.jsxs("form",{onSubmit:J,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(w,{children:"Tipo *"}),e.jsxs("select",{className:"w-full p-2 border rounded-md",value:o.type,onChange:a=>d({...o,type:a.target.value}),required:!0,children:[e.jsx("option",{value:"RECENT_PURCHASE",children:"Compra Recente"}),e.jsx("option",{value:"VISITOR_COUNT",children:"Contador de Visitantes"}),e.jsx("option",{value:"REVIEW",children:"AvaliaÃ§Ã£o"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[o.type==="RECENT_PURCHASE"&&'Ex: "JoÃ£o acabou de comprar hÃ¡ 5 minutos"',o.type==="VISITOR_COUNT"&&'Ex: "23 pessoas estÃ£o visualizando este produto"',o.type==="REVIEW"&&'Ex: "â˜…â˜…â˜…â˜…â˜… Produto excelente! - Maria S."']})]}),e.jsxs("div",{children:[e.jsx(w,{children:"Mensagem *"}),e.jsx(me,{value:o.message,onChange:a=>d({...o,message:a.target.value}),placeholder:"Digite a mensagem que serÃ¡ exibida...",rows:3,required:!0})]}),e.jsxs("div",{children:[e.jsx(w,{children:"DuraÃ§Ã£o de ExibiÃ§Ã£o (segundos)"}),e.jsx(_,{type:"number",min:"1",max:"30",value:o.displayDuration,onChange:a=>d({...o,displayDuration:parseInt(a.target.value)}),required:!0})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:o.isActive,onChange:a=>d({...o,isActive:a.target.checked}),className:"rounded"}),e.jsx(w,{children:"Ativo"})]}),e.jsxs(de,{children:[e.jsx(g,{type:"button",variant:"outline",onClick:()=>v(!1),children:"Cancelar"}),e.jsx(g,{type:"submit",children:r?"Atualizar":"Criar"})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsx(U,{title:"Total de Provas",value:l.length,icon:q,color:"bg-orange-500",delay:.1,subtitle:"NotificaÃ§Ãµes criadas"}),e.jsx(U,{title:"Provas Ativas",value:V,icon:pe,color:"bg-green-500",delay:.2,subtitle:"Exibindo no checkout"}),e.jsx(U,{title:"Impacto",value:"Alto",icon:he,color:"bg-red-500",delay:.3,subtitle:"Aumenta confianÃ§a"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",style:{display:"none"},children:[e.jsxs(T,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(R,{className:"text-sm font-medium",children:"Total"}),e.jsx(I,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})]}),e.jsx(k,{children:e.jsx("div",{className:"text-2xl font-bold",children:l.length})})]}),e.jsxs(T,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs(P,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(R,{className:"text-sm font-medium",children:"Ativas"}),e.jsx(L,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})]}),e.jsx(k,{children:e.jsx("div",{className:"text-2xl font-bold",children:V})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Y,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-600 dark:text-gray-400"}),e.jsx(_,{placeholder:"Buscar provas sociais...",value:x,onChange:a=>O(a.target.value),className:"pl-9 border-gray-200 dark:border-gray-600 bg-white/80 dark:bg-gray-800 dark:text-white dark:placeholder:text-gray-500 backdrop-blur-sm"})]}),!h&&l.length===0&&e.jsxs(ue,{className:"border-blue-200 bg-blue-50",children:[e.jsx(ve,{className:"h-4 w-4 text-blue-600"}),e.jsxs(xe,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-blue-900 mb-1",children:"Comece com exemplos prontos!"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Crie 8 provas sociais de exemplo para testar no seu checkout. VocÃª pode editÃ¡-las ou excluÃ­-las depois."})]}),e.jsxs(g,{onClick:W,disabled:C,className:"ml-4 bg-blue-600 hover:bg-blue-700",children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),C?"Criando...":"Criar Exemplos"]})]})]}),e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:e.jsxs(T,{className:"border-0 bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsx(P,{children:e.jsx(R,{className:"text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 dark:from-white dark:to-gray-300 bg-clip-text text-transparent",children:"Lista de Provas Sociais"})}),e.jsx(k,{children:h?e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{className:"h-12 w-full"}),e.jsx(z,{className:"h-12 w-full"})]}):n.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"p-4 rounded-full bg-gradient-to-br from-orange-500 to-pink-500 mb-4",children:e.jsx(I,{className:"h-12 w-12 text-white"})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nenhuma prova social encontrada"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4 max-w-md",children:x?"Tente ajustar sua busca":"Comece criando provas sociais para aumentar a confianÃ§a dos seus clientes"}),!x&&e.jsxs(g,{onClick:()=>{D(),v(!0)},size:"lg",children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Criar Primeira Prova Social"]})]}):e.jsx("div",{className:"rounded-md border border-gray-200 dark:border-gray-800",children:e.jsxs(ae,{children:[e.jsx(se,{children:e.jsxs(te,{className:"hover:bg-transparent",children:[e.jsx(N,{children:"Tipo"}),e.jsx(N,{children:"Mensagem"}),e.jsx(N,{children:"DuraÃ§Ã£o"}),e.jsx(N,{children:"Status"}),e.jsx(N,{className:"text-right",children:"AÃ§Ãµes"})]})}),e.jsx(re,{children:n.map((a,t)=>e.jsxs(A.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:t*.05},className:"hover:bg-gray-50/50 dark:hover:bg-gray-800/50 transition-colors",children:[e.jsx(E,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[X(a.type),e.jsx("span",{className:"text-sm",children:Q(a.type)})]})}),e.jsx(E,{className:"max-w-md truncate",children:a.message}),e.jsxs(E,{children:[a.displayDuration,"s"]}),e.jsx(E,{children:e.jsx(ee,{variant:a.isActive?"default":"secondary",className:a.isActive?"bg-green-500 hover:bg-green-600":"",children:a.isActive?"Ativa":"Inativa"})}),e.jsx(E,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>Z(a),className:"hover:bg-blue-50 hover:text-blue-600 dark:hover:bg-blue-950",children:e.jsx(ge,{className:"h-4 w-4"})}),e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>$(a.id),className:"hover:bg-red-50 hover:text-red-600 dark:hover:bg-red-950",children:e.jsx(fe,{className:"h-4 w-4"})})]})})]},a.id))})]})})})]})})]})};export{_e as default};
